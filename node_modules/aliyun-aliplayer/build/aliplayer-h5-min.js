/*! aliyun-aliplayer - v2.30.3 - 2025-04-24 10.23.38 */
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Aliplayer=e()}(function(){var define,module,exports;return function i(n,o,a){function s(t,e){if(!o[t]){if(!n[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(l)return l(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=o[t]={exports:{}},n[t][0].call(r.exports,function(e){return s(n[t][1][e]||e)},r,r.exports,i,n,o,a)}return o[t].exports}for(var l="function"==typeof require&&require,e=0;e<a.length;e++)s(a[e]);return s}({1:[function(N,H,e){var i,n,U=Object.defineProperty,j=Object.defineProperties,F=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,a=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s=(e,t)=>{for(var r in t=t||{})B.call(t,r)&&a(e,r,t[r]);if(o)for(var r of o(t))V.call(t,r)&&a(e,r,t[r]);return e},l=(e,t,r)=>(a(e,"symbol"!=typeof t?t+"":t,r),r),c=(Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),{exports:{}}),v={exports:{}};function m(){var e,r,t;return n||(n=1,Date.now=Date.now||function(){return(new Date).getTime()},e=Date.now(),t={noop:r=function(){},warn:(()=>{var e="object"==typeof console?console.warn:r;try{var t={warn:e};t.warn.call(t)}catch(e){return r}return e})(),key:"__bl",selfErrKey:"ARMS_SDK_ERROR",selfErrPage:"ARMSSDK",win:"object"==typeof window&&window.document?window:void 0,regionMap:{cn:"https://arms-retcode.aliyuncs.com/r.png?",sg:"https://arms-retcode-sg.aliyuncs.com/r.png?",sg_2:"https://retcode-sg-lazada.arms.aliyuncs.com/r.png?",daily:"http://arms-retcode-daily.alibaba.net/r.png?",daily_2:"https://arms-retcode-daily.alibaba.net/r.png?",daily_3:"http://arms-retcode-daily.aliyun.test/r.png?",us:"https://retcode-us-west-1.arms.aliyuncs.com/r.png?",tw:"https://arms-retcode.orientalgame.com.tw/r.png?",tw_sg:"https://arms-retcode-sg.orientalgame.com.tw/r.png?",hz_finance:"https://arms-retcode-hz-finance.aliyuncs.com/r.png?"},defaultImgUrl:"https://arms-retcode.aliyuncs.com/r.png?",createObject:function(e){var t;return Object.create?Object.create(e):((t=function(){}).prototype=e,new t)},each:function(e,t){var r=0,i=e.length;if(this.T(e,"Array"))for(;r<i&&!1!==t.call(e[r],e[r],r);r++);else for(r in e)if(!1===t.call(e[r],e[r],r))break;return e},safetyCall:function(e,t,r){if("function"!=typeof e)return r;try{return e.apply(this,t)}catch(e){return r}},T:function(e,t){e=Object.prototype.toString.call(e).substring(8).replace("]","");return t?e===t:e},duration:function(){var t=Date;try{performance&&this.T(performance.now,"Function")&&(t=performance)}catch(e){t=Date}var e=t.now();return function(){return Math.round(t.now()-e)}},filterByRule:function(){var e,t,r,i,n,o=[].slice.call(arguments),a=o.length;return a<2?o[0]:(e=o[a-1],(t=o[0])?e?(i=(r=this).T(e),n=o.slice(0,a-1),"Function"===i?r.safetyCall(e,n,t):"Array"===i?(this.each(e,function(e){n[0]=t=r.filterByRule.apply(r,[].concat(n,e))}),t):"Object"===i?t.replace(e.rule,e.target||""):t.replace(e,"")):t:"")},ignoreByRule:function(e,t){if(!e||!t)return!1;if((this.isString(t)||t.source||"Function"===this.T(t))&&(t=[t]),!this.isArray(t))return this.warn("[arms] invalid rules of ignore config, (list of) String/RegExp/Funcitons are available"),!1;for(var r,i=[],n=0,o=t.length;n<o;n++)if(r=t[n],this.isString(r))i.push(r.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"));else if(r&&r.source)i.push(r.source);else if(r&&"Function"===this.T(r)&&!0===this.safetyCall(r,[e],!1))return!0;var a=new RegExp(i.join("|"),"i");return!!(i.length&&a.test&&a.test(e))},J:function(e){if(!e||"string"!=typeof e)return e;var t=null;try{t=JSON.parse(e)}catch(e){}return t},pick:function(e){return 1===e||1===Math.ceil(Math.random()*e)},verifyConfig:function(e){var t,r;return"sample"in e&&(1<=(r=0<(r=(r=t=e.sample)&&/^\d+(\.\d+)?%$/.test(t)?parseInt(100/parseFloat(t)):r)&&r<1?parseInt(1/r):r)&&r<=100?e.sample=r:delete e.sample),e},on:function(r,i,n,o,a){return r.addEventListener?(a=a||!1,r.addEventListener(i,function e(t){o&&r.removeEventListener(i,e,a),n.call(this,t)},a)):r.attachEvent&&r.attachEvent("on"+i,function e(t){o&&r.detachEvent("on"+i,e),n.call(this,t)}),this},off:function(e,t,r){return r&&(e.removeEventListener?e.removeEventListener(t,r):e.detachEvent&&e.detachEvent(t,r)),this},delay:function(e,t){return-1===t?(e(),null):setTimeout(e,t||0)},ext:function(e){for(var t=1,r=arguments.length;t<r;t++){var i,n=arguments[t];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sub:function(e,r){var i={};return this.each(e,function(e,t){-1!==r.indexOf(t)&&(i[t]=e)}),i},uu:function(){for(var e,t,r=20,i=new Array(r),n=Date.now().toString(36).split("");0<r--;)t=(e=36*Math.random()|0).toString(36),i[r]=e%3?t:t.toUpperCase();for(var o=0;o<8;o++)i.splice(3*o+2,0,n[o]);return i.join("")},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},seq:function(){return(e++).toString(36)},decode:function(e){try{e=decodeURIComponent(e)}catch(e){}return e},encode:function(e,t){try{e=t?encodeURIComponent(e).replace(/\(/g,"%28").replace(/\)/g,"%29"):encodeURIComponent(e)}catch(e){}return e},serialize:function(e){var t,r=[];for(t in e=e||{})Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]&&r.push(t+"="+this.encode(e[t],"msg"===t));return r.join("&")},checkAPI:function(e,t){var r;return!(!e||"string"!=typeof e||(!(r=/arms-retcode[\w-]*\.aliyuncs/.test(e))&&t?/(alicdn\.com)|(mmstat\.com)/.test(e):r))},checkAutoError:function(e){return!(!e||!e.message||/failed[\w\s]+fetch/i.test(e.message))},cutUrlSearch:function(e){return e&&"string"==typeof e?e.replace(/^(https?:)?\/\//,"").replace(/\?.*$/,""):""},removeUrlSearch:function(e){return e&&"string"==typeof e?e.replace(/\?.*$/,""):""},createFakeToString:function(e){return function(){return e+"() { [native code] }"}},checkSameOrigin:function(e,t){var r;return!(!t||!e||(r="//"+t.split("/")[2],e!==t&&e.slice(0,t.length+1)!==t+"/"&&e!==r&&e.slice(0,r.length+1)!==r+"/"&&/^(\/\/|http:|https:).*/.test(e)))},getRandIP:function(){for(var e=[],t=0;t<4;t++){var r=Math.floor(256*Math.random());e[t]=(15<r?"":"0")+r.toString(16)}return e.join("").replace(/^0/,"1")},getSortNum:function(e){return e?1e3<=(e+=1)&&e<=9999?e:e<1e3?e+1e3:e%1e4+1e3:1e3},getRandNum:function(e){return!e||"string"!=typeof e||e.length<5?this.getNum(5):e.substring(e.length-5)},getNum:function(e){for(var t=[],r=0;r<e;r++){var i=Math.floor(16*Math.random());t[r]=i.toString(16)}return t.join("")},getCurDomain:function(){return location&&location.hostname||""},getSrcType:function(e,t){var r=location&&location.host||"";if(!r)return"";var i=new URL(e).host;if(i===r)return"self";for(var n=0;n<t.length;n+=1)if(i.includes(t[n]))return"cdn";return"others"},parseFetchHeaders:function(e){if(!e)return{};var t={};try{if("function"==typeof e.keys)for(var r=e.keys(),i=r.next();!i.done;){var n=i.value;t[n]=e.get(n),i=r.next()}else t=e}catch(e){t={}}return t},parseXhrHeaders:function(e){if(!e&&"string"!=typeof e)return{};var t={};try{t=e.split(`\r\n`).reduce(function(e,t){t=t.split(": ");return e[t[0]]=t[1],e},{})}catch(e){t={}}return t},getQuerys:function(e){if(!e)return"";var t,r,i,n={};try{var o=[];if(0<(o=0<=e.indexOf("?")?e.substring(e.indexOf("?")+1,e.length).split("&"):o).length)for(var a in o)r=(t=o[a].split("="))[0],i=t[1],n[r]=i}catch(e){n={}}return n},getURL:function(e){if(!e)return null;var t={},r=e.length,i=e.indexOf("://");if(i<0)return null;t.protocol=e.substring(0,i+1);var n=e.indexOf("#"),o=e.indexOf("?"),r=(n<0&&(n=r),o<0&&(o=n),t.search=e.substring(o,n).substring(0,1e3),e.substring(i+3,o)),n=r.indexOf("/");return n<0&&(n=r.length),t.domain=r.substring(0,n).split(":")[0],t.path=r.substring(n,r.length).substring(0,1e3),t},getResType:function(e,t){if(-1<["script","img","other"].indexOf(e))return e;if(-1<["video"].indexOf(e))return"media";if(-1<["document","iframe"].indexOf(e))return"doc";var t=t?this.getURL(t):null,r=t&&t.path?t.path.lastIndexOf("."):-1,t=(0<r?t.path.substr(r+1):"").toLowerCase();if(t){if(-1<["eot","woff","woff2","ttf"].indexOf(t))return"font";if("css"===t)return"css";if("js"===t)return"script"}return-1<["fetch","xmlhttprequest","beacon"].indexOf(e)?"api":"others"},areInOrder:function(){for(var e=1;e<arguments.length;e+=1)if(arguments[e]<arguments[e-1])return!1;return!0},getFetchSnapshot:function(e,t,r){try{var i=(e&&"string"!=typeof e[0]?e[0].url:e[0])||"",n=(e&&"string"!=typeof e[0]?e[0]:e[1])||{},o="POST"===n.method.toUpperCase()?n.body:this.getQuerys(i),a={originApi:i,method:n.method||"unknown",params:o,response:t||"",reqHeaders:this.parseFetchHeaders(n.headers||null),resHeaders:this.parseFetchHeaders(r)},s=JSON&&JSON.stringify(a)||"{}"}catch(e){s="{}"}return s},getXhrSnapshot:function(e,t,r){if(!e||!t||!r)return{};var i,n;try{var o="";""===r.responseType||"text"===r.responseType?o=r.responseText:"document"===r.responseType&&(o=r.responseXML),i={originApi:e,method:t,params:this.getQuerys(e),response:o,reqHeaders:{},resHeaders:this.parseXhrHeaders("function"==typeof r.getAllResponseHeaders&&r.getAllResponseHeaders()||"")},n=JSON&&JSON.stringify(i)||"{}"}catch(e){n="{}"}return n},isRobot:function(){var e=["nuhk","googlebot/","googlebot-image","yammybot","openbot","slurp","msnbot","ask jeeves/teoma","ia_archiver","baiduspider","bingbot/","adsbot"];if(navigator&&"string"==typeof navigator.userAgent)try{for(var t=navigator.userAgent.toLowerCase(),r=0;r<e.length;r++){var i=e[r];if(0<=t.lastIndexOf(i))return!0}}catch(e){this.warn("[arms] useragent parse error")}return!1},isFunction:function(e){return"function"==typeof e},isPlainObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isString:function(e){return"[object String]"===Object.prototype.toString.call(e)},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},joinRegExp:function(e){for(var t,r=[],i=0,n=e.length;i<n;i++)t=e[i],this.isString(t)?r.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&r.push(t.source);return new RegExp(r.join("|"),"i")},reWriteMethod:function(e,t,r){var i;null!==e&&(i=e[t],e[t]=r(i))},checkSDKError:function(e,t){return!(!e&&!t||!new RegExp(this.selfErrKey,"i").test(e)&&!this.ignoreByRule(t,[/retcode.alicdn.com\/retcode\/bl.js/,/g.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/laz-g-cdn.alicdn.com\/retcode\/cloud-sdk\/bl.js/,/local.taobao.com:8880\/build\/bl/]))},sdkError:function(e){return{msg:e,message:this.selfErrKey}},dealParam:function(e,t,r){var i={};try{i=this.isPlainObject(e)?this.ext({key:e.key||"default",val:e.val||e.value||r},e,{begin:Date.now()}):{key:e||"default",val:t||r,begin:Date.now()}}catch(e){this.warn("[retcode] baseLog error: "+e)}return i}},i=t),i}var r,u,h,b,S={exports:{}},f={exports:{}};function q(){var d,i,o,p,t,n;return h||(h=1,d=m(),u||(u=1,n=m(),r=function(e,t,r){"object"==typeof e&&(e=n.serialize(e)),window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?window.navigator.sendBeacon(t+e+(r?"&post_res=":""),r||"&post_res="):n.warn("[arms] navigator.sendBeacon not surported")}),i=r,o="aokcdqn3ly@e629dabd48a9933",p=function(e,t){var r,i,n;if("error"!==t.t||!(r=e.requestQueue[0])||"error"!==r.t||t.msg!==r.msg)return"behavior"===t.t?0<(i=e.requestQueue&&e.requestQueue.length)&&"behavior"===e.requestQueue[i-1].t?(n=t.behavior||[],e.requestQueue[i-1].behavior.concat(n)):e.requestQueue.push(t):e.requestQueue.unshift(t),e.onReady(function(){e.requestTimmer=d.delay(function(){e.clear()},e.requestQueue[0]&&"error"===e.requestQueue[0].t?3e3:-1)}),!0;t.times=r.times+1,e.requestQueue[0]=t},(t=function(e){return this.ver="1.8.36-beta.12",this._conf=d.ext({},t.dftCon),this.sampleCache={},this.requestQueue=[],this.selfQueue=[],this.sdkFlag=!0,this.hash=d.seq(),this.resetPageview(),this.setConfig(e),this.rip=d.getRandIP(),this.record=999,this["EagleEye-TraceID"]=this.getTraceId()["EagleEye-TraceID"],this._common={},this}).dftCon={sample:1,pvSample:1,tag:"",imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",region:null,ignore:{ignoreUrls:[],ignoreApis:[],ignoreErrors:[/^Script error\.?$/],ignoreResErrors:[],ignoreResources:[/\/(bl|wl)(.debug)?.js$/]},release:void 0,environment:"prod",beforeReport:null,parseTraceId:null},t.prototype={constructor:t,onReady:function(e){return e()},getPage:function(){var e=this._conf.page;return d.safetyCall(e,[],e+"")},setPage:function(){},setConfig:function(e){e&&"object"==typeof e&&(d.verifyConfig(e),e=this.setImgUrl(e),this._conf=d.ext({},this._conf,e))},setImgUrl:function(e){var t=e.region,r=e.imgUrl;return t?(t=d.regionMap[t],e.imgUrl=t||d.defaultImgUrl):r&&(e.imgUrl=r),e},checkImgUrl:function(){return!0},sendRequest:function(){},sendBeacon:function(e,t,r){i(e,t||this.getConfig("imgUrl"),r)},postData:function(){},commonInfo:function(){return{}},setCommonInfo:function(e){e&&"object"==typeof e&&(this._common=d.ext({},this._common,e))},resetPageview:function(){this.pageview=d.uu(),this.sBegin=Date.now()},getUsername:function(){if(!this.username){var e=this._conf,e=e&&e.setUsername;if("function"==typeof e)try{var t=e();"string"==typeof t&&(t=t.substr(0,40),this.username=t)}catch(e){d.warn("[arms] setUsername fail",e)}}return this.username},getTraceId:function(){var e=this.rip,t=Date.now(),r=d.getSortNum(this.record),e=e+t+r+d.getRandNum(this._conf.pid);return this["EagleEye-TraceID"]=e,this.record=r,{"EagleEye-TraceID":e}},getUberTraceId:function(e){var t=this.rip,r=Date.now(),i=d.getSortNum(this.record),n=d.getRandNum(this._conf.pid),t=t+r+i+d.getNum(2)+n,r=t.substring(0,16);return e=e?"1":"0","0"===t[0]&&(t[0]="1"),"0"===t[16]&&(t[16]="1"),{"uber-trace-id":t+":"+r+":0:"+e,traceId:t}},getB3TraceId:function(e){var t=this.rip,r=Date.now(),i=d.getSortNum(this.record),n=d.getRandNum(this._conf.pid),t=t+r+i+d.getNum(2)+n,r=t.substring(0,16);return e=e?"1":"0","0"===t[0]&&(t[0]="1"),"0"===t[16]&&(t[16]="1"),{b3:t+"-"+r+"-"+e+"-0","X-B3-TraceId":t,"X-B3-ParentSpanId":"0","X-B3-SpanId":r,"X-B3-Sampled":e}},getPageviewId:function(){return{"EagleEye-SessionID":this.pageview}},getConfig:function(e){return e?this._conf[e]:d.ext({},this._conf)},sampling:function(e){return 1===e||("boolean"==typeof this.sampleCache[e]||(this.sampleCache[e]=d.pick(e)),this.sampleCache[e])},clear:function(e){var t;clearTimeout(this.requestTimmer),this.requestTimmer=null;for(var r,i=this._conf&&"function"==typeof this._conf.sendRequest;t=this.requestQueue.pop();)"res"===t.t?this.postData(t,"res"):"error"===t.t?this.postData(t,"err"):"api"===t.t?this.postData(t,"apiSnapshot"):"behavior"===t.t?this.postData(t,"behavior"):"health"===t.t&&!i&&window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?this.sendBeacon(t):"resource"===t.t&&!i&&window&&window.navigator&&"function"==typeof window.navigator.sendBeacon?(r=JSON.stringify({resource:t.resource}),delete t.resource,this.sendBeacon(t,null,r)):"resource"===t.t?this.postData(t,"resource"):this.sendRequest(t);return e&&this.clearSelf(),this},clearSelf:function(){var e;for(clearTimeout(this.Timmer),this.Timmer=null;e=this.selfQueue.pop();)this.postData(e,"err");return this},_lg:function(e,t,r,i){var n=this,o=n._conf,a=n.getPage(),s=o.ignore||{},l=s.ignoreErrors,c=s.ignoreResErrors,u=s.ignoreUrls,s=s.ignoreApis;if(n._isRobot||d.ignoreByRule(a,u)||d.ignoreByRule(d.decode(a),u)||"error"===e&&(d.ignoreByRule(t.msg,l)||d.ignoreByRule(d.decode(t.msg),l))||"resourceError"===e&&(d.ignoreByRule(t.src,c)||d.ignoreByRule(d.decode(t.src),c))||"api"===e&&(d.ignoreByRule(t.api,s)||d.ignoreByRule(d.decode(t.api),s))||!n.checkImgUrl(o.imgUrl)||!t||o.disabled||!o.pid||0===i)return n;u=t.dl;if(delete t.dl,t=d.ext({t:e,times:1,page:a,tag:o.tag||"",release:o.release||"",environment:o.environment,begin:Date.now(),c1:o.c1,c2:o.c2,c3:o.c3},t,n.commonInfo(),n._common,{pid:o.pid,_v:n.ver,pv_id:n.pageview,username:n.getUsername(),sampling:r||1,dl:u,z:d.seq()}),"Function"===d.T(o.beforeReport))try{if(!(t=o.beforeReport(t)))return n}catch(e){return n}return 1!==i&&r&&!n.sampling(r)?n:p(n,t)},_self:function(e,t,r){var i=this,n=i._conf;if("error"!==e||!i.checkImgUrl(n.imgUrl)||!t||n.disabled||!n.pid||r&&!i.sampling(r))return i;t=d.ext({t:e,times:1,page:d.selfErrPage,tag:n.pid,begin:Date.now()},t,{pid:o,_v:i.ver,sampling:r||1,z:d.seq()});e=i.selfQueue[0];if(e){e.times++;try{e.err&&t.err&&e.err.msg_raw&&t.err.msg_raw&&e.err.msg_raw.split("&").indexOf(t.err.msg_raw)<0&&e.err.msg_raw.length<1e3&&(e.err.msg_raw+="&"+t.err.msg_raw)}catch(e){}}else i.selfQueue.unshift(t),i.onReady(function(){i.sdkFlag&&(i.sdkFlag=!1,i.Timmer=d.delay(function(){i.clearSelf()},1e4))})},custom:function(e,t){var r,i;return e&&"object"==typeof e&&(r=!1,i={begin:Date.now()},d.each(e,function(e,t){return(r=t&&t.length<=20)||d.warn("[retcode] invalid key: "+t),i["x-"+t]=e,r}),r)?this._lg("custom",i,t||1):this}},f.exports=t),f.exports}var T,E={exports:{}};var w,t,d,x={exports:{}};function $(){var g;return d||(d=1,g=m(),t=function(e,d){function p(e,t,r){var i;null!==e&&(i=e[t],e[t]=r(i))}function h(r,e){return function(e){if(e&&e!==o){var t;o=e;try{t=e.target}catch(e){t="<unknown>"}0!==t.length&&(e={type:"ui.".concat(r),data:{message:(e=>{if(!e||1!==e.nodeType)return"";for(var t=e||null,r=[],i=0,n=0,o="";t&&i++<5&&!("html"===(o=(e=>{var t,r,i,n,o=[];if(!e||"string"!=typeof e.tagName)return"";if(o.push(e.tagName.toLowerCase()),"string"==typeof e.id&&o.push("#".concat(e.id)),"string"==typeof(t=e.className))for(r=t.split(/\s+/),s=0;s<r.length;s++)o.push(".".concat(r[s]));for(var a=["type","name","title","alt","data-arms-attr"],s=0;s<a.length;s++)"string"==typeof(n=e.getAttribute(i=a[s]))&&o.push("[".concat(i,'="').concat(n,'"]'));return o.join("")})(t))||1<i&&80<=n+3*r.length+o.length);)r.push(o),n+=o.length,t=t.parentNode;return r.reverse().join(" > ")})(t)},timestamp:Date.now()},"click"===r?f&&f.addBehavior(e):"keypress"===r&&(n||f&&f.addBehavior(e),clearTimeout(n),n=setTimeout(function(){n=void 0},100)))}}}var i=[],f=null,_=d&&d.location&&d.location.href,n=void 0,o=null;g.ext(e.prototype,{addBehavior:function(e){if(this.getConfig("behavior")&&e&&"object"==typeof e){var t={},r=e.data||{};if(e.type)t=r;else{if("string"!=typeof r.name||"string"!=typeof r.message)return;t.name=r.name.substr(0,20),t.message=r.message.substr(0,200)}t.message&&(t.message=g.encode(t.message));r={type:e.type||"custom",data:t||{},timestamp:e.timestamp||Date.now(),page:e.page||d&&d.location&&d.location.pathname};return i.push(r),i=i.slice(-100)}},getBehavior:function(){return i||[]},setBehavior:function(e){return i=e?e:i},reportBehavior:function(e){var t=this;t.getConfig("behavior")&&(t.sendBhTimer&&(clearTimeout(t.sendBhTimer),t.sendBhTimer=void 0),t.sendBhTimer=setTimeout(function(){i&&0<i.length&&(t.behavior(i),i=[],t.sendBhTimer=void 0,e)&&"function"==typeof e&&e()},0))},initBehavior:function(){if(!this.hasInitBehavior&&!f){try{document&&document.referrer&&document.location&&(c=document.referrer,u=document.location.href,""!==c)&&(_=u,f)&&f.addBehavior({type:"navigation",data:{from:c,to:u}}),d&&d.document&&d.document.addEventListener&&(d.document.addEventListener("click",h("click"),!1),d.document.addEventListener("keypress",h("keypress"),!1)),s=(s=d&&d.chrome)&&s.app&&s.app.runtime,l="history"in d&&!!d.history.pushState&&!!d.history.replaceState,!s&&l&&(o=function(e,t){f&&f.addBehavior({type:"navigation",data:{from:e,to:t}}),_=t},a=d.onpopstate,d.onpopstate=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=d.location.href;if(o(_,i),a)return a.apply(this,t)},p(d.history,"pushState",s=function(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=2<t.length?t[2]:void 0;return i&&o(_,String(i)),n.apply(this,t)}}),p(d.history,"replaceState",s));var e=this.getConfig("enableConsole");if(e){var t=e;if(d&&d.console){var r=["debug","info","warn","log","error","assert"];g.isArray(t)&&(r=t);for(var i=0;i<r.length;i++){var n=r[i];n&&g.isString(n)&&d.console[n]&&"function"==typeof d.console[n]&&p(d.console,n,function(o){var a=n;return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(f&&f.addBehavior({type:"console",data:{level:a,message:t}}),"error"===a)for(var i=0;i<t.length;i++){var n=t[i];n&&n.message&&n.stack&&f&&f.errorHandler(new ErrorEvent("error",{error:n,message:n.message}))}o&&Function.prototype.apply.call(o,d.console,t)}})}}}}catch(e){g.warn("[arms] error in initBehavior",e)}(f=this).hasInitBehavior=!0}var o,a,s,l,c,u;return this}})}),t}var p,k,P,C,R,_,g,y,L,I,W,X,G,K,z,Y,Q,J={};function D(){return p||(p=1,J.TIMING_KEYS=["startTime","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","","domInteractive","","domContentLoadedEventEnd","","loadEventStart","","msFirstPaint","secureConnectionStart","redirectStart","redirectEnd"]),J}function Z(){return g||(g=1,_=function(e,i,s){function t(e,t,r,i,n){if(void 0===t){var o;if(!v[e]){a=new RegExp(e+"=([^;]+)");try{o=a.exec(s.cookie)}catch(e){return u.warn("[retcode] can not get cookie:",e),null}o&&(v[e]=o[1])}return v[e]}var a=e+"="+t;a+="; path=/",r&&(a+="; max-age="+r);try{return s.cookie=a,!!s.cookie}catch(e){return u.warn("[retcode] can not set cookie: ",e),!1}}function n(e){return(e=e._conf.uid||t("_nk_")||t("_bl_uid"))||(e=u.uu(),t("_bl_uid",e,15552e3))?e:null}var l,c,o,a,u=m(),d=(P||(P=1,o=m(),a=D().TIMING_KEYS,k=function(){var i,n,e,t=o.win||{},r=t.performance;return r&&"object"==typeof r&&"function"==typeof r.getEntriesByType?(i={},n=r.timing||{},e=r.getEntriesByType("resource")||[],i.begin=n[a[1]]||Date.now(),"function"==typeof t.PerformanceNavigationTiming&&(t=r.getEntriesByType("navigation")[0])&&(n=t),o.each({dom:[10,8],load:[14,1]},function(e,t){var r=n[a[e[1]]],e=n[a[e[0]]];0<r&&0<e&&0<=(e=Math.round(e-r))&&e<6e5&&(i[t]=e)}),i.res=JSON.stringify(e),i):null}),k),p=(R||(R=1,l=m(),c=D().TIMING_KEYS,C=function(){var i,n,e,o,t,r=l.win||{},a=r.performance;return a&&"object"==typeof a?(i={},n=a.timing||{},e=Date.now(),o=1,"function"==typeof r.PerformanceNavigationTiming&&(t=a.getEntriesByType("navigation")[0])&&(n=t,o=2),l.each({dns:[3,2],tcp:[5,4],ssl:[5,17],ttfb:[7,6],trans:[8,7],dom:[10,8],res:[14,12],firstbyte:[7,2],fpt:[8,1],tti:[10,1],ready:[12,1],load:[14,1]},function(e,t){var r=n[c[e[1]]],e=n[c[e[0]]];(2===o||0<r&&0<e)&&0<=(e=Math.round(e-r))&&e<6e5&&(i[t]=e)}),t=r.navigator.connection,r=a.navigation||{},i.ct=t?t.effectiveType||t.type:"",(a=999<(a=t&&(t.downlink||t.downlinkMax||t.bandwidth)||null)?999:a)&&(i.bandwidth=a),i.navtype=1===r.type?"Reload":"Other",1===o&&0<n[c[16]]&&0<n[c[1]]&&0<=(t=n[c[16]]-n[c[1]])&&t<36e5&&(i.fpt=t),1===o&&0<n[c[1]]?i.begin=n[c[1]]:i.begin=2===o&&0<i.load?e-i.load:e,i):null}),C),r=null,h=s.documentElement,f=i.innerWidth||h.clientWidth||s.body.clientWidth,_=i.innerHeight||h.clientHeight||s.body.clientHeight,g=i.navigator.connection,y={sr:screen.width+"x"+screen.height,vp:f+"x"+_,ct:g?g.effectiveType||g.type:""},v={};return u.ext(e.prototype,{activeErrHandler:function(e){return r&&!e||(r=this),this},errorHandler:function(e){if(e){var t,r=e.type;"error"===r?!(t=e.target||e.srcElement)||!t.tagName||e.message||e.filename||e.lineno||e.colno?this.error(e.error||{message:e.message},e):this.resourceErrorHandler(e):"unhandledrejection"===r&&u.T(e.reason,"Error")&&u.checkAutoError(e.reason)&&this.error(e.reason);try{this.getConfig("behavior")&&this.reportBehavior&&this.reportBehavior()}catch(e){}}return this},resourceErrorHandler:function(e){var t=this,r=e.target||e.srcElement;try{var i=t.getSrc(r),n="string"==typeof r.tagName?r.tagName.toLowerCase():"",o=t.getXPath(r,5),a=u.getURL(i),s={src:i&&i.substring(0,1e3),node_name:n,xpath:o,res_type:u.getResType(n,i),res_name:a.path,domain:a.domain};return t._conf.enableResource&&t.fixResourceStatus&&e.timeStamp&&t.fixResourceStatus({src:i,node_name:n,res_type:u.getResType(n,i),timeStamp:e.timeStamp,domain:a.domain}),t._lg("resourceError",s),t}catch(e){return u.warn("[ARMS] resourceErrorHandler error :",e),t}},getSrc:function(e){var t,r,i=e.src||e.href;try{i||(t="object"===("string"==typeof e.tagName?e.tagName.toLowerCase():""),r=e.getAttribute("classid")&&"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"===e.getAttribute("classid").toLowerCase()||"application/x-shockwave-flash"===e.getAttribute("type"),i=(i=t&&r?e.getAttribute("data")||e.getAttribute("codebase"):i)||e.outerHTML||e.innerHTML)}catch(e){i=""}return i},getXPath:function(e,t){var r=e.id?"#"+e.id:"",i="string"==typeof e.className?"."+e.className.split(" ").join("."):"",r=("string"==typeof e.tagName?e.tagName.toLowerCase():"")+r+i;return e.parentNode&&e.parentNode.tagName&&t-1!=0?this.getXPath(e.parentNode,t-1)+" > "+r:r},sendPerformance:function(t){var r=this;r.onReady(function(){var e=p();e&&e.load&&0<e.load&&(e.page=r.getPage(!0),(e=t?u.ext(e,t):e).autoSend=!0,r.performance(e))})},sendResources:function(t){var r=this;r.onReady(function(){var e=d();e&&e.load&&0<e.load&&(e.load&&e.load<=2e3||e.load&&e.load<=8e3&&.05<Math.random()||(e.page=r.getPage(!0),e.dl=location.href,t&&(e=u.ext(e,t)),r._lg("res",e,r.getConfig("sample"))))})},sendPV:function(){var r=this;r.onReady(function(){t=n(r),e=i.devicePixelRatio||1;var e,t={uid:t,dt:s.title,dl:location.href,dr:s.referrer,dpr:e.toFixed(2),de:(s.characterSet||s.defaultCharset||"").toLowerCase(),ul:h.lang,begin:Date.now()};t.uid&&r._lg("pv",t,r.getConfig("pvSample"))})},commonInfo:function(){return y.uid=n(this),y.sid=(e=>{if(e.session)return e.session;var t;try{if("object"==typeof window&&"object"==typeof sessionStorage&&"function"==typeof sessionStorage.getItem)return"string"==typeof(t=sessionStorage.getItem("_bl_sid"))?e.session=t:(t=u.uu(),e.session=t,"function"==typeof sessionStorage.setItem&&sessionStorage.setItem("_bl_sid",t)),t}catch(e){u.warn("[ARMS] getSid error :",e)}return e.session=t=u.uu(),t})(this),y},handleUnload:function(e){var t=Date.now();if(t-this._lastUnload<200)return this;this._lastUnload=t,this.sendHealth(e),this.speedCache&&(this._lg("speed",this.speedCache),this.speedCache=null,clearTimeout(this.speedTimmer)),this._conf&&this._conf.enableResource&&this.resourceComboReport(),this.clear(!0)},bindHashChange:function(e){var r=this;if(!e^r.hashChangeHandler)return r;e?(r.hackHistoryState(),r.hashChangeHandler=function(e){var t=r._conf.parseHash(location.hash);t&&r.setPage(t,!1!==e)},r.stateChangeHandler=function(e){e=r._conf.parseHash(e.detail);e&&r.setPage(e)},u.on(i,"hashchange",r.hashChangeHandler),u.on(i,"historystatechange",r.stateChangeHandler),r.hashChangeHandler(!1)):(u.off(i,"hashchange",r.hashChangeHandler),u.off(i,"historystatechange",r.stateChangeHandler),r.hashChangeHandler=null,r.stateChangeHandler=null)},initHandler:function(){var e,t=this;return t.hasInitHandler||(e=t._conf,u.on(i,"beforeunload",function(){t.handleUnload(0)}),t.bindHashChange(e.enableSPA),t.activeErrHandler(!1),t.hasInitHandler=!0),t}}),u.on(i,"error",function(e){r&&r.errorHandler(e)},!1,!0).on(i,"unhandledrejection",function(e){r&&r.errorHandler(e)}),e}),_}function ee(){var u,d;return L||(L=1,u=m(),d=500,y=function(e,r,n){var l=r.innerHeight||0,a=[],s=null,c=0;u.ext(e.prototype,{initFmpObserver:function(e){var i=this;if(!i._conf||!i._conf.useFmp)return null;if(!r.MutationObserver)return u.warn("[retcode] first meaningful paint can not be retrieved"),i.sendPerformance(),null;u.on(r,"beforeunload",function(){i.endObserving(0,!0)});var t=r.MutationObserver;return(s=new t(function(){var e,t,r;e=i._startTime,e=Date.now()-e,(r=n.querySelector("body"))?(t=0,t+=function e(t,r,i){var n=0,o=t.tagName;if("SCRIPT"!==o&&"STYLE"!==o&&"META"!==o&&"HEAD"!==o){if(0<(o=t.children?t.children.length:0))for(var a=t.children,s=o-1;0<=s;s--)n+=e(a[s],r+1,0<n);if(n<=0&&!i&&!(t.getBoundingClientRect&&t.getBoundingClientRect().top<l))return 0;n+=1+.5*r}return n}(r,1,!1),a.push({score:t,t:e})):a.push({score:0,t:e})})).observe(document,{childList:!0,subtree:!0}),c=1,i.onReady(function(){i.endObserving(e)}),s},endObserving:function(e,t){var r=this;if(s&&c)if(r.fmpTimmer&&(clearTimeout(r.fmpTimmer),r.fmpTimmer=null),t||!((e,t)=>(e=Date.now()-e,!(t<e||e-(a&&a.length&&a[a.length-1].t||0)>2*d)))(r._startTime,e)){s.disconnect(),c=0,a=function e(t){for(var r=1;r<t.length;r++)if(t[r].score<t[r-1].score)return t.splice(r,1),e(t);return t}(a);for(var i,n=null,o=1;o<a.length;o++)a[o].t>=a[o-1].t&&(i=a[o].score-a[o-1].score,!n||n.rate<=i)&&(n={t:a[o].t,rate:i});n&&0<n.t&&n.t<36e5?r.sendPerformance({fmp:n.t}):r.sendPerformance()}else r.fmpTimmer=u.delay(function(){r.endObserving(e)},d)}})}),y}function te(){return W||(W=1,I=function(e,k){function P(e,t,r,i,n,o,a,s,l,c,u,d,p){n=C.J(n)||null,(t=C.safetyCall(t,[n,i],null))&&(n=t.code||o,i=!("success"in t)||t.success,e.api(r,i,a,n,t.msg,s,l,c,i?{}:u,L,d,p))}var C=m(),R=null,L=C.getCurDomain(),i="fetch",n="__oFetch_",o="__oXMLHttpRequest_",a="XMLHttpRequest";return C.ext(e.prototype,{removeHook:function(e,t){return R&&(t||this===R)&&(k[n]&&(k[i]=k[n],delete k[n]),k[o]&&(k[a]=k[o],delete k[o]),R=null),this},addHook:function(e){return!e&&R||(R||("function"==typeof k[i]&&(x=k[i],k[n]=x,k[i]=function(e,t){var a=1===arguments.length?[e]:Array.apply(null,arguments),s=R;if(!s||!s.api||t&&("HEAD"===t.method||"no-cors"===t.mode))return x.apply(k,a);t=t||{};var l=Date.now(),c=s._conf,u=C.duration(),d=p=(e&&"string"!=typeof e?e.url:e)||"",p=C.cutUrlSearch(p),r=(c.ignore||{}).ignoreApis,h=c.parseTraceId;if(!C.checkAPI(p,!0)||C.ignoreByRule(p,r))return x.apply(k,a);p=C.filterByRule(p,d,c.ignoreApiPath||c.apiHelper);var r=c.enableLinkTrace,f="",_="",i=s.getConfig("pid"),g=null,n=s.getConfig("sample"),o=s.getConfig("linkType"),y=1;if(n&&!s.sampling(n)&&(y=0),r){n="";try{n=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(e){n=""}var v,r=C.checkSameOrigin(d,n);if(s.getConfig("enableApiCors")||r)if(e&&"string"!=typeof e)try{if(a[0].headers&&"function"==typeof a[0].headers.get&&"function"==typeof a[0].headers.append)switch(o){case"arms":var m=a[0].headers.get("EagleEye-TraceID"),b=a[0].headers.get("EagleEye-SessionID"),S=a[0].headers.get("EagleEye-pAppName");m?f=m:(f=s.getTraceId()["EagleEye-TraceID"],a[0].headers.append("EagleEye-TraceID",f)),b?_=b:(_=s.getPageviewId()["EagleEye-SessionID"],a[0].headers.append("EagleEye-SessionID",_)),S||a[0].headers.append("EagleEye-pAppName",i);break;case"b3":var T,E=a[0].headers.get("X-B3-TraceId"),f=E||(T=s.getB3TraceId(y),a[0].headers.append("X-B3-TraceId",T["X-B3-TraceId"]),a[0].headers.append("X-B3-ParentSpanId",T["X-B3-ParentSpanId"]),a[0].headers.append("X-B3-SpanId",T["X-B3-SpanId"]),a[0].headers.append("X-B3-Sampled",T["X-B3-Sampled"]),a[0].headers.append("X-Request-ID",C.guid()),T["X-B3-TraceId"]),_=s.pageview;break;default:var w=a[0].headers.get("uber-trace-id");f=w?w.split(":")[0]:(w=s.getUberTraceId(y),a[0].headers.append("uber-trace-id",w["uber-trace-id"]),w.traceId),_=s.pageview}}catch(e){C.warn(`[retcode] fetch failed to set header, exception is :\n`+e)}else switch(t.headers=t.headers||{},o){case"arms":t.headers["EagleEye-TraceID"]?f=t.headers["EagleEye-TraceID"]:(f=s.getTraceId()["EagleEye-TraceID"],t.headers["EagleEye-TraceID"]=f),t.headers["EagleEye-SessionID"]?_=t.headers["EagleEye-SessionID"]:(_=s.getPageviewId()["EagleEye-SessionID"],t.headers["EagleEye-SessionID"]=_),t.headers["EagleEye-pAppName"]||(t.headers["EagleEye-pAppName"]=i);break;case"b3":f=t.headers["X-B3-TraceId"]||(v=s.getB3TraceId(y),t.headers["X-B3-TraceId"]=v["X-B3-TraceId"],t.headers["X-B3-ParentSpanId"]=v["X-B3-ParentSpanId"],t.headers["X-B3-SpanId"]=v["X-B3-SpanId"],t.headers["X-B3-Sampled"]=v["X-B3-Sampled"],t.headers["X-Request-ID"]=C.guid(),v["X-B3-TraceId"]),_=s.getPageviewId()["EagleEye-SessionID"];break;default:f=t.headers["uber-trace-id"]?t.headers["uber-trace-id"].split(":")[0]:(v=s.getUberTraceId(y),t.headers["uber-trace-id"]=v["uber-trace-id"],v.traceId),_=s.getPageviewId()["EagleEye-SessionID"]}}return x.apply(k,a).then(function(t){if(!s||!s.api)return t;try{if(t&&"function"==typeof t.clone){var r=t.clone(),i=r.headers;if(i&&"function"==typeof i.get){var e,n=i.get("content-type");if(n&&!/(text)|(json)/.test(n))return t;f||"object"==typeof(e=C.parseFetchHeaders(i))&&e["eagleeye-traceid"]&&(f=e["eagleeye-traceid"],g="response")}var o=u();r.text().then(function(e){!f&&C.isFunction(h)&&(t=h(r,e))&&C.isString(t)&&(f=t);var t=C.getFetchSnapshot(a,e,i);r.ok?P(s,c.parseResponse,p,d,e,r.status||200,o,l,f,_,t,g,y):(s.api(p,!1,o,r.status||404,r.statusText,l,f,_,t,L,g,y),c.enableResource&&R.fixResourceStatus&&R.fixResourceStatus({src:r.url,res_type:"api"}))})}return t}catch(e){return C.warn("[ARMS] fetch response error :",e),t}}).catch(function(e){var t;throw s&&s.api&&(t=u(),s.api(p,!1,t,e.name||"Error",e.message,l,f,_,{},L),c.enableResource)&&R.fixResourceStatus&&R.fixResourceStatus({src:d,res_type:"api"}),e})},k[i].toString=C.createFakeToString(i)),"function"==typeof k[a]&&(r=k[a],k[o]=r,(t=function(e){var n,o,a,s,t,i,l,c,u,d,p,h,f,_,g,y,v,m=new r(e),b=R;return b&&b.api&&m.addEventListener&&(t=m.send,i=m.open,l=m.setRequestHeader,c=b._conf,u=(c.ignore||{}).ignoreApis,d=c.parseTraceId,p=b.getConfig("enableLinkTrace"),_=f=h="",g=null,e=b.getConfig("sample"),y=b.getConfig("linkType"),v=1,e&&!b.sampling(e)&&(v=0),m.open=function(e,t){S=e;e=1===arguments.length?[e]:Array.apply(null,arguments),i.apply(m,e),s=t||"",a=C.cutUrlSearch(s),e=!C.checkAPI(a,!0)||C.ignoreByRule(a,u);if(a=a?C.filterByRule(a,s,c.ignoreApiPath||c.apiHelper):"",!e&&p){t="";try{t=location.origin||location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}catch(e){t=""}e=C.checkSameOrigin(s,t);if((b.getConfig("enableApiCors")||e)&&l&&"function"==typeof l)switch(y){case"arms":h=b.getTraceId()["EagleEye-TraceID"],l.apply(m,["EagleEye-TraceID",h]),f=b.getPageviewId()["EagleEye-SessionID"],l.apply(m,["EagleEye-SessionID",f]),_=b.getConfig("pid"),l.apply(m,["EagleEye-pAppName",_]);break;case"b3":var r=b.getB3TraceId(v);l.apply(m,["X-B3-TraceId",r["X-B3-TraceId"]]),l.apply(m,["X-B3-ParentSpanId",r["X-B3-ParentSpanId"]]),l.apply(m,["X-B3-SpanId",r["X-B3-SpanId"]]),l.apply(m,["X-B3-Sampled",r["X-B3-Sampled"]]),l.apply(m,["X-Request-ID",C.guid()]),h=r["X-B3-TraceId"],f=b.getPageviewId()["EagleEye-SessionID"];break;default:r=b.getUberTraceId(v);l.apply(m,["uber-trace-id",r["uber-trace-id"]]),h=r.traceId,f=b.getPageviewId()["EagleEye-SessionID"]}}},m.send=function(){n=Date.now(),o=C.duration();var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.apply(m,e)},C.on(m,"readystatechange",function(){if(a&&4===m.readyState){var e=o(),t=C.getXhrSnapshot(s,S,m);if(h||"object"==typeof(r=C.parseXhrHeaders("function"==typeof m.getAllResponseHeaders&&m.getAllResponseHeaders()||""))&&r["eagleeye-traceid"]&&(h=r["eagleeye-traceid"],g="response"),!h&&C.isFunction(d)&&(r=d(m))&&C.isString(r)&&(h=r),200<=m.status&&m.status<=299){var r=m.status||200;if("function"==typeof m.getResponseHeader){var i=m.getResponseHeader("Content-Type");if(i&&!/(text)|(json)/.test(i))return}m.responseType&&"text"!==m.responseType?b.api(a,!0,e,r,"",n,h,f,{},L,g,v):P(b,c.parseResponse,a,s,m.responseText,r,e,n,h,f,t,g,v)}else b.api(a,!1,e,m.status||"FAILED",m.statusText,n,h,f,t,L,g,v),c.enableResource&&R.fixResourceStatus&&R.fixResourceStatus({src:m.responseURL||s,res_type:"api"})}})),m}).prototype=r.prototype,C.each(Object.keys(r),function(e){t[e]=r[e]}),k[a]=t,k[a].toString=C.createFakeToString(a))),R=this),this;var S,r,t,x},initHook:function(){return this.hasInitHook||(this.getConfig("disableHook")||this.addHook(),this.hasInitHook=!0),this}}),e}),I}function re(){return G||(G=1,X=function(e,i){function p(e,t){var r;i.CustomEvent?r=new CustomEvent(e,{detail:t}):((r=n.createEvent("HTMLEvents")).initEvent(e,!1,!0),r.detail=t),i.dispatchEvent(r)}function t(u){var d=f[u];"function"==typeof d&&(f[u]=function(e,t,r){var e=1===arguments.length?[e]:Array.apply(null,arguments),i=location.href,e=d.apply(f,e);if(r&&"string"==typeof r&&r!==i)try{var n=i.split("#"),o=r.split("#"),a=h.cutUrlSearch(n[0]),s=h.cutUrlSearch(o[0]),l=n[1]&&n[1].replace(/^\/?(.*)/,"$1"),c=o[1]&&o[1].replace(/^\/?(.*)/,"$1");l!==c?p("historystatechange",c):a!==s&&p("historystatechange",s)}catch(e){h.warn("[retcode] error in "+u+": "+e)}return e},f[u].toString=h.createFakeToString(u))}var h=m(),f=i.history||{},n=i.document;h.ext(e.prototype,{hackHistoryState:function(){return this.hasHackedHistoryState||(t("pushState"),t("replaceState"),this.hasHackedHistoryState=!0),this}})}),X}function ie(){var g,y;return z||(z=1,g=m(),y=D().TIMING_KEYS,K=function(e,_){var l="_resource-"+Date.now(),c="_resource_error-"+Date.now();g.ext(e.prototype,{initResource:function(){var e,t=this,r=_.performance,i=_.PerformanceObserver;return t[c]||(t[c]=new WeakMap),r&&i&&"object"==typeof r&&"function"==typeof r.getEntriesByType?(e=r.getEntriesByType("resource")||[],setTimeout(function(){t.setResource(e)},10),new i(function(e){setTimeout(function(){t.setResource(e.getEntries())},10)}).observe({entryTypes:["resource"]}),this.onReady(function(){setTimeout(t.resourceComboReport.bind(t),5e3)}),t):null},setResource:function(e){var t=this._conf,r=this[c];if(g.isArray(e)&&e.length){this[l]||(this[l]={});for(var i=this[l],n=0,o=e.length;n<o;n+=1){var a,s=e[n];g.checkAPI(s.name,!1)&&(s=((e,t,r)=>{if(e instanceof _.PerformanceResourceTiming&&e.initiatorType){var i,n,o,a,s,l,c,u,d,p=g.getResType(e.initiatorType,e.name),h=t.resourceTypes||[],f=(t.ignore||{}).ignoreResources;if(p&&h.includes(p)&&!g.ignoreByRule(e.name,f)&&!g.ignoreByRule(g.decode(e.name),f))return h=e[y[0]],f=e[y[1]],i=e[y[2]],n=e[y[3]],o=e[y[4]],a=e[y[5]],s=e[y[6]],l=e[y[7]],c=e[y[8]],u=e[y[18]],d=e[y[19]],(r.has(e)||g.areInOrder(h,f,i,n,o,a,s,l,c)&&!(l<h))&&g.areInOrder(h,u=u<h?h:u,d=d<h?f:d,f)?{domain:g.getURL(e.name).domain,res_type:p,src_type:g.getSrcType(e.name,t.cdnHostList),success:1,size:Math.round(e.decodedBodySize),duration:Math.round(e.duration),timeStamp:e.responseEnd,timing:e}:void 0}})(s,t,r))&&((a=s.res_type+"-"+s.domain)in i||(i[a]=[]),i[a].push(s))}return this}},fixResourceStatus:function(e){var t,r,i=_.performance;return i&&"function"==typeof i.getEntriesByName?(t=this[c],e.src&&g.checkAPI(e.src,!1)&&(r=e.timeStamp||i.now(),i=i.getEntriesByName(e.src,"resource"),g.each(i,function(e){t.has(e)||r-e.responseEnd<100&&t.set(e,{success:0})})),this):null},resourceComboReport:function(){var t,e,r=this[l]||{},a=this._conf.resourceSlow||2e3,s=this[c],i=(this[l]={},Object.keys(r));0!==i.length&&(t=[],g.each(i,function(e){var e=r[e],o={domain:"",res_type:"",src_type:"",size:0,duration:0,count:0,err_count:0,err_duration:0,slow_count:0,slow_duration:0,timings:[]};g.each(e,function(e){var t=e.timing||{},r=s.get(e.timing),r=r?r.success:1,i=e.duration>a?1:0;o.domain=e.domain,o.res_type=e.res_type,o.src_type=e.src_type,o.count+=1,o.duration+=e.duration,o.size+=e.size,r||(o.err_count+=1,o.err_duration+=e.duration),i&&(o.slow_count+=1,o.slow_duration+=e.duration);try{var n=JSON.parse(JSON.stringify(t));n.success=r,n.resourceSlow=a,n.isSlow=i,o.timings.push(n)}catch(e){}}),o.count&&(o.size=Math.round(o.size/o.count),o.duration=Math.round(o.duration/o.count)),o.slow_count&&(o.slow_duration=Math.round(o.slow_duration/o.slow_count)),o.err_count&&(o.err_duration=Math.round(o.err_duration/o.err_count)),20<o.timings.length&&(o.timings.sort(function(e,t){return t.duration-e.duration}),o.timings.length=20),o.timings=encodeURIComponent(JSON.stringify(o.timings)),t.push(o)}),i={_combo:1,resource:JSON.stringify(t)},e=_.navigator.connection,i.ct=e?e.effectiveType||e.type:"",(e=999<(e=e&&(e.downlink||e.downlinkMax||e.bandwidth)||null)?999:e)&&(i.bandwidth=e),this._lg("resource",i,this.getConfig("sample")))}})}),K}function ne(){var o,t,r,i,n,a,s,e,l,c,u,d,p,g,h,y,f,_;return Y||(Y=1,o=m(),b||(b=1,g=m(),h=q(),y=["api","success","time","code","msg","trace","traceId","begin","pv_id","sid","seq","domain","flag","apiSnapshot","tag","c1","c2","c3"],f=function(e){var t=(e.key||"default").split("::");return 1<t.length?g.ext(e,{group:t[0],key:t[1]}):g.ext(e,{group:"default_group",key:t[0]})},(_=function(e){var t;h.call(this,e);try{t="object"==typeof performance?performance.timing.fetchStart:Date.now()}catch(e){t=Date.now()}return this._startTime=t,this}).prototype=g.createObject(h.prototype),g.ext(h.dftCon,{startTime:null}),g.ext(_.prototype,{constructor:_,_super:h,sum:function(e,t,r){try{var i=g.dealParam(e,t,1);return this._lg("sum",f(i),r)}catch(e){g.warn("[retcode] can not get parseStatData: "+e)}},avg:function(e,t,r){try{var i=g.dealParam(e,t,0);return this._lg("avg",f(i),r)}catch(e){g.warn("[retcode] can not get parseStatData: "+e)}},percent:function(e,t,r,i){try{return this._lg("percent",f({key:e,subkey:t,val:r||0,begin:Date.now()}),i)}catch(e){g.warn("[retcode] can not get parseStatData: "+e)}},msg:function(e,t){if(e&&!(180<e.length))return this.custom({msg:e},t)},error:function(e,t){if(!e)return g.warn("[retcode] invalid param e: "+e),this;1===arguments.length?("string"==typeof e&&(e={message:e},t={}),"object"==typeof e&&(t=e=e.error||e)):("string"==typeof e&&(e={message:e}),"object"!=typeof t&&(t={}));var r,i=e.name||"CustomError",n=e.message||"",o=e.stack||"",a=(t=t||{},"object"==typeof location&&"string"==typeof location.href&&location.href.substring(0,500)||"");if(g.checkSDKError(n,t.filename))return r=e.msg||e.message,g.ignoreByRule(r,d=/^Script error\.?$/)||g.ignoreByRule(g.decode(r),d)?this:(r={msg:g.selfErrKey,err:{msg_raw:g.encode(e.msg||e.message)}},this._self("error",r,1));for(var s={begin:Date.now(),cate:i,msg:n&&n.substring(0,1e3),stack:o&&o.substring(0,1e3),file:g.removeUrlSearch(t.filename||""),line:t.lineno||"",col:t.colno||"",err:{msg_raw:g.encode(n),stack_raw:g.encode(o)},dl:a},l=["tag","c1","c2","c3"],c=0;c<l.length;c++){var u=l[c];t[u]&&(s[u]=t[u])}var d=(this.getConfig("ignore")||{}).ignoreErrors;return g.ignoreByRule(s.msg,d)||g.ignoreByRule(g.decode(s.msg),d)?this:(this.beforeSend&&this.beforeSend("error",s),this._lg("error",s,1))},behavior:function(e){if(e)return e="object"==typeof e&&e.behavior?e:{behavior:e},this.beforeSend&&this.beforeSend("behavior",e),this._lg("behavior",e,1)},api:function(e,t,r,i,n,o,a,s,l,c,u,d,p,h,f,_){if(!e)return g.warn("[retcode] api is null"),this;if(e="string"==typeof e?{api:e,success:t,time:r,code:i,msg:n,begin:o,traceId:a,pv_id:s,apiSnapshot:l,domain:c,flag:d,tag:p,c1:h,c2:f,c3:_}:g.sub(e,y),!g.checkAPI(e.api,!0))return this;e.code=e.code||"";t=e.msg||"";return t="string"==typeof t?t.substring(0,1e3):t,e.msg=t,e.success=e.success?1:0,e.time=+e.time,e.begin=e.begin,e.traceId=e.traceId||"",e.pv_id=e.pv_id||"",e.domain=e.domain||"",e.flag=e.flag,e.dl="object"==typeof location&&"string"==typeof location.href&&location.href.substring(0,500)||"",e.apiSnapshot&&("object"==typeof e.apiSnapshot&&(e.apiSnapshot=JSON.stringify(e.apiSnapshot)),"string"!=typeof e.apiSnapshot&&delete e.apiSnapshot,2e3<e.apiSnapshot.length)&&(e.apiSnapshot=e.apiSnapshot.substring(0,2e3)),u&&(e.traceOrigin=u),!e.api||isNaN(e.time)?(g.warn("[retcode] invalid time or api"),this):(r=(this.getConfig("ignore")||{}).ignoreApis,g.ignoreByRule(e.api,r)||g.ignoreByRule(g.decode(e.api),r)||e.time<0?this:(this.beforeSend&&this.beforeSend("api",e),this._lg("api",e,e.success&&this.getConfig("sample"),e.flag)))},speed:function(e,t,r){var i=this,n=this.getConfig("startTime")||this._startTime;return/^s(\d|1[0])$/.test(e)?(t="number"!=typeof t?Date.now()-n:n<=t?t-n:t,i.speedCache=i.speedCache||{},i.speedCache[e]=t,i.speedCache.begin=n,clearTimeout(i.speedTimmer),i.speedTimmer=setTimeout(function(){r||(i.speedCache.page=i.getPage(!0)),i._lg("speed",i.speedCache),i.speedCache=null},5e3)):g.warn("[retcode] invalid point: "+e),i},performance:function(e){if(e&&"object"==typeof e&&!this.hasSendPerf){var t,r={},i={},n=this.getConfig("autoSendPerf");if(e.autoSend&&n)return i=g.ext(this.perfData||{},e),this.hasSendPerf=!0,this._lg("perf",i,this.getConfig("sample"));if(e.autoSend&&!n)return delete e.autoSend,this.perfData?(i=g.ext(this.perfData||{},e),this.hasSendPerf=!0,this._lg("perf",i,this.getConfig("sample"))):void(this.perfData=e);for(t in e)!/^t([1-9]|1[0])$/.test(t)&&"ctti"!==t&&"cfpt"!==t||(r[t]=e[t]);if(!0===e.autoSend||!n&&this.perfData)return!0!==e.autoSend&&!1===n&&this.perfData?(r=g.ext(this.perfData||{},r),this.hasSendPerf=!0,this._lg("perf",r,this.getConfig("sample"))):void 0;this.perfData=g.ext(this.perfData||{},r)}},resource:function(e,t){if(!e||!g.isPlainObject(e))return g.warn("[arms] invalid param data: "+e),this;var r,i=Object.keys(e),n=["begin","dom","load","res","dl"],o=!1;for(r in n)if(i.indexOf(n[r])<0){o=!0;break}return o?(g.warn("[arms] lack param data: "+e),this):(e={begin:e.begin||Date.now(),dom:e.dom||"",load:e.load||"",res:g.isArray(e.res)?JSON.stringify(e.res):JSON.stringify([]),dl:e.dl||""},this._lg("res",e,t))},event:function(e,t){if("object"==typeof e&&e&&e.key){var r,i={},n=["key","success","time","c1","c2","c3"];for(r in e)-1<n.indexOf(r)&&(i[r]=e[r]);i.success=!1===e.success?0:1,this._lg("event",i,t)}}}),_._super=h,(_._root=h).Reporter=_,S.exports=_),t=S.exports,T||(T=1,u=m(),d="object"==typeof window?window:{},p="function"==typeof(p=d.__oFetch_||d.fetch)?p:void 0,E.exports=function(e,t){var r,i=-1,t=("object"==typeof e&&(i=e.z,e=u.serialize(e)),t+e);if(p)return p(t,{method:"HEAD",mode:"no-cors"}).catch(u.noop);d.document&&d.document.createElement&&((e=d[r="__request_hold_"+i]=new Image).onload=e.onerror=function(){d[r]=void 0},e.src=t)}),r=E.exports,w||(w=1,l=m(),_="object"==typeof window?window:{},c="function"==typeof(c=_.__oXMLHttpRequest_||_.XMLHttpRequest)?c:void 0,x.exports=function(e,t){try{var r=new c;r.open("POST",t,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(e))}catch(e){l.warn(`[retcode] Failed to log, exception is :\n`+e)}}),i=x.exports,n=o.win,a=n.document,s=/^(error|api|speed|sum|avg|percent|custom|msg|setPage|setConfig|behavior|performance)$/,(e=function(e){var r=this;return t.call(r,e),r._initialPage=e.page&&o.safetyCall(e.page,[],e.page+"")||null,r._isRobot=o.isRobot(),r._health={errcount:0,apisucc:0,apifail:0},!(r.beforeSend=function(e,t){"error"===e?r._health.errcount++:"api"===e&&r._health[t.success?"apisucc":"apifail"]++})!==e.enableInstanceAutoSend&&(r.initHandler(),r.initHook(),r.initFmpObserver(1e4),r._conf&&r._conf.behavior&&"function"==typeof r.initBehavior&&r.initBehavior(),r._conf)&&r._conf.enableResource&&"function"==typeof r.initResource&&r.initResource(),Object.defineProperty&&n.addEventListener&&Object.defineProperty(r,"pipe",{set:r.sendPipe}),r}).prototype=o.createObject(t.prototype),o.ext(t._root.dftCon,{uid:null,setUsername:null,ignoreUrlPath:null,ignoreApiPath:null,urlHelper:[{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},/\/$/],resourceHelper:[],apiHelper:{rule:/\/([a-z\-_]+)?\d{2,20}/g,target:"/$1**"},ignoreUrlCase:!0,imgUrl:"https://arms-retcode.aliyuncs.com/r.png?",cdnHostList:[],resourceTypes:["css","script","img","font"],resourceSlow:2e3,disableHook:!1,autoSendPv:!0,autoSendPerf:!0,enableSPA:!1,enableLinkTrace:!1,linkType:"arms",enableApiCors:!1,sendResource:!0,behavior:!0,enableConsole:!1,parseHash:function(e){return(e?o.cutUrlSearch(e.replace(/^#\/?/,"")):"")||"[index]"},parseResponse:function(e){var t;return e&&"object"==typeof e?(t=e.code,"object"==typeof(e=e.msg||e.message||e.subMsg||e.errorMsg||e.ret||e.errorResponse||"")&&(t=t||e.code,e=e.msg||e.message||e.info||e.ret||JSON.stringify(e)),{msg:e,code:t,success:!0}):{}}}),o.ext(e.prototype,{constructor:e,_super:t,onReady:function(e){var t=this;if(t.hasReady)return e();"complete"===a.readyState?(t.hasReady=!0,e()):o.on(n,"load",function(){t.hasReady=!0,e()},!0)},getPage:function(e){var t=this._conf,r=t.page,i=location,n=i.host+i.pathname;return r&&!e?o.safetyCall(r,[],r+""):this._initialPage||o.filterByRule(t.ignoreUrlCase?n.toLowerCase():n,i.href,t.ignoreUrlPath||t.urlHelper)},setPage:function(e,t){var r=this,i=r.prevPage;if(!1!==t){if(!e||e===i)return r;r.prevPage=e,clearTimeout(r.sendPVTimmer),r.handleUnload(1),r.resetPageview(),r.sendPVTimmer=setTimeout(function(){r.sendPV()},10)}else r.prevPage=e;return r._conf.page=e,r},setConfig:function(e,t){var r;e&&"object"==typeof e&&(o.verifyConfig(e),e=this.setImgUrl(e),r=this._conf,this._conf=o.ext({},r,e),t||((t="disableHook")in e&&r[t]!==e[t]&&(e[t]?this.removeHook():this.addHook()),(t="enableSPA")in e&&r[t]!==e[t]&&this.bindHashChange(e[t])))},sendRequest:function(e){r(e,this.getConfig("imgUrl"))},postData:function(e,t){var r={},t=(r[t]=e[t],delete e[t],"");"object"==typeof e&&(t=o.serialize(e)),i(r,this.getConfig("imgUrl")+t+"&post_res=")},sendPipe:function(e){var t,r=this;if(!e||!e.length)return r;try{return"Array"===o.T(e[0])?o.each(e,function(e){return r.sendPipe(e)}):"Array"===o.T(e)&&(t=e.shift(),s.test(t))?void r[t].apply(r,e):r}catch(e){return o.warn("[retcode] error in sendPipe",e),r}},sendHealth:function(){var e=o.ext({},this._health),t=(e.healthy=0<e.errcount?0:1,e.begin=Date.now(),e.begin-this.sBegin);e.stay=t,this._lg("health",e,1),this._health={errcount:0,apisucc:0,apifail:0}},createInstance:function(e){e=o.ext({pid:this._conf.pid},e);var t=this.__proto__.constructor(e);return e.page&&t.sendPV(),t}}),$()(e,n),Z()(e,n,a),ee()(e,n,a),te()(e,n),re()(e,n),ie()(e,n),e._super=t,e._root=t._root,t.Browser=e,v.exports=e),v.exports}var oe={getArmsLogger:function(){return Q||(Q=1,i=window,n=i.BrowserLogger=ne(),o=m().key,a="__hasInitBlSdk",n.singleton=function(e,t){return i[a]?i[o]:r(e,t)},n.createExtraInstance=function(e){e&&"object"==typeof e&&!0!==e.enableInstanceAutoSend&&(e.enableInstanceAutoSend=!1);var e=new n(e),t=e._conf;return t.enableInstanceAutoSend&&(!1!==t.autoSendPv&&e.sendPV(),t&&t.useFmp||e.sendPerformance(),t)&&t.sendResource&&e.sendResources(),e},"object"==typeof window&&!!window.navigator&&i[o]&&(n.bl=i[a]?i[o]:(e={},t=[],o in i&&(e=i[o].config||{},t=i[o].pipe||[]),r(e,t))),c.exports=n),c.exports;function r(e,t){e=i[o]=new n(e),e.sendPipe(t),t=e._conf;return!1!==t.autoSendPv&&e.sendPV(),t&&t.useFmp||e.sendPerformance(),t&&t.sendResource&&e.sendResources(),i[a]=!0,e}var i,n,o,a,e,t}};let ae="https://arms-retcode.aliyuncs.com/r.png?",se="https://arms-retcode-sg.aliyuncs.com/r.png?",le="https://retcode-us-west-1.arms.aliyuncs.com/r.png?",ce="e1iftji1w7@7ec1cef2cc88733",ue="e1iftji1w7@10a06d1ec260adc",de="e1iftji1w7@10a06d1ec260adc",A={cn:{reportUrl:ae,pid:ce},"cn-hangzhou":{reportUrl:ae,pid:ce},sg:{reportUrl:se,pid:ue},"ap-southeast-1":{reportUrl:se,pid:ue},usw:{reportUrl:le,pid:de},"us-west-1":{reportUrl:le,pid:de}},pe=e=>null!==e&&"object"==typeof e,he=e=>Object.prototype.toString.call(e).slice(8,-1),fe=e=>!!Object.isExtensible(e)&&"Object"===he(e);function _e(e,t){if("string"==typeof e){t=e.indexOf(t);if(!(t<0))return(e=e.indexOf(`\n`))<0||t<e}}function O(r,n,o){{if("function"==typeof r)return c=n+1,u=o,d={MediaboxWrapperFunctionApply(e,t,r){let i;try{i=Reflect.apply(e,t,r)}catch(e){throw u(e),e}return O(i,c,u)},MediaboxWrapperFunctionGet(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!r||r.writable||r.configurable?O(e[t],c,u):e[t]},MediaboxWrapperClassConstructor(e,t){let r;try{r=new e(...t)}catch(e){throw u(e),e}return O(r,c,u)}},new Proxy(r,{apply:d.MediaboxWrapperFunctionApply,get:d.MediaboxWrapperFunctionGet,construct:d.MediaboxWrapperClassConstructor});if(r instanceof Promise)return r.then(e=>O(e,n+1,o)).catch(e=>(o(e),Promise.reject(e)));if(Array.isArray(r))r.forEach((e,t)=>{r[t]=O(e,n+1,o)});else if(pe(r)&&fe(r)){d=r;var a=n+1,s=o,t;if(!0===Reflect.get(d,"__v_skip"))return d;let i=[],e="function"==typeof Object.getOwnPropertyDescriptors?Object.getOwnPropertyDescriptors(null!=(l=Object.getPrototypeOf(d))?l:{}):{};for(t of Object.keys(e))e[t].get&&i.push(t);var l={MediaboxWrapperObjectGetter(t,r){if("string"==typeof r&&-1<i.indexOf(r)){let e;try{e=t[r]}catch(e){throw s(e),e}return O(e,a,s)}var e;return!(10<a)&&(!(e=Reflect.getOwnPropertyDescriptor(t,r))||e.writable||e.configurable)?O(t[r],a,s):t[r]},MediaboxWrapperObjectSetter(e,t,r){return e[t]=O(r,a,s),!0}};return Object.defineProperty(d,"__v_skip",{configurable:!0,enumerable:!1,writable:!1,value:!0}),new Proxy(d,{get:l.MediaboxWrapperObjectGetter,set:l.MediaboxWrapperObjectSetter})}return r}var c,u,d}function ge(e){return"string"==typeof e&&(-1<e.indexOf("g.alicdn.com/apsara-media-")||-1<e.indexOf("g.alicdn.com/thor-server")||-1<e.indexOf("MediaboxWrapper"))}class ye extends Error{constructor(e){super(e),this.name="MQTError"}}let ve=1;class M{constructor(e){var t,r;l(this,"armsLogger"),l(this,"isReady",!1),l(this,"isDestroyed",!1),l(this,"options"),l(this,"queue",[]),l(this,"marker"),l(this,"helper",{MediaboxWrapperQueue(e){return new ye(e)},MediaboxWrapperInitiative(e){return new ye(e)}}),this.options=(r=s({},e),e={region:e.deferRegionSet?void 0:null!=(t=e.region)?t:"cn",env:null!=(t=e.env)?t:"prod"},j(r,F(e))),this.marker=`-${ve++}-`,this.initArmsLogger()}static get version(){return"0.26.0"}initArmsLogger(e){var{region:t,env:r,disabled:i}=this.options;if(!i&&!this.armsLogger){if(e&&!t)throw new Error("region is required");if(t){if(!A[t])throw new Error(`region ${t} is not supported`);i=oe.getArmsLogger();this.armsLogger=i.createExtraInstance({enableInstanceAutoSend:!0,pid:A[t].pid,tag:this.options.businessName,release:this.options.businessName+"_"+this.options.version,imgUrl:A[t].reportUrl,behavior:!0,sample:1,disableHook:!0,environment:r,beforeReport:t=>{var e;if(!(this.isDestroyed||_e(t.stack,this.marker)||"pv"!==t.t&&"error"!==t.t&&"health"!==t.t)){if(t.c1=null!=(e=this.options.cid)?e:window.location.host,t.c2=M.version,this.options.customData&&(t.c3=new URLSearchParams(this.options.customData).toString()),"error"!==t.t)return t;if("string"==typeof(e=t.file)&&(-1<e.indexOf("g.alicdn.com/apsara-media-")||-1<e.indexOf("g.alicdn.com/thor-server"))||ge(t.stack)){let e=t;return this.options.beforeSend&&(e=this.options.beforeSend(t)),this.isReady?e:(e&&this.queue.push(e),!1)}}return!1}})}}}wrap(e){return this.options.disabled||"undefined"==typeof Proxy?e:O(e,0,e=>{var t,r;e instanceof Error&&"string"==typeof e.stack&&ge(e.stack)&&(null!=(t=this.armsLogger)&&t.error(e),e.stack=(t=e.stack,e=this.marker,"string"!=typeof t?e:_e(t,e)?t:(r=t.indexOf(`\n`))<0?""+t+e:""+t.slice(0,r)+e+t.slice(r)))})}updateOptions(e){this.options=s(s({},this.options),e)}setReady(){this.initArmsLogger(!0),this.isReady=!0,this.queue.length&&this.queue.forEach(e=>{var t;null!=(t=this.armsLogger)&&t.error(this.helper.MediaboxWrapperQueue(e.msg),{filename:e.file,lineno:e.line,colno:e.col})})}report(e,t){var r;null!=(r=this.armsLogger)&&r.error(this.helper.MediaboxWrapperInitiative(e),t)}destroy(){this.isDestroyed=!0}}e.MediaboxQualityTracer=M,e.default=M},{}],2:[function(e,t,r){},{}],3:[function(_,r,i){!function(f){!function(){var e,t;e=this,t=function(){var i,c=Math;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),!(i=!(i=!(i="undefined"!=typeof globalThis&&globalThis.crypto?globalThis.crypto:i)&&"undefined"!=typeof window&&window.msCrypto?window.msCrypto:i)&&void 0!==f&&f.crypto?f.crypto:i)&&"function"==typeof _)try{i=_("crypto")}catch(e){}var r=Object.create||function(e){return t.prototype=e,e=new t,t.prototype=null,e};function t(){}var e={},n=e.lib={},o=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},u=n.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<n;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=a<<24-(i+o)%4*8}else for(var s=0;s<n;s+=4)t[i+s>>>2]=r[s>>>2];return this.sigBytes+=n,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=c.ceil(t/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push((()=>{if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")})());return new u.init(t,e)}}),a=e.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new u.init(r,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var o=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new u.init(r,t)}},d=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},p=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new u.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t,r=this._data,i=r.words,n=r.sigBytes,o=this.blockSize,a=n/(4*o),s=(a=e?c.ceil(a):c.max((0|a)-this._minBufferSize,0))*o,e=c.min(4*s,n);if(s){for(var l=0;l<s;l+=o)this._doProcessBlock(i,l);t=i.splice(0,s),r.sigBytes-=e}return new u.init(t,e)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(n.Hasher=p.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(r){return function(e,t){return new r.init(t).finalize(e)}},_createHmacHelper:function(r){return function(e,t){return new h.HMAC.init(r,t).finalize(e)}}}),e.algo={});return e},"object"==typeof i?r.exports=i=t():"function"==typeof define&&define.amd?define([],t):e.CryptoJS=t()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{crypto:2}],4:[function(e,t,r){var i,n;i=this,n=function(e){var f;return f=e.lib.WordArray,e.enc.Base64={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=this._map,n=(e.clamp(),[]),o=0;o<r;o+=3)for(var a=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<r;s++)n.push(i.charAt(a>>>6*(3-s)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=this._map;if(!(i=this._reverseMap))for(var i=this._reverseMap=[],n=0;n<r.length;n++)i[r.charCodeAt(n)]=n;for(var o,a,s=r.charAt(64),l=(s&&-1!==(s=e.indexOf(s))&&(t=s),e),c=t,u=i,d=[],p=0,h=0;h<c;h++)h%4&&(o=u[l.charCodeAt(h-1)]<<h%4*2,a=u[l.charCodeAt(h)]>>>6-h%4*2,d[p>>>2]|=(o|a)<<24-p%4*8,p++);return f.create(d,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},e.enc.Base64},"object"==typeof r?t.exports=r=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":3}],5:[function(e,t,r){var i,n;i=this,n=function(e){return e.enc.Utf8},"object"==typeof r?t.exports=r=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":3}],6:[function(e,t,r){var i,n;i=this,n=function(e){return e.HmacSHA1},"object"==typeof r?t.exports=r=n(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof define&&define.amd?define(["./core","./sha1","./hmac"],n):n(i.CryptoJS)},{"./core":3,"./hmac":7,"./sha1":8}],7:[function(e,t,r){var i,n;i=this,n=function(e){var t,s;t=e.lib.Base,s=e.enc.Utf8,e.algo.HMAC=t.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=s.parse(t));for(var r=e.blockSize,i=4*r,e=((t=t.sigBytes>i?e.finalize(t):t).clamp(),this._oKey=t.clone()),t=this._iKey=t.clone(),n=e.words,o=t.words,a=0;a<r;a++)n[a]^=1549556828,o[a]^=909522486;e.sigBytes=t.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})},"object"==typeof r?t.exports=r=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":3}],8:[function(e,t,r){var i,n;i=this,n=function(e){var t,r,i,n,u;return r=(t=e).lib,i=r.WordArray,n=r.Hasher,u=[],r=t.algo.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],o=r[2],a=r[3],s=r[4],l=0;l<80;l++){u[l]=l<16?0|e[t+l]:(c=u[l-3]^u[l-8]^u[l-14]^u[l-16])<<1|c>>>31;var c=(i<<5|i>>>27)+s+u[l];c+=l<20?1518500249+(n&o|~n&a):l<40?1859775393+(n^o^a):l<60?(n&o|n&a|o&a)-1894007588:(n^o^a)-899497514,s=a,a=o,o=n<<30|n>>>2,n=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(64+i>>>9<<4)]=Math.floor(r/4294967296),t[15+(64+i>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}}),t.SHA1=n._createHelper(r),t.HmacSHA1=n._createHmacHelper(r),e.SHA1},"object"==typeof r?t.exports=r=n(e("./core")):"function"==typeof define&&define.amd?define(["./core"],n):n(i.CryptoJS)},{"./core":3}],9:[function(V,r,i){!function(F,B){!function(){var e,t;e=this,t=function(){function l(e){return"function"==typeof e}var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,t=void 0,n=void 0,a=function(e,t){d[i]=e,d[i+1]=t,2===(i+=2)&&(n?n(p):N())};var e="undefined"!=typeof window?window:void 0,o=e||{},o=o.MutationObserver||o.WebKitMutationObserver,s="undefined"==typeof self&&void 0!==F&&"[object process]"==={}.toString.call(F),c="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(p,1)}}var d=new Array(1e3);function p(){for(var e=0;e<i;e+=2)(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;i=0}function h(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(p)}:u()}catch(e){return u()}}var f,_,g,N=void 0;function y(e,t){var r,i=this,n=new this.constructor(b),o=(void 0===n[m]&&D(n),i._state);return o?(r=arguments[o-1],a(function(){return L(o,n,r,i._result)})):C(i,n,e,t),n}function v(e){var t;return e&&"object"==typeof e&&e.constructor===this?e:(x(t=new this(b),e),t)}var N=s?function(){return F.nextTick(p)}:o?(_=0,s=new o(p),g=document.createTextNode(""),s.observe(g,{characterData:!0}),function(){g.data=_=++_%2}):c?((f=new MessageChannel).port1.onmessage=p,function(){return f.port2.postMessage(0)}):(void 0===e&&"function"==typeof V?h:u)(),m=Math.random().toString(36).substring(2);function b(){}var S=void 0,T=1,E=2;function H(e,i,n){a(function(t){var r=!1,e=((e,t,r,i)=>{try{e.call(t,r,i)}catch(e){return e}})(n,i,function(e){r||(r=!0,(i!==e?x:k)(t,e))},function(e){r||(r=!0,P(t,e))},t._label);!r&&e&&(r=!0,P(t,e))},e)}function w(e,t,r){var i,n;t.constructor===e.constructor&&r===y&&t.constructor.resolve===v?(i=e,(n=t)._state===T?k(i,n._result):n._state===E?P(i,n._result):C(n,void 0,function(e){return x(i,e)},function(e){return P(i,e)})):void 0!==r&&l(r)?H(e,t,r):k(e,t)}function x(t,e){if(t===e)P(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof e,null===e||"object"!=r&&"function"!=r)k(t,e);else{r=void 0;try{r=e.then}catch(e){return void P(t,e)}w(t,e,r)}var r}function U(e){e._onerror&&e._onerror(e._result),R(e)}function k(e,t){e._state===S&&(e._result=t,e._state=T,0!==e._subscribers.length)&&a(R,e)}function P(e,t){e._state===S&&(e._state=E,e._result=t,a(U,e))}function C(e,t,r,i){var n=e._subscribers,o=n.length;e._onerror=null,n[o]=t,n[o+T]=r,n[o+E]=i,0===o&&e._state&&a(R,e)}function R(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var i,n=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],n=t[a+r],i?L(r,i,n,o):n(o);e._subscribers.length=0}}function L(e,t,r,i){var n=l(r),o=void 0,a=void 0,s=!0;if(n){try{o=r(i)}catch(e){s=!1,a=e}if(t===o)return void P(t,new TypeError("A promises callback cannot return that same promise."))}else o=i;t._state===S&&(n&&s?x(t,o):!1===s?P(t,a):e===T?k(t,o):e===E&&P(t,o))}var I=0;function D(e){e[m]=I++,e._state=void 0,e._result=void 0,e._subscribers=[]}A.prototype._enumerate=function(e){for(var t=0;this._state===S&&t<e.length;t++)this._eachEntry(e[t],t)},A.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,i=r.resolve;if(i===v){var n,o=void 0,a=void 0,s=!1;try{o=t.then}catch(e){s=!0,a=e}o===y&&t._state!==S?this._settledAt(t._state,e,t._result):"function"!=typeof o?(this._remaining--,this._result[e]=t):r===O?(n=new r(b),s?P(n,a):w(n,t,o),this._willSettleAt(n,e)):this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},A.prototype._settledAt=function(e,t,r){var i=this.promise;i._state===S&&(this._remaining--,e===E?P(i,r):this._result[t]=r),0===this._remaining&&k(i,this._result)},A.prototype._willSettleAt=function(e,t){var r=this;C(e,void 0,function(e){return r._settledAt(T,t,e)},function(e){return r._settledAt(E,t,e)})};var j=A;function A(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[m]||D(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0!==this.length&&(this.length=this.length||0,this._enumerate(t),0!==this._remaining)||k(this.promise,this._result)):P(this.promise,new Error("Array Methods must be provided an Array"))}M.prototype.catch=function(e){return this.then(null,e)},M.prototype.finally=function(t){var r=this.constructor;return l(t)?this.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})}):this.then(t,t)};var O=M;function M(e){if(this[m]=I++,this._result=this._state=void 0,this._subscribers=[],b!==e){if("function"!=typeof e)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof M))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");var t=this;try{e(function(e){x(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}}return O.prototype.then=y,O.all=function(e){return new j(this,e).promise},O.race=function(n){var o=this;return r(n)?new o(function(e,t){for(var r=n.length,i=0;i<r;i++)o.resolve(n[i]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},O.resolve=v,O.reject=function(e){var t=new this(b);return P(t,e),t},O._setScheduler=function(e){n=e},O._setAsap=function(e){a=e},O._asap=a,O.polyfill=function(){var e=void 0;if(void 0!==B)e=B;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=O},O.Promise=O},"object"==typeof i&&void 0!==r?r.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()}.call(this)}.call(this,V("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:10}],10:[function(e,t,r){var i,n,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}function s(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return(i=setTimeout)(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}var l,c=[],u=!1,d=-1;function p(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length)&&h()}function h(){if(!u){for(var e=s(p),t=(u=!0,c.length);t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,!function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return(n=clearTimeout)(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function _(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new f(e,t)),1!==c.length||u||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=_,t.addListener=_,t.once=_,t.off=_,t.removeListener=_,t.removeAllListeners=_,t.emit=_,t.prependListener=_,t.prependOnceListener=_,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],11:[function(e,t,r){t.exports={name:"aliyun-aliplayer",version:"2.30.3",description:"\u963f\u91cc\u4e91 Web \u64ad\u653e\u5668",main:"./build/aliplayer-min",style:"./build/skins/default/aliplayer-min.css",files:["build"],repository:{type:"git",url:""},keywords:["aliyun","aliplayer"],scripts:{start:"npx grunt live","start:hls":"npx grunt live --hls=true","start:flv":"npx grunt live --flv=true",build:"npx grunt build",release:"commit-and-tag-version",prepublishOnly:"npm run build","test:unit":"karma start","test:unit:watch":"karma start --no-single-run"},devDependencies:{"@ali/mediabox-quality-tracer":"^0.26.0","@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@types/chai":"^5.0.1","@types/mocha":"^10.0.10","babel-loader":"^9.2.1","babel-plugin-es6-promise":"^1.1.1","babel-plugin-istanbul":"^7.0.0",babelify:"^10.0.0",chai:"^5.1.2","commit-and-tag-version":"^11.2.1","es6-promise":"^4.2.8",grunt:"^1.0.4","grunt-autoprefixer":"^3.0.4","grunt-babel":"^8.0.0","grunt-browserify":"^5.3.0","grunt-contrib-clean":"^2.0.0","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-cssmin":"^3.0.0","grunt-contrib-less":"^2.0.0","grunt-contrib-uglify":"^4.0.1","grunt-contrib-watch":"^1.1.0","grunt-run":"^0.8.1","grunt-text-replace":"^0.4.0",karma:"^6.4.4","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-webpack":"^5.0.1",mocha:"^11.0.1","node-args":"^2.1.8",sinon:"^19.0.2","sinon-chai":"^4.0.0",webpack:"^5.97.1"},dependencies:{"crypto-js":"^4.1.1"},optionalDependencies:{puppeteer:"^23.11.1"}}},{}],12:[function(e,t,r){var i=e("../ui/component"),n=(e("../lib/util"),e("../lib/dom")),o=e("../lib/event"),a=(e("../lib/ua"),e("../lang/index")),s=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-auto-stream-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div><p class='tip-text'></p></div><div class='operators'><a class='prism-button prism-button-ok' type='button'>"+a.get("OK_Text")+"</a><a class='prism-button prism-button-cancel'  target='_blank'>"+a.get("Cancel_Text")+"</a></div>",e},bindEvent:function(){var i=this,e=(i._player.on(s.Private.AutoStreamShow,function(e){var t,r=document.querySelector("#"+i.getId()+" .tip-text");i._player._getLowerQualityLevel&&(t=i._player._getLowerQualityLevel())&&(i._switchUrl=t,r.innerText=a.get("Auto_Stream_Tip_Text").replace("$$",t.item.desc),n.css(i.el(),"display","block"))}),i._player.on(s.Private.AutoStreamHide,function(e){document.querySelector("#"+i.getId()+" .tip-text");n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-ok")),e=(o.on(e,"click",function(){i._player._changeStream&&i._switchUrl&&(i._player._changeStream(i._switchUrl.index,a.get("Quality_Change_Text")),i._player.trigger(s.Private.SettingListHide)),n.css(i.el(),"display","none")}),document.querySelector("#"+i.getId()+" .prism-button-cancel"));o.on(e,"click",function(){n.css(i.el(),"display","none"),i._player.trigger(s.Private.SettingListHide)})}});t.exports=e},{"../lang/index":24,"../lib/dom":33,"../lib/event":34,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":68,"../ui/component":132}],13:[function(e,t,r){var i=e("../ui/component"),a=e("../lib/dom"),n=e("../lib/event"),o=e("../lib/ua"),s=e("../lib/function"),l=(e("../lang/index"),e("../lib/util")),c=e("../config"),u=e("../lib/playerutil"),d=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-liveshift-progress",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-enable-liveshift"><div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-liveshift-seperator"></div></div><div class="prism-disable-liveshift"></div>',e},bindEvent:function(){function t(e){r._progressDown=e}var r=this,e=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this.id()+" .prism-progress-time"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),this.seperatorNode=document.querySelector("#"+this.id()+" .prism-liveshift-seperator"),this.progressNode=document.querySelector("#"+this.id()+" .prism-enable-liveshift"),document.querySelector("#"+this.id()+" .prism-progress-cursor img")),i="//"+c.domain+c.path+c.h5Version+"/skins/default/img/dragcursor.png";this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,this._player._options.skinsDomain?i=this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":c.domain?-1<c.domain.indexOf("localhost")&&(i="//"+c.domain+"/build/skins/default/img/dragcursor.png"):i=this._player&&this._player._options&&this._player._options.sdkDomain?this._player._options.sdkDomain+c.path+c.h5Version+"/skins/default/img/dragcursor.png":(c.path||"").substring(1)+c.h5Version+"/skins/default/img/dragcursor.png",e.src=i,n.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),n.on(this.progressNode,"mousemove",function(e){r._progressMove(e)}),n.on(this.progressNode,"touchmove",function(e){r._progressMove(e)});n.on(this.progressNode,"mousedown",function(e){t(!0)}),n.on(this.progressNode,"touchstart",function(e){t(!0)}),n.on(this.progressNode,"mouseup",function(e){t(!1)}),n.on(this.progressNode,"touchend",function(e){t(!1)}),n.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(d.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(d.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(d.Private.ShowBar,function(){r._updateLayout()}),n.on(this.progressNode,d.Private.MouseOver,function(e){r._onMouseOver(e)}),n.on(this.progressNode,d.Private.MouseOut,function(e){r._onMouseOut(e)}),this.bindTimeupdate=s.bind(this,this._onTimeupdate),this._player.on(d.Player.TimeUpdate,this.bindTimeupdate),u.isLiveShift(this._player._options)&&r._liveshiftService.start(6e4,function(e){e={mediaId:r._player._options.vid||"",error_code:e.Code,error_msg:e.Message};r._player.logError(e),r._player.trigger(d.Player.Error,e)}),this._player.on(d.Private.LiveShiftQueryCompleted,function(){r._updateSeperator(),r._updateLayout()}),this._player.on(d.Private.LiveShiftSwitchToLive,function(){r._updateCursorPosition()}),this._player.on(d.Player.Pause,function(){r._liveshiftService.stop()}),o.IS_IPAD?this.interval=setInterval(function(){r._onProgress()},500):this._player.on(d.Video.Progress,function(){r._onProgress()})},_updateSeperator:function(){this._liveshiftService.currentTimeDisplay&&(this.seperatorNode.innerText=this._liveshiftService.currentTimeDisplay)},_updateLayout:function(){var e=this.seperatorNode.offsetWidth,t=this.el().offsetWidth,r=t-e;0!=e&&0!=r&&(a.css(this.progressNode,"width",100*(r-10)/t+"%"),a.css(this.seperatorNode,"right",-1*(e+10)+"px"))},_progressMove:function(e){var t=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,t=(this.timeNode.innerText="-"+l.formatTime(r-t),r?t/r:0),r=1-this.timeNode.clientWidth/this.el().clientWidth,i=(r<t&&(t=r),this.timeNode&&(a.css(this.timeNode,"display","block"),a.css(this.timeNode,"left",100*t+"%")),this);!o.IS_PC&&i._progressDown&&(i.progressSeekTimer&&clearTimeout(i.progressSeekTimer),i.progressSeekTimer=setTimeout(function(){i._progressDown||i._onMouseClick(e)},200))},_hideProgress:function(e){n.off(this.cursorNode,"mousedown"),n.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;n.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),n.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._updateCursorPosition(this._getCurrentTime()),a.css(this.timeNode,"display","block")},_onMouseOut:function(e){a.css(this.timeNode,"display","none")},_getSeconds:function(e){if(e.touches&&e.touches[0]){for(var t,r=this.el().offsetLeft,i=this.el();i.offsetParent;){var i=i.offsetParent,n=a.getTranslateX(i);r+=i.offsetLeft+n}i.tagName&&"body"===i.tagName.toLowerCase()&&(r+=document.getElementsByTagName("html")[0].offsetLeft),(t=(e.touches?e.touches[0]:e).pageX-r)<0&&(t=0)}else t=e.offsetX,e.target!==this.cursorNode&&e.target.offsetParent!==this.cursorNode||(t+=this.cursorNode.offsetLeft),e.target!==this._el&&(e.target.offsetParent,this._el);var e=this.progressNode.offsetWidth,o=this._liveshiftService.availableLiveShiftTime;return sec=(sec=(sec=o?t/e*o:0)<0?0:sec)>o?o:sec},_onMouseClick:function(e){var t=this,e=this._getSeconds(e),r=this._liveshiftService.availableLiveShiftTime,i=r-e,n=this._player._options,r=(i<=n.liveShiftMinOffset&&(e=r-(i=n.liveShiftMinOffset)),this._player.trigger(d.Private.SeekStart,{fromTime:this._getCurrentTime()}),this._liveshiftService.getSourceUrl(i)),n=u.isHls(t._player._options.source);t._player._loadByUrlInner(r,e,!0),t._player.trigger(d.Private.Play_Btn_Hide),t._liveshiftService.seekTime=e,t._player.trigger(d.Private.EndStart,{toTime:e}),t._updateProgressBar(this.playedNode,e),t._updateCursorPosition(e),setTimeout(function(){t._progressDown||t._onMouseOut()},500),n&&setTimeout(function(){t._player.play()})},_onMouseDown:function(e){var t=this;e.preventDefault(),this._player.trigger(d.Private.SeekStart,{fromTime:this._getCurrentTime()}),n.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),n.on(this.controlNode,"mouseup",function(e){t._onMouseUp(e)}),n.on(this.controlNode,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),n.off(this.controlNode,"mousemove"),n.off(this.controlNode,"touchmove"),n.off(this._player.tag,"mouseup"),n.off(this._player.tag,"touchend"),n.off(this.controlNode,"mouseup"),n.off(this.controlNode,"touchend"),this._onMouseClick(e)},_onMouseMove:function(e){e.preventDefault()},_onTimeupdate:function(e){this._player._seeking||(o.IS_ANDROID&&o.IS_UC&&(this._hasResetFlagUC&&this._player.getCurrentTime()&&(this._hasResetFlagUC=!1,this._basePtsUC=this._player.getCurrentTime()),this._player.getCurrentTime()||(this._hasResetFlagUC=!0,this._basePtsUC=0)),this._updateProgressBar(this.playedNode,this._getCurrentTime()),this._updateCursorPosition(this._getCurrentTime()),this._player.trigger(d.Private.UpdateProgressBar,{time:this._getCurrentTime()}))},_getCurrentTime:function(){var e=this._liveshiftService.seekTime,e=(-1==e&&(e=0),this._player.getCurrentTime()+e);return o.IS_ANDROID&&o.IS_UC&&(e-=this._basePtsUC||0),e},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r,i;1!=this._player._switchSourcing&&(i=0,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?t/r:0)&&(this._liveshiftService.seekTime=-(i=1)),this.liveShiftStartDisplay,e)&&a.css(e,"width",100*i+"%")},_updateCursorPosition:function(e){var t,r,i,n;this._player.el()&&1!=this._player._switchSourcing&&(i=0,n=1,t=this._player.el().clientWidth,-1==this._liveshiftService.seekTime?i=1:1<(i=(r=this._liveshiftService.availableLiveShiftTime)?e/r:0)&&(this._liveshiftService.seekTime=-1),0!=t&&(n=1-(e=10/t),i-=e),i=i<0?0:i,this.cursorNode)&&(n<i?(a.css(this.cursorNode,"right","0px"),a.css(this.cursorNode,"left","auto")):(a.css(this.cursorNode,"right","auto"),a.css(this.cursorNode,"left",100*i+"%")))}});t.exports=e},{"../config":15,"../lang/index":24,"../lib/dom":33,"../lib/event":34,"../lib/function":36,"../lib/playerutil":46,"../lib/ua":49,"../lib/util":51,"../player/base/event/eventtype":68,"../ui/component":132}],14:[function(e,t,r){var i=e("../ui/component"),n=e("../lib/util"),o=e("../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.className=t.className||"prism-live-time-display",this.addClass(this.className),this._liveshiftService=e._liveshiftService},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="end-time">00:00</span><span class="live-text">Live: </span><span class="live-time"></span>',e},bindEvent:function(){var i=this;this._player.on(o.Video.TimeUpdate,function(){var e,t=i._liveshiftService,r=document.querySelector("#"+i.id()+" .current-time");t.liveShiftStartDisplay&&t.availableLiveShiftTime>t.seekTime&&-1!=t.seekTime?(e=i._liveshiftService.getBaseTime(),e=n.formatTime(e+i._player.getCurrentTime()),r.innerText=e):t.currentTimeDisplay&&(r.innerText=t.currentTimeDisplay)}),this._player.on(o.Private.LiveShiftQueryCompleted,function(){i.updateTime()})},updateTime:function(){document.querySelector("#"+this.id()+" .end-time").innerText=this._liveshiftService.liveTimeRange.endDisplay,document.querySelector("#"+this.id()+" .live-time").innerText=this._liveshiftService.currentTimeDisplay}});t.exports=e},{"../lib/util":51,"../player/base/event/eventtype":68,"../ui/component":132}],15:[function(e,t,r){e=e("../package.json");t.exports={domain:"g.alicdn.com",path:"/apsara-media-box/imp-web-player/",flashVersion:"2.8.2",h5Version:e.version.split("-")[0],rtsVersion:"2.9.1",cityBrain:!0,logDuration:3,logCount:100,logReportTo:"https://videocloud.cn-hangzhou.log.aliyuncs.com/logstores/newplayer/track",dumpLogReportTo:"https://web-video.cn-hangzhou.log.aliyuncs.com/logstores/player-dump/track"}},{"../package.json":11}],16:[function(c,u,e){!function(l){!function(){var i,n,o,a,e,t,r=c("../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs").MediaboxQualityTracer,s=(c("./lib/patch-ssr").isSSR||(n=function(t){var e=window&&window.location.host||"";if(!(-1<e.indexOf("localhost")||/(?:\d{1,3}\.){3}\d{1,3}/.test(e))){if(t&&t.msg){if(["\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668","playauth property is required"].some(function(e){return-1<t.msg.indexOf(e)}))return void console.log("ignore error report");if(/code:(\d+);msg:(.+)/.test(t.msg))return void console.log("ignore error report")}if(!(t.stack&&-1<t.stack.indexOf("alivc-im.iife.js")||t.file&&-1<t.file.indexOf("imp-interaction")))return t}console.log("ignore error report")},c("./lang/index").load(),o=c("./player/adaptiveplayer"),a=c("./lib/reloadInstanceUtil"),s=c("./lib/componentutil"),e=c("./config"),(t=function(e,t){i&&(i.updateOptions({cid:e.license&&e.license.key,region:"SEA"===e.env?"ap-southeast-1":"cn-hangzhou",beforeSend:n}),i.setReady());var r=o.create(e,t);return i&&i.updateOptions({beforeSend:function(e){if(e=n(e))return e.c3="likely_ri="+(r._monitor&&r._monitor.sessionId),e}}),a.storeUserEvents(r),r}).getVersion=function(){return e.h5Version},s.register(t),t.players={},t.reloadInstance=a.reloadInstance,"undefined"==typeof Uint8Array)||Uint8Array.prototype.slice||Object.defineProperty(Uint8Array.prototype,"slice",{value:Array.prototype.slice}),(i=new r({businessName:"imp-web-player",version:e.h5Version||"unknown",deferRegionSet:!0,env:"dev"!==l?"prod":"local",disabled:!0===window.AliplayerDisableTracer})).wrap(t)),r=window.Aliplayer=s;r.tracer=i,u.exports=r}.call(this)}.call(this,"prod")},{"../node_modules/@ali/mediabox-quality-tracer/dist/index.cjs":1,"./config":15,"./lang/index":24,"./lib/componentutil":28,"./lib/patch-ssr":45,"./lib/reloadInstanceUtil":47,"./player/adaptiveplayer":65}],17:[function(e,t,r){var i=e("../player/base/event/eventtype"),n=e("../lib/constants"),o=e("../lang/index");t.exports=(()=>{function e(e){var t=this;void 0===e&&(e={}),this.interval=3e3,this.player=null,this.timer=null,this.playerInitDone=!1,this.player=e.player,this.player.on(i.Player.Init,function(){t.playerInitDone=!0})}var t=e.prototype;return t.start=function(){var e=this;this.stop(),this.player&&this.player._options&&!this.player._options.preventRecord||(this.timer=setInterval(function(){e.playerInitDone&&e.check()},this.interval))},t.stop=function(){this.clearTimer()},t.check=function(){var e=!1,t=this.detectPrototype()||this.detectNativeFn();return(t||this.detectDeperateVideo())&&(console.log("isMediaSourceModified",t),this.clearTimer(),this.displayError(),this.setupErrorStyle(),this.destroyVideo(),localStorage.setItem("_intercept_mediastream_",""),e=!0),e},t.dispose=function(){this.stop(),this.player=null,this.playerInitDone=!1},t.clearTimer=function(){this.timer&&(clearInterval(this.timer),this.timer=null)},t.displayError=function(){var e=this.player,t={mediaId:e._options&&e._options.vid?e._options.vid:"",error_code:n.ErrorCode.RecordNotAllowed,error_msg:o.get("Record_Not_Allowed")};e.logError(t),e.trigger(i.Player.Error,t)},t.setupErrorStyle=function(){this.hideRetry();var e=document.querySelector(".prism-ErrorMessage");e&&(e.style.opacity="1",e.style.visibility="visible")},t.hideRetry=function(){var e=document.querySelector("#"+this.player.id()+" .prism-button-retry");e&&(e.style.display="none")},t.destroyVideo=function(){this.player._drm&&this.player.destroy();var e=this.player.tag;e&&e.parentNode&&e.parentNode.removeChild(e)},t.detectPrototype=function(){var e=window,t=e.MediaSource;return t&&e.EventTarget&&t.__proto__.__proto__===e.EventTarget},t.detectNativeFn=function(){var e=window.MediaSource;return e&&!this.isNativeFn(e.prototype.addSourceBuffer)},t.isNativeFn=function(e){var t=RegExp("^".concat(Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),"$")),r=typeof e;return null!==e&&("object"==r||"function"==r)&&t.test(e)},t.detectDeperateVideo=function(){var e=this.player.tag;if(e)return-1!==(e.getAttribute("id")||"").indexOf("360")},e})()},{"../lang/index":24,"../lib/constants":29,"../player/base/event/eventtype":68}],18:[function(e,t,r){var i=e("../lib/oo"),n=e("../lang/index"),e=i.extend({init:function(e,t){this._player=e,this._options=e.options()}}),o=(e.prototype.handle=function(e){var t,r;this._options.autoPlayDelay&&(t=(t=this._options.autoPlayDelayDisplayText)||n.get("AutoPlayDelayDisplayText").replace("$$",this._options.autoPlayDelay),this._player.trigger("info_show",t),this._player.trigger("h5_loading_hide"),this._player.trigger("play_btn_hide"),(r=this)._timeHandler=setTimeout(function(){r._player.trigger("info_hide"),r._options.autoPlayDelay=0,e&&e()},1e3*this._options.autoPlayDelay),this._player.on("play",function(){o(r)}),this._player.on("pause",function(){o(r)}))},e.prototype.dispose=function(){o(this),this._player=null},function(e){e._timeHandler&&(clearTimeout(e._timeHandler),e._timeHandler=null)});t.exports=e},{"../lang/index":24,"../lib/oo":44}],19:[function(e,t,r){var i=e("../lib/event"),n=e("../lib/data"),o=e("../player/base/event/eventtype"),a=n.guid(),e={};function s(e){var t,r,i=this._options.keyFastForwardStep,n=this._options.isLive;switch(e&&e.keyCode){case 39:n||(e.preventDefault(),t=this.getDuration(),r=this.getCurrentTime()+i,this.seek(r=t<r?t:r),l.call(this,r),c.call(this,r));break;case 37:n||(e.preventDefault(),r=this.getCurrentTime()-i,this.seek(r=r<0?0:r),l.call(this,r),c.call(this,r));break;case 38:e.preventDefault(),this.getVolume()<1&&0<=this.getVolume()&&this.setVolume(Number((this.getVolume()+.1).toFixed(1)));break;case 40:e.preventDefault(),0<this.getVolume()&&this.getVolume()<=1&&this.setVolume(Number((this.getVolume()-.1).toFixed(1)));break;case 32:if(n)return;e.preventDefault(),this.tag.paused?this.play(!0):this.pause(!0)}}function l(e){this.trigger(o.Private.UpdateProgress,{targetTime:e})}function c(e){this.trigger(o.Private.UpdateCursorPosition,{targetTime:e})}e.init=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.on(window.document,"keydown",e))},e.dispose=function(){var e;this._options.keyShortCuts&&((e=s.bind(this)).guid=a,i.off(window.document,"keydown",e))},t.exports=e},{"../lib/data":31,"../lib/event":34,"../player/base/event/eventtype":68}],20:[function(e,t,r){var a="undefined"==typeof Promise?e("es6-promise").Promise:Promise,s=e("../lib/constants").LicenseResultCode,l=e("../lib/io"),i=((e={})[s.ResourceIncorrect]="license resource init error",e[s.LicenseKeyInvalid]="invalid license key",e[s.DomainInvalid]="invalid domain",e[s.CertInvalid]="invalid cert content",e[s.NotFound]="license not found",e[s.Expired]="license expired",e),e=(()=>{function e(){}return e.getLicense=function(r,i,n){var o=this;return this.isWasmSupported()?i?r?this.instance?a.resolve(this.instance):new a(function(e,t){o.resolvers.push(e),o.rejecters.push(t),1===o.resolvers.length&&l.loadJS("https://g.alicdn.com/apsara-media-components/amcom-web-license/0.5.1/index.js",function(){window.loadLicenseSource().then(function(e){var t=new e({business_id:2,domain_identity:r,license_key:i,region:n});return t.update().then(function(){o.instance=t,o.resolvers.forEach(function(e){e(t)})}).catch(function(t){o.rejecters.forEach(function(e){e(s.CertInvalid+"#"+(t||"").trim().split(":")[0])})})}).catch(function(){o.rejecters.forEach(function(e){e(s.ResourceIncorrect)})}).finally(function(){o.resolvers=[],o.rejecters=[]})},function(){o.rejecters.forEach(function(e){e(s.ResourceIncorrect)})})}):a.reject(s.DomainInvalid):a.reject(s.LicenseKeyInvalid):a.reject(s.WasmNotSupported)},e.isWasmSupported=function(){return"object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate},e.logError=function(e){i[e]&&console.error(i[e])},e})();e.instance=void 0,e.resolvers=[],e.rejecters=[],t.exports=e},{"../lib/constants":29,"../lib/io":41,"es6-promise":9}],21:[function(e,t,r){function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}var a=e("../lib/event"),s="box",l="content",c="top-left",u="top-right",d="bottom-left",p="bottom-right",h="percentage",e=(()=>{function e(e){this._container=void 0,this._video=void 0,this._logoList=[],this._resizeDone=!0,this._observer=void 0,this._observer=new f,this._handleVideoResize=this._handleVideoResize.bind(this),this._handleWindowResize=this._handleWindowResize.bind(this),this._setLogo(e.logo),this._setElements(e.container,e.video)}var t,r,i=e.prototype;return i.dispose=function(){this._observer.dispose(),this._observer=void 0,a.off(this._video,"resize",this._handleVideoResize),a.off(document,"fullscreenchange",this._handleWindowResize),this._logoList.forEach(function(e){e.logo&&e.logo.remove()}),this._logoList=[],this._container=void 0,this._video=void 0,this._resizeDone=!0},i._setElements=function(e,t){this._container=e,this._video=t,this.loadedMeta?this._logoList.forEach(this._setupLogo.bind(this)):a.on(t,"resize",this._handleVideoResize),this._observer.observe(this._container,this._handleWindowResize),a.on(document,"fullscreenchange",this._handleWindowResize)},i._handleVideoResize=function(){!this._video.videoWidth||this._logoList.some(function(e){return e.logo})||this._logoList.forEach(this._setupLogo.bind(this))},i._handleWindowResize=function(){var e=this;this._container&&this._resizeDone&&this.loadedMeta&&(this._resizeDone=!1,window.requestAnimationFrame(function(){e._resizeDone=!0,e._logoList.forEach(e._placeLogo.bind(e))}))},i._setLogo=function(e){this._logoList=e.map(this._defauleValue)},i._setupLogo=function(e){var t=this,r=this._createLogo(e);(e.logo=r).onload=function(){t._placeLogo(e)}},i._createLogo=function(e){var t=document.createElement("img");return t.setAttribute("class","prism-logo"),t.src=e.src,t},i._placeLogo=function(e){var t=e.logo,r=this._calcSize(e),i=(r.width&&t.setAttribute("width",r.width+"px"),r.height&&t.setAttribute("height",r.height+"px"),this._calcMatrix(e));t.style.position="absolute",Object.keys(i).forEach(function(e){t.style[e]=i[e]+"px"}),this._container.appendChild(e.logo)},i._calcSize=function(e){return this._getPixel(e)},i._calcMatrix=function(e){var t=this._getPosition(e),r=this._getPixel(e,{width:e.offsetX,height:e.offsetY});return Object.keys(t).forEach(function(e){switch(e){case"top":t[e]+=r.height;break;case"bottom":t[e]-=r.height;break;case"left":t[e]+=r.width;break;case"right":t[e]-=r.width}}),t},i._getPosition=function(e){var t=e.origin,e=e.position,r=0,i=0;switch(t===l&&(r=Math.abs(this.videoSize.height-this.contentSize.height)/2,i=Math.abs(this.videoSize.width-this.contentSize.width)/2),e){case c:return{top:0+r,left:0+i};case u:return{top:0+r,right:0+i};case d:return{bottom:0+r,left:0+i};case p:return{bottom:0+r,right:0+i};default:return{top:0,left:0}}},i._formalize=function(e,t){var r=1,r=e.width/e.height>t.width/t.height?t.width/e.width:t.height/e.height;return{width:e.width*r,height:e.height*r}},i._getPixel=function(e,t){var t=void 0===t?{}:t,r=t.width,t=t.height,i=e.unit,n=e.origin;return isNaN(r)&&(r=e.width),isNaN(t)&&(t=e.height),i===h?{width:(e=n===s?this.videoSize:this.contentSize).width*r/100,height:e.height*t/100}:{width:r,height:t}},i._defauleValue=function(e){return n({},e,{position:e.position||c,offsetX:e.offsetX||0,offsetY:e.offsetY||0,origin:e.origin||s,unit:e.unit||h})},i=e,(t=[{key:"videoSize",get:function(){return this._video?{width:this._video.offsetWidth,height:this._video.offsetHeight}:{}}},{key:"contentSize",get:function(){var e;return this._video?(e={width:this._video.videoWidth,height:this._video.videoHeight},{width:(e=this._formalize(e,this.videoSize)).width,height:e.height}):{}}},{key:"loadedMeta",get:function(){return!!this._video.videoWidth}}])&&o(i.prototype,t),r&&o(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i})(),f=(t.exports=e,(()=>{function e(){this._frame=void 0}var t=e.prototype;return t.observe=function(e,t){var r=document.createElement("iframe");return r.style.cssText="position:absolute;left:0;top:-100%;width:100%;height:100%;margin:1px 0 0;border:none;opacity:0;visibility:hidden;pointer-events:none;",r.onload=function(){r.contentWindow.onresize=function(){t(e)}},e.appendChild(r),this._frame=r},t.dispose=function(){this._frame&&(this._frame.contentWindow.onresize=null,this._frame.remove(),this._frame=void 0)},e})())},{"../lib/event":34}],22:[function(e,t,r){var i=e("../lib/event"),n=e("../player/base/event/eventtype");t.exports=(()=>{function e(){this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0,this.resize=this._resize.bind(this)}var t=e.prototype;return t.autoResize=function(e,t,r){void 0===r&&(r="height"),"number"!=typeof e?console.warn("Parameter [ratio] should be a number, like 16/9"):(this.target=r,this.ratio=e,this.player=t,i.on(window,"resize",this.resize),this.resize())},t._resize=function(){var e,t,r;null!=(e=this.player.fullscreenService)&&e.isFullScreen||(e=null==(e=this.player)?void 0:e.el())&&("height"===this.target?(r=(t=e.offsetWidth)/this.ratio,e.style.height=r+"px"):(t=(r=e.offsetHeight)*this.ratio,e.style.width=t+"px"),null!=(e=this.player))&&e.trigger(n.Player.AutoResize,{width:t,height:r})},t.dispose=function(){i.off(window,"resize",this.resize),this.player=void 0,this.ratio=void 0,this.resize=void 0,this.target=void 0},e})()},{"../lib/event":34,"../player/base/event/eventtype":68}],23:[function(e,t,r){t.exports={OD:"OD",FD:"360p",LD:"540p",SD:"720p",HD:"1080p","2K":"2K","4K":"4K",FHD:"FHD",XLD:"XLD",SQ:"SQ",HQ:"HQ",Speed:"Speed",Speed_05X_Text:"0.5X",Speed_1X_Text:"Normal",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"2x speed",Refresh_Text:"Refresh",Cancel:"Cancel",Mute:"Mute",Click_To_Unmute:"Click to unmute",Snapshot:"Snapshot",Detection_Text:"Diagnose",Play_DateTime:"Time",Default:"Default",Quality_Change_Fail_Switch_Text:"Cannot play, switch to ",Quality_Change_Text:"Switching to ",Quality_Change_Result:"Switched to ",Quality_The_Url:"The url",AutoPlayDelayDisplayText:"Play in $$ seconds",Error_Load_Abort_Text:"Data abort erro",Error_Network_Text:"Loading failed due to network error",Error_Decode_Text:"Decode error",Error_No_Decoder_Text:"Unsupported codec",Error_Server_Network_NotSupport_Text:"Network error or \xa0the format of video is unsupported",Error_Offline_Text:"The network is unreachable, please click Refresh",Error_Play_Text:"Error occured while playing",Error_Retry_Text:" Please close or refresh",Error_AuthKey_Text:"Authentication expired or the domain is not in white list",Error_H5_Not_Support_Text:"The format/codec of video is not supported",Error_Not_Support_M3U8_Text:"The format of m3u8 is not supported by this explorer",Error_Not_Support_MP4_Text:"The format of mp4\xa0is not supported by this explorer",Error_Not_Support_encrypt_Text:"To play the encrypted video,please set encryptType to 1",Error_Encrypt_Fetch_Failed_Text:"Failed to fetch the encrypted video",Error_Vod_URL_Is_Empty_Text:"The url is empty",Error_Vod_Fetch_Urls_Text:"Error occured when fetch urls from vod service\uff0cplease close or refresh",Fetch_Playauth_Error:"Error occured when fetch playauth close or refresh",Error_Playauth_Decode_Text:"PlayAuth parse failed",Error_Vid_Not_Same_Text:"Cannot renew url due to vid changed",Error_Playauth_Expired_Text:"Playauth expired, please close or refresh",Error_MTS_Fetch_Urls_Text:"Error occurred while requesting mst server",Error_Load_M3U8_Failed_Text:"The m3u8 file loaded failed,possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Error_Load_M3U8_Timeout_Text:"Timeout error occored\xa0when the\xa0m3u8 file loaded",Error_Liveshift_M3U8_Not_Found_Text:"No more liveshift video avaliable",Error_M3U8_Decode_Text:"The m3u8 file decoded failed",Error_TX_Decode_Text:"Video decoded failed",Error_Manifest_Decode_Text:"Failed to parse manifest",Error_Waiting_Timeout_Text:"Buffering timeout,\xa0please close or refresh",Error_Invalidate_Source:"Video shoud be mp4\u3001mp3\u3001m3u8\u3001mpd or flv",Error_Empty_Source:"Video URL shouldn't be empty",Error_Vid_Empty_Source:"vid's video URL hasn't been fetched",Error_Mediaauth_Empty_Source:"mediaAuth's video URL hasn't been fetched",Error_Fetch_NotStream:"The vid has no stream to play",Error_Fetch_Media_Not_Found:"Data is not found",Error_Not_Found:"Url is not found",Error_Drm_License_Request_Failed:"DRM license request failed",Error_Drm_Not_Supported:"DRM in not supported",Error_Drm_Load:"DRM load error",Error_Drm_No_Sts:"STS(accessKeyId/accessKeySecret/securityToken) is required for DRM playback",Error_Drm_Params_Missing:"Parameters for drm.widevine/fairplay, etc. are missing",Error_Region_Block_Text:"This video is not available in your region",Error_SW_Conflict:"Service Worker conflict. Please try disabling browser extensions, restarting the browser, and closing other tabs.",Error_SW_Register_Failed:"Service Worker registration failed.",Error_SW_ScriptURL_Empty:"Please provide the swScriptURL parameter.",Error_SW_ScriptURL_Https:"The swScriptURL parameter must use an absolute address with https:// protocol.",Error_SW_ScriptURL_Scope:"The swScriptURL (subpath: @scope1@) and the current webpage (subpath: @scope2@) must be under the same subpath.",Error_SW_Version_Not_Match:"The version number of swScriptURL (@swVersion@) must match the player version (@playerVersion@).",Error_SW_ScriptURL_ILlegal:"Please provide a valid swScriptURL(@detail@).",Error_SW_Https_required:"Https is required when playing Vod's encription video",Tip_Err_Common:"please contact us for support, the error detail is:<br />",Tip_Err_Common_Short:"the error detail is:<br />",Tip_Drm_Request_Err:"The request failed with an error, please check the browser console to check whether it is caused by DNS, HTTPS certificates, or network problems. <br/> If the above tests are fine,",Tip_Drm_Secure_Context:"DRM can only be accessed under https, localhost, 127.0.0.1 web pages, and manifest and media segments must also use https.",Tip_Drm_Key_System_Unavailable:"1. This browser does not support Widevine or the current Widevine configuration<br/>2. The request that pops up in the browser was rejected by the user<br/>3. Please open the browser settings, look for the [Protected Content] setting and allow",Tip_Drm_File_Not_Allowed:"Do not use the file:// to open the file directly, you need to use a https:// to access the file",Tip_Drm_Playlist_Hierarchy:"HLS playlist level error, the main list needs to be master playlist",Tip_Drm_Info_Missing:"Please make sure the parameters of drm.widevine/fairplay you provided are valid",Tip_Drm_Unsupported:"Your browser does not currently support Widevine. If you are using Chrome, you can visit the URL chrome://components/ to locate the 'Widevine Content Decryption Module' and click on 'Update'. If this module is not present, the browser will be unable to play DRM-protected videos.",Tip_Err_Decode:"The decoding error refers to the current audio/video frame is not compatible with the browser, you can try the following methods: <br />1.chrome/edge browser open the chrome://flags, search for Hardware-accelerated video decode, select disabled<br />2.If the decoding error persists, please transcode the video to fix the problem frame",Tip_Err_Rts_Http_Failed:"The error indicates that the RTS streaming request encountered an HTTP error, which is usually related to HTTPS certificate, DNS resolution, or network connectivity issues. Due to browser restrictions on JavaScript, the player cannot obtain detailed error information. If you need further information, you can follow these steps:<br>Right-click on a blank area of the browser and select 'Inspect'.<br>2.In the newly opened interface, select 'Console'.<br>3.Check for any red error messages:<br>If you see 'SSL', it means that you have not correctly configured the HTTPS certificate for the streaming domain.<br>If you see 'NOT RESOLVED', it means that the DNS resolution for your domain has failed.<br>You can also use the <a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>ApsaraVideo Live Diagnostic Tool</a> for self-diagnosis.",Tip_Err_Not_found:"For live streams, this might be due to the broadcast not starting yet, having ended, or being disrupted. For on-demand videos, it could indicate the video is unavailable.",Tip_Err_Blocked:"If you have a network proxy enabled, please try disabling it and then retrying.",Tip_Err_Splayer:"For best practices regarding playback of H.265/H.266 encoded videos, please refer to",Tip_Err_Splayer_Doc:" this document.",Tip_SW_Register:"1.Please access the webpage using HTTPS<br>2.Please ensure that the provided swScriptURL is a complete address starting with https:// and is accessible.",Tip_License_Required:"Starting 2024-12-01, the new version of the player must be configured with a license to use. The license for the basic functions of the player can be applied for free and is valid for 1 year. Please apply in advance to avoid any disruption in usage ",Tip_License_Params:"After completing the application, please refer to this document to pass the license information into the SDK ",Tip_License_Check:"Please ensure that the provided license key/domain parameters match exactly with what were obtained from the VOD/LIVE console.",Tip_License_Domain:"The current website domain does not match with your licensed domain",Tip_License_Feature:"The feature is not authorized by your license:",Tip_License_Reason:"The playback failed because your license verification was unsuccessful. Specific reason:",Live_End:"Live has finished",Play_Before_Fullscreen:"Please play before fullscreen",Can_Not_Seekable:"Can not seek to this position",Cancel_Text:"Cancel",OK_Text:"OK",Auto_Stream_Tip_Text:"Internet is slow, does switch to $$",Request_Block_Text:"This request is blocked, the video Url should be over https",Open_Html_By_File:"Html page should be on the server",Maybe_Cors_Error:"there is a network error, possibly due to HTTPS certificate issues, cross-origin problems, or DNS resolution failures",Speed_Switch_To:"Speed switch to ",Curent_Volume:"Current volume:",Volume_Mute:"set to mute",Volume_UnMute:"set to unmute",ShiftLiveTime_Error:"Live start time should not be greater than over time",Error_Not_Support_Format_On_Mobile:"flv\u3001rmtp can't be supported on mobile\uff0cplease use m3u8",Error_Not_Support_Mse_Flv:"Flv is not supported by this browser.",Error_Not_Support_Mse_Dash:"Dash is not supported by this browser.",Error_Not_Support_RTMP:"RTMP is not supported by this browser.",SessionId_Ticket_Invalid:"please assign value for sessionId and ticket properties",Http_Error:" An HTTP network request failed with an error, but not from the server.",Http_Timeout:"A network request timed out",DRM_License_Expired:"DRM license is expired, please refresh",Not_Support_DRM:"Browser doesn't support DRM",CC_Switch_To:"Subtitle switch to ",AudioTrack_Switch_To:"Audio tracks switch to ",Subtitle:"Subtitle/CC",AudioTrack:"Audio Track",Quality:"Quality",Auto:"Auto",Quality_Switch_To:"Quality switching to ",Fullscreen:"Full Screen",Setting:"Settings",Volume:"Volume",Play:"Play",Pause:"Pause",CloseSubtitle:"Close CC",OpenSubtitle:"Open CC",ExistFullScreen:"Exit Full Screen",Muted:"Muted",Retry:"Retry",SwitchToLive:"Return to live",iOSNotSupportVodEncription:"Versions of iOS below 17.1 doesn't support Vod's private encription video",iOSVodEncriptionBlacklist:"Please use Safari/Chrome browser to play Vod's private encription video",UseChromeForVodEncription:"This browser desn't suport Vod's encription video, please use latest Chrome/Edge",Record_Not_Allowed:"Recording or playing in seperated window is not allowed, please disable related plugins or switch browser.",License_Empty:"License params are required",License_Not_Found:"Unregistered license",License_Expired:"Expired license",License_License_Key_Invalid:"Invalid license key",License_Domain_Invalid:"Unexpected domain",License_Feature_Unauthorized:"Unauthorized feature",Rts_Err_Http_Signal_Error:"(RTS)http signal error",Rts_Err_Play_Failed:"(RTS)play faild error",Rts_Err_No_Data_For:"s received no data",Rts_Err_Browser_Not_Support:"(RTS)browser not support",Rts_Err_Not_Support_Webrtc:"(RTS)not support webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)browser version too low",Rts_Err_Not_Support_H264:"(RTS)not support h264",Rts_Err_Create_Offer_Error:"(RTS)create offer error",Rts_Err_Play_Url_Error:"(RTS)play url error",Rts_Err_Subscribe_Nonthing:"(RTS)subscribe nonthing",Rts_Err_Http_Request_Failed:"(RTS)HTTP request failed",Rts_Err_Http_Answer_Failed:"(RTS)answer failed",Rts_Err_PeerConnection_Unknown:"(RTS)Unknown PeerConnection",Splayer_Err_Env_Check:"(SP)This browser can't play this media",Splayer_Err_Coroutine:"(SP)Coroutine error",Splayer_Err_Decoder:"(SP)Decode error",Splayer_Err_Buffering:"(SP)Buffering error",Splayer_Err_Parser_Not_Found:"(SP)Media container is not supported"}},{}],24:[function(a,e,t){function o(e,t,r){var i=p(e),n="",o=d(),n="en-us"==o?a("./en-us"):"zh-cn"==o?a("./zh-cn"):t[o];r&&(n=Object.assign({},n,r[o])),s.set(i,JSON.stringify(n)),u(e,n),r&&a("../lib/constants").updateByLanguage()}var r=a("../config"),s=a("../lib/storage"),i=(a("../lib/io"),"aliplayer_lang_data"),l="aliplayer_lang",c=function(){var e;return void 0!==window[l]&&window[l]||(e=(e=(navigator.language||navigator.browserLanguage).toLowerCase())&&-1<e.indexOf("zh")?"zh-cn":"en-us",window[l]=e),window[l]},u=function(e,t){e=p(e);window[e]=t},d=function(){return c()},p=function(e){var t=d();return i+"_"+(e=e||"h5")+"_"+r.h5Version.replace(/\./g,"_")+"_"+t};e.exports.setCurrentLanguage=function(e,t,r,i){var n=window[l];"en-us"==(e=void 0!==e&&e?e:c())||"zh-cn"==e||r&&r[e]||(console.warn("There is no language resource for "+e+", please specify the language resource by languageTexts property"),e="zh-cn"),window[l]=e,o(t,r,i),e!=n&&a("../lib/constants").updateByLanguage()},e.exports.getCurrentLanguage=c,e.exports.getLanguageData=function(e,t){e=p(e);return window[e]},e.exports.load=o,e.exports.get=function(e,t,r){t=p(t=t||"h5"),t=window[t];if(t){var i=t[e];if(r)for(var n in r)i=i.replace(new RegExp("@"+n+"@","g"),r[n]);return i}}},{"../config":15,"../lib/constants":29,"../lib/io":41,"../lib/storage":48,"./en-us":23,"./zh-cn":25}],25:[function(e,t,r){t.exports={OD:"\u539f\u753b",FD:"\u6d41\u7545",LD:"\u6807\u6e05",SD:"\u9ad8\u6e05",HD:"\u8d85\u6e05","2K":"2K","4K":"4K",FHD:"\u5168\u9ad8\u6e05",XLD:"\u6781\u901f",SQ:"\u666e\u901a\u97f3\u8d28",HQ:"\u9ad8\u97f3\u8d28",Speed:"\u500d\u901f",Speed_05X_Text:"0.5X",Speed_1X_Text:"\u6b63\u5e38",Speed_125X_Text:"1.25X",Speed_15X_Text:"1.5X",Speed_2X_Text:"2X",Speed_Long_Press:"\u500d\u901f\u64ad\u653e\u4e2d",Quality_Change_Fail_Switch_Text:"\u4e0d\u80fd\u64ad\u653e\uff0c\u5207\u6362\u4e3a",Quality_Change_Text:"\u6b63\u5728\u4e3a\u60a8\u5207\u6362\u5230 ",Quality_Change_Result:"\u5df2\u5207\u6362\u5230 ",Quality_The_Url:"\u6b64\u5730\u5740",Refresh_Text:"\u5237\u65b0",Detection_Text:"\u67e5\u770b\u5efa\u8bae",Cancel:"\u53d6\u6d88",Mute:"\u9759\u97f3",Click_To_Unmute:"\u70b9\u51fb\u53d6\u6d88\u9759\u97f3",Snapshot:"\u622a\u56fe",Play_DateTime:"\u64ad\u653e\u65f6\u95f4",Default:"\u9ed8\u8ba4",AutoPlayDelayDisplayText:"$$\u79d2\u4ee5\u540e\u5f00\u59cb\u64ad\u653e",Error_Load_Abort_Text:"\u83b7\u53d6\u6570\u636e\u8fc7\u7a0b\u88ab\u4e2d\u6b62",Error_Network_Text:"\u7f51\u7edc\u9519\u8bef\u52a0\u8f7d\u6570\u636e\u5931\u8d25",Error_Decode_Text:"\u89e3\u7801\u9519\u8bef",Error_No_Decoder_Text:"\u4e0d\u652f\u6301\u6b64\u7f16\u7801\u683c\u5f0f",Error_Server_Network_NotSupport_Text:"\u670d\u52a1\u5668\u3001\u7f51\u7edc\u9519\u8bef\u6216\u683c\u5f0f\u4e0d\u652f\u6301",Error_Offline_Text:"\u7f51\u7edc\u4e0d\u53ef\u7528\uff0c\u8bf7\u786e\u5b9a",Error_Play_Text:"\u64ad\u653e\u51fa\u9519\u5566",Error_Retry_Text:"\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_AuthKey_Text:"\u53ef\u80fd\u9274\u6743\u8fc7\u671f\u3001\u57df\u540d\u4e0d\u5728\u767d\u540d\u5355\u6216\u8bf7\u6c42\u88ab\u62e6\u622a",Error_H5_Not_Support_Text:"\u4e0d\u652f\u6301\u6b64\u683c\u5f0f\u7684\u89c6\u9891",Error_Not_Support_M3U8_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301m3u8\u89c6\u9891\u64ad\u653e",Error_Not_Support_MP4_Text:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301mp4\u89c6\u9891\u64ad\u653e",Error_Not_Support_encrypt_Text:"\u64ad\u653e\u79c1\u6709\u52a0\u5bc6\u89c6\u9891\uff0c\u8bf7\u8bbe\u7f6e\u5c5e\u6027encryptType\u4e3a1",Error_Encrypt_Fetch_Failed_Text:"\u8bf7\u6c42\u52a0\u5bc6\u5730\u5740\u5931\u8d25",Error_Vod_URL_Is_Empty_Text:"\u83b7\u53d6\u64ad\u653e\u5730\u5740\u4e3a\u7a7a",Error_Vod_Fetch_Urls_Text:"\u70b9\u64ad\u63a5\u53e3\u5f02\u5e38\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Fetch_Playauth_Error:"\u83b7\u53d6\u64ad\u653e\u51ed\u8bc1\u51fa\u9519\u5566\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Playauth_Decode_Text:"playauth\u89e3\u6790\u9519\u8bef",Error_Vid_Not_Same_Text:"\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4",Error_Playauth_Expired_Text:"\u51ed\u8bc1\u5df2\u8fc7\u671f\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_MTS_Fetch_Urls_Text:"MTS\u83b7\u53d6\u53d6\u6570\u5931\u8d25",Error_Load_M3U8_Failed_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u5931\u8d25,\u53ef\u80fd\u662fhttps\u8bc1\u4e66\u3001\u8de8\u57df\u95ee\u9898\u6216DNS\u89e3\u6790\u5931\u8d25",Error_Load_M3U8_Timeout_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u8d85\u65f6",Error_Liveshift_M3U8_Not_Found_Text:"\u6ca1\u6709\u66f4\u591a\u65f6\u79fb\u89c6\u9891\u4e86",Error_M3U8_Decode_Text:"\u83b7\u53d6m3u8\u6587\u4ef6\u89e3\u6790\u5931\u8d25",Error_TX_Decode_Text:"\u89e3\u6790\u6570\u636e\u51fa\u9519",Error_Manifest_Decode_Text:"Manifest\u89e3\u6790\u51fa\u9519",Error_Waiting_Timeout_Text:"\u7f13\u51b2\u6570\u636e\u8d85\u65f6\uff0c\u8bf7\u5c1d\u8bd5\u9000\u51fa\u91cd\u8bd5\u6216\u5237\u65b0",Error_Invalidate_Source:"\u64ad\u653e\u5730\u5740\u683c\u5f0f\u9700\u8981\u4e3amp4\u3001mp3\u3001m3u8\u3001mpd\u6216flv",Error_Empty_Source:"\u64ad\u653e\u5730\u5740\u4e0d\u80fd\u4e3a\u7a7a",Error_Vid_Empty_Source:"vid\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Mediaauth_Empty_Source:"mediaAuth\u5bf9\u5e94\u7684\u89c6\u9891\u5730\u5740\u8fd8\u672a\u83b7\u53d6\u5230",Error_Fetch_NotStream:"\u6b64vid\u6ca1\u6709\u53ef\u64ad\u653e\u89c6\u9891",Error_Fetch_Media_Not_Found:"\u6570\u636e\u4e0d\u5b58\u5728\u6216\u5df2\u88ab\u5220\u9664",Error_Not_Found:"\u64ad\u653e\u5730\u5740\u4e0d\u5b58\u5728",Error_Drm_License_Request_Failed:"DRM License \u8bf7\u6c42\u5931\u8d25",Error_Drm_Not_Supported:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 DRM \u64ad\u653e",Error_Drm_Load:"DRM \u64ad\u653e\u9519\u8bef",Error_Drm_No_Sts:"DRM \u64ad\u653e\u9700\u8981\u4f7f\u7528STS(accessKeyId/accessKeySecret/securityToken)",Error_Drm_Params_Missing:"\u7f3a\u5c11drm.widevine/fairplay\u7b49\u53c2\u6570",Error_Region_Block_Text:"\u60a8\u6240\u5728\u7684\u5730\u533a\u65e0\u6cd5\u89c2\u770b\u8be5\u89c6\u9891",Error_SW_Conflict:"ServiceWorker\u51b2\u7a81\uff0c\u8bf7\u5c1d\u8bd5\u7981\u7528\u6d4f\u89c8\u5668\u63d2\u4ef6\u3001\u91cd\u542f\u6d4f\u89c8\u5668\u5e76\u5173\u95ed\u5176\u4ed6\u7f51\u9875",Error_SW_Register_Failed:"Service Worker\u6ce8\u518c\u5931\u8d25",Error_SW_ScriptURL_Empty:"\u8bf7\u4f20\u5165 swScriptURL \u53c2\u6570",Error_SW_ScriptURL_Https:"swScriptURL\u53c2\u6570\u8bf7\u4f7f\u7528 https:// \u534f\u8bae\u7684\u7edd\u5bf9\u5730\u5740",Error_SW_ScriptURL_Scope:"swScriptURL(\u5b50\u8def\u5f84:@scope1@)\u548c\u5f53\u524d\u7f51\u9875(\u5b50\u8def\u5f84:@scope2@)\u5fc5\u987b\u5728\u540c\u4e00\u4e2a\u5b50\u8def\u5f84\u4e0b",Error_SW_Version_Not_Match:"swScriptURL\u7684\u7248\u672c\u53f7(@swVersion@)\u5fc5\u987b\u548c\u64ad\u653e\u5668\u7248\u672c(@playerVersion@)\u53f7\u4e00\u81f4",Error_SW_ScriptURL_ILlegal:"\u8bf7\u4f20\u5165\u5408\u6cd5\u7684swScriptURL(@detail@)",Error_SW_Https_required:"\u79c1\u6709\u52a0\u5bc6\u64ad\u653e\u9700\u8981\u4f7f\u7528 https \u73af\u5883",Tip_Err_Common:"\u60a8\u53ef\u8054\u7cfb\u552e\u540e\u652f\u6301\uff0c\u9519\u8bef\u8be6\u60c5:<br />",Tip_Err_Common_Short:"\u9519\u8bef\u8be6\u60c5:<br />",Tip_Drm_Request_Err:"\u8bf7\u6c42\u51fa\u9519\uff0c\u8bf7\u5148\u67e5\u770b\u6d4f\u89c8\u5668\u63a7\u5236\u53f0\uff0c\u68c0\u67e5\u662f\u5426\u7531\u57df\u540d\u89e3\u6790\u3001https\u8bc1\u4e66\u3001\u6216\u7f51\u7edc\u95ee\u9898\u5f15\u8d77\u3002<br />\u82e5\u4ee5\u4e0a\u68c0\u67e5\u6ca1\u95ee\u9898\uff0c",Tip_Drm_Secure_Context:"DRM\u4ec5\u53ef\u4ee5\u5728https\u3001localhost\u3001127.0.0.1\u7f51\u9875\u4e0b\u8bbf\u95ee\uff0c\u540c\u65f6manifest\u548c\u5207\u7247\u4e5f\u5fc5\u987b\u4f7f\u7528https\u3002",Tip_Drm_Key_System_Unavailable:"1.\u6b64\u6d4f\u89c8\u5668\u4e0d\u652f\u6301Widevine\u6216\u8005\u5f53\u524d\u7684Widevine\u914d\u7f6e<br />2.\u6d4f\u89c8\u5668\u5f39\u51fa\u7684\u8bf7\u6c42\u88ab\u7528\u6237\u62d2\u7edd\u4e86<br />3.\u8bf7\u6253\u5f00\u6d4f\u89c8\u5668\u8bbe\u7f6e\uff0c\u67e5\u627e\u5173\u4e8e\u3010\u53d7\u4fdd\u62a4\u7684\u5185\u5bb9\u3011\u8bbe\u7f6e\u5e76\u5141\u8bb8",Tip_Drm_File_Not_Allowed:"\u8bf7\u4e0d\u8981\u4f7f\u7528file://\u76f4\u63a5\u6253\u5f00\u6587\u4ef6\uff0c\u9700\u8981\u4f7f\u7528https://\u8bbf\u95ee\u6587\u4ef6",Tip_Drm_Playlist_Hierarchy:"HLS\u64ad\u653e\u5217\u8868\u5c42\u7ea7\u9519\u8bef\uff0c\u4e3b\u5217\u8868\u9700\u8981\u662f master playlist",Tip_Drm_Info_Missing:"\u8bf7\u68c0\u67e5\u4f20\u5165\u7684drm.widevine/fairplay\u7b49\u53c2\u6570\u662f\u5426\u6709\u6548",Tip_Drm_Unsupported:"\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 Widevine\uff0c\u5982\u679c\u662f Chrome\uff0c\u53ef\u4ee5\u8bbf\u95ee chrome://components/\uff0c\u67e5\u627e Widevine Content Decryption Module\uff0c\u5e76\u70b9\u51fb\u66f4\u65b0\u3002\u5982\u679c\u6ca1\u6709\u6b64\u6a21\u5757\uff0c\u5219\u8be5\u6d4f\u89c8\u5668\u65e0\u6cd5\u64ad\u653e DRM \u89c6\u9891\u3002",Tip_Err_Decode:"\u89e3\u7801\u9519\u8bef\u6307\u7684\u662f\u5f53\u524d\u97f3/\u89c6\u9891\u5e27\u4e0e\u6d4f\u89c8\u5668\u4e0d\u517c\u5bb9\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4ee5\u4e0b\u65b9\u5f0f\uff1a<br />1.chrome/edge \u6d4f\u89c8\u5668\u6253\u5f00chrome://flags\uff0c\u641c\u7d22 Hardware-accelerated video decode\uff0c\u9009\u62e9 disabled<br />2.\u5982\u679c\u89e3\u7801\u9519\u8bef\u4ecd\u7136\u5b58\u5728\uff0c\u8bf7\u5bf9\u89c6\u9891\u8fdb\u884c\u8f6c\u7801\u5904\u7406\uff0c\u4ee5\u4fee\u590d\u95ee\u9898\u5e27<br />3.firefox\u6d4f\u89c8\u5668\u8bf7\u6253\u5f00about:support\uff0c\u4e0b\u62c9\u627e\u5230\u3010\u89e3\u7801\u5668\u652f\u6301\u4fe1\u606f\u3011\uff0c\u5982\u679c\u6ca1\u6709AAC\u5b57\u6837\uff0c\u4ee3\u8868\u4e0d\u652f\u6301\u97f3\u9891\u89e3\u7801\uff0c\u8bf7\u66f4\u6362\u6d4f\u89c8\u5668",Tip_Err_Rts_Http_Failed:"\u8be5\u9519\u8bef\u6307\u7684\u662fRTS\u62c9\u6d41\u8bf7\u6c42\u9047\u5230\u4e86\u4e00\u4e2ahttp\u9519\u8bef\uff0c\u4e00\u822c\u6765\u8bf4\u662fhttps\u8bc1\u4e66\u3001DNS\u89e3\u6790\u6216\u8005\u7f51\u7edc\u8fde\u901a\u6027\u95ee\u9898\uff0c\u7531\u4e8e\u6d4f\u89c8\u5668\u5bf9JS\u7684\u9650\u5236\uff0c\u64ad\u653e\u5668\u65e0\u6cd5\u53d6\u5f97\u8be6\u7ec6\u7684\u9519\u8bef\u4fe1\u606f\uff0c\u9700\u8981\u8fdb\u4e00\u6b65\u6392\u67e5\uff0c\u60a8\u53ef\u6309\u7167\u4ee5\u4e0b\u64cd\u4f5c\uff1a<br>1.\u53f3\u952e\u6d4f\u89c8\u5668\u7a7a\u767d\u5904\uff0c\u9009\u62e9\u3010\u68c0\u67e5\u30112.\u5728\u65b0\u6253\u5f00\u7684\u754c\u9762\u4e2d\u9009\u62e9\u3010\u63a7\u5236\u53f0\u30113.\u67e5\u770b\u7ea2\u8272\u62a5\u9519\uff1a<br>\u5982\u679c\u6709SSL\u5b57\u6837\uff0c\u5219\u4ee3\u8868\u60a8\u6ca1\u6709\u4e3a\u62c9\u6d41\u57df\u540d\u6b63\u786e\u5730\u914d\u7f6ehttps\u8bc1\u4e66<br>\u5982\u679c\u6709NOT RESOLVED\u5b57\u6837\uff0c\u5219\u4ee3\u8868\u60a8\u7684\u57df\u540dDNS\u89e3\u6790\u5931\u8d25<br>\u60a8\u4e5f\u4f7f\u7528<a style='color:white;text-decoration:underline;' href='https://live.console.aliyun.com/#/tool/url' target='_blank'>\u963f\u91cc\u4e91\u76f4\u64ad\u8bca\u65ad\u5de5\u5177</a>\u8fdb\u884c\u81ea\u52a9\u6392\u67e5",Tip_Err_Not_found:"\u5982\u679c\u662f\u76f4\u64ad\uff0c\u53ef\u80fd\u662f\u76f4\u64ad\u672a\u5f00\u59cb/\u5df2\u505c\u6b62/\u5df2\u65ad\u6d41\uff1b\u5982\u679c\u662f\u70b9\u64ad\uff0c\u53ef\u80fd\u662f\u89c6\u9891\u4e0d\u5b58\u5728\u3002",Tip_Err_Blocked:"\u5982\u679c\u60a8\u5f00\u542f\u4e86\u7f51\u7edc\u4ee3\u7406\uff0c\u8bf7\u5173\u95ed\u540e\u91cd\u8bd5\u3002",Tip_Err_Splayer:"\u5173\u4e8e H.265/H.266 \u64ad\u653e\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u8bf7\u53c2\u8003",Tip_Err_Splayer_Doc:"\u6b64\u6587\u6863\u3002",Tip_SW_Register:"1.\u8bf7\u4f7f\u7528https\u8bbf\u95ee\u7f51\u9875<br>2.\u8bf7\u786e\u4fdd\u4f20\u5165\u7684swScriptURL\u662f\u4ee5https://\u5f00\u5934\u7684\u5b8c\u6574\u5730\u5740\uff0c\u4e14\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee",Tip_License_Required:"2024\u5e7412\u67081\u65e5\u8d77\uff0c\u65b0\u7248\u672c\u64ad\u653e\u5668\u9700\u8981\u914d\u7f6eLicense\u624d\u53ef\u4ee5\u4f7f\u7528\uff0c\u64ad\u653e\u5668\u57fa\u7840\u529f\u80fdLicense\u514d\u8d39\u7533\u8bf7\uff0c\u6709\u6548\u671f 1 \u5e74\uff0c\u8bf7\u63d0\u524d\u7533\u8bf7\u4ee5\u907f\u514d\u65e0\u6cd5\u4f7f\u7528",Tip_License_Params:"\u7533\u8bf7\u5b8c\u6210\u540e\uff0c\u8bf7\u53c2\u8003\u6b64\u6587\u6863\u5c06License\u4fe1\u606f\u4f20\u5165SDK",Tip_License_Check:"\u8bf7\u786e\u4fdd\u4f20\u5165\u7684 license key/domain \u53c2\u6570\u548c\u70b9\u64ad/\u76f4\u64ad\u63a7\u5236\u53f0\u4e0a\u83b7\u53d6\u7684\u5b8c\u5168\u4e00\u81f4",Tip_License_Domain:"\u5f53\u524d\u7f51\u9875\u57df\u540d\u548c\u60a8\u7684 license \u6388\u6743\u57df\u540d\u4e0d\u4e00\u81f4",Tip_License_Feature:"\u60a8\u7684license\u672a\u6388\u6743\u529f\u80fd\uff1a",Tip_License_Reason:"\u64ad\u653e\u5931\u8d25\uff0c\u56e0\u4e3a\u60a8\u7684 License \u6821\u9a8c\u672a\u901a\u8fc7\uff0c\u5177\u4f53\u539f\u56e0\uff1a",Live_End:"\u4eb2\uff0c\u76f4\u64ad\u5df2\u7ed3\u675f",Play_Before_Fullscreen:"\u64ad\u653e\u540e\u518d\u5168\u5c4f",Can_Not_Seekable:"\u4e0d\u80fdseek\u5230\u8fd9\u91cc",Cancel_Text:"\u53d6\u6d88",OK_Text:"\u786e\u8ba4",Auto_Stream_Tip_Text:"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u662f\u5426\u5207\u6362\u5230$$",Request_Block_Text:"\u6d4f\u89c8\u5668\u5b89\u5168\u7b56\u7565\u89c6\u9891\u5730\u5740\u4e0d\u80fd\u4e3ahttp\u534f\u8bae\uff0c\u4e0e\u7f51\u7ad9https\u534f\u8bae\u4e0d\u4e00\u81f4",Open_Html_By_File:"\u4e0d\u80fd\u76f4\u63a5\u5728\u6d4f\u89c8\u5668\u6253\u5f00html\u6587\u4ef6\uff0c\u8bf7\u90e8\u7f72\u5230\u670d\u52a1\u7aef",Maybe_Cors_Error:"\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25\uff0c\u53ef\u80fd\u662fhttps\u8bc1\u4e66\u3001\u8de8\u57df\u95ee\u9898\u6216DNS\u89e3\u6790\u5931\u8d25",Speed_Switch_To:"\u500d\u901f\u5207\u6362\u5230 ",Curent_Volume:"\u5f53\u524d\u97f3\u91cf\uff1a",Volume_Mute:"\u8bbe\u7f6e\u4e3a\u9759\u97f3",Volume_UnMute:"\u8bbe\u7f6e\u4e3a\u975e\u9759\u97f3",ShiftLiveTime_Error:"\u76f4\u64ad\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u76f4\u64ad\u7ed3\u675f\u65f6\u95f4",Error_Not_Support_Format_On_Mobile:"\u79fb\u52a8\u7aef\u4e0d\u652f\u6301flv\u3001rmtp\u89c6\u9891\uff0c\u8bf7\u4f7f\u7528m3u8",Error_Not_Support_Mse_Flv:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 flv \u89c6\u9891",Error_Not_Support_Mse_Dash:"\u5f53\u524d\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 dash \u89c6\u9891",Error_Not_Support_RTMP:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 rtmp \u89c6\u9891",SessionId_Ticket_Invalid:"DRM\u89c6\u9891\u64ad\u653e\uff0csessionId\u548cticket\u5c5e\u6027\u4e0d\u80fd\u4e3a\u7a7a",Http_Error:"Http\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25",Http_Timeout:"http\u8bf7\u6c42\u8d85\u65f6",DRM_License_Expired:"DRM license\u8d85\u65f6\uff0c\u8bf7\u5237\u65b0",Not_Support_DRM:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301DRM\u89c6\u9891\u7684\u64ad\u653e\u6216\u672a\u53d7\u5230\u7528\u6237\u8bb8\u53ef",CC_Switch_To:"\u5b57\u5e55\u5207\u6362\u5230 ",AudioTrack_Switch_To:"\u97f3\u8f68\u5207\u6362\u5230 ",Subtitle:"\u5b57\u5e55",AudioTrack:"\u97f3\u8f68",Quality:"\u6e05\u6670\u5ea6",Auto:"\u81ea\u52a8",Quality_Switch_To:"\u6b63\u5728\u5207\u6362\u6e05\u6670\u5ea6\u81f3 ",Fullscreen:"\u5168\u5c4f",Setting:"\u8bbe\u7f6e",Volume:"\u97f3\u91cf",Play:"\u64ad\u653e",Pause:"\u6682\u505c",CloseSubtitle:"\u5173\u95ed\u5b57\u5e55",OpenSubtitle:"\u6253\u5f00\u5b57\u5e55",ExistFullScreen:"\u9000\u51fa\u5168\u5c4f",Muted:"\u9759\u97f3",Retry:"\u91cd\u8bd5",SwitchToLive:"\u8fd4\u56de\u76f4\u64ad",iOSNotSupportVodEncription:"iOS17.1\u4ee5\u4e0b\u4e0d\u652f\u6301\u963f\u91cc\u4e91\u89c6\u9891\u79c1\u6709\u52a0\u5bc6\u64ad\u653e",iOSVodEncriptionBlacklist:"\u8bf7\u4f7f\u7528Safari/Chrome\u6d4f\u89c8\u5668\u64ad\u653e\u52a0\u5bc6\u89c6\u9891",UseChromeForVodEncription:"\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u70b9\u64ad\u52a0\u5bc6\u64ad\u653e\uff0c\u8bf7\u4f7f\u7528\u6700\u65b0Chrome/Edge\u6d4f\u89c8\u5668",Record_Not_Allowed:"\u7981\u6b62\u5f55\u5c4f\u6216\u5c0f\u7a97\u53e3\u64ad\u653e\uff0c\u8bf7\u5173\u95ed\u63d2\u4ef6\u6216\u66f4\u6362\u6d4f\u89c8\u5668",License_Empty:"\u672a\u914d\u7f6eLicense",License_Not_Found:"License\u672a\u6ce8\u518c",License_Expired:"License\u5df2\u8fc7\u671f",License_License_Key_Invalid:"LicenseKey\u65e0\u6548",License_Domain_Invalid:"\u57df\u540d\u4e0d\u5339\u914d",License_Feature_Unauthorized:"\u529f\u80fd\u672a\u6388\u6743",Rts_Err_Http_Signal_Error:"(RTS)\u4fe1\u4ee4\u8bf7\u6c42\u5931\u8d25",Rts_Err_Play_Failed:"(RTS)\u64ad\u653e\u5931\u8d25",Rts_Err_No_Data_For:"\u79d2\u6ca1\u6709\u6570\u636e",Rts_Err_Browser_Not_Support:"(RTS)\u4e0d\u652f\u6301\u6b64\u6d4f\u89c8\u5668",Rts_Err_Not_Support_Webrtc:"(RTS)\u4e0d\u652f\u6301webrtc",Rts_Err_Browser_Version_Too_Low:"(RTS)\u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e",Rts_Err_Not_Support_H264:"(RTS)\u4e0d\u652f\u6301H264",Rts_Err_Create_Offer_Error:"(RTS)create offer\u5931\u8d25",Rts_Err_Play_Url_Error:"(RTS)\u64ad\u653eurl\u534f\u8bae\u9519\u8bef",Rts_Err_Subscribe_Nonthing:"(RTS)\u53c2\u6570\u8bbe\u7f6e\u9519\u8bef",Rts_Err_Http_Request_Failed:"(RTS)HTTP\u8bf7\u6c42\u5931\u8d25",Rts_Err_Http_Answer_Failed:"(RTS)answer\u5931\u8d25",Rts_Err_PeerConnection_Unknown:"(RTS)PeerConnection\u5f02\u5e38",Splayer_Err_Env_Check:"(SP)\u5f53\u524d\u73af\u5883\u4e0d\u652f\u6301\u64ad\u653e\u8be5\u89c6\u9891",Splayer_Err_Coroutine:"(SP)Coroutine \u9519\u8bef",Splayer_Err_Decode:"(SP)\u89e3\u7801\u9519\u8bef",Splayer_Err_Buffering:"(SP)\u7f13\u51b2\u533a\u9519\u8bef",Splayer_Err_Parser_Not_Found:"(SP)\u4e0d\u652f\u6301\u7684\u5a92\u4f53\u5bb9\u5668"}},{}],26:[function(e,t,r){var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";if(window.Uint8Array)for(var u=new Uint8Array(256),i=0;i<o.length;i++)u[o.charCodeAt(i)]=i;var s=function(e){for(var t="",r=0;r<e.length;r+=16e3){var i=e.subarray(r,r+16e3);t+=String.fromCharCode.apply(null,i)}return t};t.exports={decode:function(e){for(var t,r,i,n,o=.75*e.length,a=e.length,s=0,o=("="===e[e.length-1]&&(o--,"="===e[e.length-2])&&o--,new ArrayBuffer(o)),l=new Uint8Array(o),c=0;c<a;c+=4)t=u[e.charCodeAt(c)],r=u[e.charCodeAt(c+1)],i=u[e.charCodeAt(c+2)],n=u[e.charCodeAt(c+3)],l[s++]=t<<2|r>>4,l[s++]=(15&r)<<4|i>>2,l[s++]=(3&i)<<6|63&n;return o},encode:function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n+=3)i=(i=(i=(i+=o[t[n]>>2])+o[(3&t[n])<<4|t[n+1]>>4])+o[(15&t[n+1])<<2|t[n+2]>>6])+o[63&t[n+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i},unpackPlayReady:function(e){e=((e,t,r)=>{if(!e)return"";r||e.byteLength%2==0||console.log("Data has an incorrect length, must be even."),r=e instanceof ArrayBuffer?e:((r=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),r.buffer);for(var i=Math.floor(e.byteLength/2),n=new Uint16Array(i),o=new DataView(r),a=0;a<i;a++)n[a]=o.getUint16(2*a,t);return s(n)})(e,!0,!0);if(-1!=e.indexOf("PlayReadyKeyMessage")){for(var e=(new DOMParser).parseFromString(e,"application/xml"),t=e.getElementsByTagName("HttpHeader"),r={},i=0;i<t.length;++i){var n=t[i].querySelector("name"),o=t[i].querySelector("value");r[n.textContent]=o.textContent}return{header:r,changange:e.querySelector("Challenge").textContent}}console.log("PlayReady request is already unwrapped.")}}},{}],27:[function(e,t,r){function C(){C=function(){return a};var l,a={},e=Object.prototype,c=e.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(l){o=function(e,t,r){return e[t]=r}}function s(e,t,r,i){var n,o,a,s,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),i=new k(i||[]);return u(t,"_invoke",{value:(n=e,o=r,a=i,s=p,function(e,t){if(s===f)throw Error("Generator is already running");if(s===_){if("throw"===e)throw t;return{value:l,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var i=r.method,n=t.iterator[i];if(n===l)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=d(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;n=i.arg;return n?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,a);if(r){if(r===g)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===p)throw s=_,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=f;r=d(n,o,a);if("normal"===r.type){if(s=a.done?_:h,r.arg===g)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=_,a.method="throw",a.arg=r.arg)}})}),t}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p="suspendedStart",h="suspendedYield",f="executing",_="completed",g={};function y(){}function v(){}function m(){}var t={},b=(o(t,i,function(){return this}),Object.getPrototypeOf),b=b&&b(b(P([]))),S=(b&&b!==e&&c.call(b,i)&&(t=b),m.prototype=y.prototype=Object.create(t));function T(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;u(this,"_invoke",{value:function(r,i){function e(){return new s(function(e,t){!function t(e,r,i,n){var o,e=d(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==typeof r&&c.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):s.resolve(r).then(function(e){o.value=e,i(o)},function(e){return t("throw",e,i,n)});n(e.arg)}(r,i,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(t){if(t||""===t){var r,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}throw new TypeError(typeof t+" is not iterable")}return u(S,"constructor",{value:v.prototype=m,configurable:!0}),u(m,"constructor",{value:v,configurable:!0}),v.displayName=o(m,n,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o(e,n,"GeneratorFunction")),e.prototype=Object.create(S),e},a.awrap=function(e){return{__await:e}},T(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var o=new E(s(e,t,r,i),n);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(S),o(S,n,"Generator"),o(S,i,function(){return this}),o(S,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return o.type="throw",o.arg=r,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=c.call(n,"catchLoc"),s=c.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var o=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(r=n.completion).type&&(i=r.arg,x(n)),i}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),g}},a}function l(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}var c="undefined"==typeof Promise?e("es6-promise").Promise:Promise,u=e("./io"),d=e("../config");function p(){}function n(){var s;return s=C().mark(function e(t,r,i,o){var a,s;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),void 0===i&&(i=p),void 0===o&&(o=p),window.VideoxMuxer){e.next=14;break}e.prev=4,e.next=7;var n=r;return new c(function(e,t){var r="videox-muxer.min.js",i="https://"+d.domain+d.path+d.h5Version+"/splayer/"+r;n.assetPrefix&&(i=n.assetPrefix+"/splayer/"+r),u.loadJS(i,function(){e()},function(){t()})});case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(4),console.error("load videox-demuxer failed"),o("load videox-demuxer failed"),e.abrupt("return");case 14:a=window.VideoxMuxer.Demuxer,(s=new a({progressive:!0})).on("loadedmetadata",function(e){void 0===e&&(e={}),s.suspend(),s.destroy(),s=null,i(e)}),s.on("error",function(e){o(e),s.suspend(),s.destroy(),s=null}),s.load(t);case 19:case"end":return e.stop()}},e,null,[[4,9]])}),(n=function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){l(i,t,r,n,o,"next",e)}function o(e){l(i,t,r,n,o,"throw",e)}n(void 0)})}).apply(this,arguments)}t.exports=function(e,t,r,i){return n.apply(this,arguments)}},{"../config":15,"./io":41,"es6-promise":9}],28:[function(e,t,r){var i=e("./oo"),n=e("../player/base/event/eventtype");t.exports.stopPropagation=function(e){window.event?window.event.cancelBubble=!0:e.stopPropagation()},t.exports.register=function(e){e.util={stopPropagation:t.exports.stopPropagation},e.Component=i.extend,e.EventType=n.Player}},{"../player/base/event/eventtype":68,"./oo":44}],29:[function(e,t,r){function i(){t.exports.VideoErrorCodeText={1:n.get("Error_Load_Abort_Text"),2:n.get("Error_Network_Text"),3:n.get("Error_Decode_Text"),4:n.get("Error_Server_Network_NotSupport_Text")},t.exports.VideoLevels={0:n.get("OD"),640:n.get("FD"),960:n.get("LD"),1280:n.get("SD"),1920:n.get("HD"),2580:n.get("2K"),3840:n.get("4K")},t.exports.QualityLevels={OD:n.get("OD"),LD:n.get("LD"),FD:n.get("FD"),SD:n.get("SD"),HD:n.get("HD"),"2K":n.get("2K"),"4K":n.get("4K"),XLD:n.get("XLD"),FHD:n.get("FHD"),SQ:n.get("SQ"),HQ:n.get("HQ")},t.exports.SpeedLevels=[{key:.5,text:n.get("Speed_05X_Text")},{key:1,text:n.get("Speed_1X_Text")},{key:1.25,text:n.get("Speed_125X_Text")},{key:1.5,text:n.get("Speed_15X_Text")},{key:2,text:n.get("Speed_2X_Text")}]}var n=e("../lang/index");t.exports.LOAD_START="loadstart",t.exports.LOADED_METADATA="loadedmetadata",t.exports.LOADED_DATA="loadeddata",t.exports.PROGRESS="progress",t.exports.CAN_PLAY="canplay",t.exports.CAN_PLYA_THROUGH="canplaythrough",t.exports.PLAY="play",t.exports.PAUSE="pause",t.exports.ENDED="ended",t.exports.PLAYING="playing",t.exports.WAITING="waiting",t.exports.ERROR="error",t.exports.SUSPEND="suspend",t.exports.STALLED="stalled",t.exports.DASH_QUALITY_PROTOCOL="quality_index://",t.exports.AuthKeyExpiredEvent="authkeyexpired",t.exports.USER_EVENT_NAME="__user_events__",t.exports.PLAYER_SCOPE="__aliplayerMessage__",t.exports.SW_MSG_EVT={SETUP:"setup",SETUP_ACK:"setupAck",DISPOSE:"dispose",ENC_SEGMENT:"encSegment",DEC_SEGMENT:"decSegment",ABORT_SEGMENT:"abortSegment"},t.exports.DM_MSG_EVT={SETUP:"setup",DEMUX:"demux",RESULT:"result",FLUSH:"flush",DISPOSE:"dispose",DISPOSED:"disposed",ERROR:"error"},t.exports.PLAYER_SDK_CODE_LEGACY=9201,t.exports.PLAYER_SDK_CODE=9203,t.exports.FEATURE_ID_H265=30001,t.exports.FEATURE_ID_H266=30002,t.exports.LicenseResultCode={Success:0,NotFound:1,Expired:2,CertInvalid:3,WasmNotSupported:4,ResourceIncorrect:5,LicenseKeyInvalid:6,DomainInvalid:7},t.exports.LicenseErrorKey={Empty:"License_Empty",NotFound:"License_Not_Found",Expired:"License_Expired",CertInvalid:"License_Cert_Invalid",LicenseKeyInvalid:"License_License_Key_Invalid",DomainInvalid:"License_Domain_Invalid",Unauthorized:"License_Feature_Unauthorized"},t.exports.DRMKeySystem={4:"com.microsoft.playready",5:"com.widevine.alpha"},t.exports.EncryptionType={Private:1,Standard:2,ChinaDRM:3,PlayReady:4,Widevine:5},t.exports.VodEncryptionType={AliyunVoDEncryption:1,HLSEncryption:2,Widevine:5,"Widevine-FairPlay":5},t.exports.DRMType={Widevine:"Widevine",PlayReady:"PlayReady"},t.exports.ErrorCode={InvalidParameter:4001,AuthKeyExpired:4002,InvalidSourceURL:4003,NotFoundSourceURL:4004,StartLoadData:4005,LoadedMetadata:4006,PlayingError:4007,LoadingTimeout:4008,RequestDataError:4009,EncrptyVideoNotSupport:4010,FormatNotSupport:4011,PlayauthDecode:4012,PlayDataDecode:4013,NetworkUnavaiable:4014,UserAbort:4015,NetworkError:4016,URLsIsEmpty:4017,DrmLicenseRequestFailed:4018,RecordNotAllowed:4019,MediaNotFound:4020,DrmNotSupported:4021,DrmLoadError:4022,RegionBlock:4023,ModuleLoadError:4034,LicenseError:4035,CrossDomain:4027,OtherError:4400,ServerAPIError:4500,FlashNotInstalled:4600,RtsSignalError:4100,RtsPlayFailedError:4200,RtsNotSupportWebRtc:4110,RtsBrowserNotSupport:4111,RtsBrowserVersionTooLow:4112,RtsNotSupportH264:4113,RtsCreateOfferError:4114,RtsAutoPLayFaild:4115,RtsPlayUrlError:4116,RtsSubscribeNonthing:4117,RtsHtmlElementError:4118,RtsHtmlElementNotMatch:4119,RtsBrowserNotSupportRtc:4120,RtsHttpRequestFaild:4121,RtsHttpAnswerFaild:4122,RtsPeerConnectionUnknown:4123,SplayerEnvCheckError:4300,SplayerCoroutineError:4301,SplayerDecodeError:4302,SplayerBufferingError:4303,SplayerParserNotFound:4304},t.exports.AuthKeyExpired=7200,t.exports.AuthKeyRefreshExpired=7e3,t.exports.AuthInfoExpired=100,t.exports.VideoErrorCode={1:4015,2:4016,3:4013,4:4400},t.exports.RegionBlockMessages=["black location","denied by region block"],t.exports.IconType={FontClass:"fontclass",Symbol:"symbol",Sprite:"Sprite"},t.exports.SelectedStreamLevel="selectedStreamLevel",t.exports.SelectedCC="selectedCC",t.exports.HWDetectHvc1="HWDetectHvc1",t.exports.HWDetectHvc1Hls="HWDetectHvc1Hls",t.exports.HWDetectHev1="HWDetectHev1",t.exports.HWDetectHev1Hls="HWDetectHev1Hls",t.exports.WidthMapToLevel={0:"OD",640:"FD",960:"LD",1280:"SD",1920:"HD",2580:"2K",3840:"4K"};i(),t.exports.updateByLanguage=i},{"../lang/index":24}],30:[function(e,t,r){t.exports.get=function(e){for(var t=e+"",r=document.cookie.split(";"),i=0;i<r.length;i++){var n=r[i].trim();if(0==n.indexOf(t))return unescape(n.substring(t.length+1,n.length))}return""},t.exports.set=function(e,t,r){var i=new Date,r=(i.setTime(i.getTime()+24*r*60*60*1e3),"expires="+i.toGMTString());document.cookie=e+"="+escape(t)+"; "+r}},{}],31:[function(e,r,t){var i=e("./object");r.exports.cache={},r.exports.guid=function(e,t){var r,i,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(r=0;r<e;r++)o[r]=n[0|Math.random()*t];else for(o[8]=o[13]=o[18]=o[23]="-",o[14]="4",r=0;r<36;r++)o[r]||(i=0|16*Math.random(),o[r]=n[19==r?3&i|8:i]);return o.join("")},r.exports.expando="vdata"+(new Date).getTime(),r.exports.getData=function(e){var t=e[r.exports.expando];return t||(t=e[r.exports.expando]=r.exports.guid(),r.exports.cache[t]={}),r.exports.cache[t]},r.exports.hasData=function(e){var t="";return!(!(t=e?e[r.exports.expando]:t)||i.isEmpty(r.exports.cache[t]))},r.exports.removeData=function(t){var e="";if(e=t?t[r.exports.expando]:e){delete r.exports.cache[e];try{delete t[r.exports.expando]}catch(e){t.removeAttribute?t.removeAttribute(r.exports.expando):t[r.exports.expando]=null}}}},{"./object":43}],32:[function(e,t,r){var i,p="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e="undefined"!=typeof self?self:this,i=function(){return r=[function(e,t,r){!function(e){t.b=function(e){for(var t=(e=void 0===e?{}:e).includes,e=e.excludes,e=void 0===e?[]:e,r=!1,i=!1,n=0,o=void 0===t?[]:t;n<o.length;n++)if(!0===o[n]){r=!0;break}for(var a=0,s=e;a<s.length;a++)if(!0===s[a]){i=!0;break}return r&&!i},t.c=function(e,t,r){e=n.a[e];return void 0!==e&&Object(i.compare)(e,t,r)},t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this};var i=r(11),n=(r.n(i),r(4))}.call(t,r(10))},function(e,t,r){r.d(t,"c",function(){return n}),r.d(t,"d",function(){return o}),r.d(t,"b",function(){return a}),r.d(t,"f",function(){return s}),r.d(t,"a",function(){return l}),r.d(t,"e",function(){return c});var i,t=r(3),r=r(0),r=Object(r.a)(),n="InstallTrigger"in((null==r?void 0:r.window)||{})||/firefox/i.test(t.b),o=/trident/i.test(t.b)||/msie/i.test(t.b),a=/edge/i.test(t.b),s=/webkit/i.test(t.b)&&!a,l=void 0!==(null==(i=null==r?void 0:r.window)?void 0:i.chrome)||/chrome/i.test(t.b),c="[object SafariRemoteNotification]"===((null==(r=null==(i=null==r?void 0:r.window)?void 0:i.safari)?void 0:r.pushNotification)||!1).toString()||/safari/i.test(t.b)&&!l},function(e,t,r){r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a}),r.d(t,"a",function(){return s});var i=r(1);function n(r){if(console){if(!i.d&&!i.b)return console[r];if("log"===r||"clear"===r)return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console[r].apply(console,e)}}return function(){for(var e=0;e<arguments.length;e++)e,0}}var o=n("log"),a=n("table"),s=n("clear")},function(e,t,r){t.a=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return null!=i&&i.document?(e=i.document).createElement.apply(e,t):{}},r.d(t,"b",function(){return n});var t=r(0),i=Object(t.a)(),n=(null==(r=null==i?void 0:i.navigator)?void 0:r.userAgent)||"xxxxx"},function(e,t,r){r.d(t,"a",function(){return i});for(var i={},n=0,o=(r(3).b||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];n<o.length;n++){var a=o[n].split("/"),s=a[0];i[s]=a[1]}},function(e,t,r){r.d(t,"b",function(){return i}),r.d(t,"d",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"a",function(){return a}),r.d(t,"e",function(){return s});var t=r(3),i=/ipad/i.test(t.b),n=/macintosh/i.test(t.b),o=/iphone/i.test(t.b),a=/android/i.test(t.b),s=/windows/i.test(t.b)},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=function(e){d.addListener(e)},t.removeListener=function(e){d.removeListener(e)},t.isLaunch=function(){return d.isLaunch()},t.launch=function(){d.launch()},t.stop=function(){d.stop()},t.setDetectDelay=function(e){d.setDetectDelay(e)};var i=r(7),n=r(8),o=(r.d(t,"DevtoolsDetector",function(){return i.a}),r.d(t,"checkers",function(){return n}),r(0)),a=(r.d(t,"match",function(){return o.b}),r.d(t,"specificVersionMatch",function(){return o.c}),r(1)),s=(r.d(t,"isFirefox",function(){return a.c}),r.d(t,"isIE",function(){return a.d}),r.d(t,"isEdge",function(){return a.b}),r.d(t,"isWebkit",function(){return a.f}),r.d(t,"isChrome",function(){return a.a}),r.d(t,"isSafari",function(){return a.e}),r(2)),l=(r.d(t,"log",function(){return s.b}),r.d(t,"table",function(){return s.c}),r.d(t,"clear",function(){return s.a}),r(17)),c=(r.d(t,"isMobile",function(){return l.a}),r(4)),u=(r.d(t,"versionMap",function(){return c.a}),r(5)),d=(r.d(t,"isIpad",function(){return u.b}),r.d(t,"isMac",function(){return u.d}),r.d(t,"isIphone",function(){return u.c}),r.d(t,"isAndroid",function(){return u.a}),r.d(t,"isWindows",function(){return u.e}),new i.a({checkers:[n.elementIdChecker,n.regToStringChecker,n.functionToStringChecker,n.depRegToStringChecker,n.dateToStringChecker,n.debuggerChecker]}));t.default=d},function(e,t,r){r.d(t,"a",function(){return n});var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=(o.prototype.launch=function(){this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop())},o.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},o.prototype.isLaunch=function(){return!this._detectLoopStopped},o.prototype.setDetectDelay=function(e){this._detectLoopDelay=e},o.prototype.addListener=function(e){this._listeners.push(e)},o.prototype.removeListener=function(t){this._listeners=this._listeners.filter(function(e){return e!==t})},o.prototype._broadcast=function(e){for(var t=0,r=this._listeners;t<r.length;t++){var i=r[t];try{i(e.isOpen,e)}catch(e){}}},o.prototype._detectLoop=function(){return i(this,void 0,void 0,function(){var t,r,i,n,o,a=this;return s(this,function(e){switch(e.label){case 0:t=!1,r="",i=0,n=this._checkers,e.label=1;case 1:return i<n.length?[4,(o=n[i]).isEnable()]:[3,6];case 2:return e.sent()?(r=o.name,[4,o.isOpen()]):[3,4];case 3:t=e.sent(),e.label=4;case 4:if(t)return[3,6];e.label=5;case 5:return i++,[3,1];case 6:return t!=this._isOpen&&(this._isOpen=t,this._broadcast({isOpen:t,checkerName:r})),0<this._detectLoopDelay?this._timer=setTimeout(function(){return a._detectLoop()},this._detectLoopDelay):this.stop(),[2]}})})},o);function o(e){e=e.checkers;this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=e.slice()}},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),n=(r.d(t,"depRegToStringChecker",function(){return i.a}),r(12)),o=(r.d(t,"elementIdChecker",function(){return n.a}),r(13)),a=(r.d(t,"functionToStringChecker",function(){return o.a}),r(14)),s=(r.d(t,"regToStringChecker",function(){return a.a}),r(15)),l=(r.d(t,"debuggerChecker",function(){return s.a}),r(16));r.d(t,"dateToStringChecker",function(){return l.a})},function(e,t,r){r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=(l.toString=function(){return c=!0,u.name},{name:"dep-reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(n.c)({dep:l}),Object(n.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.c,i.d]})]})})}})},function(e,t){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var i;void 0!==(t="function"==typeof(i=function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function d(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),r=function(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}(t,"-"),i=t.substring(0,r).split(".");return i.push(t.substring(r+1)),i}function p(e){return isNaN(Number(e))?e:Number(e)}function h(e){if("string"!=typeof e)throw new TypeError("Invalid argument expected string");if(!t.test(e))throw new Error("Invalid argument not valid semver ('"+e+"' received)")}function n(e,t){[e,t].forEach(h);for(var r=d(e),i=d(t),n=0;n<Math.max(r.length-1,i.length-1);n++){var o=parseInt(r[n]||0,10),a=parseInt(i[n]||0,10);if(o>a)return 1;if(a>o)return-1}var s=r[r.length-1],l=i[i.length-1];if(s&&l){var c=s.split(".").map(p),u=l.split(".").map(p);for(n=0;n<Math.max(c.length,u.length);n++){if(void 0===c[n]||"string"==typeof u[n]&&"number"==typeof c[n])return-1;if(void 0===u[n]||"string"==typeof c[n]&&"number"==typeof u[n])return 1;if(c[n]>u[n])return 1;if(u[n]>c[n])return-1}}else if(s||l)return s?-1:1;return 0}var o=[">",">=","=","<","<="],a={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return n.validate=function(e){return"string"==typeof e&&t.test(e)},n.compare=function(e,t,r){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var i=n(e,t);return a[r].indexOf(i)>-1},n})?i.apply(t,[]):i)&&(e.exports=t)},function(e,t,r){r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),t=r(3),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=Object(t.a)("div"),c=!1,u=(Object.defineProperty(l,"id",{get:function(){return c=!0,u.name},configurable:!0}),{name:"element-id",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(n.b)(l),Object(n.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.d,i.b,i.c]})]})})}})},function(e,t,r){r.d(t,"a",function(){return d});var i=r(1),n=r(2),o=r(5),a=r(0),s=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},l=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function c(){}var u=0,d=(c.toString=function(){return u++,""},{name:"function-to-string",isOpen:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return u=0,Object(n.b)(c),Object(n.a)(),[2,2===u]})})},isEnable:function(){return s(this,void 0,void 0,function(){return l(this,function(e){return[2,Object(a.b)({includes:[!0],excludes:[i.c,(o.b||o.c)&&i.a]})]})})}})},function(e,t,r){r.d(t,"a",function(){return u});var i=r(2),n=r(1),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=/ /,c=!1,u=(l.toString=function(){return c=!0,u.name},{name:"reg-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=!1,Object(i.b)(l),Object(i.a)(),[2,c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[!0],excludes:[n.f]})]})})}})},function(e,t,r){r.d(t,"a",function(){return a});var i=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},n=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};function o(){return(performance||Date).now()}var a={name:"debugger-checker",isOpen:function(){return i(this,void 0,void 0,function(){var t;return n(this,function(e){return t=o(),function(){}.constructor("debugger")(),[2,100<o()-t]})})},isEnable:function(){return i(this,void 0,void 0,function(){return n(this,function(e){return[2,!0]})})}}},function(e,t,r){r.d(t,"a",function(){return u});var i=r(1),n=r(2),o=r(0),a=this&&this.__awaiter||function(e,a,s,l){return new(s=s||p)(function(r,t){function i(e){try{o(l.next(e))}catch(e){t(e)}}function n(e){try{o(l.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(i,n)}o((l=l.apply(e,a||[])).next())})},s=this&&this.__generator||function(i,n){var o,a,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,a=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3]))l.label=t[1];else if(6===t[0]&&l.label<s[1])l.label=s[1],s=t;else{if(!(s&&l.label<s[2])){s[2]&&l.ops.pop(),l.trys.pop();continue}l.label=s[2],l.ops.push(t)}}t=n.call(i,l)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=new Date,c=0,u=(l.toString=function(){return c++,""},{name:"date-to-string",isOpen:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return c=0,Object(n.b)(l),Object(n.a)(),[2,2===c]})})},isEnable:function(){return a(this,void 0,void 0,function(){return s(this,function(e){return[2,Object(o.b)({includes:[i.a],excludes:[]})]})})}})},function(e,t,r){r.d(t,"a",function(){return i});var t=r(3),i=/mobile/i.test(t.b)}],n={},i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=6);function i(e){var t;return(n[e]||(t=n[e]={i:e,l:!1,exports:{}},r[e].call(t.exports,t,t.exports,i),t.l=!0,t)).exports}var r,n},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.devtoolsDetector=i():e.devtoolsDetector=i()},{"es6-promise":9}],33:[function(e,l,t){var i=e("./object");l.exports.el=function(e){return document.getElementById(e)},l.exports.createEl=function(e,t){var r;return e=e||"div",t=t||{},r=document.createElement(e),i.each(t,function(e,t){-1!==e.indexOf("aria-")||"role"==e?r.setAttribute(e,t):r[e]=t}),r},l.exports.addClass=function(e,t){e&&-1==(" "+e.className+" ").indexOf(" "+t+" ")&&(e.className=""===e.className?t:e.className+" "+t)},l.exports.removeClass=function(e,t){var r,i;if(-1!=e.className.indexOf(t)){for(i=(r=e.className.split(" ")).length-1;0<=i;i--)r[i]===t&&r.splice(i,1);e.className=r.join(" ")}},l.exports.hasClass=function(e,t){return-1!=e.className.indexOf(t)},l.exports.getClasses=function(e){return e.className?e.className.split(" "):[]},l.exports.getElementAttributes=function(e){var t,r,i={};if(e&&e.attributes&&0<e.attributes.length)for(var n,o=(n=e.attributes).length-1;0<=o;o--)t=n[o].name,r=n[o].value,"boolean"!=typeof e[t]&&-1===",autoplay,controls,loop,muted,default,".indexOf(","+t+",")||(r=null!==r),i[t]=r;return i},l.exports.insertFirst=function(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)},l.exports.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},l.exports.unblockTextSelection=function(){document.onselectstart=function(){return!0}},l.exports.css=function(r,e,t){return!(!r||!r.style)&&(e&&t?(r.style[e]=t,!0):t||"string"!=typeof e?!t&&"object"==typeof e&&(i.each(e,function(e,t){r.style[e]=t}),!0):r.style[e])},l.exports.getTransformName=function(e){for(var t=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],r=t[0],i=0,n=t.length;i<n;i++)if(void 0!==e.style[t[i]]){r=t[i];break}return r},l.exports.getTransformEventName=function(e,t){for(var r=["","Webkit","Moz","ms","O"],i=t.toLowerCase(),n=["transform","WebkitTransform","MozTransform","msTransform","OTransform"],o=0,a=n.length;o<a;o++)if(void 0!==e.style[n[o]]){0!=o&&(i=r[o]+t);break}return i},l.exports.addCssByStyle=function(e){var t=document,r=t.createElement("style"),e=(r.setAttribute("type","text/css"),r.styleSheet?r.styleSheet.cssText=e:(e=t.createTextNode(e),r.appendChild(e)),t.getElementsByTagName("head"));(e.length?e[0]:t.documentElement).appendChild(r)},l.exports.getTranslateX=function(e){var t=0;if(e)try{var r=window.getComputedStyle(e),i=l.exports.getTransformName(e),t=new(window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix)(r[i]).m41}catch(e){console.log(e)}return t},l.exports.getPointerPosition=function(e,t){var r={},i=l.exports.findPosition(e),n=e.offsetWidth,e=e.offsetHeight,o=i.top,i=i.left,a=t.pageY,s=t.pageX;return t.changedTouches&&(s=t.changedTouches[0].pageX,a=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(o-a+e)/e)),r.x=Math.max(0,Math.min(1,(s-i)/n)),r},l.exports.findPosition=function(e){var t,r,i,n;return(t=e.getBoundingClientRect&&e.parentNode?e.getBoundingClientRect():t)?(e=document.documentElement,n=document.body,i=e.clientLeft||n.clientLeft||0,r=window.pageXOffset||n.scrollLeft,r=t.left+r-i,i=e.clientTop||n.clientTop||0,e=window.pageYOffset||n.scrollTop,n=t.top+e-i,{left:Math.round(r),top:Math.round(n)}):{left:0,top:0}}},{"./object":43}],34:[function(e,l,t){var c=e("./object"),u=e("./data"),r=e("./ua"),i=e("./fastclick");function d(t,r,e,i){c.each(e,function(e){t(r,e,i)})}l.exports.on=function(o,e,t){if(o){if(c.isArray(e))return d(l.exports.on,o,e,t);r.IS_MOBILE&&"click"==e&&i.attach(o);var a=u.getData(o);a.handlers||(a.handlers={}),a.handlers[e]||(a.handlers[e]=[]),t.guid||(t.guid=u.guid()),a.handlers[e].push(t),a.dispatcher||(a.disabled=!1,a.dispatcher=function(e){if(!a.disabled){e=l.exports.fixEvent(e);var t=a.handlers[e.type];if(t)for(var r=t.slice(0),i=0,n=r.length;i<n&&!e.isImmediatePropagationStopped();i++)r[i].call(o,e)}}),1==a.handlers[e].length&&(o.addEventListener?o.addEventListener(e,a.dispatcher,!1):o.attachEvent&&o.attachEvent("on"+e,a.dispatcher))}},l.exports.off=function(t,e,r){if(t&&u.hasData(t)){var i=u.getData(t);if(i.handlers){if(c.isArray(e))return d(l.exports.off,t,e,r);var n=function(e){i.handlers[e]=[],l.exports.cleanUpEvents(t,e)};if(e){var o=i.handlers[e];if(o)if(r){if(r.guid)for(var a=0;a<o.length;a++)o[a].guid===r.guid&&o.splice(a--,1);l.exports.cleanUpEvents(t,e)}else n(e)}else for(var s in i.handlers)n(s)}}},l.exports.cleanUpEvents=function(e,t){var r=u.getData(e);0===r.handlers[t].length&&(delete r.handlers[t],e.removeEventListener?e.removeEventListener(t,r.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,r.dispatcher)),c.isEmpty(r.handlers)&&(delete r.handlers,delete r.dispatcher,delete r.disabled),c.isEmpty(r)&&u.removeData(e)},l.exports.fixEvent=function(e){function t(){return!0}function r(){return!1}if(!e||!e.isPropagationStopped){var i,n,o,a=e||window.event;for(i in e={},a)"layerX"===i||"layerY"===i||"keyboardEvent.keyLocation"===i||"returnValue"==i&&a.preventDefault||(e[i]=a[i]);e.target||(e.target=e.srcElement||document),e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement,e.preventDefault=function(){a.preventDefault&&a.preventDefault(),e.returnValue=!1,e.isDefaultPrevented=t,e.defaultPrevented=!0},e.isDefaultPrevented=r,e.defaultPrevented=!1,e.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),e.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=r,e.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=r,null!=e.clientX&&(n=document.documentElement,o=document.body,e.pageX=e.clientX+(n&&n.scrollLeft||o&&o.scrollLeft||0)-(n&&n.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(n&&n.scrollTop||o&&o.scrollTop||0)-(n&&n.clientTop||o&&o.clientTop||0)),e.which=e.charCode||e.keyCode,null!=e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e},l.exports.trigger=function(e,t){var r,i,n;if(e)return r=u.hasData(e)?u.getData(e):{},i=e.parentNode||e.ownerDocument,"string"==typeof t&&(n=null,!e.paramData&&0!=e.paramData||(n=e.paramData,e.paramData=null,e.removeAttribute(n)),t={type:t,target:e,paramData:n}),t=l.exports.fixEvent(t),r.dispatcher&&r.dispatcher.call(e,t),i&&!t.isPropagationStopped()&&!1!==t.bubbles?l.exports.trigger(i,t):i||t.defaultPrevented||(n=u.getData(t.target),t.target[t.type]&&(n.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),n.disabled=!1)),!t.defaultPrevented},l.exports.one=function(e,t,r){if(e){if(c.isArray(t))return d(l.exports.one,e,t,r);var i=function(){l.exports.off(e,t,i),r.apply(this,arguments)};i.guid=r.guid=r.guid||u.guid(),l.exports.on(e,t,i)}}},{"./data":31,"./fastclick":35,"./object":43,"./ua":49}],35:[function(e,t,r){function a(n,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=n,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!a.notNeeded(n)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=0,o=r.length;i<o;i++)this[r[i]]=((e,t)=>function(){return e.apply(t,arguments)})(this[r[i]],this);s&&(n.addEventListener("mouseover",this.onMouse,!0),n.addEventListener("mousedown",this.onMouse,!0),n.addEventListener("mouseup",this.onMouse,!0)),n.addEventListener("click",this.onClick,!0),n.addEventListener("touchstart",this.onTouchStart,!1),n.addEventListener("touchmove",this.onTouchMove,!1),n.addEventListener("touchend",this.onTouchEnd,!1),n.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(n.removeEventListener=function(e,t,r){var i=Node.prototype.removeEventListener;"click"===e?i.call(n,e,t.hijacked||t,r):i.call(n,e,t,r)},n.addEventListener=function(e,t,r){var i=Node.prototype.addEventListener;"click"===e?i.call(n,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),r):i.call(n,e,t,r)}),"function"==typeof n.onclick&&(t=n.onclick,n.addEventListener("click",function(e){t(e)},!1),n.onclick=null)}}var i=0<=navigator.userAgent.indexOf("Windows Phone"),s=0<navigator.userAgent.indexOf("Android")&&!i,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,l=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),c=o&&/OS [6-7]_\d/.test(navigator.userAgent),n=0<navigator.userAgent.indexOf("BB10");a.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},a.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!s;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},a.prototype.sendClick=function(e,t){var r;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),t=t.changedTouches[0],(r=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,!1,!1,!1,!1,0,null),r.forwardedTouchEvent=!0,e.dispatchEvent(r)},a.prototype.determineEventType=function(e){return s&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},a.prototype.updateScrollParent=function(e){var t,r=e.fastClickScrollParent;if(!r||!r.contains(e)){t=e;do{if(t.scrollHeight>t.offsetHeight){r=t,e.fastClickScrollParent=t;break}}while(t=t.parentElement)}r&&(r.fastClickLastScrollTop=r.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},a.prototype.onTouchStart=function(e){var t,r,i;if(!(1<e.targetTouches.length)){if(t=this.getTargetElementFromEventTarget(e.target),r=e.targetTouches[0],o){if((i=window.getSelection()).rangeCount&&!i.isCollapsed)return!0;if(!l){if(r.identifier&&r.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=r.identifier,this.updateScrollParent(t)}}this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=r.pageX,this.touchStartY=r.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault()}return!0},a.prototype.touchHasMoved=function(e){var e=e.changedTouches[0],t=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>t||Math.abs(e.pageY-this.touchStartY)>t},a.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},a.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(e){var t,r,i,n=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,t=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,c&&(i=e.changedTouches[0],(n=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||n).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(i=n.tagName.toLowerCase())){if(r=this.findControl(n)){if(this.focus(n),s)return!1;n=r}}else if(this.needsFocus(n))return 100<e.timeStamp-t||o&&window.top!==window&&"input"===i?this.targetElement=null:(this.focus(n),this.sendClick(n,e),o&&"select"===i||(this.targetElement=null,e.preventDefault())),!1;return!(!o||l||!(r=n.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(n)||(e.preventDefault(),this.sendClick(n,e)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(e){return!this.targetElement||!(!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)&&(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),1))},a.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((e=this.onMouse(e))||(this.targetElement=null),e)},a.prototype.destroy=function(){var e=this.layer;s&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(e){var t,r;if(void 0===window.ontouchstart)return!0;if(r=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!s)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<r&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(n&&10<=(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=r[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||"none"===e.style.touchAction||"manipulation"===e.style.touchAction},a.attach=function(e,t){return new a(e,t)},t.exports=a},{}],36:[function(e,t,r){var n=e("./data");t.exports.bind=function(e,t,r){t.guid||(t.guid=n.guid());function i(){return t.apply(e,arguments)}return i.guid=r?r+"_"+t.guid:t.guid,i}},{"./data":31}],37:[function(e,t,r){function C(){C=function(){return a};var l,a={},e=Object.prototype,c=e.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(l){o=function(e,t,r){return e[t]=r}}function s(e,t,r,i){var n,o,a,s,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),i=new k(i||[]);return u(t,"_invoke",{value:(n=e,o=r,a=i,s=p,function(e,t){if(s===f)throw Error("Generator is already running");if(s===_){if("throw"===e)throw t;return{value:l,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var i=r.method,n=t.iterator[i];if(n===l)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=d(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;n=i.arg;return n?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,a);if(r){if(r===g)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===p)throw s=_,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=f;r=d(n,o,a);if("normal"===r.type){if(s=a.done?_:h,r.arg===g)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=_,a.method="throw",a.arg=r.arg)}})}),t}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p="suspendedStart",h="suspendedYield",f="executing",_="completed",g={};function y(){}function v(){}function m(){}var t={},b=(o(t,i,function(){return this}),Object.getPrototypeOf),b=b&&b(b(P([]))),S=(b&&b!==e&&c.call(b,i)&&(t=b),m.prototype=y.prototype=Object.create(t));function T(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;u(this,"_invoke",{value:function(r,i){function e(){return new s(function(e,t){!function t(e,r,i,n){var o,e=d(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==typeof r&&c.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):s.resolve(r).then(function(e){o.value=e,i(o)},function(e){return t("throw",e,i,n)});n(e.arg)}(r,i,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(t){if(t||""===t){var r,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}throw new TypeError(typeof t+" is not iterable")}return u(S,"constructor",{value:v.prototype=m,configurable:!0}),u(m,"constructor",{value:v,configurable:!0}),v.displayName=o(m,n,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o(e,n,"GeneratorFunction")),e.prototype=Object.create(S),e},a.awrap=function(e){return{__await:e}},T(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var o=new E(s(e,t,r,i),n);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(S),o(S,n,"Generator"),o(S,i,function(){return this}),o(S,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return o.type="throw",o.arg=r,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=c.call(n,"catchLoc"),s=c.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var o=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(r=n.completion).type&&(i=r.arg,x(n)),i}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),g}},a}function l(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function a(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){l(i,t,r,n,o,"next",e)}function o(e){l(i,t,r,n,o,"throw",e)}n(void 0)})}}var i,s="undefined"==typeof Promise?e("es6-promise").Promise:Promise;e=self,i=function(){return(i={d:function(e,t){for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}).d(e={},{default:function(){return o}}),t=navigator.userAgent,r=/qqbrowser/i.test(t.toLowerCase()),n=/Edge/i.test(t),n=/Chrome/i.test(t)&&!n&&!r,v=/Safari/i.test(t)&&!n,r=t.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/),n=r&&r[1],m=n&&Number(n.split(".")[0]),b=(()=>{var t=a(C().mark(function e(t){var r;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.blob();case 5:return r=e.sent,e.abrupt("return",URL.createObjectURL(r));case 7:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})(),S={includeSystemHijack:!0,showVideo:!1,format:"mp4",codecTags:["hev1","hvc1"],timeout:2e3},o=function(_){return void 0===_&&(_={}),new s((()=>{var t=a(C().mark(function e(t){var r,i,n,o,a,s,l,c,u,d,p,h,f;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object.assign({},S,_),r=o.includeSystemHijack,i=o.showVideo,l=o.codecTags,n=o.format,o=o.timeout,a=performance.now(),s=-1<l.indexOf("hvc1"),l=-1<l.indexOf("hev1"),u=c=!1,!(v&&m&&11<=m)){e.next=14;break}if(d=g("hvc1",n),e.t0=r,e.t0){e.next=9;break}return e.next=8,b(d);case 8:d=e.sent;case 9:return e.next=11,y(d,i,"hvc1",o);case 11:c=e.sent,e.next=34;break;case 14:if(!s){e.next=24;break}if(p=g("hvc1",n),e.t1=r,e.t1){e.next=21;break}return e.next=20,b(p);case 20:p=e.sent;case 21:return e.next=23,y(p,i,"hvc1",o);case 23:c=e.sent;case 24:if(!l){e.next=34;break}if(h=g("hev1",n),e.t2=r,e.t2){e.next=31;break}return e.next=30,b(h);case 30:h=e.sent;case 31:return e.next=33,y(h,i,"hev1",o);case 33:u=e.sent;case 34:f=performance.now(),t({isHvc1Supported:c,isHev1Supported:u,time:Math.ceil(f-a)});case 36:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}})())},e.default;function g(e,t){var r="hls"===(t=void 0===t?"mp4":t),i="";switch(e=void 0===e?"":e){case"hvc1":i=r?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hvc1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hvc1.mp4";break;case"hev1":i=r?"https://player.alicdn.com/lib/detect-assets/01s_20x20_hev1.m3u8":"https://ice-pub-media.myalicdn.com/vod-demo/hevc/01s_20x20_hev1.mp4";break;default:i=""}return i}function y(i,l,c,e){void 0===l&&(l=!1),void 0===c&&(c="");var u=performance.now(),d=e;return new s(function(o){e=i,void 0===(t=l?100:0)&&(t=100),(r=document.createElement("video")).setAttribute("width",""+t),r.setAttribute("height",""+t),r.setAttribute("muted","muted"),r.setAttribute("crossorigin","anonymous"),r.setAttribute("preload","preload"),r.setAttribute("autoplay","autoplay"),r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline"),r.setAttribute("x-webkit-airplay","x-webkit-airplay"),r.setAttribute("playsinline","playsinline"),r.src=e;var e,t,r,a=r,s=setInterval(function(){var e,t,r,i,n;(performance.now()-u>d||0!==a.videoWidth)&&(clearInterval(s),e=0!==a.videoWidth,l?(a.setAttribute("controls","controls"),t=a,void 0===(r=c)&&(r=""),i=document.createElement("dv"),(n=document.createElement("h3")).innerText=r,i.appendChild(t),i.appendChild(n),document.body.appendChild(i)):(a.pause(),a=null),o(e))})})}var i,e,t,r,n,v,m,b,S,o},"object"==typeof r&&"object"==typeof t?t.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof r?r.hevcDetector=i():e.hevcDetector=i()},{"es6-promise":9}],38:[function(e,t,r){function i(e){for(var t in e="string"==typeof e?this.parseAttrList(e):e)e.hasOwnProperty(t)&&(this[t]=e[t])}var n=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;i.prototype={decimalInteger:function(e){e=parseInt(this[e],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},hexadecimalInteger:function(e){if(this[e]){for(var t=(1&(t=(this[e]||"0x").slice(2)).length?"0":"")+t,r=new Uint8Array(t.length/2),i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(2*i,2*i+2),16);return r}return null},hexadecimalIntegerAsNumber:function(e){e=parseInt(this[e],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},decimalFloatingPoint:function(e){return parseFloat(this[e])},enumeratedString:function(e){return this[e]},decimalResolution:function(e){e=n.exec(this[e]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},parseAttrList:function(e){var t,r={};for(o.lastIndex=0;null!==(t=o.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r}},t.exports=i},{}],39:[function(e,t,r){function b(){this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[]}function i(){this.loaders={}}var n=e("../constants"),l=e("../playerutil"),S=e("./attrlist"),c=e("../io"),o=e("./urltoolkit"),u=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,d=/#EXT-X-MEDIA:(.*)/g,T=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),E=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(PART-INF):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,p="RegionBlock",w=function(){this.method=null,this.key=null,this.iv=null,this._uri=null};b.prototype.getUrl=function(){return!this._url&&this.relurl&&(this._url=o.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},b.prototype.Seturl=function(e){this._url=e},b.prototype.getProgramDateTime=function(){return!this._programDateTime&&this.rawProgramDateTime&&(this._programDateTime=new Date(Date.parse(this.rawProgramDateTime))),this._programDateTime},b.prototype.GetbyteRange=function(){var e,t,r;return this._byteRange||(e=this._byteRange=[],this.rawByteRange&&(1===(t=this.rawByteRange.split("@",2)).length?(r=this.lastByteRangeEndOffset,e[0]=r||0):e[0]=parseInt(t[1]),e[1]=parseInt(t[0])+e[0])),this._byteRange},b.prototype.getByteRangeStartOffset=function(){return this.byteRange[0]},b.prototype.getByteRangeEndOffset=function(){return this.byteRange[1]},b.prototype.getDecryptdata=function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata};i.prototype=((e={parseMasterPlaylist:function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=i.attrs=new S(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,a=n.CODECS)for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}r.push(i)}return r},parseMasterPlaylistMedia:function(e,t,r,i){var n=[],o=0;for(d.lastIndex=0;null!=(s=d.exec(e));){var a={},s=new S(s[1]);s.TYPE===r&&(a.groupId=s["GROUP-ID"],a.name=s.NAME,a.type=r,a.default="YES"===s.DEFAULT,a.autoselect="YES"===s.AUTOSELECT,a.forced="YES"===s.FORCED,s.URI&&(a.url=this.resolve(s.URI,t)),a.lang=s.LANGUAGE,a.name||(a.name=a.lang),i&&(a.audioCodec=i),a.id=o++,n.push(a))}return n},avc1toavcoti:function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},load:function(o,a,i){var s=this;c.get(o,function(e){var t,r,i,n=s.parseMasterPlaylist(e,o);n.length&&(t=s.parseMasterPlaylistMedia(e,o,"AUDIO",n[0].audioCodec),r=s.parseMasterPlaylistMedia(e,o,"SUBTITLES"),t.length)&&(i=!1,t.forEach(function(e){e.url||(i=!0)}),!1===i)&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(console.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),t.unshift({type:"main",name:"main"})),a({levels:n,audioTracks:t,subtitles:r,url:o,string:e})},function(e,t,r){i&&((r=l.parseHttpHeaders(r)["x-tengine-error"])&&-1<n.RegionBlockMessages.indexOf(r)&&(e=p),i(e,t))})},loadMediaPlaylist:function(e,t,r){var i=this,n=(e=e||{}).string,o=e.url;n?(e=i.parseLevelPlaylist(n,o),t(e)):c.get(o,function(e){e=i.parseLevelPlaylist(e,o);t(e)},function(e){r&&r(e)})},resolve:function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}}).parseMasterPlaylist=function(e,t){var r=[];for(u.lastIndex=0;null!=(o=u.exec(e));){var i={},n=i.attrs=new S(o[1]),o=(i.url=this.resolve(o[2],t),n.decimalResolution("RESOLUTION"));if(o&&(i.width=o.width,i.height=o.height),i.bitrate=n.decimalInteger("AVERAGE-BANDWIDTH")||n.decimalInteger("BANDWIDTH"),i.name=n.NAME,a=n.CODECS)for(var a=a.split(/[ ,]+/),s=0;s<a.length;s++){var l=a[s];-1!==l.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(l):-1!==l.indexOf("hvc1")?i.videoCodec=l:i.audioCodec=l}r.push(i)}return r},e.parseMasterPlaylistMedia=function(e,t,r,i){var n=[],o=0;for(d.lastIndex=0;null!=(s=d.exec(e));){var a={},s=new S(s[1]);s.TYPE===r&&(a.groupId=s["GROUP-ID"],a.name=s.NAME,a.type=r,a.default="YES"===s.DEFAULT,a.autoselect="YES"===s.AUTOSELECT,a.forced="YES"===s.FORCED,s.URI&&(a.url=this.resolve(s.URI,t)),a.lang=s.LANGUAGE,a.name||(a.name=a.lang),i&&(a.audioCodec=i),a.id=o++,n.push(a))}return n},e.avc1toavcoti=function(e){var t=e.split("."),r=2<t.length?(r=t.shift()+".",(r+=parseInt(t.shift()).toString(16))+("000"+parseInt(t.shift()).toString(16)).substr(-4)):e;return r},e.parseLevelPlaylist=function(e,t,r,i){var n,o,a=0,s=0,l={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},c=new w,u=0,d=null,p=new b;for(T.lastIndex=0;null!==(n=T.exec(e));){var h=n[1];if(h){p.duration=parseFloat(h);var f=(" "+n[2]).slice(1);p.title=f||null,p.tagList.push(f?["INF",h,f]:["INF",h])}else if(n[3])isNaN(p.duration)||(f=a++,p.type=i,p.start=s,p.levelkey=c,p.sn=f,p.level=r,p.cc=u,p.baseurl=t,p.relurl=(" "+n[3]).slice(1),l.fragments.push(p),s+=(d=p).duration,p=new b);else if(n[4])p.rawByteRange=(" "+n[4]).slice(1),d&&(h=d.byteRangeEndOffset)&&(p.lastByteRangeEndOffset=h);else if(n[5])p.rawProgramDateTime=(" "+n[5]).slice(1),p.tagList.push(["PROGRAM-DATE-TIME",p.rawProgramDateTime]),void 0===l.programDateTime&&(l.programDateTime=new Date(new Date(Date.parse(n[5]))-1e3*s));else{for(n=n[0].match(E),o=1;o<n.length&&void 0===n[o];o++);var _=(" "+n[o+1]).slice(1),g=(" "+n[o+2]).slice(1);switch(n[o]){case"#":p.tagList.push(g?[_,g]:[_]);break;case"PLAYLIST-TYPE":l.type=_.toUpperCase();break;case"MEDIA-SEQUENCE":a=l.startSN=parseInt(_);break;case"TARGETDURATION":l.targetduration=parseFloat(_);break;case"VERSION":l.version=parseInt(_);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"DIS":u++,p.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":u=parseInt(_);break;case"KEY":var y=new S(_),v=y.enumeratedString("METHOD"),m=y.URI,y=y.hexadecimalInteger("IV");v&&(c=new w,m)&&0<=["AES-128","SAMPLE-AES"].indexOf(v)&&(c.method=v,c.baseuri=t,c.reluri=m,c.key=null,c.iv=y);break;case"START":v=new S(_).decimalFloatingPoint("TIME-OFFSET");isNaN(v)||(l.startTimeOffset=v);break;case"MAP":m=new S(_);p.relurl=m.URI,p.rawByteRange=m.BYTERANGE,p.baseurl=t,p.level=r,p.type=i,p.sn="initSegment",l.initSegment=p,p=new b;break;case"PART-INF":y=new S(_);l.partTarget=y.decimalFloatingPoint("PART-TARGET");break;default:console.log("line parsed but not handled: "+n)}}}return(p=d)&&!p.relurl&&(l.fragments.pop(),s-=p.duration),l.totalduration=s,l.averagetargetduration=s/l.fragments.length,l.endSN=a-1,l},e),i.ERROR_REGION_BLOCK=p,t.exports=i},{"../constants":29,"../io":41,"../playerutil":46,"./attrlist":38,"./urltoolkit":40}],40:[function(e,t,r){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=s.parseURL(e);if(i)return i.path=s.normalizePath(i.path),s.buildURLFromParts(i);throw new Error("Error trying to parse base URL.")}i=s.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=s.normalizePath(i.path),s.buildURLFromParts(i)):t;t=s.parseURL(e);if(!t)throw new Error("Error trying to parse base URL.");!t.netLoc&&t.path&&"/"!==t.path[0]&&(e=o.exec(t.path),t.netLoc=e[1],t.path=e[2]),t.netLoc&&!t.path&&(t.path="/");var n,e={scheme:t.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(e.netLoc=t.netLoc,"/"!==i.path[0]&&(i.path?(n=(n=t.path).substring(0,n.lastIndexOf("/")+1)+i.path,e.path=s.normalizePath(n)):(e.path=t.path,i.params||(e.params=t.params,i.query)||(e.query=t.query)))),null===e.path&&(e.path=r.alwaysNormalize?s.normalizePath(i.path):i.path),s.buildURLFromParts(e)},parseURL:function(e){e=i.exec(e);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(n,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};t.exports=s},{}],41:[function(e,s,t){var h=e("./url");s.exports.get=function(e,t,r,i,n,o){s.exports.ajax.call(this,"GET",e,{},t,r,i,n,void 0,o)},s.exports.post=function(e,t,r,i,n,o){var a={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8",Accept:"application/json"};s.exports.ajax("POST",e,t,r,i,n,o,a)},s.exports.postWithHeader=function(e,t,r,i,n){s.exports.ajax("POST",e,t,i,n,!0,!1,r)},s.exports.ajax=function(e,t,r,i,n,o,a,s,l){var c,u,d;n=n||function(){},"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),u=new XMLHttpRequest,l&&(u.timeout=l),l=h.parseUrl(t),d=window.location,!(l.protocol+l.host!==d.protocol+d.host)||!window.XDomainRequest||"withCredentials"in u?(c="file:"==l.protocol||"file:"==d.protocol,u.onreadystatechange=function(){4===u.readyState&&(200===u.status||c&&0===u.status?i(u.responseText):n(u.responseText,u.status,u))}):((u=new window.XDomainRequest).onload=function(){i(u.responseText)},u.onerror=n,u.onprogress=function(){},u.ontimeout=n);try{if(void 0===o&&(o=!0),u.open(e,t,o),a&&(u.withCredentials=!0),s)for(var p in s)s.hasOwnProperty(p)&&u.setRequestHeader(p,s[p])}catch(e){return void n(e)}try{u.send(r)}catch(e){n(e)}},s.exports.jsonp=function(e,t,r){var i="jsonp_callback_"+Math.round(1e5*Math.random()),n=document.createElement("script");e&&(n.src=e+(0<=e.indexOf("?")?"&":"?")+"callback="+i+"&cb="+i,n.onerror=function(){delete window[i],document.body.removeChild(n),r()},n.onload=function(){setTimeout(function(){window[i]&&(delete window[i],document.body.removeChild(n))},0)},window[i]=function(e){delete window[i],document.body.removeChild(n),t(e)},document.body.appendChild(n))},s.exports.loadJS=function(e,t,r){var i=document.getElementsByTagName("HEAD").item(0),n=document.createElement("script");n.setAttribute("crossorigin","anonymous"),e&&e.toLowerCase().indexOf("https://")<0&&e.toLowerCase().indexOf("http://")<0&&(e=document.URL.replace(/(\/[^\/]*?)$/i,"")+e),n.type="text/javascript",n.src=e,n.onload=function(){t&&t()},n.onerror=function(){r&&r()},i.appendChild(n)}},{"./url":50}],42:[function(e,t,r){var a=e("./dom");t.exports.render=function(e,t){var r=t.align||(t.className?"":"tl"),i=t.x||0,t=t.y||0,n=i.indexOf&&0<i.indexOf("%")?"":"px",o=t.indexOf&&0<t.indexOf("%")?"":"px";"tl"===r?a.css(e,{float:"left","margin-left":i+n,"margin-top":t+o}):"tr"===r?a.css(e,{float:"right","margin-right":i+n,"margin-top":t+o}):"tlabs"===r?a.css(e,{position:"absolute",left:i+n,top:t+o}):"trabs"===r?a.css(e,{position:"absolute",right:i+n,top:t+o}):"blabs"===r?a.css(e,{position:"absolute",left:i+n,bottom:t+o}):"brabs"===r?a.css(e,{position:"absolute",right:i+n,bottom:t+o}):"cc"===r&&a.addClass(e,"loading-center")}},{"./dom":33}],43:[function(e,a,t){var s=Object.prototype.hasOwnProperty;a.exports.create=Object.create||function(e){function t(){}return t.prototype=e,new t},a.exports.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(arg)},a.exports.isEmpty=function(e){for(var t in e)if(null!==e[t])return!1;return!0},a.exports.each=function(e,t,r){if(a.exports.isArray(e))for(var i=0,n=e.length;i<n&&!1!==t.call(r||this,e[i],i);++i);else for(var o in e)if(s.call(e,o)&&!1===t.call(r||this,o,e[o]))break;return e},a.exports.merge=function(e,t){if(t)for(var r in t)s.call(t,r)&&(e[r]=t[r]);return e},a.exports.deepMerge=function(e,t){var r,i,n;for(r in e=a.exports.copy(e),t)s.call(t,r)&&(i=e[r],n=t[r],a.exports.isPlain(i)&&a.exports.isPlain(n)?e[r]=a.exports.deepMerge(i,n):e[r]=t[r]);return e},a.exports.copy=function(e){return a.exports.merge({},e)},a.exports.isPlain=function(e){return!!e&&"object"==typeof e&&"[object Object]"===e.toString()&&e.constructor===Object},a.exports.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a.exports.unescape=function(e){return e.replace(/&([^;]+);/g,function(e,t){return{amp:"&",lt:"<",gt:">",quot:'"',"#x27":"'","#x60":"`"}[t.toLowerCase()]||e})}},{}],44:[function(e,t,r){var n,o=e("./object");(n=function(){}).extend=function(e){var t,r,i=(e=e||{}).init||this.prototype.init||function(){};for(r in(((t=function(){i.apply(this,arguments)}).prototype=o.create(this.prototype)).constructor=t).extend=n.extend,t.create=n.create,e)e.hasOwnProperty(r)&&(t.prototype[r]=e[r]);return t},n.create=function(){var e=o.create(this.prototype);return this.apply(e,arguments),e},t.exports=n},{"./object":43}],45:[function(e,t,r){var i=!new Function("try {return this===window;}catch(e){ return false;}")();t.exports.isSSR=i},{}],46:[function(e,f,t){var _=e("./object"),r=e("../config"),i=e("./dom"),n=e("./cookie"),o=e("./constants"),a=e("../lang/index"),s=e("./ua"),l=e("./io"),g=e("../player/base/plugin/defaultemptycomponent"),c=e("./hardware-decoding-detector"),y={preload:!0,autoplay:!0,autoplayPolicy:{fallbackToMute:!1,showUnmuteBtn:!0},useNativeControls:!1,width:"100%",height:"300px",cover:"",from:"",trackLog:!0,logBatched:!0,logReportTo:void 0,heartHeatInterval:30,isLive:!1,playsinline:!0,showBarTime:5e3,rePlay:!1,mute:!1,liveRetry:5,liveRetryInterval:1,liveRetryStep:0,disableVodHalfRetry:!1,disableLiveHalfRetry:!1,keyShortCuts:!1,keyFastForwardStep:10,isVBR:!1,vodRetry:3,format:"",definition:"",defaultDefinition:"",loadDataTimeout:20,waitingTimeout:60,waitingBufferedTime:3,delayLoadingShow:1,controlBarForOver:!1,controlBarVisibility:"hover",enableSystemMenu:!1,qualitySort:"asc",x5_video_position:"normal",x5_type:"",x5_fullscreen:!1,x5_orientation:"landscape|portrait",x5LandscapeAsFullScreen:!0,license:{},autoPlayDelay:0,autoPlayDelayDisplayText:"",useHlsPluginForSafari:!1,enableMSEForAndroid:!0,encryptType:0,language:"zh-cn",languageTexts:{},extLanguageTexts:{},mediaType:"video",outputType:"",playConfig:{},reAuthInfo:{},components:[],liveTimeShiftUrl:"",liveShiftSource:"",liveShiftTime:"",liveShiftMinOffset:30,videoHeight:"100%",videoWidth:"100%",enableWorker:!0,authTimeout:"",enableMockFullscreen:!1,region:"cn-shanghai",debug:!1,progressMarkers:[],ratio:void 0,snapshotWatermark:{left:"500",top:"100",text:"",font:"16px \u5b8b\u4f53",fillColor:"#FFFFFF",strokeColor:"#FFFFFF"},liveStartTime:"",liveOverTime:"",enableStashBufferForFlv:!1,flvOption:{},hlsOption:{stopLoadAsPaused:!1},drmOption:{},hlsLoadingTimeOut:2e4,useHlsPlugOnMobile:!0,useFlvPlugOnMobile:!0,lowLatencyMode:!1,useHls2:!0,useDrm2:void 0,skipRtsSupportCheck:!1,rtsLoadDataTimeout:6e3,rtsOption:{},rtsFallback:!1,rtsFallbackSource:void 0,rtsFallbackType:void 0,rtsVersion:"",rtsSdkUrl:"",nudgeMaxRetry:5,tracks:[],recreatePlayer:function(){},diagnosisButtonVisible:!0,enableH265:!1,forceH265:!1,enableH266:!1,forceH266:!1,h265Threads:!0,h265Simd:!0,preventRecord:!1,traceId:"",mediaAuth:void 0,textTracks:void 0,_native:!0,hlsUriToken:"",thumbnailUrl:"",refreshAccessInfo:function(){},drmSessionTimeout:5e3,skinRes:"//"+r.domain+"/de/prismplayer-flash/"+r.flashVersion+"/atlas/defaultSkin",splayerUrl:null,splayerWasmDomain:null,logo:[],disablePip:!1,assetPrefix:null,clickPause:s.IS_PC,clickPauseDelay:200,statisticsReportInterval:5e3,skinLayoutIgnore:[],disableSeek:!1,dashjsUrl:null,dashOption:{},disableDumpBuffer:!1,useSW:!1,swScriptURL:void 0,env:"",autoSize:"",watchStartTime:void 0,watchEndTime:void 0,start:void 0,end:void 0,dbClickFullscreen:s.IS_PC,dbClickFullscreenDelay:200,enableHlsH265:!1,bitrateDisplayHandler:void 0,longPressFastForward:!s.IS_PC,dbClickSkip:!s.IS_PC},u=(f.exports.getDefaultH5Layout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"H5Loading",align:"cc"},{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"tooltip",align:"blabs",x:0,y:50},{name:"thumbnail"},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"fullScreenButton",align:"tr",x:10,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]}]},f.exports.getDefaultAudioLayout=function(){return[{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"blabs",x:0,y:44},{name:"playButton",align:"tl",x:15,y:12},{name:"timeDisplay",align:"tl",x:10,y:5},{name:"volume",align:"tr",x:5,y:10}]}]},f.exports.getDefaultFlashLayout=function(){return[{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"controlBar",align:"blabs",x:0,y:0,children:[{name:"progress",align:"tlabs",x:0,y:0},{name:"playButton",align:"tl",x:15,y:26},{name:"nextButton",align:"tl",x:10,y:26},{name:"timeDisplay",align:"tl",x:10,y:24},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"streamButton",align:"tr",x:10,y:23},{name:"volume",align:"tr",x:10,y:25}]},{name:"fullControlBar",align:"tlabs",x:0,y:0,children:[{name:"fullTitle",align:"tl",x:25,y:6},{name:"fullNormalScreenButton",align:"tr",x:24,y:13},{name:"fullTimeDisplay",align:"tr",x:10,y:12},{name:"fullZoom",align:"cc"}]}]},f.exports.canPlayType=function(e){var t=document.createElement("video");return t.canPlayType?t.canPlayType(e):""},f.exports.canPlayHls=function(){return""!=f.exports.canPlayType("application/x-mpegURL")},f.exports.isUsedHlsPluginOnMobile=function(e){return!!(s.IS_MOBILE&&(s.IS_CHROME||s.IS_FIREFOX||s.IS_X5||s.IS_EDGE_NEW)&&f.exports.isSupportHls())},f.exports.isSafariUsedHlsPlugin=function(e){return!!(s.os.pc&&s.browser.safari&&e)},f.exports.validateSource=function(e){return!0},f.exports.supportH5Video=function(){return void 0!==document.createElement("video").canPlayType},f.exports.createWrapper=function(e){var t=e.id,t="string"==typeof t?(0===t.indexOf("#")&&(t=t.slice(1)),i.el(t)):t;if(t&&t.nodeName)return f.exports.adjustContainerLayout(t,e),t;throw new TypeError("\u6ca1\u6709\u4e3a\u64ad\u653e\u5668\u6307\u5b9a\u5bb9\u5668")},f.exports.adjustContainerLayout=function(e,t){t.width&&!e.style.width&&(e.style.width=t.width),t.height&&!e.style.height&&(e.style.height=t.height)},f.exports.isSupportHls=function(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer=window.SourceBuffer||window.WebKitSourceBuffer,e=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),t=(s.IS_ANDROID&&s.is_X5&&(e=!0),!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove);return e&&t},f.exports.isSupportMMS=function(){return!!window.ManagedMediaSource},f.exports.isSupportFlv=function(){return f.exports.isSupportHls()},f.exports.isSupportMSE=function(){return f.exports.isSupportHls()||f.exports.isSupportMMS()},f.exports.isSupportedMediaSource=function(){return!!window.MediaSource&&!!MediaSource.isTypeSupported},f.exports.isSupportedDrm=function(){return!!(window.MediaKeys&&window.navigator&&window.navigator.requestMediaKeySystemAccess&&window.MediaKeySystemAccess&&window.MediaKeySystemAccess.prototype.getConfiguration)&&f.exports.isSupportMSE()},f.exports.isAudio=function(t,e){if(e)return f.exports.isMp3Format(e);e=!1;try{e=t&&"mp3"===new URL("http:"+t).pathname.split(".").pop().toLowerCase()}catch(e){return t&&0<t.toLowerCase().indexOf(".mp3")}return e},f.exports.isLiveShift=function(e){return e.isLive&&e.liveStartTime&&e.liveOverTime},f.exports.isHls=function(t,e){if(e)return f.exports.isHlsFormat(e);e=!1;try{e=t&&"m3u8"===new URL("http:"+t).pathname.split(".").pop().toLowerCase()}catch(e){return t&&0<t.toLowerCase().indexOf(".m3u8")}return e},f.exports.isDash=function(t,e){if(e)return f.exports.isDashFormat(e);e=!1;try{e=t&&"mpd"===new URL("http:"+t).pathname.split(".").pop().toLowerCase()}catch(e){return t&&0<t.toLowerCase().indexOf(".mpd")}return e},f.exports.isFlv=function(t,e){if(e)return f.exports.isFlvFormat(e);e=!1;try{e=t&&"flv"===new URL("http:"+t).pathname.split(".").pop().toLowerCase()}catch(e){return t&&0<t.toLowerCase().indexOf(".flv")}return e},f.exports.isRTMP=function(e){return e&&-1<e.toLowerCase().indexOf("rtmp:")},f.exports.isRts=function(e){return e&&-1<e.toLowerCase().indexOf("artc:")},f.exports.isMp4=function(t,e){if(e)return f.exports.isMp4Format(e);e=!1;try{e=t&&"mp4"===new URL("http:"+t).pathname.split(".").pop().toLowerCase()}catch(e){return t&&-1<t.toLowerCase().indexOf(".mp4")}return e},f.exports.isSupportedFormat=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["mp3","mp4","mpd","hls","m3u8","flv"].indexOf(t)}catch(e){return!1}},f.exports.isMp3Format=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["mp3"].indexOf(t)}catch(e){return!1}},f.exports.isMp4Format=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["mp4"].indexOf(t)}catch(e){return!1}},f.exports.isFlvFormat=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["flv"].indexOf(t)}catch(e){return!1}},f.exports.isHlsFormat=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["hls","m3u8"].indexOf(t)}catch(e){return!1}},f.exports.isDashFormat=function(e){if(!e)return!1;try{var t=e.toLowerCase();return~["mpd"].indexOf(t)}catch(e){return!1}},f.exports.getFormat=function(e){var t={artc:"rts",m3u8:"hls"},e=null==(e=/\.(mp4)|\.(mp3)|\.(m3u8)|\.(flv)|(artc):/.exec(e))?void 0:e[0];return e=e&&e.replace(/\.|:|artc|m3u8/gi,function(e){return t[e]||""})},f.exports.checkSecuritSupport=function(){return f.exports.isSupportMSE()?s.IS_IOS&&(s.IS_UC||s.IS_QUARK||s.IS_BAIDU)?a.get("iOSVodEncriptionBlacklist"):"":"serviceWorker"in navigator?void 0:"http:"===location.protocol?a.get("Error_SW_Https_required"):a.get("UseChromeForVodEncription")+"(SW not found)"},f.exports.nativeSupportH265=function(){return s.IS_IOS||s.IS_MAC_SAFARI},f.exports.findSelectedStreamLevel=function(e,t){var r=t;if(r||(r=n.get(o.SelectedStreamLevel))){for(var i=0;i<e.length;i++)if(e[i].definition==r)return i}else n.set(o.SelectedStreamLevel,e[0].definition,365);return 0},f.exports.getHistoryDetectResult=function(e,t){if(e)return t="hls"===t,"hvc1"===e?t?n.get(o.HWDetectHvc1Hls):n.get(o.HWDetectHvc1):"hev1"===e?t?n.get(o.HWDetectHev1Hls):n.get(o.HWDetectHev1):void 0},f.exports.setHistoryDetectResult=function(e,t,r){var i="unknownCodec",t="hls"===t;"hvc1"===e?i=t?o.HWDetectHvc1Hls:o.HWDetectHvc1:"hev1"===e&&(i=t?o.HWDetectHev1Hls:o.HWDetectHev1),n.set(i,r)},f.exports.handleOption=function(e,t){f.exports.isRts(e.source)&&(e.isLive=!0);var r,i=_.merge(_.copy(y),e),n=(e.autoplayPolicy&&(i.autoplayPolicy=_.merge(y.autoplayPolicy,e.autoplayPolicy)),[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"subtitle",align:"tr",x:15,y:12},{name:"setting",align:"tr",x:15,y:12},{name:"volume",align:"tr",x:5,y:10}]),o=!1;if(e.useFlashPrism||f.exports.isRTMP(e.source)?(o=!0,n=[{name:"liveIco",align:"tlabs",x:15,y:25},{name:"fullScreenButton",align:"tr",x:10,y:25},{name:"volume",align:"tr",x:10,y:25}]):(r=f.exports.isLiveShift(i))?(n.push({name:"liveShiftProgress",align:"tlabs",x:0,y:0}),n.push({name:"playButton",align:"tl",x:15,y:12}),n.push({name:"liveDisplay",align:"tl",x:15,y:6})):n.push({name:"liveDisplay",align:"tlabs",x:15,y:6}),e.isLive)if(void 0===e.skinLayout)i.skinLayout=[{name:"errorDisplay",align:"tlabs",x:0,y:0},{name:"infoDisplay"},{name:"bigPlayButton",align:"blabs",x:30,y:80},{name:"unmuteButton",align:"cc"},{name:"tooltip",align:"blabs",x:0,y:56},{name:"H5Loading",align:"cc"},{name:"controlBar",align:"blabs",x:0,y:0,children:f.exports.isRts(e.source)?[{name:"fullScreenButton",align:"tr",x:20,y:12},{name:"volume",align:"tr",x:5,y:10},{name:"liveDisplay",align:"tlabs",x:15,y:6}]:n}];else if(0!=e.skinLayout){for(var a=e.skinLayout.length,s=[],l=-1,c=0;c<a;c++)if("controlBar"==i.skinLayout[c].name){for(var l=c,u=i.skinLayout[c].children.length,d=0;d<u;d++){var p,h=i.skinLayout[c].children[d].name;"liveDisplay"!=h&&"liveIco"!=h&&"fullScreenButton"!=h&&"volume"!=h&&"snapshot"!=h&&"setting"!=h&&"subtitle"!=h&&(!r||"progress"!=h&&"playButton"!=h&&"timeDisplay"!=h)||(p=i.skinLayout[c].children[d],"progress"==h?p.name="liveShiftProgress":"timeDisplay"==h?p.name="liveShiftTimeDisplay":o&&"liveDisplay"==h&&(p.name="liveIco"),s.push(p))}break}-1!=l&&(i.skinLayout[l].children=s)}return(void 0===e.components||!e.components||_.isArray(e.components)&&0==e.components.length)&&"false"!=e.components&&(i.components=[g]),i},f.exports.ignoreSkinLayouts=function(e,t){var n;if(null!=t&&t.length&&null!=e&&e.length)return n=e,t.forEach(function(t){var r,i,e;-1<t.indexOf(".")?(e=t.split("."),r=e[0],i=e[1],(e=n.find(function(e){return e.name===r}))&&(e.children=e.children.filter(function(e){return e.name!==i}))):n=n.filter(function(e){return e.name!==t})}),n},f.exports.getLiveHostByRegion=function(e){var t="live.aliyuncs.com";return e&&-1<["ap-southeast-1","eu-central-1"].indexOf(e)?"live."+e+".aliyuncs.com":t},f.exports.isVideoTag=function(e){return e&&"string"==typeof e.nodeName&&"video"===e.nodeName.toLowerCase()},f.exports.unqiueTextTracks=function(e){var t=[],t=(e=void 0===e?[]:e).reduce(function(e,t){var r;return e.some(function(e){return e.srclang===t.srclang})?e:((r=t).label=t.label||t.srclang,[].concat(e,[r]))},[]),r={};return t.forEach(function(e,t){r[e.label]?r[e.label].push(t):r[e.label]=[t]}),Object.keys(r).forEach(function(e){e=r[e]||[];1<e.length&&e.forEach(function(e){t[e].label=t[e].label+"("+t[e].srclang+")"})}),t},f.exports.isHvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hvc1")},f.exports.isHev1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("hev1")},f.exports.isVvccCodec=function(e){return-1<(e=void 0===e?"":e).indexOf("vvcC")},f.exports.isVvc1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("vvc1")},f.exports.isVvi1Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("vvi1")},f.exports.isH265Codec=function(e){return f.exports.isHvc1Codec(e=void 0===e?"":e)||f.exports.isHev1Codec(e)},f.exports.isH266Codec=function(e){return f.exports.isVvccCodec(e=void 0===e?"":e)||f.exports.isVvc1Codec(e)||f.exports.isVvi1Codec(e)},f.exports.isH264Codec=function(e){return-1<(e=void 0===e?"":e).indexOf("avc1")},f.exports.getVideoTrack=function(e){var t;return(e=void 0===e?[]:e).forEach(function(e){1===Number(e.type)&&(t=e)}),t},s.IS_ANDROID&&(s.dingTalk()||s.IS_UC||s.is_X5||s.IS_HUAWEI||s.IS_XIAOMI||s.IS_OPPO||s.IS_VIVO||s.IS_MEIZU||s.IS_SAMSUNG||s.IS_WEBVIEW)||s.os&&"windows"===s.os.name&&s.IS_UC);f.exports.shouldUseBasePlayer=function(e,t){var r,i,n,o=e.codecTag,e=e.url,a="unsupported";return!o||(n=f.exports.isHvc1Codec(o),r=f.exports.isMp4(e),e=f.exports.isHls(e),r&&f.exports.nativeSupportH265()&&n)||r&&(()=>{if(!(!u&&(s.IS_CHROME||s.IS_EDGE_NEW)))return!1;var t=0;try{t=s.USER_AGENT.match(/Chrome\/(\d+)/i)[1]}catch(e){t=0}return!(parseInt(t)<104||!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4;codecs="hvc1.1.6.L120.90"'))})()?t(!0):u?"supported"===(n=f.exports.getHistoryDetectResult(o,i=e?"hls":"mp4"))?t(!0):n===a?t(!1):void c({codecTags:[o],format:i,timeout:2e3}).then(function(e){e=e.isHev1Supported||e.isHvc1Supported;if(f.exports.setHistoryDetectResult(o,i,e?"supported":a),e)return t(!0);t(!1)}).catch(function(e){console.log("hevcDetector ERROR",e),t(!1)}):t(!1)},f.exports.parseHttpHeaders=function(e){if(e){var r={};try{e instanceof Response?e.headers.forEach(function(e,t){r[t]=e}):e.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");r[t]=e})}catch(e){}return r}},f.exports.detectRegionBlock=function(e,i){l.get(e,function(){i(!1)},function(e,t,r){r=f.exports.parseHttpHeaders(r)["x-tengine-error"];403===t&&r&&-1<o.RegionBlockMessages.indexOf(r)?i(!0):i(!1)})},f.exports.enableDbClickSkip=function(e){return e.dbClickSkip&&!e.dbClickFullscreen},f.exports.drawSnapshotText=function(e,t){t=t.snapshotWatermark;t&&t.text&&(e.font=t.font,t.fillColor&&(e.fillStyle=t.fillColor,e.fillText(t.text,t.left,t.top)),t.strokeColor&&(e.strokeStyle=t.strokeColor,e.strokeText(t.text,t.left,t.top)),e.stroke())},f.exports.hasValue=function(e){return null!=e&&""!==e}},{"../config":15,"../lang/index":24,"../player/base/plugin/defaultemptycomponent":92,"./constants":29,"./cookie":30,"./dom":33,"./hardware-decoding-detector":37,"./io":41,"./object":43,"./ua":49}],47:[function(e,a,t){var n=e("./object"),s=e("../player/adaptiveplayer"),l=e("./constants").USER_EVENT_NAME;a.exports.reloadInstance=function(e,t,r){var i=r,n=(i.dispose(),e.readyCallback),o=e._readyCallbackCalled,e=s.create(e,function(e){t(e),o||n(e)});a.exports.restoreUserEvents(r,e),a.exports.removeAllProps(i),(i.__proto__=e)[l]=i[l]},a.exports.storeUserEvents=function(e){var r=e,i=r.__proto__.on,n={};r.on=function(e,t){"function"==typeof t&&(n[e]?n[e].push(t):n[e]=[t],this._el)&&(t.binded=!0,i.call(r,e,t))},r[l]=n},a.exports.restoreUserEvents=function(e,r){var i=e[l];i&&n.each(i,function(t){i[t].forEach(function(e){r.on(t,e)})})},a.exports.removeAllProps=function(e,t){for(var r in t=[].concat(t=t||[],[l]),e)e.hasOwnProperty(r)&&-1===t.indexOf(r)&&delete e[r]}},{"../player/adaptiveplayer":65,"./constants":29,"./object":43}],48:[function(e,t,r){t.exports.set=function(t,r){try{window.localStorage&&localStorage.setItem(t,r)}catch(e){window[t+"_localStorage"]=r}},t.exports.get=function(t){try{if(window.localStorage)return localStorage.getItem(t)}catch(e){return window[t+"_localStorage"]}return""}},{}],49:[function(e,x,t){var r,i,n;if(x.exports.USER_AGENT=navigator.userAgent,x.exports.IS_IPHONE=/iPhone/i.test(x.exports.USER_AGENT),x.exports.IS_IPAD=/iPad/i.test(x.exports.USER_AGENT),x.exports.IS_IPOD=/iPod/i.test(x.exports.USER_AGENT),x.exports.IS_MAC=/mac/i.test(x.exports.USER_AGENT),x.exports.IS_EDGE=/Edge/i.test(x.exports.USER_AGENT),x.exports.IS_EDGE_NEW=/Edg/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE,x.exports.IS_IE11=/Trident\/7.0/i.test(x.exports.USER_AGENT),x.exports.IS_X5=/qqbrowser/i.test(x.exports.USER_AGENT.toLowerCase()),x.exports.IS_CHROME=/Chrome/i.test(x.exports.USER_AGENT)&&!x.exports.IS_EDGE&&!x.exports.IS_EDGE_NEW&&!x.exports.IS_X5,x.exports.IS_SAFARI=/Safari/i.test(x.exports.USER_AGENT)&&!x.exports.IS_CHROME&&!x.exports.IS_EDGE_NEW,x.exports.IS_FIREFOX=/Firefox/i.test(x.exports.USER_AGENT),x.exports.IS_UC=/ucweb|UCBrowser|UBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_QUARK=/Quark/i.test(x.exports.USER_AGENT),x.exports.IS_HUAWEI=/HuaweiBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_XIAOMI=/MiuiBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_OPPO=/HeyTapBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_VIVO=/VivoBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_MEIZU=/MZBrowser/i.test(x.exports.USER_AGENT),x.exports.IS_SAMSUNG=/samsungbrowser/i.test(x.exports.USER_AGENT),x.exports.IS_BAIDU=/baiduboxapp/i.test(x.exports.USER_AGENT),document.all)try{var o=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");x.exports.HAS_FLASH=!!o}catch(e){x.exports.HAS_FLASH=!1}else navigator.plugins&&0<navigator.plugins.length?(o=navigator.plugins["Shockwave Flash"],x.exports.HAS_FLASH=!!o):x.exports.HAS_FLASH=!1;x.exports.IS_MAC_SAFARI=x.exports.IS_MAC&&x.exports.IS_SAFARI&&!x.exports.IS_CHROME&&!x.exports.HAS_FLASH,x.exports.IS_IOS=x.exports.IS_IPHONE||x.exports.IS_IPAD||x.exports.IS_IPOD,x.exports.IOS_VERSION=(()=>{var e=x.exports.USER_AGENT.match(/OS (\d+)_/i);if(e&&e[1])return e[1]})(),x.exports.IOS_FULL_VERSION=(()=>{var e=x.exports.USER_AGENT.match(/OS (\d+)_(\d+)_?/i);if(e&&e[1]&&e[2])return e[1]+"."+e[2]})(),x.exports.IS_HARMONY=/OpenHarmony/i.test(x.exports.USER_AGENT),x.exports.IS_ANDROID=/Android/i.test(x.exports.USER_AGENT)||x.exports.IS_HARMONY,x.exports.ANDROID_VERSION=(o=x.exports.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i))?(i=o[1]&&parseFloat(o[1]),r=o[2]&&parseFloat(o[2]),i&&r?parseFloat(o[1]+"."+o[2]):i||null):null,x.exports.IS_OLD_ANDROID=x.exports.IS_ANDROID&&/webkit/i.test(x.exports.USER_AGENT)&&x.exports.ANDROID_VERSION<2.3,x.exports.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),x.exports.IS_MOBILE=x.exports.IS_IOS||x.exports.IS_ANDROID,x.exports.IS_H5=x.exports.IS_MOBILE||!x.exports.HAS_FLASH,x.exports.IS_PC=!x.exports.IS_MOBILE,x.exports.is_X5=/micromessenger/i.test(x.exports.USER_AGENT)||/qqbrowser/i.test(x.exports.USER_AGENT),x.exports.IS_ANDROID_FIREFOX=x.exports.IS_ANDROID&&x.exports.IS_FIREFOX,x.exports.CHROME_VERSION=x.exports.IS_CHROME&&x.exports.USER_AGENT.match(/Chrome\/(\d+)/i)[1],x.exports.getHost=function(e){var t,r,i="";return void 0===e||null==e||""==e?"":(t=e.indexOf("//"),r=e,i=r=-1<t?e.substring(t+2):r,(e=(i=(e=r.split("/"))&&0<e.length?e[0]:i).split(":"))&&0<e.length?e[0]:i)},x.exports.dingTalk=function(){var e=x.exports.USER_AGENT.toLowerCase();return/dingtalk/i.test(e)},x.exports.IS_DINGTALK=x.exports.dingTalk(),x.exports.wechat=function(){var e=x.exports.USER_AGENT.toLowerCase();return/micromessenger/i.test(e)},x.exports.inIFrame=function(){return self!=top},x.exports.getReferer=function(){var t=document.referrer;if(x.exports.inIFrame())try{t=top.document.referrer}catch(e){t=document.referrer}return t},x.exports.getHref=function(){location.href;if(x.exports.inIFrame())try{top.location.href}catch(e){location.href}return location.href},x.exports.check360=function(){return-1!=navigator.userAgent.indexOf("Safari")?(()=>{var e=navigator.userAgent.split(" ");if(-1!=e[e.length-1].indexOf("Safari"))for(var t in navigator.plugins)if("np-mswmp.dll"==navigator.plugins[t].filename)return!0;return!1})():(null==navigator.msPointerEnabled||navigator.msPointerEnabled)&&(1==navigator.msDoNotTrack||1==window.doNotTrack)&&(!!Number(window.screenX)&&window.screenLeft-window.screenX!=8||(-1!=navigator.userAgent.indexOf("MSIE 7.0")||-1!=navigator.userAgent.indexOf("MSIE 8.0"))&&null==console.count)},function(e,t){var r=this.os={},i=this.browser={},n=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=!!e.match(/\(Macintosh\; Intel /),s=e.match(/(iPad).*OS\s([\d_]+)/),l=e.match(/(iPod)(.*OS\s([\d_]+))?/),c=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),t=/Win\d{2}|Windows/.test(t),d=e.match(/Windows Phone ([\d.]+)/),p=u&&e.match(/TouchPad/),h=e.match(/Kindle\/([\d.]+)/),f=e.match(/Silk\/([\d._]+)/),_=e.match(/(BlackBerry).*Version\/([\d.]+)/),g=e.match(/(BB10).*Version\/([\d.]+)/),y=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),v=e.match(/PlayBook/),m=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),b=e.match(/Firefox\/([\d.]+)/),S=e.match(/\((?:Mobile|Tablet); rv:([\d.]+)\).*Firefox\/[\d.]+/),T=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/[\d](?=[^\?]+).*rv:([0-9.].)/),E=!m&&e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/),w=E||e.match(/Version\/([\d.]+)([^S](Safari)|[^M]*(Mobile)[^S]*(Safari))/);(i.webkit=!!n)&&(i.version=n[1]),o&&(r.android=!0,r.version=o[2]),c&&!l&&(r.ios=r.iphone=!0,r.version=c[2].replace(/_/g,".")),s&&(r.ios=r.ipad=!0,r.version=s[2].replace(/_/g,".")),l&&(r.ios=r.ipod=!0,r.version=l[3]?l[3].replace(/_/g,"."):null),d&&(r.wp=!0,r.version=d[1]),u&&(r.webos=!0,r.version=u[2]),p&&(r.touchpad=!0),_&&(r.blackberry=!0,r.version=_[2]),g&&(r.bb10=!0,r.version=g[2]),y&&(r.rimtabletos=!0,r.version=y[2]),v&&(i.playbook=!0),h&&(r.kindle=!0,r.version=h[1]),f&&(i.silk=!0,i.version=f[1]),!f&&r.android&&e.match(/Kindle Fire/)&&(i.silk=!0),m&&(i.chrome=!0,i.version=m[1]),b&&(i.firefox=!0,i.version=b[1]),S&&(r.firefoxos=!0,r.version=S[1]),T&&(i.ie=!0,i.version=T[1]),w&&(a||r.ios||t||o)&&(i.safari=!0,r.ios||r.android||(i.version=w[1])),r.ios&&(i.version=r.version),E&&(i.webview=!0),a&&((n=e.match(/[\d]*_[\d]*_[\d]*/))&&0<n.length&&n[0]&&(r.version=n[0].replace(/_/g,".")),/MQBHD/.test(e))&&(i.version=((e.match(/.*OS\s([\d_]+)/)||[])[1]||"").replace(/_/g,".")),r.tablet=!!(s||v||o&&!e.match(/Mobile/)||b&&e.match(/Tablet/)||T&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(o||c||u||_||g||m&&e.match(/Android/)||m&&e.match(/CriOS\/([\d.]+)/)||b&&e.match(/Mobile/)||T&&e.match(/Touch/))),r.pc=!r.tablet&&!r.phone,a?r.name="macOS":t?(r.name="windows",r.version=(()=>{var e=navigator.userAgent,t="";return(-1<e.indexOf("Windows NT 5.0")||-1<e.indexOf("Windows 2000"))&&(t="2000"),(-1<e.indexOf("Windows NT 5.1")||-1<e.indexOf("Windows XP"))&&(t="XP"),(-1<e.indexOf("Windows NT 5.2")||-1<e.indexOf("Windows 2003"))&&(t="2003"),(-1<e.indexOf("Windows NT 6.0")||-1<e.indexOf("Windows Vista"))&&(t="Vista"),(-1<e.indexOf("Windows NT 6.1")||-1<e.indexOf("Windows 7"))&&(t="7"),(-1<e.indexOf("Windows NT 6.2")||-1<e.indexOf("Windows 8"))&&(t="8"),(-1<e.indexOf("Windows NT 6.3")||-1<e.indexOf("Windows 8.1"))&&(t="8.1"),t=-1<e.indexOf("Windows NT 10")||-1<e.indexOf("Windows 10")?"10":t})()):r.name=(()=>{var e=navigator.userAgent,t="other",r=x.exports.os;return r.ios?"iOS":r.android?"android":-1<e.indexOf("Baiduspider")?"Baiduspider":-1<e.indexOf("PlayStation")?"PS4":(r="Win32"==navigator.platform||"Windows"==navigator.platform||-1<e.indexOf("Windows"),(e="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform)&&(t="macOS"),"X11"!=navigator.platform||r||e||(t="Unix"),-1<String(navigator.platform).indexOf("Linux")&&(t="Linux"),r?"windows":t)})(),i.name=(l=navigator.userAgent.toLowerCase(),(d=x.exports.browser).firefox?"Firefox":d.ie?/edge/.test(l)?"Edge":"IE":x.exports.IS_EDGE_NEW?"EdgeChromium":/micromessenger/.test(l)?"\u5fae\u4fe1\u5185\u7f6e\u6d4f\u89c8\u5668":/qqbrowser/.test(l)?"QQ\u6d4f\u89c8\u5668":x.exports.IS_UC?"UC":x.exports.IS_QUARK?"Quark":x.exports.IS_DINGTALK?"Dingtalk":x.exports.IS_HUAWEI?"HuaweiBrowser":x.exports.IS_XIAOMI?"MiBrowser":x.exports.IS_OPPO?"OppoBrowser":x.exports.IS_VIVO?"VivoBrowser":x.exports.IS_MEIZU?"MeizuBrowser":x.exports.IS_SAMSUNG?"SamsungBrowser":x.exports.IS_WEBVIEW||/MQBHD/.test(l)?"webview":d.chrome?"Chrome":d.safari?"Safari":/baiduspider/.test(l)?"Baiduspider":/opera/.test(l)?"Opera":/360se/.test(l)?"360\u6d4f\u89c8\u5668":/bidubrowser/.test(l)?"\u767e\u5ea6\u6d4f\u89c8\u5668":/metasr/.test(l)?"\u641c\u72d7\u6d4f\u89c8\u5668":/lbbrowser/.test(l)?"\u730e\u8c79\u6d4f\u89c8\u5668":/playstation/.test(l)?"PS4\u6d4f\u89c8\u5668":void 0)}.call(x.exports,navigator.userAgent,navigator.platform),x.exports.IS_WEBVIEW=(r=x.exports.USER_AGENT,i=new RegExp("("+["WebView","(iPhone|iPod|iPad)(?!.*Safari)","Android.*(Version).*(wv|.0.0.0)","Linux; U; Android"].join("|")+")","ig"),n=new RegExp("("+["VivoBrowser","MZBrowser","MiuiBrowser"].join("|")+")","ig"),!!r.match(i)&&!r.match(n))},{}],50:[function(e,t,r){var s=e("./dom");t.exports.getAbsoluteURL=function(e){return e=e.match(/^https?:\/\//)?e:s.createEl("div",{innerHTML:'<a href="'+e+'">x</a>'}).firstChild.href},t.exports.parseUrl=function(e){var t,r=["protocol","hostname","port","pathname","search","hash","host"],i=s.createEl("a",{href:e}),n=""===i.host&&"file:"!==i.protocol;n&&((t=s.createEl("div")).innerHTML='<a href="'+e+'"></a>',i=t.firstChild,t.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(t));for(var o={},a=0;a<r.length;a++)o[r[a]]=i[r[a]];return o.segments=i.pathname.replace(/^\//,"").split("/"),n&&document.body.removeChild(t),o}},{"./dom":33}],51:[function(e,r,t){var i=e("./dom"),n=e("./ua"),o=e("./playerutil");r.exports.formatTime=function(e){e=Math.max(0,e||0);var t,e=Math.floor(e),r=Math.floor(e/3600);return e%=3600,t=Math.floor(e/60),e=e%60,!(r===1/0||isNaN(r)||t===1/0||isNaN(t)||e==1/0||isNaN(e))&&("00"===(r=10<=r?r:"0"+r)?"":r+":")+(10<=t?t:"0"+t)+":"+(10<=e?e:"0"+e)},r.exports.extractTime=function(e){var t;return e?("00"===(t=10<=(t=parseInt(e.getHours()))?t:"0"+t)?"":t+":")+(t=10<=(t=parseInt(e.getMinutes()))?t:"0"+t)+":"+(t=10<=(t=parseInt(e.getSeconds()))?t:"0"+t):""},r.exports.convertToTimestamp=function(e,t){var r="";return e&&(t?r=e.gettime():(r=Date.parse(e),r/=1e3)),r},r.exports.convertToDate=function(e,t){var r="";return e&&(r=new Date).setTime(1e3*e),r},r.exports.parseTime=function(e){var t,r,i;return e?(i=r=t=0,3===(e=e.split(":")).length?(t=e[0],r=e[1],i=e[2]):2===e.length?(r=e[0],i=e[1]):1===e.length&&(i=e[0]),3600*(t=parseInt(t,10))+60*(r=parseInt(r,10))+(i=Math.ceil(parseFloat(i)))):"00:00:00"},r.exports.formatDate=function(e,t){var r,i={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},r.exports.sleep=function(e){for(var t=Date.now();Date.now()-t<=e;);},r.exports.htmlEncodeAll=function(e){return null==e?"":e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},r.exports.toBinary=function(e){if(!window.atob)return"";for(var t=atob(e),r=t.length,i=new Uint8Array(r),n=0;n<r;n++)i[n]=t.charCodeAt(n);return i},r.exports.readyBinary=function(e){for(var t=new Uint8Array(e),r=t.length,i="",n=0;n<r;n++)i+=t[n];return i},r.exports.delayHide=function(e,t){e&&(void 0===t&&(t=1e3),e.delayHanlder&&clearTimeout(e.delayHanlder),e.delayHanlder=setTimeout(function(){i.css(e,"display","none")},t))},r.exports.openInFile=function(){return-1!=window.location.protocol.toLowerCase().indexOf("file")},r.exports.contentProtocolMixed=function(e,t,r){return!!((n.os.pc&&(o.isHls(e,r)&&!n.browser.safari||o.isFlv(e,r))||t)&&"https:"==window.location.protocol.toLowerCase()&&e&&-1<e.toLowerCase().indexOf("http://"))},r.exports.queryString=function(e){var t,r,i;return 2===(e=(e=decodeURIComponent(e)).split("?")).length&&(t=e[1].split("&"))?(r={},i=0,$(t).each(function(){var e=t[i].split("=");2===e.length&&(r[e[0]]=e[1].replace(/\+/g," ")),i++}),r):{}},r.exports.log=function(e){var t=window.location.href,t=r.exports.queryString(t);t&&1==t.debug&&console.log(e)},r.exports.arrayBufferToB64=function(e){for(var t="",r=new Uint8Array(e),i=r.byteLength,n=0;n<i;n++)t+=String.fromCharCode(r[n]);return window.btoa(t)},r.exports.b64ToArrayBuffer=function(e){for(var t=atob(e),r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer},r.exports.throttle=function(a,s){var l=null,c=0;return function(){for(var e=this,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=Date.now(),o=s-(n-c);o<=0?(a.apply(this,r),c=n):(clearTimeout(l),l=setTimeout(function(){a.apply(e,r),c=Date.now()},o))}}},{"./dom":33,"./playerutil":46,"./ua":49}],52:[function(e,t,r){function a(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()}var s=e("./vttparse");t.exports={parse:function(e,t,r){var i,e=e.trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),n=[],o=new s;o.oncue=function(e){e.id=a(e.startTime)+a(e.endTime)+a(e.text),e.text=decodeURIComponent(escape(e.text)),e.isBig=!1;var t=e.text.split("#xywh=");2==t.length&&(t=t[1].split(","),e.x=t[0],e.y=t[1],e.w=t[2],e.h=t[3],e.isBig=!0),0<e.endTime&&n.push(e)},o.onparsingerror=function(e){i=e},o.onflush=function(){i&&r?(r(i),console.log(i)):t(n)},e.forEach(function(e){o.parse(e+"\n")}),o.flush()}}},{"./vttparse":54}],53:[function(e,t,r){function b(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function S(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)e[r]=i[r]}return e}function i(e,t,r){var i=this,n=(()=>{if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)})(),o={},a=(n?i=document.createElement("custom"):o.enumerable=!0,i.hasBeenReset=!1,""),s=!1,l=e,c=t,u=r,d=null,p="",h=!0,f="auto",_="start",g=50,y="middle",v=50,m="middle";if(Object.defineProperty(i,"id",S({},o,{get:function(){return a},set:function(e){a=""+e}})),Object.defineProperty(i,"pauseOnExit",S({},o,{get:function(){return s},set:function(e){s=!!e}})),Object.defineProperty(i,"startTime",S({},o,{get:function(){return l},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");l=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"endTime",S({},o,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"text",S({},o,{get:function(){return u},set:function(e){u=""+e,this.hasBeenReset=!0}})),Object.defineProperty(i,"region",S({},o,{get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"vertical",S({},o,{get:function(){return p},set:function(e){e="string"==typeof(e=e)&&!!T[e.toLowerCase()]&&e.toLowerCase();if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"snapToLines",S({},o,{get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}})),Object.defineProperty(i,"line",S({},o,{get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"lineAlign",S({},o,{get:function(){return _},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"position",S({},o,{get:function(){return g},set:function(e){if(e<0||100<e)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"positionAlign",S({},o,{get:function(){return y},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"size",S({},o,{get:function(){return v},set:function(e){if(e<0||100<e)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}})),Object.defineProperty(i,"align",S({},o,{get:function(){return m},set:function(e){e=b(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");m=e,this.hasBeenReset=!0}})),i.displayState=void 0,n)return i}var T,n;t.exports="undefined"!=typeof window&&window.VTTCue?window.VTTCue:(T={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right:!0},i.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},i)},{}],54:[function(e,t,r){function i(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}}var s=e("./vttcue");function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new i,this.regionList=[]}function l(){this.values=Object.create(null)}function c(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}l.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var u=new s(0,0,0),d="middle"===u.align?"middle":"center";function p(i,e,o){var t,a,n=i;function r(){var e,t=(t=(t=i).match(/^(\d+):(\d{2})(:\d{2})?(\.\d{3})?/))?(e=(e=t[4])&&e.replace(".",""),t[3]?r(t[1],t[2],t[3].replace(":",""),e):59<t[1]?r(t[1],t[2],0,e):r(0,t[1],t[2],e)):null;function r(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}if(null===t)throw new Error("Malformed timestamp: "+n);return i=i.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){i=i.replace(/^\s+/,"")}if(s(),e.startTime=r(),s(),"--\x3e"!==i.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);i=i.substr(3),s(),e.endTime=r(),s(),t=i,e=e,a=new l,c(t,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){a.set(e,o[r].region);break}break;case"vertical":a.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];a.integer(e,n),a.percent(e,n)&&a.set("snapToLines",!1),a.alt(e,n,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start",d,"end"]);break;case"position":i=t.split(","),a.percent(e,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start",d,"end","line-left","line-right","auto"]);break;case"size":a.percent(e,t);break;case"align":a.alt(e,t,["start",d,"end","left","right"])}},/:/,/\s/),e.region=a.get("region",null),e.vertical=a.get("vertical",""),"auto"===(t=a.get("line","auto"))&&-1===u.line&&(t=-1),e.line=t,e.lineAlign=a.get("lineAlign","start"),e.snapToLines=a.get("snapToLines",!0),e.size=a.get("size",100),e.align=a.get("align",d),"auto"===(t=a.get("position","auto"))&&50===u.position&&(t="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=t}n.prototype={parse:function(e){var i=this;function t(){for(var e=0,t=(t=i.buffer).replace(/<br(?: \/)?>/gi,"\n");e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var r=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,i.buffer=t.substr(e),r}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var r,n=(r=t()).match(/^WEBVTT([ \t].*)?$/);if(!n||!n[0])throw new Error("Malformed WebVTT signature.");i.state="HEADER"}for(var o=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(o?o=!1:r=t(),i.state){case"HEADER":/:/.test(r)?c(r,function(e,t){"Region"===e&&console.log("parse region",t)},/:/):r||(i.state="ID");continue;case"NOTE":r||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){i.state="NOTE";break}if(!r)continue;if(i.cue=new s(0,0,""),i.state="CUE",-1===r.indexOf("--\x3e")){i.cue.id=r;continue}case"CUE":try{p(r,i.cue,i.regionList)}catch(e){i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var a=-1!==r.indexOf("--\x3e");if(!r||a&&(o=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=r;continue;case"BADCUE":r||(i.state="ID");continue}}}catch(e){"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),!this.cue&&"HEADER"!==this.state||(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}},t.exports=n},{"./vttcue":53}],55:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}function n(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var o=e("./vtt-parser"),s=e("./vtt-renderer"),l=e("./vtt-loader"),c=e("../../player/base/event/eventtype"),u=e("../../lib/ua"),d=e("../../lib/event"),p=e("../../ui/component/util"),h=s.CTR_BAR_HEIGHT,e=(()=>{function e(e){this.parser=null,this.activeRenderer=null,this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.tickTimer=null,this.prevPosition=null,this._enabled=!1,this._isShow=!1,this.sleeper=new f,this.player=(e=e||{}).player,this.loader=new l,this.parser=new o,this.createRendererInstance(),this.bindEvents()}var t=e.prototype;return t.bindEvents=function(){function e(e){e.paramData.splayer&&r.switchRenderer(s.VttBasicRenderer.RENDER_TYPE_CUSTOM)}var t,r=this,i=this,n=this.player,o=(n.on(c.Private.TextTrackFounded,function(e){if("user"===e.paramData.from)r.hasUserTracks=!0;else if(r.hasUserTracks)return;e=e.paramData.textTracks;e&&e.length&&(r.enabled=!0,r.trackConfigs=e.map(function(e){return a({},e,{label:e.label||e.srclang,language:e.srclang})}),r.trackConfigs.forEach(function(e){r.activeRenderer.addTrack(e),"always"===n.getOptions().controlBarVisibility&&r.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+h+"px")+")"},r.parser.cues)}))}),n.on(c.Private.UserTrackReset,function(){r.hasUserTracks=!1}),n.on(c.Player.H265PlayInfo,e),n.on(c.Player.H266PlayInfo,e),u.IS_IOS?(t=!1,n.on(c.Player.RequestFullScreen,function(){t=!0}),d.on(n.tag,"webkitendfullscreen",function(){t=!1}),d.on(n.tag.textTracks,"change",function(){var e;r.sleeper.isSleep||(r.sleeper.sleep(1e3),r.isCustomRenderer)||t&&(e=n.tag.textTracks,(e=Array.from(e).find(function(e){return"showing"===e.mode}))?r.activeTrackConfig&&r.activeTrackConfig.language===e.language||(r.switchTrack(e.language),n.trigger(c.Private.SelectorValueChange,{type:"cc",text:e.label})):n.trigger(c.Private.CCStateChanged,{value:"off",lang:""}))})):(n.on(c.Player.RequestFullScreen,this.adjustLayout.bind(this)),n.on(c.Player.CancelFullScreen,this.adjustLayout.bind(this)),o=p.debounce(function(){i.isCustomRenderer&&i.activeRenderer.resetCuesStyle(r.parser.cues)},100),d.on(window,"resize",o)),p.throttle(function(){i.isShow&&(i.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+h+"px")+")"},i.parser.cues),i.isCustomRenderer)&&i.player.paused()&&(i.activeRenderer.hide(),i.activeRenderer.restore())},100)),o=(n.on(c.Private.ShowBar,o),p.throttle(function(){i.isShow&&(i.activeRenderer.forceUpdateCuesStyle({transform:"none"},i.parser.cues),i.isCustomRenderer)&&i.player.paused()&&(i.activeRenderer.hide(),i.activeRenderer.restore())},100));n.on(c.Private.HideBar,o),n.on(c.Private.VttHide,function(){r.hide()}),n.on(c.Private.VttSwitchTrack,function(e){r.switchTrack(e.paramData)}),n.on(c.Private.VttClearTracks,function(){r.reset()})},t.createRendererInstance=function(e){this.activeRenderer&&this.activeRenderer.dispose();var t=this.player.getOptions(),r={player:this.player};this.adaptPlatform(),e?e===s.VttBasicRenderer.RENDER_TYPE_NATIVE?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r)):t.useNativeTextRenderer?this.activeRenderer=new s.NativeRenderer(r):(r.overlayId=this.getOverlayId(),this.activeRenderer=new s.CustomRenderer(r))},t.switchTrack=function(t){var e,r=this;this.trackConfigs&&this.trackConfigs.length&&(this.activeTrackConfig&&(this.parser.dispose(),this.parser=new o,this.activeRenderer.clearTrack(this.activeTrackConfig.language),this.activeRenderer.hide()),this.activeTrackConfig=t,e=this.trackConfigs.find(function(e){return e.language===t}))&&(e=e._loaded?"":(e||{}).src,this.loadVtt(e,function(){r.parseVtt(),r.activeRenderer.addCues(r.parser.cues,r.activeTrackConfig.language),r.show()}))},t.adaptPlatform=function(){var e=this.player.getOptions();u.IS_IOS&&(e.useNativeTextRenderer=!0)},t.loadVtt=function(e,t){var r=this;e?this.loader.loadFromUrl(e,function(e){r.activeTrackConfig._loaded=!0,r.vttText[r.activeTrackConfig.language]=e,t&&t()}):t&&t()},t.show=function(){this._isShow=!0,this.isCustomRenderer&&this.startTickTimeListener(),this.activeRenderer.show(this.activeTrackConfig.language);var e=this.player.el().getElementsByClassName("prism-controlbar")[0];e&&"block"===(null==(e=e.style)?void 0:e.display)&&this.activeRenderer.forceUpdateCuesStyle({transform:"translateY("+("-"+h+"px")+")"},this.parser.cues)},t.hide=function(){this._isShow=!1,this.clearTicker(),this.activeRenderer.hide()},t.switchRenderer=function(e){var t=this,r=s.VttBasicRenderer.RENDER_TYPE_NATIVE,i=s.VttBasicRenderer.RENDER_TYPE_CUSTOM;(e===r&&this.activeRenderer.type!==r||e===i&&this.activeRenderer.type!==i)&&(this.createRendererInstance(e),this.trackConfigs.forEach(function(e){return t.activeRenderer.addTrack(e)}),this.activeRenderer.addCues(this.parser.cues,this.activeTrackConfig.language),this.show())},t.parseVtt=function(){this.parser.parse(this.vttText[this.activeTrackConfig.language])},t.adjustLayout=function(){var e=this;this.isShow&&this.isCustomRenderer&&(this.activeRenderer.hide(),setTimeout(function(){e.activeRenderer.restore()},300))},t.startTickTimeListener=function(){var t=this;this.clearTicker(),this.tick(function(){var e=t.player.getCurrentTime();isNaN(e)||t.activeRenderer.renderCues(t.findTargetCues(e))})},t.tick=function(e){var t=this;this.tickTimer=requestAnimationFrame(function(){try{e()}catch(e){console.log("e",e)}t.tick(e)})},t.clearTicker=function(){this.tickTimer&&(cancelAnimationFrame(this.tickTimer),this.tickTimer=null)},t.getOverlayId=function(){var e=(this.player.el().getElementsByClassName("prism-text-overlay")||[])[0];if(e)return e.id},t.findTargetCues=function(e){if(this.parser&&e!==this.prevPosition){this.prevPosition=e;for(var t=[],r=0;r<this.parser.cues.length;r++){var i=this.parser.cues[r];if(e>=i.startTime&&e<=i.endTime)t.push(i);else if(e<i.startTime)break}return t}},t.reset=function(){this.clearTicker(),this.parser&&this.parser.reset(),this.activeRenderer&&this.activeRenderer.reset()},t.dispose=function(){this.clearTicker(),this.parser&&(this.parser.dispose(),this.parser=null),this.activeRenderer&&(this.activeRenderer.dispose(),this.activeRenderer=null),this.trackConfigs=null,this.hasUserTracks=!1,this.vttText={},this.prevPosition=null,this._enabled=!1,this._isShow=!1},n(e,[{key:"isShow",get:function(){return this._isShow}},{key:"enabled",get:function(){return this._enabled},set:function(e){this._enabled=e}},{key:"isCustomRenderer",get:function(){if(this.activeRenderer)return this.activeRenderer.type===s.VttBasicRenderer.RENDER_TYPE_CUSTOM}},{key:"activeTrackConfig",get:function(){var e;return null==(e=this.trackConfigs)?void 0:e.find(function(e){return e._isActive})},set:function(t){this.trackConfigs.forEach(function(e){return e._isActive=e.language===t})}}])})(),f=(()=>{function e(){this.value=!1,this.timer=null}return e.prototype.sleep=function(e){var t=this;this.timer&&clearTimeout(this.timer),this.value=!0,this.timer=setTimeout(function(){t.value=!1},e)},n(e,[{key:"isSleep",get:function(){return this.value}}])})();t.exports=e},{"../../lib/event":34,"../../lib/ua":49,"../../player/base/event/eventtype":68,"../../ui/component/util":162,"./vtt-loader":57,"./vtt-parser":58,"./vtt-renderer":59}],56:[function(e,t,r){function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}function n(e,t){e.prototype=Object.create(t.prototype),o(e.prototype.constructor=e,t)}function o(e,t){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=e("../../lib/data"),c={DISABLED:"disabled",SHOWING:"showing",HIDDEN:"hidden"},u={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",METADATA:"metadata",CHAPTERS:"chapters"},e=(r=>{function e(e){var e=i({},e=void 0===e?{}:e,{kind:e.kind||u.SUBTITLES,language:e.language||e.srclang||""}),t=e.mode||c.DISABLED;return-1<[u.METADATA,u.CHAPTERS].indexOf(e.kind)&&(t=c.HIDDEN),e.mode=t,(t=r.call(this,e)||this)._cues=[],t._activeCues=[],t._settings={},t._nativeTrack=null,t._extData={},t._settings=e,t}n(e,r);var t=e.prototype;return t.setExtData=function(e){this._extData=i({},this._extData,e=void 0===e?{}:e)},t.addCue=function(e){this._cues.push(e),this.nativeTrack&&this.nativeTrack.addCue(e)},t.removeCue=function(t){this._cues=this._cues.filter(function(e){return e!==t}),this.nativeTrack&&this.nativeTrack.removeCue(t)},s(e,[{key:"default",get:function(){return this._settings.default}},{key:"mode",get:function(){return this._settings.mode},set:function(e){this._settings.mode=e,this.nativeTrack&&(this.nativeTrack.mode=e)}},{key:"language",get:function(){return this._settings.language},set:function(e){this._settings.language=e,this.nativeTrack&&(this.nativeTrack.language=e)}},{key:"cues",get:function(){return this._cues}},{key:"activeCues",get:function(){return this._activeCues}},{key:"nativeTrack",get:function(){return this._nativeTrack},set:function(e){this._nativeTrack=e}}])})((()=>s(function(e){this._id=(e=void 0===e?{}:e).id||"prism-track-"+l.guid(),this._kind=e.kind||"",this._language=e.language||"",this._label=e.label||""},[{key:"label",get:function(){return this._label},set:function(e){this._label=e}},{key:"id",get:function(){return this._id}},{key:"kind",get:function(){return this._kind}},{key:"language",get:function(){return this._language}}]))()),d=(e=>{function t(){return e.call(this)||this}return n(t,e),t})((()=>{function e(){this._trackList=[]}return e.prototype.addTrack=function(e){var t=this.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this._trackList[t]}}),-1===this._trackList.indexOf(e)&&this._trackList.push(e)},s(e,[{key:"length",get:function(){return this._trackList.length}},{key:"list",get:function(){return this._trackList}}])})());t.exports.TextTrack=e,t.exports.TextTrackList=d,t.exports.TRACK_MODE=c,t.exports.TRACK_KIND=u},{"../../lib/data":31}],57:[function(e,t,r){var i=e("../io");t.exports=(()=>{function e(){}return e.prototype.loadFromUrl=function(e,t){i.get(e,function(e){t(e)},function(e,t){console.log("ERR",e,t)})},e})()},{"../io":41}],58:[function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}var o=e("./vttjs").WebVTT,e=(()=>{function e(){var t=this;this._cues=[],this._regions=[],this.parser=new o.Parser(window,o.StringDecoder()),this.parser.onregion=function(e){t._regions.push(e)},this.parser.oncue=function(e){t._cues.push(e)},this.parser.onflush=function(){},this.parser.onparsingerror=function(e){}}var t,r,i=e.prototype;return i.parse=function(e){this.parser.parse(e),this.parser.flush()},i.reset=function(){this.parser.flush(),this._cues=[],this._regions=[]},i.dispose=function(){this.parser.flush(),this.parser=null,this._cues=[],this._regions=[]},i=e,(t=[{key:"cues",get:function(){return this._cues}}])&&n(i.prototype,t),r&&n(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i})();t.exports=e},{"./vttjs":60}],59:[function(e,t,r){function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(e=>"symbol"==typeof(e=((e,t)=>{if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0===r)return("string"===t?String:Number)(e);if("object"!=typeof(r=r.call(e,t||"default")))return r;throw new TypeError("@@toPrimitive must return a primitive value.")})(e,"string"))?e:e+"")(i.key),i)}}function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}function a(e,t){e.prototype=Object.create(t.prototype),n(e.prototype.constructor=e,t)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}e("../../player/base/event/eventtype");var s=e("./text-track"),l=e("./vttjs").WebVTT,c=e("../../lib/dom"),u=s.TextTrack,d=s.TextTrackList,p=s.TRACK_MODE,h=(s.TRACK_KIND,(()=>{function e(e){this.player=null,this.type=null,this.trackList=null,this.overrideStyle={},this.player=(e=e||{}).player,this.defineTextTrackGetter(),this.trackList=new d}var t=e.prototype;return t.log=function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=console).log.apply(e,["[LOG:"+this.type+"]"].concat(r))},t.defineTextTrackGetter=function(){var e=this;this.player.getTextTracks=function(){return e.trackList||[]}},t.show=function(e){e=this.findTrackByLanguage(e);e&&(e.mode=p.SHOWING)},t.findTrackByLanguage=function(t){return this.trackList.list.find(function(e){return e.language===t})},t.clearCurrentCues=function(e){if(e){var t=e.mode;if(t===p.DISABLED&&(e.mode=p.HIDDEN),e.cues)for(var r=e.cues.length;r--;)e.removeCue(e.cues[r]);t===p.DISABLED&&(e.mode=t)}},t.addTrack=function(){},t.addCues=function(){},t.restore=function(){},t.renderCues=function(){},t.updateCuesStyle=function(){},t.clearTrack=function(e){this.clearCurrentCues(this.findTrackByLanguage(e))},t.clearAllTracks=function(){var t=this;this.trackList&&this.trackList.length&&this.trackList.list.forEach(function(e){e.mode=p.DISABLED,t.clearCurrentCues(e)}),this.trackList=new d},t.reset=function(){this.hide(),this.clearAllTracks()},t.dispose=function(){this.hide(),this.clearAllTracks(),this.player&&this.player.getTextTracks&&(this.player.getTextTracks=null),this.player=null,this.type=null},e})()),e=(h.RENDER_TYPE_CUSTOM="CUSTOM",h.RENDER_TYPE_NATIVE="NATIVE",(r=>{function e(e){var t=r.call(this,e)||this;return t.overlayId=null,t.currentCues=null,e=e||{},t.type=h.RENDER_TYPE_CUSTOM,t.overlayId=e.overlayId,t}a(e,r);var t=e.prototype;return t.addTrack=function(e){var t=new u({kind:e.kind,label:e.label,language:e.language,default:e.default});t.mode=e.default?p.SHOWING:p.DISABLED,this.trackList.addTrack(t)},t.hide=function(){return l.processCues(window,[],document.getElementById(this.overlayId))},t.restore=function(){this.currentCues&&(this.currentCues.forEach(function(e){return e.displayState=null}),l.processCues(window,this.currentCues,this.overlayEl),this.updateCuesStyle(this.currentCues))},t.renderCues=function(e){e&&(this.currentCues=e,this.overlayEl||(this.overlayEl=document.getElementById(this.overlayId)),l.processCues(window,e,this.overlayEl),this.updateCuesStyle(e))},t.updateCuesStyle=function(e){var i=this;e.forEach(function(e){var t,r=e.displayState;r._styleSetDone||r&&(r.setAttribute("class","prism-cue"),i.overlayEl||(i.overlayEl=document.getElementById(i.overlayId)),e=i.overlayEl.offsetWidth,t=i.overlayEl.offsetHeight,(e=Math.min(e,t))&&(r.style.fontSize=.05*e+"px",r.style.height="auto",r.style.top="auto"),44<((e,t)=>(e=e.getBoundingClientRect(),t.getBoundingClientRect().bottom-e.bottom))(r,i.overlayEl)&&(i.overrideStyle.transform="none"),Object.keys(i.overrideStyle).forEach(function(e){i.tryUpdateStyle(r,e,i.overrideStyle[e])}),r._styleSetDone=!0)})},t.updateOverrideStyle=function(e){this.overrideStyle=i({},this.overrideStyle,e=void 0===e?{}:e)},t.forceUpdateCuesStyle=function(e,t){void 0===t&&(t=[]),this.updateOverrideStyle(e=void 0===e?{}:e),this.resetCuesStyle(t)},t.tryUpdateStyle=function(e,t,r){try{e.style[t]=r}catch(e){}},t.resetCuesStyle=function(e){e&&e.length&&e.forEach(function(e){e.displayState&&(e.displayState=null)})},t.dispose=function(){r.prototype.dispose.call(this),this.overlayId=null,this.currentCues=null},e})(h)),s=(t=>{function e(e){return(e=t.call(this,e=void 0===e?{}:e)||this).type=h.RENDER_TYPE_NATIVE,e}a(e,t);var r,i,n=e.prototype;return n.addTrack=function(t){var e=this.player.tag,r=Array.from(e.textTracks)||[],i=r.find(function(e){return e.language===t.language}),r=i?(this.log("sameLangTrack",i,r),this.clearCurrentCues(i),i.kind=t.kind,i.label=t.label,i):e.addTextTrack(t.kind,t.label,t.language),i=(r.mode=t.default?p.SHOWING:p.DISABLED,new u(t));i.nativeTrack=r,this.trackList.addTrack(i)},n.addCues=function(e,t){var r;e&&e.length&&(r=this.trackList.list.find(function(e){return e.language===t}))&&e.forEach(function(e){r.addCue(e)})},n.hide=function(){this.trackList.list.forEach(function(e){e.mode=e.mode===p.SHOWING?p.HIDDEN:e.mode})},n.invalidAllTracks=function(){},n.forceUpdateCuesStyle=function(e,t){c.addCssByStyle("video::-webkit-media-text-track-container{transform: "+e.transform+";}")},n.dispose=function(){t.prototype.dispose.call(this)},n=e,(r=[{key:"activeTrack",get:function(){return this.trackList.list.find(function(e){return e.mode===p.SHOWING})}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n})(h);t.exports.VttBasicRenderer=h,t.exports.CustomRenderer=e,t.exports.NativeRenderer=s,t.exports.CTR_BAR_HEIGHT=44},{"../../lib/dom":33,"../../player/base/event/eventtype":68,"./text-track":56,"./vttjs":60}],60:[function(e,t,r){t.exports={WebVTT:e("./vtt.js").WebVTT}},{"./vtt.js":61}],61:[function(e,t,r){var i=this;function o(e,t){return void 0===t&&(t=1),"rgba("+[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16),t].join(",")+")"}var l,d=1;function n(e,t,r){switch(r){case"webvtt.font.color":case"webvtt.font.opacity":var i=Services.prefs.getCharPref("webvtt.font.color"),n=Services.prefs.getIntPref("webvtt.font.opacity")/100;l.fontSet=o(i,n);break;case"webvtt.font.scale":d=Services.prefs.getIntPref("webvtt.font.scale")/100;break;case"webvtt.bg.color":case"webvtt.bg.opacity":i=Services.prefs.getCharPref("webvtt.bg.color"),n=Services.prefs.getIntPref("webvtt.bg.opacity")/100;l.backgroundSet=o(i,n);break;case"webvtt.edge.color":case"webvtt.edge.type":i=Services.prefs.getIntPref("webvtt.edge.type"),n=Services.prefs.getCharPref("webvtt.edge.color");l.edgeSet=["","0px 0px ","4px 4px 4px ","-2px -2px ","2px 2px "][i]+o(n)}}"undefined"!=typeof Services&&(l={},["webvtt.font.color","webvtt.font.opacity","webvtt.font.scale","webvtt.bg.color","webvtt.bg.opacity","webvtt.edge.color","webvtt.edge.type"].forEach(function(e){n(0,0,e),Services.prefs.addObserver(e,n,!1)}));var a=Object.create||function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return s.prototype=e,new s};function s(){}function c(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function h(e){function t(e,t,r,i){return 3600*(0|e)+60*(0|t)+(0|r)+(0|i)/1e3}e=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return e?e[3]?t(e[1],e[2],e[3].replace(":",""),e[4]):59<e[1]?t(e[1],e[2],0,e[4]):t(0,e[1],e[2],e[4]):null}function u(){this.values=a(null)}function p(e,t,r,i){var n,o,a=i?e.split(i):[e];for(n in a)"string"==typeof a[n]&&2===(o=a[n].split(r)).length&&t(o[0],o[1])}((c.prototype=a(Error.prototype)).constructor=c).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},u.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(t=parseFloat(t))&&t<=100)&&(this.set(e,t),!0)}};var f={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},_={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},g={v:"title",lang:"lang"},y={rt:"ruby"};function v(e,t){function r(e){return f[e]}for(var i,n,o,a,s,l,c,u=e.document.createElement("div"),d=u,p=[];null!==(c=void 0,c=t?(c=(c=t.match(/^([^<]*)(<[^>]*>?)?/))[1]||c[2],t=t.substr(c.length),c):null);)"<"===c[0]?"/"===c[1]?p.length&&p[p.length-1]===c.substr(2).replace(">","")&&(p.pop(),d=d.parentNode):(o=h(c.substr(1,c.length-2)))?(i=e.document.createProcessingInstruction("timestamp",o),d.appendChild(i)):(n=c.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(o=n[1],a=n[3],l=s=void 0,l=_[o],i=l?((s=e.document.createElement(l)).localName=l,(l=g[o])&&a&&(s[l]=a.trim()),s):null)&&(o=d,y[(l=i).localName]&&y[l.localName]!==o.localName||(n[2]&&(i.className=n[2].substr(1).replace("."," ")),p.push(n[1]),d.appendChild(i),d=i)):d.appendChild(e.document.createTextNode((e=>{for(;n=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(n[0],r);return e})(c)));return u}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function b(e){var t=[],r="";if(e&&e.childNodes)for(o(t,e);r=function e(t){var r,i,n;return t&&t.length?(i=(r=t.pop()).textContent||r.innerText)?(n=i.match(/^.*(\n|\r)/))?n[t.length=0]:i:"ruby"===r.tagName?e(t):r.childNodes?(o(t,r),e(t)):void 0:null}(t);)for(var i=0;i<r.length;i++)if((e=>{for(var t=0;t<m.length;t++){var r=m[t];if(e>=r[0]&&e<=r[1])return 1}})(r.charCodeAt(i)))return"rtl";return"ltr";function o(e,t){for(var r=t.childNodes.length-1;0<=r;r--)e.push(t.childNodes[r])}}function S(){}function T(e,t,r){var i="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent),n="rgba(255, 255, 255, 1)",o="rgba(0, 0, 0, 0.8)",a="",n=(void 0!==l&&(n=l.fontSet,o=l.backgroundSet,a=l.edgeSet),i&&(n="rgb(255, 255, 255)",o="rgb(0, 0, 0)"),S.call(this),this.cue=t,this.cueDiv=v(e,t.text),{color:n,backgroundColor:o,textShadow:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"}),s=(i||(n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",n.unicodeBidi="plaintext"),this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={textAlign:"middle"===t.align?"center":t.align,font:r.font,whiteSpace:"pre-line",position:"absolute"},i||(n.direction=b(this.cueDiv),n.writingMode=""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(n),this.div.appendChild(this.cueDiv),0);switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function E(e){var t,r,i,n,o="undefined"!=typeof navigator&&/MSIE\s8\.0/.test(navigator.userAgent);e.div&&(t=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop,n=(n=(n=e.div.childNodes)&&n[0])&&n.getClientRects&&n.getClientRects(),e=e.div.getBoundingClientRect(),n=n?Math.max(n[0]&&n[0].height||0,e.height/n.length):0),this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||t,this.bottom=e.bottom||i+(e.height||t),this.width=e.width||r,this.lineHeight=void 0!==n?n:e.lineHeight,o&&!this.lineHeight&&(this.lineHeight=13)}function w(e,t,s,l){var r,i=new E(t),n=t.cue,o=(e=>{if("number"==typeof e.line&&(e.snapToLines||0<=e.line&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,r=t.textTrackList,i=0,n=0;n<r.length&&r[n]!==t;n++)"showing"===r[n].mode&&i++;return-1*++i})(n),a=[];if(n.snapToLines){switch(n.vertical){case"":a=["+y","-y"],r="height";break;case"rl":a=["+x","-x"],r="width";break;case"lr":a=["-x","+x"],r="width"}var c=i.lineHeight,u=c*Math.round(o),d=s[r]+c,p=a[0];Math.abs(u)>d&&(u=u<0?-1:1,u*=Math.ceil(d/c)*c),o<0&&(u+=""===n.vertical?s.height:s.width,a=a.reverse()),i.move(p,u)}else{var h=i.lineHeight/s.height*100;switch(n.lineAlign){case"middle":o-=h/2;break;case"end":o-=h}switch(n.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}a=["+y","-x","+x","-y"],i=new E(t)}d=((e,t)=>{for(var r,i=new E(e),n=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(s,t[o])||e.within(s)&&e.overlapsAny(l);)e.move(t[o]);if(e.within(s))return e;var a=e.intersectPercentage(s);a<n&&(r=new E(e),n=a),e=new E(i)}return r||i})(i,a);t.move(d.toCSSCompatValues(s))}function x(){}S.prototype.applyStyles=function(e,t){for(var r in t=t||this.div,e)e.hasOwnProperty(r)&&(t.style[r]=e[r])},S.prototype.formatStyle=function(e,t){return 0===e?0:e+t},(T.prototype=a(S.prototype)).constructor=T,E.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},E.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},E.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},E.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},E.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},E.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},E.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},E.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,r=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||r}},x.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},x.convertCueToDOMTree=function(e,t){return e&&t?v(e,t):null},x.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appendChild(i),(e=>{for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return 1})(t))for(var n,o,a=[],s=E.getSimpleBoxPosition(i),l={font:Math.round(.05*s.height*100)/100*d+"px sans-serif"},c=0;c<t.length;c++)n=new T(e,o=t[c],l),i.appendChild(n.div),w(0,n,s,a),o.displayState=n.div,a.push(E.getSimpleBoxPosition(n));else for(var u=0;u<t.length;u++)i.appendChild(t[u].displayState)},(x.Parser=function(e,t){this.window=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(e){if(!(e instanceof c))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var i=this;function t(){for(var e=i.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,i.buffer=e.substr(t),r}function r(e){p(e,function(e,t){var n;"Region"===e&&(e=t,n=new u,p(e,function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r,i=t.split(",");2===i.length&&((r=new u).percent("x",i[0]),r.percent("y",i[1]),r.has("x")&&r.has("y"))&&(n.set(e+"X",r.get("x")),n.set(e+"Y",r.get("y")));break;case"scroll":n.alt(e,t,["up"])}},/=/,/\s/),n.has("id"))&&((e=new i.window.VTTRegion).width=n.get("width",100),e.lines=n.get("lines",3),e.regionAnchorX=n.get("regionanchorX",0),e.regionAnchorY=n.get("regionanchorY",100),e.viewportAnchorX=n.get("viewportanchorX",0),e.viewportAnchorY=n.get("viewportanchorY",100),e.scroll=n.get("scroll",""),i.onregion&&i.onregion(e),i.regionList.push({id:n.get("id"),region:e}))},/:/)}e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));try{if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;var n,o=(n=t()).match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new c(c.Errors.BadSignature);i.state="HEADER"}for(var a=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:n=t(),i.state){case"HEADER":/:/.test(n)?r(n):n||(i.state="ID");continue;case"NOTE":n||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){i.state="NOTE";break}if(!n)continue;if(i.cue=new i.window.VTTCue(0,0,""),i.state="CUE",-1===n.indexOf("--\x3e")){i.cue.id=n;continue}case"CUE":try{((t,r,o)=>{var i=t;function e(){var e=h(t);if(null===e)throw new c(c.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function n(){t=t.replace(/^\s+/,"")}if(n(),r.startTime=e(),n(),"--\x3e"!==t.substr(0,3))throw new c(c.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),n(),r.endTime=e(),n();var a=t,s=new u;p(a,function(e,t){switch(e){case"region":for(var r=o.length-1;0<=r;r--)if(o[r].id===t){s.set(e,o[r].region);break}break;case"vertical":s.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),n=i[0];s.integer(e,n),s.percent(e,n)&&s.set("snapToLines",!1),s.alt(e,n,["auto"]),2===i.length&&s.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=t.split(","),s.percent(e,i[0]),2===i.length&&s.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":s.percent(e,t);break;case"align":s.alt(e,t,["start","middle","end","left","right"])}},/:/,/\s/),r.region=s.get("region",null),r.vertical=s.get("vertical","");try{r.line=s.get("line","auto")}catch(e){}r.lineAlign=s.get("lineAlign","start"),r.snapToLines=s.get("snapToLines",!0),r.size=s.get("size",100);try{r.align=s.get("align","center")}catch(e){r.align=s.get("align","middle")}try{r.position=s.get("position","auto")}catch(e){r.position=s.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},r.align)}r.positionAlign=s.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},r.align)})(n,i.cue,i.regionList)}catch(e){i.reportOrThrowError(e),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var s=-1!==n.indexOf("--\x3e");if(!n||s&&(a=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=n;continue;case"BADCUE":n||(i.state="ID");continue}}}catch(e){i.reportOrThrowError(e),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),!t.cue&&"HEADER"!==t.state||(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new c(c.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},i.WebVTT=x},{}],62:[function(e,t,r){var n=e("../lib/io");e("../lib/storage");function i(e){this._uploadDuration=e.logDuration||5,this._uploadCount=e.logCount||10,this._logReportTo=e.logReportTo,this._dumpLogReportTo=e.dumpLogReportTo,this._logs=[],this._retry=0,this._disposed=!1,this._supportLocalStorage=!0;var t;try{localStorage?(t=localStorage.getItem("__aliplayer_log_data"),localStorage.removeItem("__aliplayer_log_data"),t&&(this._logs=JSON.parse(t))):this._supportLocalStorage=!1}catch(e){this._supportLocalStorage=!1}this._start()}i.prototype.add=function(e){var t=this._logs.length;if(e.__time__=Math.round(new Date/1e3),0<t&&"4001"==e.e){var t=this._logs[t-1];if("4001"==t.e&&t.__time__-e.__time__<5)return}this._logs.push(e),(this._logs.length>this._uploadCount||"4001"==e.e||"2002"==e.e||"9002"==e.e&&null!=(t=e.args)&&t.includes("dump::"))&&this._report()},i.prototype.dispose=function(){this._report(),this._disposed=!0},i.prototype._start=function(){this._disposed=!1;this._retry=0,this._report()},i.prototype._report=function(t){var e,r,i;this._tickHandler&&(clearTimeout(this._tickHandler),this._tickHandler=null),0<(t=t||this._logs.splice(0,this._uploadCount)).length?(i={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(e=JSON.stringify({__logs__:t,__source__:""})).length},n.postWithHeader((r=this)._logReportTo,e,i,function(e){r._tick()},function(e){0==r._retry?(r._retry=1,r._report(t)):r._tick()})):this._tick()},i.prototype.reportDump=function(e){var t;e&&(t={"Content-Type":"application/json;charset=UTF-8","x-log-apiversion":"0.6.0","x-log-bodyrawsize":(e=JSON.stringify({__logs__:[e],__source__:""})).length},n.postWithHeader(this._dumpLogReportTo,e,t,function(e){},function(e){}))},i.prototype._tick=function(){var e;this._disposed||(this._retry=0,(e=this)._logs.length>this._uploadCount?e._report():this._tickHandler=setTimeout(function(){e._report()},1e3*this._uploadDuration))},t.exports=i},{"../lib/io":41,"../lib/storage":48}],63:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var i,n=e("../lib/oo"),s=e("../lib/object"),_=e("../lib/data"),l=e("../lib/io"),g=e("../lib/ua"),o=e("../lib/event"),y=e("../config"),c=e("../player/base/event/eventtype"),v=e("./util"),m=e("./log"),u=e("../lib/playerutil"),d=0,p={CREATE:1e3,STARTFETCHDATA:1003,COMPLETEFETCHDATA:1004,PREPARE:1101,PREPAREEND:1102,STARTPLAY:2e3,PLAY:2001,STOP:2002,PAUSE:2003,SEEK:2004,FULLSREEM:2005,QUITFULLSCREEM:2006,RESOLUTION:2007,RESOLUTION_DONE:2008,RECOVER:2010,SEEK_END:2011,PLAYABORT:2012,SEEKED:2014,CANPLAY:2018,FETCHEDIP:2020,CDNDETECT:2021,DETECT:2022,HEVCINFO:2023,UNDERLOAD:3002,LOADED:3001,RETRY:3003,HEARTBEAT:9001,TRACE:9002,DUMP:9003,ERROR:4001,ERRORRETRY:4002,RTSFALLBACK:4003,VOD_REQUEST_FATAL_ERROR:4004,VOD_REQUEST_FATAL_ERROR_RESUME:4005,LICENSE_RESULT:5004,SNAPSHOT:2027,ROTATE:2028,IMAGE:2029,THUMBNAILSTART:2031,THUMBNAILCOMPLETE:2032,CCSTART:2033,CCCOMPLETE:2034,AUDIOTRACKSTART:2033,AUDIOTRACKCOMPLETE:2034},e=n.extend({init:function(e,t,r){this.trackLog=r=void 0===r?!0:r,this.player=e,this.requestId="",this.sessionId=_.guid(),this.playId=0,this.firstPlay=!0,this.osName=g.os.name,this.osVersion=g.os.version||"",this.exName=g.browser.name,this.exVersion=g.browser.version||"",this.lightSaasVideoId="",this._logService="",this._h265ProbeInfo={},this.loadedDataReported=!1,this.startPlayReported=!1,this.canplayReported=!1,this.doPlayReported=!1,this.seekingData={seekingStartTime:0},this.pendingPrepareEndData=null,this.h265RenderTypeTimer=null,this.statisticsHistoryTimer=null,this.timeline=[{name:"init",ts:performance.now()}],this.checkSeekStuckedTimer=null,y.logReportTo=t.logReportTo||y.logReportTo,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),t.logBatched&&(this._logService=new m(y));var r=this.player.getOptions(),e=t.from||"",t=(r.isLive,r.isLive?"live":"vod"),i="pc",n=(g.IS_IPAD?i="pad":g.os.phone&&(i="phone"),this.encodeURL(g.getReferer())),o=g.getHref(),a=this.encodeURL(o),s="",o=(o&&(s=g.getHost(o)),y.h5Version),l=v.getUuid(),c=r.source?this.encodeURL(r.source):"",u=g.getHost(r.source),d=r.userId?r.userId+"":"0",p=this.sessionId,h=(new Date).getTime(),f=r.traceId||"";this._userNetInfo={cdnIp:"",localIp:""};this.opt={APIVersion:"0.6.0",t:h,ll:"info",lv:"1.0",pd:"player",md:"saas_player",ui:"saas_player",sm:"play",os:this.osName,ov:this.osVersion,et:this.exName,ev:this.exVersion,uat:g.USER_AGENT,hn:"0.0.0.0",bi:e,ri:p,e:"0",args:"0",li_ki:r.license.key||"",vt:t,tt:i,dm:"h5",av:o,uuid:l,vu:c,vd:u,ua:d,dn:"custom",cdn_ip:"0.0.0.0",app_n:s,r:n,pu:a,ti:f},this.bindEvent()},updateVideoInfo:function(e){e=e.from||"";this.opt.bi=e+"",this.updateSourceInfo()},updateSourceInfo:function(){var e,t=this.player.getOptions();t&&(e=t.source?this.encodeURL(t.source):"",t=g.getHost(t.source),this.opt.vu=e,this.opt.vd=t)},updateTraceId:function(e){this.opt.ti=e},updateLightSaasVideoId:function(e){this.lightSaasVideoId=e},replay:function(){this.reset(),this.player.trigger(c.Video.LoadStart),this.player.trigger(c.Video.LoadedMetadata),this.player.trigger(c.Video.LoadedData),this.startHeartBeat()},bindEvent:function(){var r=this;this.player.on(c.Private.Create,function(e){r._onCreate(e)}),this.player.on(c.Player.Init,function(){r._onPlayerInit()}),this.player.on(c.Video.LoadStart,function(){r._onPlayerloadstart()}),this.player.on(c.Video.LoadedMetadata,function(){r._onPlayerLoadMetadata()}),this.player.on(c.Video.LoadedData,function(){r._onPlayerLoaddata()}),this.player.on(c.Player.H265PlayInfo,function(e){r._onH265PlayInfo(e),r._onPlayerH265PlayInfo(e)}),this.player.on(c.Player.H266PlayInfo,function(e){r._onH265PlayInfo(e),r._onPlayerH265PlayInfo(e)}),this.player.on(c.Video.Play,function(){r._onPlayerPlay()}),this.player.on(c.Video.Playing,function(){r._onPlayerReady()}),this.player.on(c.Video.Ended,function(){r._onPlayerFinish()}),this.player.on(c.Video.Pause,function(){r._onPlayerPause()}),this.player.on("seeking",function(){r._onPlayerSeeking()}),this.player.on("seeked",function(){r._onPlayerSeeked()}),this.player.on(c.Private.LicenseHasResult,function(e){r._onLicenseHasResult(e)}),this.player.on(c.Private.SeekStart,function(e){r._onPlayerSeekStart(e)}),this.player.on(c.Private.EndStart,function(e){r._seekEndData=e.paramData}),this.player.on(c.Player.Waiting,function(){r._onPlayerLoaded()}),this.player.on(c.Video.CanPlayThrough,function(){}),this.player.on(c.Video.CanPlay,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._onPlayerUnderload(),r._onPlayerCanplay()}),this.player.on(c.Video.TimeUpdate,function(){r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._seekEndData&&r.player._seeking&&r._onPlayerSeekEnd()}),this.player.on(c.Player.Error,function(e){r._onPlayerError(e)}),this.player.on(c.Player.RequestFullScreen,function(){r._onFullscreenChange(1)}),this.player.on(c.Player.CancelFullScreen,function(){r._onFullscreenChange(0)}),this.player.on(c.Private.PREPARE,function(e){r._prepareTime=performance.now(),r._log("PREPARE",{dn:e.paramData}),r.timeline.push({name:"prepare",ts:performance.now()})}),this.player.on(c.Private.ManualPlay,function(){r.loadedDataReported||(r._prepareTime=performance.now(),r.timeline.push({name:"prepare2",ts:performance.now()}))}),this.player.on(c.Player.Snapshoted,function(){r._log("SNAPSHOT")}),this.player.on(c.Private.Retry,function(e){e=e.paramData||{};r._log("RETRY",{type:e.type,source:e.source})}),this.player.on(c.Player.RtsFallback,function(e){var t,e=e.paramData||{};r._log("RTSFALLBACK",{reason:null==(t=e.reason)?void 0:t.error_msg,url:e.fallbackUrl})}),this.player.on(c.Private.VodRequestException,function(e){e=e.paramData||{};r.reportVodException(e)}),this.player.on(c.Private.VodRequestExceptionResume,function(e){e=e.paramData||{};r.reportVodExceptionResume(e)}),this.player.on(c.Private.TraceLog,function(e){e=e.paramData||{};r._reportTrace(e)}),this.player.on(c.Private.DumpBuffer,function(e){e=e.paramData||{};r._reportDump(e)}),this.player.on(c.Private.StatisticsInfo,function(e){e=e.paramData||{};r._onStatisticsHistoryUpdate(e)}),this.player.on(c.Private.Timeline,function(e){e=e.paramData||{};r._onTimeline(e)}),o.on(this.player.tag,c.Video.Playing,function(){r.reportPlaying()}),o.on(this.player.tag,c.Video.TimeUpdate,function(){r.reportPlaying()}),this.startHeartBeat.call(this),this.startStatisticsHistory.call(this)},startStatisticsHistory:function(){var e=this;"n.dingtalk.com"===this.opt.app_n&&(this.statisticsHistoryTimer&&clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=setInterval(function(){e.player.trigger(c.Private.TraceLog,"[statistics_history]"+JSON.stringify(e.statisticsHistory)),e.resetStatisticsHistoryData()},this.player._options.statisticsReportInterval))},reportPlaying:function(){var e;this.doPlayReported||this.player.paused()||0===this.player.readyState()||(this.doPlayReported=!0,this.first_play_time=performance.now(),e={dsm:"fix",tc:this.first_play_time-this.loadstartTime,fc:this.first_play_time-this.playstartTime},this._log("PLAY",e))},removeEvent:function(){this.player.offAll("init"),this.player.offAll("ready"),this.player.offAll("ended"),this.player.offAll("play"),this.player.offAll("pause"),this.player.offAll("seekStart"),this.player.offAll("seekEnd"),this.player.offAll("canplaythrough"),this.player.offAll("playing"),this.player.offAll("timeupdate"),this.player.offAll("error"),this.player.offAll("fullscreenchange"),this.player.offAll("seeking"),this.player.offAll("seeked"),this.player.offAll(c.Private.PREPARE),this.player.offAll(c.Player.RtsFallback),o.off(this.player.tag,c.Video.Playing),o.off(this.player.tag,c.Video.TimeUpdate),this._logService&&this._logService.dispose(),clearInterval(i),clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=null},reset:function(){this.stucking=!1,this.startTimePlay=0,this.pause_flag=0,this.firstPlay=!1,this.playId=0,this._canPlay=0,this.seekingStartTime=0,this.prevStats={timestamp:0,bytesReceived:0,framesDecoded:0,packetsLost:0,packetsReceived:0,rtt:0},d=0,this.lightSaasVideoId="",this.resetHeartBeatStatusData(),this.resetStatisticsHistoryData(),i&&(clearInterval(i),i=null)},encodeURL:function(e){var t;return e?(t=this.player.getOptions())&&!t.logBatched?encodeURIComponent(e):e:""},startHeartBeat:function(){var o=this;i&&clearInterval(i),i=setInterval(function(){var n;o.player.getCurrentTime()&&(n=Math.floor(1e3*o.player.getCurrentTime()),o.player.paused()&&(o.prevStats.timestamp=0),++d>=o.player._options.heartHeatInterval)&&o.updateStats.call(o,function(e){var t=o._imageInfo()||{},r=o.player.tag.playbackRate,i=o.player.getVolume(),t={vt:n,interval:1e3*d,imgLength:t.imgLength,playbackRate:r,volume:i,bw:o._getbwEstimator()+"KB"},r=((t=e?a({},t,{dls:Math.floor(e.downloadSpeedPerSec),dfps:Math.floor(e.decodedFramesPerSec),pkl:Number((e.packageLossRate||0).toFixed(2)),rtt:1e3*e.rtt}):t).player_status=a({},o.heartBeatStatusData),o.player);t.time={play_time:parseFloat((r._playingTime/1e3).toFixed(2)),stuck_count:parseFloat(r._stuckCount.toFixed(2)),stuck_time:parseFloat((r._stuckTime/1e3).toFixed(2))},o._log("HEARTBEAT",t),d=0})},1e3)},updateStats:function(i){i=i||function(){};var n=this;this.player.getStats().then(function(e){var t,r;e?(t=n.prevStats,e.bytesReceived=e.bytesReceived||0,e.framesDecoded=e.framesDecoded||0,e.packetsLost=e.packetsLost||0,e.packetsReceived=e.packetsReceived||0,r=((n.prevStats=e).timestamp-t.timestamp)/1e3,i({downloadSpeedPerSec:(e.bytesReceived-t.bytesReceived)/r,decodedFramesPerSec:(e.framesDecoded-t.framesDecoded)/r,packageLossRate:(e.packetsLost-t.packetsLost)/(e.packetsLost-t.packetsLost+(e.packetsReceived-t.packetsReceived)),rtt:e.rtt,timeGap:r})):i()}).catch(function(e){console.log("error in monitor getStats: ",e),i()})},reportStartPlay:function(){this.startPlayReported||(this._log("STARTPLAY",{vt:(new Date).getTime()}),this.startPlayReported=!0)},reportCanplay:function(){this.canplayReported||(this._log("CANPLAY",{vt:(new Date).getTime()}),this.canplayReported=!0)},reportPlayAbort:function(e){this._log("PLAYABORT",{vt:(new Date).getTime(),from:e})},reportVodException:function(e){console.log("VOD_REQUEST_FATAL_ERROR",e),this._log("VOD_REQUEST_FATAL_ERROR",e)},reportVodExceptionResume:function(e){console.log("VOD_REQUEST_FATAL_ERROR_RESUME",e),this._log("VOD_REQUEST_FATAL_ERROR_RESUME",e)},resetStartPlayReportFlag:function(){this.startPlayReported=!1},resetCanplayReportFlag:function(){this.canplayReported=!1},resetLoadedDataReported:function(){this.loadedDataReported=!1,this._prepareTime=performance.now()},resetDoPlayReportFlag:function(){this.doPlayReported=!1},resetSessionId:function(){this.sessionId=_.guid()},resetHeartBeatStatusData:function(){this.heartBeatStatusData={t_last_pause:-1,t_last_resume:-1,t_last_load_start:-1,t_last_load_end:-1},this.player.startPlayTimeMonitor()},resetStatisticsHistoryData:function(){this.statisticsHistory={speed:[],framesDropped:[],downlink:[],type:[],rtt:[]}},resetTimeline:function(){var e=performance.now();this._createTime=e,this.timeline=[{name:"init",ts:e}]},resetVV:function(){this.startPlayReported&&(this.resetStartPlayReportFlag(),this.resetLoadedDataReported(),this.resetDoPlayReportFlag(),this.resetCanplayReportFlag(),this.resetSessionId(),this.resetTimeline())},updateH265ProbeInfo:function(e){this._h265ProbeInfo=e||{}},_onFullscreenChange:function(e){e?this._log("FULLSREEM",{}):this._log("QUITFULLSCREEM",{})},_onTimeline:function(t){var r=["frag_s","frag_f","frag_parsed"].includes(t.name);this.timeline.some(function(e){return r&&e.name===t.name})||this.timeline.push(t)},_onPlayerloadstart:function(){this.loadstartTime=performance.now(),this.playId=_.guid()},_onPlayerLoadMetadata:function(){this.loadMetaDataCost=performance.now()-this.loadstartTime,this.timeline.push({name:"meta",ts:performance.now()})},_onPlayerLoaddata:function(){var i,e,t,r,n=this;this.timeline.push({name:"loadeddata",ts:performance.now()}),this.loadedDataReported||(r=t=0,this.player.tag&&(t=this.player.tag.videoWidth,r=this.player.tag.videoHeight),i={fc:parseInt(performance.now()-this._createTime),tc:parseInt(performance.now()-this._prepareTime),cc:parseInt(performance.now()-this.loadstartTime),md:parseInt(this.loadMetaDataCost),mi:JSON.stringify({type:"video",definition:t+"*"+r})},this.timeline.forEach(function(e,t){try{var r=t?e.ts-n.timeline[t-1].ts:0;i["tl_"+e.name]=t+"#"+parseInt(r)}catch(e){}}),null!=(t=this.player.tag)&&t.duration&&(i.vdur=1e3*(null==(r=this.player.tag)?void 0:r.duration)),(5<this._h265ProbeInfo.codecCost||5<this._h265ProbeInfo.decoderCost)&&(t=Math.floor(this._h265ProbeInfo.codecCost)||0,r=Math.floor(this._h265ProbeInfo.decoderCost)||0,i.tc+=e=t+r,i.cc+=e,i.pcc=t,i.pdc=r),e=[{type:"audio"}],t={type:"video",codecType:null,isHardwareDecode:null},r=this._h265ProbeInfo.codecTag,u.isH265Codec(r)?t.codecType="h265":u.isH266Codec(r)?t.codecType="h266":u.isH264Codec(r)&&(t.codecType="h264"),e.push(t),i.decode_info=e,this._h265ProbeInfo.waitRenderType?(this.pendingPrepareEndData=i,this.h265RenderTypeTimer=setTimeout(function(){n._log("PREPAREEND",i),n.h265RenderTypeTimer=null},2e3)):this._log("PREPAREEND",i)),this.loadedDataReported=!0},_onStatisticsHistoryUpdate:function(e){"n.dingtalk.com"===this.opt.app_n&&(this.statisticsHistory.speed.push(parseInt(e.speed)),this.statisticsHistory.framesDropped.push(e.droppedFrames),e=navigator.connection)&&(this.statisticsHistory.downlink.push(e.downlink),this.statisticsHistory.type.push(e.effectiveType),this.statisticsHistory.rtt.push(e.rtt))},_onH265PlayInfo:function(e){var t,r;this.h265RenderTypeTimer&&(clearTimeout(this.h265RenderTypeTimer),this.h265RenderTypeTimer=null),this.pendingPrepareEndData&&(e=e.paramData,t=this.pendingPrepareEndData,this.pendingPrepareEndData=null,r=t.decode_info[1],"wasm"===e.renderType&&(r.isHardwareDecode=!1),this._log("PREPAREEND",t))},_onPlayerH265PlayInfo:function(e){e=e.paramData||{};this._log("HEVCINFO",{cd:e.codecTag,rd:e.renderType,si:e.simd,sio:e.simdOption,wt:e.wasmThreads,wto:e.wasmThreadsOption,sp:e.splayer})},_onPlayerCanplay:function(){this._canPlay=1,this.reportCanplay(),this.prevStats.timestamp||this.updateStats.call(this)},_onCreate:function(e){e=e.paramData||{};e.hasPa=!!e.playauth,delete e.playauth,e.hasSk=!!e.accessKeySecret,delete e.accessKeySecret,e.hasSt=!!e.securityToken,delete e.securityToken,this._log("CREATE",e),this._createTime=performance.now()},_onPlayerInit:function(){this.stucking=!1,this.pause_flag=0,this.startTimePlay=0,this._canPlay=0,this.seekingStartTime=0},_onPlayerReady:function(){this.startTimePlay||(this.startTimePlay=(new Date).getTime())},_onPlayerFinish:function(){this._log("STOP",{vt:Math.floor(1e3*this.player.getCurrentTime())}),this.reset()},_onPlayerPlay:function(){var e;this.playstartTime=(new Date).getTime(),0==this.playId&&(this.playId=_.guid()),this.player._isPreload()||(this.loadstartTime=performance.now()),this.doPlayReported&&this.pause_flag&&(this.pause_flag=0,this.pauseEndTime=(new Date).getTime(),this.heartBeatStatusData.t_last_resume=this.pauseEndTime,e=this.pauseEndTime-this.pauseTime,this._log("RECOVER",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:e,pass:e,t_last_pause:this.pauseTime}))},_onPlayerPause:function(){!this.doPlayReported||this.startTimePlay&&!this.player._seeking&&(this.pause_flag=1,this.pauseTime=(new Date).getTime(),this.heartBeatStatusData.t_last_pause=this.pauseTime,this.heartBeatStatusData.t_last_resume=-1,this._log("PAUSE",{vt:Math.floor(1e3*this.player.getCurrentTime())}))},_onLicenseHasResult:function(e){e=e.paramData||{};this._log("LICENSE_RESULT",{li_ri:e.result+" "+(e.errorCode||""),li_ti:e.featureId||"sdk"})},_onPlayerSeekStart:function(e){this.seekStartTime=e.paramData.fromTime,this.startTimePlay=0,this.seekStartStamp=(new Date).getTime()},_onPlayerSeekEnd:function(){this.seekEndStamp=(new Date).getTime(),this._log("SEEK",{drag_from_timestamp:Math.floor(1e3*this.seekStartTime),drag_to_timestamp:Math.floor(1e3*this._seekEndData.toTime)}),this._log("SEEK_END",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:this.seekEndStamp-this.seekStartStamp}),this._seekEndData=null},_onPlayerLoaded:function(){var e,t=this;this.doPlayReported&&!this.stucking&&"hidden"!==document.visibilityState&&(this.player._seeking?(this.seekingStartTime=this.player.getCurrentTime(),this.checkSeekStuckedTimer&&clearTimeout(this.checkSeekStuckedTimer),this.checkSeekStuckedTimer=setTimeout(function(){var e=t.player.readyState()<4;t.player.readyState()||(e=!0),t.player.getCurrentTime()===t.seekingStartTime&&e&&(e=t._getbwEstimator(),t._log("UNDERLOAD",{vt:Math.floor(1e3*t.player.getCurrentTime()),bw:e,cbs:t._getCbs()}),t.stucking=!0,t.stuckStartTime=(new Date).getTime(),0===t._getCbs())&&(t.heartBeatStatusData.t_last_load_start=t.stuckStartTime,t.heartBeatStatusData.t_last_load_end=-1)},500)):(this.stuckStartTime=(new Date).getTime(),0===this._getCbs()&&(this.heartBeatStatusData.t_last_load_start=this.stuckStartTime,this.heartBeatStatusData.t_last_load_end=-1),this.stuckStartTime-this.startTimePlay<=1e3||(this.stucking=!0,e=this._getbwEstimator(),this._log("UNDERLOAD",{vt:Math.floor(1e3*this.player.getCurrentTime()),bw:e,cbs:this._getCbs()}),this.stuckStartTime=(new Date).getTime())))},_onPlayerUnderload:function(){var e,t,r,i;!this.doPlayReported&&this.player._options&&this.player._options.autoplay||this.stucking&&(e=Math.floor(1e3*this.player.getCurrentTime()),t=this.stuckStartTime||(new Date).getTime(),0<(r=Math.floor((new Date).getTime()-t))&&r<(1e3*this.player._options.waitingTimeout||6e4)&&(i=this._getbwEstimator(),0===this._getCbs()&&(this.heartBeatStatusData.t_last_load_end=(new Date).getTime()),this._log("LOADED",{vt:e,cost:r,bw:i,cbs:this._getCbs(),t_last_load_start:t})),this.seekStart=!1,this.stucking=!1)},_onPlayerSeeking:function(){this.seekStart=!0,this.seekingData.seekingStartTime=performance.now()},_onPlayerSeeked:function(){var e=this;this.player._splayer?this.player.one("canplay",function(){e._reportSeeked()}):this._reportSeeked()},_reportSeeked:function(){var e=performance.now(),e=Math.floor(e-this.seekingData.seekingStartTime);this._log("SEEKED",{vt:Math.floor(1e3*this.player.getCurrentTime()),cost:e})},_reportTrace:function(e){this._log("TRACE",{log:e})},_reportDump:function(e){this._log("DUMP",e)},_onPlayerError:function(e){this._reportTrace(e.paramData),this.playId=0,this.statisticsHistoryTimer&&(clearInterval(this.statisticsHistoryTimer),this.statisticsHistoryTimer=null,this.resetStatisticsHistoryData()),i&&(clearInterval(i),i=null)},_getbwEstimator:function(){var e=NaN;try{e=((e=this.player._getbwEstimator&&parseInt(this.player._getbwEstimator(),10))/8/1024).toFixed(2)}catch(e){}return e},_getCbs:function(){return!this.player.getOptions().isLive&&this.seekStart?1:0},_log:function(e,t){if(this.trackLog){this.updateSourceInfo();var r=s.copy(this.opt),i=(this.requestId=_.guid(),y.logReportTo),e=(r.e=p[e]+"",r.en=e,r.ri=this.sessionId,r.bi=r.bi&&String(r.bi),r.t=(new Date).getTime()+"",r.cdn_ip=this._userNetInfo.cdnIp,r.hn=this._userNetInfo.localIp,this.player.getCurrentQuality()),n=(""!=e&&(r.definition=e.definition),[]),e=(s.each(t,function(e,t){if("string"!=typeof t)try{t=JSON.stringify(t)}catch(e){}n.push(e+"="+t)}),""),t=this.player.getOptions(),e=((e=t&&t.vid||this.lightSaasVideoId?t.vid||this.lightSaasVideoId:e)&&n.push("vid="+e),"");(e=t&&t.mediaAuth?t.mediaAuth:e)&&n.push("pauth="+e);try{Aliplayer&&Aliplayer.__logCallback__&&(r.args=n,Aliplayer.__logCallback__(r))}catch(e){console.log(e)}if(""==(n=n.join("&"))&&(n="0"),r.args=this.encodeURL(n),this._logService){if(r.e===String(p.DUMP))return void this._logService.reportDump(r);this._logService.add(r)}else{var o=[];s.each(r,function(e,t){o.push(e+"="+t)}),o=o.join("&"),l.jsonp(i+"?"+o,function(){},function(){})}return this.sessionId}},_imageInfo:function(){try{var e,t,r,i,n,o,a;return/MSIE\s8\.0/.test(navigator.userAgent)?{}:(e=this.player.tag)?(t=document.createElement("canvas"),r=e.videoWidth,i=e.videoHeight,t.width=r,t.height=i,(n=t.getContext("2d")).save(),n.drawImage(e,0,0,r,i),n.restore(),o=t.toDataURL("image/jpeg",1),a="",{imgLength:(a=o?(a=o.substr(o.indexOf(",")+1))||"":a).length}):{}}catch(e){return{}}}});t.exports=e},{"../config":15,"../lib/data":31,"../lib/event":34,"../lib/io":41,"../lib/object":43,"../lib/oo":44,"../lib/playerutil":46,"../lib/ua":49,"../player/base/event/eventtype":68,"./log":62,"./util":64}],64:[function(e,t,r){var i=e("../lib/cookie"),n=e("../lib/data"),o=e("../lib/ua");t.exports.getUuid=function(){var e=i.get("p_h5_u");return e||(e=n.guid(),i.set("p_h5_u",e,730)),e},t.exports.getTerminalType=function(){var e="pc";return o.IS_IPAD?e="pad":o.IS_ANDROID?e="android":o.IS_IOS&&(e="iphone"),e},t.exports.returnUTCDate=function(e){var t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)},t.exports.getRfc822=function(e){return e.toUTCString().replace("UTC","GMT")}},{"../lib/cookie":30,"../lib/data":31,"../lib/ua":49}],65:[function(e,t,r){var a=e("./base/player"),s=e("./saas/mtsplayer"),l=e("./saas/vodplayer"),c=e("./saas/lightPlayer"),u=e("./audio/audioplayer"),d=e("./hls/hlsplayer"),p=e("./flv/flvplayer"),h=e("./dash/dashplayer"),f=e("./rts/rtsplayer"),_=e("./drm/drmplayer"),g=e("./splayer/splayer"),y=e("../lib/ua"),v=e("../lib/playerutil"),m=(e("../lib/dom"),e("../lib/io"),e("../lang/index")),b=e("../lib/constants"),S=e("./base/event/eventtype");t.exports.create=function(e,t){e.PlayAuth&&(e.playauth=e.PlayAuth),"boolean"!=typeof e.rtsFallback&&e.rtsFallbackSource&&(e.rtsFallback=!0),e._userOptions||(e._userOptions=Object.assign({},e)),navigator&&navigator.userAgent&&-1<navigator.userAgent.indexOf("Olympic_Android")&&(e.useNativeControls=!0),e.readyCallback=t="function"!=typeof t?function(){}:t,m.setCurrentLanguage(e.language,"h5",e.languageTexts,e.extLanguageTexts);var t=v.handleOption(e),e=t.source,r=t.format;if(r&&e)try{r=r.toLowerCase()}catch(e){console.log("Aliplayer - parsing format failed",e),r=""}else r="";v.isSupportedFormat(r)||(r=""),t.optionFormat=r,t.drm&&(t.isDrm=!0),void 0===t.useDrm2&&(t.useDrm2=!Boolean(t.isDrm&&t.accessKeyId));var i,n=v.isAudio(e,r),o=(n&&(t.mediaType="audio"),v.createWrapper(t));if(o.player)return o.player;if(n)i=new u(o,t);else if(v.isRts(e))i=new f(o,t);else if((t.forceH265||t.enableH265)&&(v.isMp4(e,r)||v.isFlv(e,r)||v.isHls(e,r)))i=new g(o,t);else if((t.forceH266||t.enableH266)&&(v.isMp4(e,r)||t.isLive&&(v.isFlv(e,r)||v.isHls(e,r))))i=new g(o,t);else if(!t.useFlashPrism&&v.isFlv(e,r)&&v.isSupportFlv())i=new p(o,t);else if(-1!==[null,void 0].indexOf(t.mediaAuth)||t.source)if(t.vid&&!t.source)if(t.authInfo)i=new s(o,t);else{if(!(t.playauth||t.accessKeyId&&t.accessKeySecret))throw n="vid="+t.vid+" playauth='', playauth property is required by VOD(\u89c6\u9891\u70b9\u64ad) as new Aliplayer.",new Error(n);i=new l(o,t)}else v.isHls(e,r)?v.canPlayHls()?i=new(v.isSupportHls()&&(v.isUsedHlsPluginOnMobile()||v.isSafariUsedHlsPlugin(t.useHlsPluginForSafari))?t.isDrm?_:d:t.isDrm?_:a)(o,t):v.isSupportHls()?i=new(t.isDrm?_:d)(o,t):y.os.pc||(i=new a(o,t)):v.isDash(e,r)&&v.isSupportMSE()?i=new(t.isDrm?_:h)(o,t):(i=new a(o,t),t.source||(n={error_code:b.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL",display_msg:m.get("Error_Empty_Source")},i.trigger(S.Player.Error,n)));else i=new c(o,t);return i}},{"../lang/index":24,"../lib/constants":29,"../lib/dom":33,"../lib/io":41,"../lib/playerutil":46,"../lib/ua":49,"./audio/audioplayer":66,"./base/event/eventtype":68,"./base/player":91,"./dash/dashplayer":98,"./drm/drmplayer":101,"./flv/flvplayer":103,"./hls/hlsplayer":105,"./rts/rtsplayer":107,"./saas/lightPlayer":111,"./saas/mtsplayer":113,"./saas/vodplayer":118,"./splayer/splayer":127}],66:[function(e,t,r){var i=e("../base/player"),n=e("../../ui/component"),o=e("../../lib/dom"),a=e("../../lib/object"),s=e("../../lib/playerutil"),e=i.extend({init:function(e,t){this._isAudio=!0,void 0===t.skinLayout&&(t.skinLayout=s.getDefaultAudioLayout()),i.call(this,e,t)}});e.prototype.createEl=function(){"AUDIO"!==this.tag.tagName&&(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"audio"));var t=this._el,e=this.tag,r=(e.player=this,o.getElementAttributes(e));return a.each(r,function(e){t.setAttribute(e,r[e])}),this.setVideoAttrs(),e.parentNode&&e.parentNode.insertBefore(t,e),o.insertFirst(e,t),t},t.exports=e},{"../../lib/dom":33,"../../lib/object":43,"../../lib/playerutil":46,"../../ui/component":132,"../base/player":91}],67:[function(e,t,r){var a=e("../../../lib/event"),s=e("./eventtype"),i=e("../eventHandler/video/index"),n=e("../eventHandler/player/index");t.exports.offAll=function(e){var t,r,i,n=e.tag,o=e._el;for(t in s.Video)a.off(n,s.Video[t]);for(r in s.Player)a.off(o,s.Player[r]);for(i in s.Private)a.off(o,s.Private[i])},t.exports.offVideoAll=function(e){var t,r=e.tag;for(t in s.Video)a.off(r,s.Video[t])},t.exports.onAll=function(e){i.bind(e),n.bind(e)}},{"../../../lib/event":34,"../eventHandler/player/index":72,"../eventHandler/video/index":82,"./eventtype":68}],68:[function(e,t,r){t.exports={Video:{TimeUpdate:"timeupdate",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",Suspend:"suspend",Stalled:"stalled",LoadStart:"loadstart",DurationChange:"durationchange",LoadedData:"loadeddata",LoadedMetadata:"loadedmetadata",Progress:"progress",CanPlayThrough:"canplaythrough",ContextMenu:"contextmenu",Seeking:"seeking",Seeked:"seeked",ManualEnded:"manualended",VolumeChange:"volumechange",RateChange:"ratechange",Resize:"resize"},Player:{TimeUpdate:"timeupdate",DurationChange:"durationchange",Init:"init",Ready:"ready",Play:"play",Playing:"playing",Pause:"pause",CanPlay:"canplay",Waiting:"waiting",Ended:"ended",Error:"error",RequestFullScreen:"requestFullScreen",CancelFullScreen:"cancelFullScreen",Snapshoted:"snapshoted",Snapshoting:"snapshoting",OnM3u8Retry:"onM3u8Retry",LiveStreamStop:"liveStreamStop",AutoPlayPrevented:"autoPlayPrevented",AutoPlay:"autoplay",StartSeek:"startSeek",CompleteSeek:"completeSeek",TextTrackReady:"textTrackReady",AudioTrackReady:"audioTrackReady",AudioTrackUpdated:"audioTrackUpdated",LevelsLoaded:"levelsLoaded",AudioTrackSwitch:"audioTrackSwitch",AudioTrackSwitched:"audioTrackSwitched",LevelSwitch:"levelSwitch",LevelSwitched:"levelSwitched",MarkerDotOver:"markerDotOver",MarkerDotOut:"markerDotOut",DefaultBandWidth:"defaultbandwidth",ResolutionChange:"resolutionChange",SeiFrame:"seiFrame",RtsFallback:"rtsFallback",RtsTraceId:"rtsTraceId",H265PlayInfo:"h265PlayInfo",H266PlayInfo:"h266PlayInfo",H265DecoderOverload:"h265DecoderOverload",SettingSelected:"settingSelected",AutoResize:"autoResize",VideoUnavailable:"videoUnavailable"},Private:{Create:"create",Play_Btn_Show:"play_btn_show",UiH5Ready:"uiH5Ready",Error_Hide:"error_hide",Error_Show:"error_show",Info_Show:"info_show",Info_Hide:"info_hide",H5_Loading_Show:"h5_loading_show",H5_Loading_Hide:"h5_loading_hide",HideProgress:"hideProgress",CancelHideProgress:"cancelHideProgress",UpdateProgress:"updateProgress",UpdateCursorPosition:"updateCursorPosition",Click:"click",MouseOver:"mouseover",MouseOut:"mouseout",MouseEnter:"mouseenter",MouseLeave:"mouseleave",TouchStart:"touchstart",TouchMove:"touchmove",TouchEnd:"touchend",HideBar:"hideBar",ShowBar:"showBar",ControlBarClick:"controlBarClick",ReadyState:"readyState",SourceLoaded:"sourceloaded",QualityChange:"qualitychange",Play_Btn_Hide:"play_btn_hide",Cover_Hide:"cover_hide",Cover_Show:"cover_show",SeekStart:"seekStart",EndStart:"endStart",UpdateProgressBar:"updateProgressBar",LifeCycleChanged:"lifeCycleChanged",Dispose:"dispose",Created:"created",Snapshot_Hide:"snapshot_hide",AutoStreamShow:"auto_stream_show",AutoStreamHide:"auto_stream_hide",VolumnChanged:"volumnchanged",LiveShiftQueryCompleted:"liveShiftQueryCompleted",LiveShiftSwitchToLive:"LiveShiftSwitchToLive",StreamSelectorHide:"streamSelectorHide",SpeedSelectorHide:"speedSelectorHide",SettingShow:"settingShow",SettingHide:"settingHide",SelectorShow:"selectorShow",SelectorHide:"selectorHide",SettingListShow:"settingListShow",SettingListHide:"settingListHide",ThumbnailHide:"thumbnailHide",ThumbnailShow:"thumbnailShow",ThumbnailLoaded:"thumbnailLoaded",TooltipShow:"tooltipShow",TooltipHide:"tooltipHide",SelectorUpdateList:"selectorUpdateList",SelectorValueChange:"selectorValueChange",SelectorGenerateList:"selectorGenerateList",VolumeVisibilityChange:"volumeVisibilityChange",VolumeUpdatePosition:"volumeUpdatePosition",ChangeURL:"changeURL",UpdateToSettingList:"updateToSettingList",CCChanged:"CCChanged",CCStateChanged:"CCStateChanged",CCReset:"ccReset",TextTrackFounded:"textTrackFounded",UserTrackReset:"userTrackReset",PlayClick:"click",ProgressMarkerLoaded:"progressMarkerLoaded",MarkerTextShow:"markerTextShow",MarkerTextHide:"markerTextHide",PREPARE:"prepare",ProgressMarkerChanged:"progressMarkerChanged",SeiFrame:"privateSeiFrame",PlayInfoLoaded:"playInfoLoaded",Retry:"retry",LicenseHasResult:"licenseHasResult",PatchWaiting:"patchWaiting",VttHide:"vttHide",VttSwitchTrack:"vttSwitchTrack",VttClearTracks:"vttClearTracks",SafariDrmLevelSwitch:"safariDrmLevelSwitch",VodRequestException:"vodRequestException",VodRequestExceptionResume:"vodRequestExceptionResume",TraceLog:"traceLog",DumpBuffer:"dumpBuffer",PlaybackRateChanged:"playbackRateChanged",StatisticsInfo:"statisticsInfo",MutedAutoplay:"mutedAutoplay",HideUnmuteButton:"hideUnmuteButton",Timeline:"timeline",ManualPlay:"manualPlay",UpdateWatchTime:"updateWatchTime",FastForwardShow:"fastForwardShow",FastForwardHide:"fastForwardHide"}}},{}],69:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){n.IS_IOS&&(n.IS_IOS,!this._splayer||2!==this._splayer.renderType)||i.removeClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":33,"../../../../lib/ua":49,"../../event/eventtype":68}],70:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this;t.trigger(i.Player.CompleteSeek,e.paramData.toTime),t.one(i.Player.CanPlay,function(){t._enteredProgressMarker&&t.pause()})}},{"../../event/eventtype":68}],71:[function(e,t,r){var i=e("../../event/eventtype"),n=(e("../../../../lib/constants"),e("../../../../lang/index"),e("../../../../monitor/util"));t.exports.handle=function(e){var t=this,e=e.paramData;t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Cover_Hide),t.trigger(i.Private.Play_Btn_Hide),t.trigger(i.Private.SettingListHide),t.trigger(i.Private.SelectorHide),t.trigger(i.Private.VolumeVisibilityChange,""),e=e||{},t._monitor&&(e.uuid=n.getUuid(),e.serverRequestId=t._serverRequestId,e.requestId=t._monitor.sessionId,e.cdnIp=t._monitor._userNetInfo.cdnIp,e.localIp=t._monitor._userNetInfo.localIp),t._isError=!0,t.trigger(i.Private.Error_Show,e),t.trigger(i.Private.LifeCycleChanged,{type:i.Player.Error,data:e})}},{"../../../../lang/index":24,"../../../../lib/constants":29,"../../../../monitor/util":64,"../../event/eventtype":68}],72:[function(e,t,r){var i=e("../../event/eventtype"),o=e("../../../../lib/event"),a=e("./lifecyclecommon"),n={endStart:e("./endstart"),seekStart:e("./seekstart"),requestFullScreen:e("./requestfullscreen"),cancelFullScreen:e("./cancelfullscreen"),error:e("./error"),privateSeiFrame:e("./seiframe"),patchWaiting:e("../video/waiting")},s=[i.Private.EndStart,i.Private.SeekStart,i.Player.RequestFullScreen,i.Player.CancelFullScreen,i.Player.Error,i.Player.Ready,i.Private.Dispose,i.Private.Created,i.Private.SeiFrame,i.Private.PatchWaiting];t.exports.bind=function(e){e.el();for(var t=0;t<s.length;t++){var r=s[t];"undefined"!=n[r]&&((r,i,n)=>{var e=r.el();o.on(e,i,function(e){var t=(n&&n.handle?n:a).handle;t.call(r,e,i)})})(e,r,n[r])}}},{"../../../../lib/event":34,"../../event/eventtype":68,"../video/waiting":90,"./cancelfullscreen":69,"./endstart":70,"./error":71,"./lifecyclecommon":73,"./requestfullscreen":74,"./seekstart":75,"./seiframe":76}],73:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e,t){this.trigger(i.Private.LifeCycleChanged,{type:t,data:e})}},{"../../event/eventtype":68}],74:[function(e,t,r){e("../../event/eventtype");var i=e("../../../../lib/dom"),n=e("../../../../lib/ua");t.exports.handle=function(){n.IS_IOS&&(n.IS_IOS,!this._splayer||2!==this._splayer.renderType)||i.addClass(this.el(),"prism-fullscreen")}},{"../../../../lib/dom":33,"../../../../lib/ua":49,"../../event/eventtype":68}],75:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this._seeking=!0,this.trigger(i.Player.StartSeek,e.paramData.fromTime)}},{"../../event/eventtype":68}],76:[function(e,t,r){e("../../event/eventtype");t.exports.handle=function(e){var t,r,e=e.paramData,i=e.pts;this._hls2?i=parseInt(1e3*i):this._hls&&(t=e.pts,r=this._initPTS,i=parseInt((t-r)/90,10)),this._seis[i]=this._seis[i]||[],this._seis[i].push(e.dataContent)}},{"../../event/eventtype":68}],77:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t=this,r=(t._retrySwitchUrlCount=0,t._liveRetryCount=0,t._clearLiveErrorHandle(),t._dumpBuffer="ABORTED",(new Date).getTime()-t.readyTime);t._options.autoplay||t._options._autoplay||!t.paused()||(t.trigger(i.Private.H5_Loading_Hide),t.trigger(i.Private.Play_Btn_Show)),t.trigger(i.Player.CanPlay,{loadtime:r})}},{"../../event/eventtype":68}],78:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/dom"),o=e("../../../../lib/ua");t.exports.handle=function(e){this._seeking=!1;var t=this.tag;"none"===t.style.display&&o.IS_IOS&&setTimeout(function(){n.css(t,"display","block")},100),this.trigger(i.Video.CanPlayThrough)}},{"../../../../lib/dom":33,"../../../../lib/ua":49,"../../event/eventtype":68}],79:[function(e,t,r){t.exports.handle=function(e,t){var r="";e&&e.paramData&&(r=e.paramData),this.trigger(t,r)}},{}],80:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lang/index"),e("../../../../lib/event");t.exports.handle=function(e){var t=this;t.waiting=!1,t._ended=!0,t._currentTimeForDisableSeek=0,t.traceLog("video/ended.js","event::ended"),t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Player.Ended,{playTime:t.getPlayTime()}),t.__disposed||(t._monitor&&t._monitor._onPlayerInit(),t._options.rePlay?(t._monitor&&t._monitor.startHeartBeat(),this._splayer||(t.seek(t._getPlayStartTime()),t.tag.play())):t._options.isLive&&t.trigger(i.Private.H5_Loading_Hide))}},{"../../../../lang/index":24,"../../../../lib/event":34,"../../event/eventtype":68}],81:[function(e,t,r){var s=e("../../event/eventtype"),l=e("../../../../lib/constants"),c=e("../../../../lang/index"),u=(e("../../../../lib/event"),e("../../../../lib/ua")),d=(e("../../../../lib/io"),e("../../../../lib/playerutil")),p="video/error.js";function h(t,e,r){var i=t._options,n=i.source||"";4===(e=4!==e&&u.IS_IOS&&/qqbrowser/i.test(u.USER_AGENT)?4:e)&&d.isHls(n)?d.detectRegionBlock(n,function(e){e?(e={mediaId:i.isLive?"ISLIVE":i.vid||"",error_code:l.ErrorCode.RegionBlock,error_msg:c.get("Error_Region_Block_Text"),diagnosis_info:c.get("Tip_Err_Blocked")},t.logError(e),t.trigger("error",e)):r()}):r()}t.exports.handle=function(e){if((e.target||e.srcElement).error){var i=this;if(i.waiting=!1,i._clearTimeout(),i.checkOnline()&&!i._splayer&&!i._drm){var n,o="",t=e.target||e.srcElement,a=t.error&&t.error.message||"",o="";if(t.error&&t.error.code&&(n=t.error.code,o=l.VideoErrorCode[t.error.code],a=n+" || "+a),i.traceLog(p,"event::error#"+n+"#"+a),i._reportDumpBuffer&&i._reportDumpBuffer(),i._options.isLive)h(i,n,function(){i._options.liveRetry>i._liveRetryCount?i._reloadAndPlayForM3u8():(i._liveRetryCount=0,i.trigger(s.Player.LiveStreamStop),i._liveErrorHandle=setTimeout(function(){var e={mediaId:"ISLIVE",error_code:o,error_msg:a||c.get("Error_Play_Text")+"\uff0c"+c.get("Error_Retry_Text")};i.logError(e),e.display_msg=l.VideoErrorCodeText[n]||e.error_msg,i.trigger("error",e)}),u.IS_UC&&(i._liveErrorHandle=null))});else if(3==n){t="";if(-1<a.indexOf("no decoder found"))t=c.get("Error_No_Decoder_Text");else if(i._nudgeCount=i._nudgeCount||0,i._nudgeCount<5){i._nudgeCount++;var r=+i._nudgeCount,r=i.getCurrentTime()+r;if(i.traceLog(p,"decode error, try to nudge("+i._nudgeCount+"/5) from "+i.getCurrentTime()+" to "+r+"s, duration: "+i.getDuration()),r<i.getDuration())return void i._loadByUrlInner(i._options.source,r,!0)}else if(function(){var e=!1,t=this.getOptions();{var r;this._fallback||!d.isHls(t.source)||this._options._native||!d.canPlayHls()||this.swPlayer||(e=!0,this._options.useHlsPluginForSafari=!1,this._options._native=!0,this.traceLog(p,"fallback to native player"),r=this.getCurrentTime(),window.Aliplayer&&window.Aliplayer.reloadInstance(this._options,function(e){e._fallback=!0,t.isLive||e.seek(r)},this))}return e}.call(i)||function(){var e=!1,t=this.getOptions();{var r;!this._fallback&&d.isHls(t.source)&&this._options._native&&d.isSupportHls()&&(e=!0,this._options.useHlsPluginForSafari=!0,this._options._native=!1,this.traceLog(p,"fallback to MSE player"),r=this.getCurrentTime(),window.Aliplayer)&&window.Aliplayer.reloadInstance(this._options,function(e){e._fallback=!0,t.isLive||e.seek(r)},this)}return e}.call(i))return;r={mediaId:i._options.vid||"",error_code:o,error_msg:a};i.logError(r),r.display_msg=l.VideoErrorCodeText[n]+(t?"\uff0c"+t:""),r.diagnosis_info=c.get("Tip_Err_Decode")+"<br />"+c.get("Tip_Err_Common_Short")+a,i.trigger(s.Player.Error,r)}else i._reloadForVod()||h(i,n,function(){var e,t,r;e=c.get("Error_Play_Text"),t=!1,n<3?e=l.VideoErrorCodeText[n]:i._eventState==l.SUSPEND?(e=c.get("Error_Load_Abort_Text"),o=l.ErrorCode.RequestDataError):i._eventState==l.LOAD_START?(e=c.get("Error_Network_Text"),0<i._options.source.indexOf("auth_key")&&(e=e+"\uff0c"+c.get("Error_AuthKey_Text")),o=l.ErrorCode.StartLoadData):i._eventState==l.LOADED_METADATA&&(e=c.get("Error_Play_Text"),o=l.ErrorCode.PlayingError),e=e+"\uff0c"+c.get("Error_Retry_Text"),1<i._urls.length&&i._retrySwitchUrlCount<3&&-1==i._options.source.indexOf(".mpd")&&(i.switchUrl(),t=!0),r={mediaId:i._options.vid||"",error_code:o,error_msg:a},t||(i.logError(r),r.display_msg=e,i.trigger(s.Player.Error,r))})}}else this.traceLog(p,"video.MediaError is null, may be caused by non-video source, like invalid poster ("+(e.target||e.srcElement).poster+")")}},{"../../../../lang/index":24,"../../../../lib/constants":29,"../../../../lib/event":34,"../../../../lib/io":41,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":68}],82:[function(e,t,r){var n=e("../../../../lib/event"),o=e("../../event/eventtype"),i={canplay:e("./canplay"),canplaythrough:e("./canplaythrough"),common:e("./common"),ended:e("./ended"),error:e("./error"),pause:e("./pause"),play:e("./play"),playing:e("./playing"),waiting:e("./waiting"),timeupdate:e("./timeupdate"),manualended:e("./ended"),loadedmetadata:e("./loadedmetadata"),seeking:e("./seeking"),resize:e("./resize")};t.exports.bind=function(e){e.tag;for(var t in o.Video){t=o.Video[t];((t,r,i)=>{var e=t.tag;n.on(e,r,function(e){i.handle.call(t,e,r),r!=o.Video.Error&&(r==o.Video.ManualEnded&&(r=o.Video.Ended),t.trigger(o.Private.LifeCycleChanged,{type:r,data:e}))})})(e,t,void 0!==i[t]?i[t]:i.common)}}},{"../../../../lib/event":34,"../../event/eventtype":68,"./canplay":77,"./canplaythrough":78,"./common":79,"./ended":80,"./error":81,"./loadedmetadata":83,"./pause":84,"./play":85,"./playing":86,"./resize":87,"./seeking":88,"./timeupdate":89,"./waiting":90}],83:[function(e,t,r){var i=e("../../event/eventtype");e("../../../../lib/playerutil");t.exports.handle=function(e){var t=this.tag,r=t.duration<1?0:t.duration;this._getSubVideoConfig().start>r-1&&(console.warn("Params.start ["+this._getSubVideoConfig().start+"] is greater than video.duration ["+r+"] - 1, seeking to 0"),this.setStartEnd(0,this._getSubVideoConfig().end)),this._getWatchTimeConfig().watchStartTime>r-1&&(console.warn("Params.watchStartTime ["+this._getWatchTimeConfig().watchStartTime+"] is greater than video.duration ["+r+"] - 1, seeking to 0"),this.setWatchTime(0,this._getWatchTimeConfig().watchEndTime)),this.trigger(i.Private.ReadyState),this._splayer&&this.trigger(i.Video.DurationChange),this.trigger(i.Video.LoadedMetadata),t.videoWidth&&t.videoHeight||this.trigger(i.Player.VideoUnavailable)}},{"../../../../lib/playerutil":46,"../../event/eventtype":68}],84:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../lib/ua");t.exports.handle=function(e){var t=this;t._seeking&&t._splayer||(t._hls&&t._options&&t._options.isLive&&n.IS_FIREFOX&&t.trigger(i.Private.Play_Btn_Show),t._clearTimeout(),t.trigger(i.Private.AutoStreamHide),t.trigger(i.Player.Pause),t._isManualPause&&(t.trigger(i.Private.Play_Btn_Show),t.trigger(i.Private.H5_Loading_Hide)),t.waiting=!1)}},{"../../../../lib/ua":49,"../../event/eventtype":68}],85:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){this.trigger(i.Private.Error_Hide),this.trigger(i.Private.Cover_Hide),this.trigger(i.Private.AutoStreamHide),this.waiting=!1,this.trigger(i.Player.Play)}},{"../../event/eventtype":68}],86:[function(e,t,r){var i=e("../../event/eventtype");t.exports.handle=function(e){var t,r=this;this.tag.paused||(r.trigger(i.Private.H5_Loading_Hide),r.trigger(i.Private.Cover_Hide),r.trigger(i.Private.Info_Hide),r.waiting=!1,r._ended=!1,r._liveRetryCount=0,r._vodRetryCount=0,r._seeking=!1,t=r.getCurrentTime(),r._waitingReloadTime!=t&&(r._waitingTimeoutCount=0),r._checkTimeoutHandle&&(clearTimeout(r._checkTimeoutHandle),r._checkTimeoutHandle=null),r._waitingLoadedHandle&&(clearTimeout(r._waitingLoadedHandle),r._waitingLoadedHandle=null),r._ucSourceHandle&&(clearTimeout(r._ucSourceHandle),r._ucSourceHandle=null),r._waitingDelayLoadingShowHandle&&(clearTimeout(r._waitingDelayLoadingShowHandle),r._waitingDelayLoadingShowHandle=null),r._waitingTimeoutHandle&&(clearTimeout(r._waitingTimeoutHandle),r._waitingTimeoutHandle=null,r._ccService)&&r._options.isLive&&(t=r._ccService.getCurrentSubtitle(),r._setDefaultCC=!0,t)&&r._ccService.switch(t),r.trigger(i.Private.AutoStreamHide),r.trigger(i.Player.Playing),r.trigger(i.Private.Error_Hide),r.trigger(i.Private.Play_Btn_Hide))}},{"../../event/eventtype":68}],87:[function(e,t,r){var i=e("../../event/eventtype"),n=e("../../../../feature/ratioAdapter");t.exports.handle=function(e){this.trigger(i.Video.Resize);var t=this.getOptions();if(t.autoSize){if(!this._ratioAdapter){if(!0!==t.autoSize&&"width"!==t.autoSize&&"height"!==t.autoSize)return void console.warn("Unknown parameter [autoSize]: "+t.autoSize+", only true/height/width are supported");!0===t.autoSize&&(t.autoSize="height"),this._ratioAdapter=new n}this._ratioAdapter.autoResize(this.tag.videoWidth/this.tag.videoHeight,this,t.autoSize)}}},{"../../../../feature/ratioAdapter":22,"../../event/eventtype":68}],88:[function(e,t,r){var a=e("../../event/eventtype");e("../../../../lib/playerutil");t.exports.handle=function(e){var t,r,i,n=this.tag,o=(this.getOptions().disableSeek&&(o=n.currentTime-this._currentTimeForDisableSeek,.01<Math.abs(o))&&(n.currentTime=this._currentTimeForDisableSeek),n.currentTime);this._canSeek(o)||(t=this._getWatchTimeConfig(),i=0,(r=this._getSubVideoConfig()).start||r.end?i=o>r.end?r.end:r.start:(t.watchStartTime||t.watchEndTime)&&(i=o>t.watchEndTime?t.watchEndTime:t.watchStartTime),n.currentTime=i),this.trigger(a.Video.Seeking)}},{"../../../../lib/playerutil":46,"../../event/eventtype":68}],89:[function(e,t,r){var d=e("../../event/eventtype"),p=e("../../../../lib/ua"),h=e("../../../../lib/event"),f=e("../../plugin/status");function _(e){var t=this;null!=e&&e.length&&e.forEach(function(e){t.trigger(d.Player.SeiFrame,e)})}t.exports.handle=function(e){var r=this;if(r._isError||r.trigger(d.Player.TimeUpdate,e.timeStamp),!r.__disposed){r._decodeErrorNudgeTimer||(r._decodeErrorNudgeTimer=setTimeout(function(){r._nudgeCount=0},3e3)),(p.IS_IOS||p.IS_MAC_SAFARI)&&(clearTimeout(r._waitingPatchTimer),r._waitingPatchTimer=setTimeout(function(){r.waiting||r._isError||r.paused()||r._disposed||(console.log("!!!!!!!manually waiting!!!!!!!"),r.trigger(d.Private.PatchWaiting))},3e3));var t,i,n,o=r.getCurrentTime(),e=(r.tag.seeking||(r._currentTimeForDisableSeek=o),r.waiting&&!r._TimeUpdateStamp&&(r._TimeUpdateStamp=o),0!=r.waiting&&r._TimeUpdateStamp==o||0===o||(r.trigger(d.Private.H5_Loading_Hide),r.trigger(d.Private.AutoStreamHide),r._checkTimeoutHandle&&clearTimeout(r._checkTimeoutHandle),r._waitingTimeoutHandle&&clearTimeout(r._waitingTimeoutHandle),r._waitingLoadedHandle&&clearTimeout(r._waitingLoadedHandle),r._ucSourceHandle&&(clearTimeout(r._ucSourceHandle),r._ucSourceHandle=null),r.waiting=!1),p.IS_ANDROID&&p.IS_UC&&(r._timeNotUpdateCount=r._timeNotUpdateCount||0,r.waiting||o!==r._TimeUpdateStamp||(r._timeNotUpdateCount++,2<=r._timeNotUpdateCount&&(r._timeNotUpdateCount=0,r.trigger(d.Private.PatchWaiting)))),r._TimeUpdateStamp=o,r._options.isLive||(t=r.getDuration(),e=!1,i=0,t<o&&!r.paused()?(i=1,e=!0):t-o<.2&&0<=p.browser.version.indexOf("49.")&&!r.paused()?(i=2,e=!0):r.exceedPreviewTime(o)?(i=3,e=!0):o>=r._getWatchTimeConfig().watchEndTime&&(i=4,e=!0,r.pause()),e&&setTimeout(function(){r._ended||(r._splayer||r.paused()||r.pause(),h.trigger(r.tag,d.Video.ManualEnded),r.traceLog&&r.traceLog("video/timeupdate.js","ManualEnded#"+i+"#"+o+"#"+t))},100)),r._player.tag),a=(e&&r._options.isLive&&(r._player.resolution&&0<e.videoWidth&&0<e.videoHeight&&(0<r._player.resolution.width||0<r._player.resolution.height)&&(r._player.resolution.width!==e.videoWidth||r._player.resolution.height!==e.videoHeight)&&(n={oldResolution:{width:r._player.resolution.width,height:r._player.resolution.height},newResolution:{width:e.videoWidth,height:e.videoHeight}},r.trigger(d.Player.ResolutionChange,n)),r._player.resolution.width=0==e.videoWidth?r._player.resolution.width:e.videoWidth,r._player.resolution.height=0==e.videoHeight?r._player.resolution.height:e.videoHeight),p.IS_CHROME&&Number(p.CHROME_VERSION)<50&&(r._playingSlientPause&&(clearTimeout(r._playingSlientPause),r._playingSlientPause=null),r._playingSlientPause=setTimeout(function(){var e,t;r._status!=f.playing||r.paused()||r._drm||r._urls.length||(e=r.getCurrentTime(),t=r._options.isLive?0:e,r._loadByUrlInner(r._options.source,t,e))},3e3)),r._seis||{}),s=Object.keys(a);if(0!==s.length)for(var l=parseInt(1e3*o,10)+300,c=0;c<s.length;c++){var u=s[c];if(!(u<=l))break;_.call(r,a[u]),delete a[u]}}}},{"../../../../lib/event":34,"../../../../lib/ua":49,"../../event/eventtype":68,"../../plugin/status":95}],90:[function(e,t,r){var o=e("../../event/eventtype"),a=e("../../../../lib/constants"),s=e("../../../../lib/event"),l=e("../../../../lang/index"),c=e("../../../../lib/ua"),u=e("../../../../lib/playerutil"),d="video/waiting.js";t.exports.handle=function(e){var t=this;if(!t._options.isLive){var r=this.getCurrentTime(),i=this.getDuration();if(!t._ended&&0<i&&(i-r<.5||i<r))return t.pause(),t._ended=!0,s.trigger(this.tag,o.Video.ManualEnded),void(t.traceLog&&t.traceLog(d,"ManualEnded#"+r+"#"+i))}t.waiting=!0;function n(){t._checkTimeoutHandle&&(clearTimeout(t._checkTimeoutHandle),t._checkTimeoutHandle=null),t._waitingTimeoutHandle&&(clearTimeout(t._waitingTimeoutHandle),t._waitingTimeoutHandle=null),t._waitingLoadedHandle&&(clearTimeout(t._waitingLoadedHandle),t._waitingLoadedHandle=null),t._waitingDelayLoadingShowHandle&&(clearTimeout(t._waitingDelayLoadingShowHandle),t._waitingDelayLoadingShowHandle=null),t._ucSourceHandle&&(clearTimeout(t._ucSourceHandle),t._ucSourceHandle=null)}n(),t._waitingDelayLoadingShowHandle=setTimeout(function(){c.IS_IOS&&t.paused()||t._isError||t.trigger(o.Private.H5_Loading_Show)},1e3*t._options.delayLoadingShow),t._TimeUpdateStamp=null,t._checkTimeoutHandle=setTimeout(function(){t.trigger(o.Private.AutoStreamShow)},1e3*t._options.loadDataTimeout),t.trigger(o.Player.Waiting),t._waitingTimeoutHandle=setTimeout(function(){var e;t.tag&&t._options&&(t.pause(),e={mediaId:t._options.vid||"",error_code:a.ErrorCode.LoadingTimeout,error_msg:l.get("Error_Waiting_Timeout_Text")},t.logError(e),t.trigger("error",e))},1e3*t._options.waitingTimeout);r=t._options;r.disableLiveHalfRetry&&r.isLive||r.disableVodHalfRetry&&!r.isLive||(t._waitingLoadedHandle=setTimeout(function(){var e=t.getCurrentTime();0==t._waitingTimeoutCount&&e!=t._waitingReloadTime&&(t.traceLog(d,"half-retry::"+t._options.waitingTimeout/2),t._waitingTimeoutCount=1,t._waitingReloadTime=e,e=t._options.isLive?0:e,t._loadByUrlInner(t._options.source,e,!0))},t._options.waitingTimeout/2*1e3)),c.IS_ANDROID&&c.IS_DINGTALK&&(t._ucSourceHandle=setTimeout(function(){u.detectRegionBlock(t._options.source,function(e){e&&(e={mediaId:t._options.vid,error_code:a.ErrorCode.RegionBlock,error_msg:l.get("Error_Region_Block_Text"),diagnosis_info:l.get("Tip_Err_Blocked")},t.logError(e),t.trigger("error",e))})},5e3)),t.on("error",function(){n()})}},{"../../../../lang/index":24,"../../../../lib/constants":29,"../../../../lib/event":34,"../../../../lib/playerutil":46,"../../../../lib/ua":49,"../../event/eventtype":68}],91:[function(H,U,e){!function(N){!function(){var o="undefined"==typeof Promise?H("es6-promise").Promise:Promise,n=H("../../ui/component"),a=H("../../lib/object"),s=H("../../lib/dom"),l=H("../../lib/event"),c=H("../../ui/exports"),u=H("../../monitor/monitor"),d=H("../../lib/ua"),p=H("../../lib/constants"),h=H("../../lib/playerutil"),f=H("../../lib/util"),i=H("./x5play"),r=H("../../lib/cookie"),_=H("../../lang/index"),g=H("../../feature/autoplaydelay"),y=H("./event/eventmanager"),v=H("../../ui/component/cover"),m=H("../../feature/license"),b=H("../../ui/component/text-track-display"),S=H("../../ui/component/press-fast-forward"),T=H("../../ui/component/double-click-skip"),E=H("../../commonui/autostreamselector"),w=H("./event/eventtype"),x=H("./plugin/lifecyclemanager"),k=H("../service/export"),P=H("../../ui/component/progressmarker"),C=H("../../feature/keyboardControl"),R=H("../../feature/AntiRecord"),L=H("../../lib/vttnext/index"),I=H("../../lib/codec-probe"),D=H("../splayer/splayerinjector"),e=H("../../ui/component/util").throttle,A=H("../../feature/ratioAdapter"),O=H("../../feature/logoManager"),M="base/player.js",t=n.extend({init:function(e,t){var r;function i(e){var i,n=this;"dev"===N||"file:"===window.location.protocol||this._licenseHasResult||(this._licenseHasResult=!0,t.license&&t.license.key&&t.license.domain?("native"!==e.paramData.renderType&&(e=e.paramData.codecTag,h.isH265Codec(e)?i=p.FEATURE_ID_H265:h.isH266Codec(e)&&(i=p.FEATURE_ID_H266)),m.getLicense(t.license.domain,t.license.key,"SEA"===t.env?"ap-southeast-1":"cn-shanghai").then(function(e){var t=e.validate(p.PLAYER_SDK_CODE_LEGACY,i),e=e.validate(p.PLAYER_SDK_CODE,i),r=0===t||0===e;if(r||console.log(p.PLAYER_SDK_CODE_LEGACY,t,p.PLAYER_SDK_CODE,e),r)n.trigger(w.Private.LicenseHasResult,{result:p.LicenseResultCode.Success,featureId:i});else{if(2===t||2===e)return o.reject(p.LicenseResultCode.Expired);{if(1===t&&1===e)return o.reject(p.LicenseResultCode.NotFound);console.error("license validate unknown error")}}}).catch(function(e){var t=String(e).split("#"),t=(e=Number(t[0]),t[1]);n.trigger(w.Private.LicenseHasResult,{result:e,errorCode:t,featureId:i}),m.logError(e)})):(console.error(_.get("Tip_License_Required")+": https://help.aliyun.com/zh/vod/developer-reference/license-authorization-and-management#13133fa053843"),console.error(_.get("Tip_License_Params")+": https://help.aliyun.com/zh/vod/developer-reference/integration#387d8a4c094im"),this.trigger(w.Private.LicenseHasResult,{result:p.LicenseResultCode.LicenseKeyInvalid})))}this.tag=e,this.loaded=!1,this.played=!1,this.oncePlayed=!1,this.waiting=!1,this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._isError=!1,this._isHls=!1,this._liveRetryCount=0,this._liveRetryTimer=null,this._flvDumpTimer=null,this._vodRetryCount=0,this._nudgeCount=0,this._seeking=!1,this._serverRequestId=0,this._waitingTimeoutCount=0,this._waitingReloadTime=0,this._created=!1,this._enteredProgressMarker=!1,this._liveShiftSeekStartTime=0,this._seis={},this._initPTS=0,this.isMutiLevel=!1,this._antiRecord=null,this._ratioAdapter=null,this._logoManager=null,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._loadByUrlStartTime=0,this._posOffset=0,this._onceLogged=!1,this._licenseHasResult=!1,this.__disposed=!1,this.resolution={width:0,height:0},void 0===t.skinLayout&&(t.skinLayout=h.getDefaultH5Layout()),null!=(e=t.skinLayoutIgnore)&&e.length&&(t.skinLayout=h.ignoreSkinLayouts(t.skinLayout,t.skinLayoutIgnore)),h.isRts(t.source)&&!t.autoplay&&(t.preload=!1),"SEA"===t.env&&(t.logReportTo="https://videocloud-sgp.ap-southeast-1.log.aliyuncs.com/logstores/newplayer/track",t.disableDumpBuffer=!0),n.call(this,this,t),this.addClass("prism-player"),t.plugins&&a.each(t.plugins,function(e,t){this[e](t)},this),this._createService(),this.UI={},t.useNativeControls?this.tag.setAttribute("controls","controls"):(this.UI=c,0==t.errorDisplay&&(this.UI.errorDisplay=void 0)),t.disablePip&&this.tag.setAttribute("disablePictureInPicture","true"),this._handleLongPress(t),this._handleClickPause_dbClickFullscreen(t),this.initChildren(),this._options.trackLog&&(this._monitor=new u(this,{video_id:0,album_id:0,from:this._options.from,source:this._options.source,logBatched:this._options.logBatched,logReportTo:this._options.logReportTo},this._options.trackLog)),y.onAll(this),this.trigger(w.Private.Create,t._userOptions),this._options.preventRecord&&(this._antiRecord=new R({player:this}),this._antiRecord.start()),this._lifeCycleManager=new x(this),this._overrideNativePlay(),this._liveshiftService&&!this._liveshiftService.validate()?(e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidParameter,error_msg:_.get("ShiftLiveTime_Error")},this.trigger(w.Player.Error,e)):(this._posOffset=this._getSubVideoConfig().start||0,this._options.extraInfo&&(e=this._options.extraInfo).liveRetry&&(this._options.liveRetry=e.liveRetry),this.on(w.Private.ReadyState,function(){this.trigger(w.Player.Ready)}),this.on(w.Player.H265PlayInfo,i),this.on(w.Player.H266PlayInfo,i),this.one(w.Player.CanPlay,i),this.on(w.Private.LicenseHasResult,function(e){var t=this,e=e.paramData||{},r=e.result,i=e.errorCode,n=e.featureId,e=p.LicenseResultCode,o="";switch(r){case e.LicenseKeyInvalid:case e.DomainInvalid:o=_.get(p.LicenseErrorKey.Empty);break;case e.NotFound:var o=_.get(p.LicenseErrorKey.Unauthorized),a="";n===p.FEATURE_ID_H265&&(a="H265"),n===p.FEATURE_ID_H266&&(a="H266"),console.error(_.get("Tip_License_Feature"),a);break;case e.Expired:o=_.get(p.LicenseErrorKey.Expired);break;case e.CertInvalid:-1<["E003","E005","E006"].indexOf(i)?(o=_.get(p.LicenseErrorKey.LicenseKeyInvalid)+"("+i+")",console.error(_.get("Tip_License_Check"))):"E008"===i?(o=_.get(p.LicenseErrorKey.DomainInvalid)+"("+i+")",console.error(_.get("Tip_License_Domain"))):"E010"===i&&(o=_.get(p.LicenseErrorKey.NotFound)+"("+i+")",console.error(_.get("Tip_License_Check")))}o&&(console.error(_.get("Tip_License_Reason")+" "+o),setTimeout(function(){t.trigger(w.Player.Error,{mediaId:t._options.vid||"",error_code:p.ErrorCode.LicenseError,display_msg:_.get("Error_Play_Text")+" (LICENSE ERROR)",error_msg:o}),t.tag.pause(),t.trigger(w.Private.HideUnmuteButton),y.offAll(t),t.tag&&t.tag.parentNode&&t.tag.parentNode.removeChild(t.tag),t.play=function(){},t.loadByUrl=function(){}}))}),this._thumbnailService&&this._options.thumbnailUrl&&this._thumbnailService.get(this._options.thumbnailUrl),0<this._options.progressMarkers.length&&this.trigger(w.Private.ProgressMarkerLoaded,this._options.progressMarkers),this._options.source&&this._options._native&&this._executeReadyCallback(),this._options.autoplay||this._options.preload?this.trigger(w.Private.H5_Loading_Show):this.trigger(w.Private.Play_Btn_Show),this._extraMultiSources(),this._options.source&&(this.trigger(w.Private.PREPARE,"custom"),this._options.autoPlayDelay?(this._autoPlayDelay=new g(this),(r=this)._autoPlayDelay.handle(function(){r.initPlay()})):this.initPlay()),this._options.ratio&&(this._options.autoSize?console.warn("The parameter [ratio] will be ignored when [autoSize] is set."):(this._options.height&&console.warn("The parameter [height] will be ignored when [ratio] is set."),this._ratioAdapter=new A,this._ratioAdapter.autoResize(this._options.ratio,this))),C.init.call(this),null!=(e=this._options.logo)&&e.length&&(this._logoManager=new O({container:this.el(),video:this.tag,logo:this._options.logo})),this._vttBroker=new L({player:this}),this._getUserTextTracks())}});t.prototype.isSupportMSE=function(){return h.isSupportMSE()},t.prototype.initPlay=function(e){this._initPlayBehavior(e,this._options.source)},t.prototype.initChildren=function(){var e=this.options(),t=e.skinLayout;if(!1!==t&&!a.isArray(t))throw new Error("PrismPlayer Error: skinLayout should be false or type of array!");!1!==t&&0!==t.length&&(this.options({children:t}),n.prototype.initChildren.call(this)),this.UI.cover=v,e.className="",this.addChild("cover",e),this.UI.autoStreamSelector=E,this.addChild("autoStreamSelector",e),this.UI.progressMarker=P,this.addChild("progressMarker",e),this.UI.textTrackDisplay=b,this.addChild("textTrackDisplay",e),e.longPressFastForward&&(this.UI.pressFastForward=S,this.addChild("pressFastForward",{name:"pressFastForward",align:"free"})),h.enableDbClickSkip(e)&&(this.UI.doubleClickSkip=T,this.addChild("doubleClickSkip",{name:"doubleClickSkip",align:"free"})),this.trigger(w.Private.UiH5Ready)},t.prototype.createEl=function(){var e=!1,t=("VIDEO"!==this.tag.tagName?(this._el=this.tag,this.tag=n.prototype.createEl.call(this,"video"),this._options.playsinline&&(this.tag.setAttribute("webkit-playsinline",""),this.tag.setAttribute("playsinline",""),this.tag.setAttribute("x-webkit-airplay",""),this.tag.setAttribute("x5-playsinline",""))):(e=!0,this._el=this.tag.parentNode),this._el),r=this.tag,i=(this._options.enableSystemMenu||(r.addEventListener?r.addEventListener("contextmenu",function(e){e.preventDefault()},!1):r.attachEvent("oncontextmenu",function(){window.event.returnValue=!1})),r.player=this,s.getElementAttributes(r));return a.each(i,function(e){t.setAttribute(e,i[e])}),this.setVideoAttrs(),e||(r.parentNode&&r.parentNode.insertBefore(t,r),s.insertFirst(r,t)),t},t.prototype.setVideoAttrs=function(){var e=this._options.preload,t=this._options.autoplay;if(this.tag.style.width=this._options.videoWidth||"100%",this.tag.style.height=this._options.videoHeight||"100%",e&&this.tag.setAttribute("preload","preload"),t&&"15"!==d.IOS_VERSION&&this.tag.setAttribute("autoplay","autoplay"),d.IS_IOS&&this.tag.setAttribute("poster","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAMZJREFUeAHt0DEBAAAAwqD1T20LL4hAYcCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMCAAQMGDBgwYMDAc2CcpAABaODCqQAAAABJRU5ErkJggg=="),(d.IS_UC||d.dingTalk()||d.IS_QUARK)&&this.tag.setAttribute("renderer","standard"),this._options.extraInfo)for(var r in this._options.extraInfo)d.IS_OPPO&&"crossOrigin"===r||this.tag.setAttribute(r,this._options.extraInfo[r]);i.adaptX5Play(this)},t.prototype.checkOnline=function(){var e;return!(this._options&&!this._options.debug&&0==navigator.onLine&&((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.NetworkUnavaiable,error_msg:_.get("Error_Offline_Text")}).display_msg=_.get("Error_Offline_Text"),this.trigger(w.Player.Error,e),1))},t.prototype.id=function(){return this.el().id},t.prototype.renderUI=function(){},t.prototype.switchUrl=function(){var e,t;this.traceLog(M,"switchUrl"),0!=this._urls.length&&(this._currentPlayIndex=this._currentPlayIndex+1,this._urls.length<=this._currentPlayIndex&&(this._currentPlayIndex=0,this._retrySwitchUrlCount++),e=this._urls[this._currentPlayIndex],r.set(p.SelectedStreamLevel,e.definition,365),this.trigger(w.Private.QualityChange,_.get("Quality_Change_Fail_Switch_Text")),t=this.getCurrentTime(),this._vodRetryCount=0,this._originalSource="",this._loadByUrlInner(e.Url,t,!0))},t.prototype.setControls=function(){var e=this.options();e.useNativeControls?this.tag.setAttribute("controls","controls"):"object"==typeof e.controls&&(e=this._initControlBar(e.controls),this.addChild(e))},t.prototype.enableClickPause=function(){this._clickPauseEnabled=!0},t.prototype.disableClickPause=function(){this._clickPauseEnabled=!1},t.prototype._initControlBar=function(e){return new ControlBar(this,e)},t.prototype.getMetaData=function(){},t.prototype.getReadyTime=function(){return this.readyTime},t.prototype.readyState=function(){return this.tag.readyState},t.prototype.getError=function(){return this.tag.error},t.prototype.getRecentOccuredEvent=function(){return this._eventState},t.prototype.getSourceUrl=function(){return this._options?this._options.source:""},t.prototype.getMonitorInfo=function(){return this._monitor?this._monitor.opt:{}},t.prototype.getCurrentQuality=function(){var e;return 0<this._urls.length?{width:(e=this._urls[this._currentPlayIndex]).width,url:e.Url,definition:e.definition}:""},t.prototype.getCurrentPDT=function(){var e;if((d.IS_SAFARI||d.IS_IOS)&&this.tag)return e=Date.parse(this.tag.getStartDate()),isNaN(e)?0:e+1e3*this.getCurrentTime()},t.prototype.stopPlayTimeMonitor=function(){this._playTimeMonitorTimer&&(clearInterval(this._playTimeMonitorTimer),this._playTimeMonitorTimer=null)},t.prototype.startPlayTimeMonitor=function(){var o=this,a=(this._playingTime=0,this._stuckTime=0,this._stuckCount=0,performance.now()),s=0,l=0,c=!1,u=0;this.stopPlayTimeMonitor(),this._playTimeMonitorTimer=setInterval(function(){var e=o.paused()?c=!0:!o.tag,t=1e3*o.getCurrentTime(),r=performance.now(),i=r-a,n=(a=r,(t-s)/o.tag.playbackRate);s=t,n<0&&(e=!0),null!=(t=o._monitor)&&t.canplayReported||(e=!0),(e="hidden"===document.visibilityState?!0:e)||(c?c=!1:n<.8*i?(i<r-l&&(o._stuckCount++,u=r),r-u>=1e3*o.getOptions().waitingTimeout?o.stopPlayTimeMonitor():(l=r,o._playingTime+=n,o._stuckTime+=i-n)):o._playingTime+=i)},1e3)},t.prototype.setSpeed=function(e,t){void 0===t&&(t=!0),this.tag&&(this._originalPlaybackRate=e,this.tag.playbackRate=e,t)&&this.trigger(w.Private.PlaybackRateChanged,e)},t.prototype.play=function(e){return this.traceLog(M,"play::"+e),e&&this.trigger(w.Private.ManualPlay),this.tag&&(this.tag.ended||this._ended?this.replay():((this._options.preload||this.loaded)&&this.tag.src||this._initLoad(this._options.source),this.trigger(w.Private.Cover_Hide),this.tag.play())),this._isManualPlay=e||!1,this},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this.seek(this._getPlayStartTime()),this.tag.play(),this},t.prototype._getPlayStartTime=function(){return Math.max(0,this._getWatchTimeConfig().watchStartTime||0,this._loadByUrlStartTime||0)},t.prototype._getWatchTimeConfig=function(){var e=this.getOptions(),t=e.start,r=e.end,i=e.watchStartTime,e=e.watchEndTime,i=Number(i),e=Number(e);return(i||e)&&(h.hasValue(t)||h.hasValue(r))?(this._logOnce("Params.watchStartTime and Params.watchEndTime will be ignored when Params.start or Params.end is set","warn"),{watchStartTime:void 0,watchEndTime:void 0}):(e=e||void 0,(i=i||void 0)<0&&(this._logOnce("Params.watchStartTime is less than 0 ["+i+"], setting to undefined","warn"),i=void 0),e<0&&(this._logOnce("Params.watchEndTime is less than 0 ["+e+"], setting to undefined","warn"),e=void 0),e<=i&&(this._logOnce("Params.watchEndTime("+e+") is less than Params.watchStartTime("+i+"), setting to [undefined, "+e+"]","warn"),i=void 0),{watchStartTime:i,watchEndTime:e})},t.prototype._getSubVideoConfig=function(){var e=this.getOptions(),t=e.start,e=e.end,t=Number(t);return e=(e=Number(e))||void 0,(t=t||void 0)<0&&(this._logOnce("Params.start is less than 0 ["+t+"], setting to undefined","warn"),t=void 0),e<0&&(this._logOnce("Params.end is less than 0 ["+e+"], setting to undefined","warn"),e=void 0),e<=t&&(this._logOnce("Params.start("+t+") is greater than Params.end("+e+"), setting to [undefined, "+e+"]","warn"),t=void 0),{start:t,end:e}},t.prototype.pause=function(e){return this.tag&&this.tag.pause(),this._isManualPause=e||!1,this},t.prototype.stop=function(){return this.traceLog(M,"stop"),this.tag.setAttribute("src",null),this},t.prototype.paused=function(){if(this.tag)return!1!==this.tag.paused},t.prototype.getDuration=function(){var e=0,t=(this.tag&&(e=this.isPreview()&&this._vodDuration||this.tag.duration),this._getSubVideoConfig()),r=t.start,t=t.end;return e=r||t?Math.min(this.tag.duration,t||this.tag.duration)-Math.max(0,r||0):e},t.prototype.getDisplayDuration=function(){var e=0,t=(this.tag&&(e=this._vodDuration||this.getDuration()),this._getSubVideoConfig()),r=t.start,t=t.end;return e=r||t?Math.min(this.tag.duration,t||this.tag.duration)-Math.max(0,r||0):e},t.prototype.getCurrentTime=function(){return this.tag?this.tag.currentTime-this._posOffset:0},t.prototype.seek=function(e){var t;if(!Number.isNaN(e)&&(e=Number(e),e+=this._posOffset,this._canSeek(e)))return this._ended=!1,t=this.tag.duration,this._doSeek(this,e=t<=e?t:e),this},t.prototype._doSeek=e(function(e){var t=e[0],e=e[1];try{var r=t._originalPlaybackRate||t.tag.playbackRate;-1!==["16"].indexOf(d.IOS_VERSION)&&!t.oncePlayed||(t.tag.currentTime=e),t._seeking=!0,t.traceLog(M,"doSeek::"+e),d.IS_IE11&&setTimeout(function(){t.tag&&(t.tag.playbackRate=r)})}catch(e){console.log(e)}},100),t.prototype.traceLog=function(e,t){this.trigger(w.Private.TraceLog,"["+e+"]"+t)},t.prototype._loadByUrlInner=function(e,t,r){this.loadByUrl(e,t,r,!0)},t.prototype.loadByUrl=function(i,e,n,o){var r=this,t=(this.traceLog(M,"loadByUrl::"+i+"#"+e+"#"+n+"#"+o),this._monitor&&this._monitor._onPlayerUnderload(),this._monitor&&!o&&(this._monitor.reportPlayAbort("loadByUrl"),this._monitor.resetVV()),/\.m3u8|\.flv|\.mp4|artc\:\/\/|rtmp\:\/\//gi),a=((this._options.source||"").match(t)||[])[0]!==((i||"").match(t)||[])[0];if(this._options.liveShiftSource&&(a=!1),this._options.enableH266&&(a=!1),this._h265InfoReported=!1,this._probeInfo||(this._probeInfo={}),this._probeInfo.codecTag=void 0,!a&&(h.isMp4(i)||h.isFlv(i)||h.isHls(i)))return this._options.forceH265||this._options.forceH266||!this._options.enableH265&&!this._options.enableH266||d.IS_ANDROID&&d.dingTalk()&&!h.isFlv(i)?void s.call(this):void I(i,this._options,function(e){var e=h.getVideoTrack(e.tracks),t=(e||{}).codecTag||(null==(t=(e||{}).codec)?void 0:t.split(".")[0]);r._probeInfo.codecTag=t,e&&h.isH265Codec(t)?h.isFlv(i)||h.isHls(i)?(r._splayer||(a=!0),s.call(r)):h.shouldUseBasePlayer({codecTag:t,url:i},function(e){e?(r._splayer&&(a=!0),r._probeInfo.codecTag&&D.reportH265PlayInfo.call(r,{renderType:"native",codecTag:r._probeInfo.codecTag})):r._splayer||(a=!0),s.call(r)}):(e&&h.isH266Codec(t)?r._splayer||(a=!0):r._splayer&&(a=!0),s.call(r))},function(e){s.call(r)});function s(){var t,r=this;a&&window.Aliplayer?(console.log("[RELOAD INSTANCE]"),this.traceLog(M,"reloadInstance::"+i),this._options.source=i,window.Aliplayer.reloadInstance(this._options,function(){},this)):(o||(this._urls=[]),this._monitor&&!o&&(this._monitor.reset(),this._monitor.startHeartBeat()),this._isError=!1,this._clearTimeout(),this.trigger(w.Private.Error_Hide),this._options.source=i,this._posOffset=this._getSubVideoConfig().start||0,this._monitor&&this._monitor.updateVideoInfo({video_id:0,album_id:0,source:i,from:this._options.from}),o||(this.trigger(w.Private.ChangeURL),this._vodRetryCount=0),e&&this._canSeek(e)?this._loadByUrlStartTime=e-this._posOffset:this._loadByUrlStartTime=0,this._options._autoplay=n,this.initPlay(n),(t=this._options.autoplay||n)&&this.trigger(w.Private.Cover_Hide),t?this.trigger(w.Player.Play):this.trigger(w.Player.Pause),this._options.isLive||!e&&0!=e||isNaN(e)||l.one(this.tag,w.Video.CanPlay,function(e){t&&(d.IS_IOS||d.IS_MAC_SAFARI)&&r._splayer&&r.play()}))}s.call(this)},t.prototype.setLogo=function(e){this._logoManager&&this._logoManager.dispose(),this._logoManager=new O({container:this.el(),video:this.tag,logo:e})},t.prototype.dispose=function(){this.__disposed||(this.__disposed=!0,this.trigger(w.Private.Dispose),this.tag.pause(),y.offAll(this),C.dispose.call(this),this._ratioAdapter&&(this._ratioAdapter.dispose(),this._ratioAdapter=null),this._logoManager&&(this._logoManager.dispose(),this._logoManager=null),this._antiRecord&&(this._antiRecord.dispose(),this._antiRecord=null),this._monitor&&(this._monitor.reportPlayAbort("dispose"),this._monitor.removeEvent(),this._monitor=null),this._autoPlayDelay&&this._autoPlayDelay.dispose(),this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._playingSlientPause&&(clearTimeout(this._playingSlientPause),this._playingSlientPause=null),this._waitingLoadedHandle&&(clearTimeout(this._waitingLoadedHandle),this._waitingLoadedHandle=null),this._ucSourceHandle&&(clearTimeout(this._ucSourceHandle),this._ucSourceHandle=null),this._readyStateTimer&&(clearInterval(this._readyStateTimer),this._readyStateTimer=null),this._vodRetryCountHandle&&(clearTimeout(this._vodRetryCountHandle),this._vodRetryCountHandle=null),this._waitingDelayLoadingShowHandle&&(clearTimeout(this._waitingDelayLoadingShowHandle),this._waitingDelayLoadingShowHandle=null),this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this.stopPlayTimeMonitor(),this._disposeService(),this._clearLiveErrorHandle(),this._el.innerHTML="",this.destroy(),this._releaseMediaElement(),this._options.recreatePlayer=null,this._options=null,this.isMutiLevel=!1,this._seis={},this._initPTS=0,this._clickPauseEnabled=!1,this._currentTimeForDisableSeek=0,this._posOffset=0,this._onceLogged=!1)},t.prototype._releaseMediaElement=function(){this.tag.removeAttribute("src"),this.tag.load(),this.tag=null},t.prototype.mute=function(e){return this._muteInner(),this._originalVolumn=this.tag.volume,e||(e=_.get("Volume_Mute"),this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"})),this._setInnerVolume(0),this},t.prototype._muteInner=function(){this.tag.muted=!0,this.trigger(w.Private.VolumnChanged,-1)},t.prototype.unMute=function(e){return this._unMuteInner(),e||(e=_.get("Volume_UnMute"),this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"})),this._setInnerVolume(this._originalVolumn||.5),this},t.prototype._unMuteInner=function(){this.tag.muted=!1,this.getOptions().mute&&(this.getOptions().mute=!1),this.trigger(w.Private.VolumnChanged,-2)},t.prototype.muted=function(){return this.tag&&this.tag.muted},t.prototype.getVolume=function(){return this.tag&&this.tag.volume},t.prototype.getOptions=function(){return this._options},t.prototype.setVolume=function(e,t){0!=(e=Math.min(1,Math.max(0,e)))?this._unMuteInner():0==e&&this._muteInner(),this._setInnerVolume(e);e=_.get("Curent_Volume")+"<span>"+(100*e).toFixed()+"%</span>";this._player.trigger(w.Private.Info_Show,{text:e,duration:1e3,align:"lb"})},t.prototype._setInnerVolume=function(e){this.tag.volume=e,this.trigger(w.Private.VolumnChanged,e)},t.prototype.hideProgress=function(){this.trigger(w.Private.HideProgress)},t.prototype.cancelHideProgress=function(){this.trigger(w.Private.CancelHideProgress)},t.prototype.setPlayerSize=function(e,t){this._el&&(this._el.style.width=e,this._el.style.height=t)},t.prototype.getBuffered=function(){return this.tag.buffered},t.prototype.setRotate=function(e){this.tag&&(this._rotate=e,this._setTransform(),this.log("ROTATE",{rotation:e}))},t.prototype.getRotate=function(e){return void 0===this._rotate?0:this._rotate},t.prototype.setImage=function(e){this.tag&&(this._image=e,this._setTransform(),this.log("IMAGE",{mirror:"horizon"==e?2:1,text:e}))},t.prototype.getImage=function(){return this._image},t.prototype.cancelImage=function(){this.tag&&(this._image="",this._setTransform(),this.log("IMAGE",{mirror:0}))},t.prototype.setCover=function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&e&&(t.style.backgroundImage="url("+e+")",this._options.cover=e,this._options.autoplay||this.trigger(w.Private.Cover_Show))},t.prototype.setTextTracks=function(e){this._options.textTracks=e,e=h.unqiueTextTracks(e||[]),this.trigger(w.Private.VttClearTracks),e&&e.length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e}),this.trigger(w.Private.CCReset)},t.prototype._setTransform=function(){this._transformProp||(this._transformProp=s.getTransformName(this.tag));var e=" translate(-50%, -50%)";this._rotate&&(e+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?e+=" scaleY(-1)":"horizon"==this._image&&(e+=" scaleX(-1)")),this.tag.style[this._transformProp]=e},t.prototype._startPlay=function(){this.tag.paused&&this.tag.play()},t.prototype._initPlayBehavior=function(e,t){var r=this;return!this._checkSupportVideoType()&&(h.validateSource(t)?(void 0===e&&(e=!1),this._created||(this._created=!0,this.trigger(w.Private.Created)),this.loaded||this.trigger(w.Player.Init),this._options.mute&&this.mute(!0),this.one(w.Video.CanPlay,function(){var e=r._getPlayStartTime();r.getCurrentTime()<e&&r.seek(e),r._loadByUrlStartTime=0,1!==r.tag.playbackRate&&r.setSpeed(r.tag.playbackRate)}),this._options.autoplay||this._options._autoplay||this._options.preload||e?(this._options._preload=!0,this._initLoad(t),!this._options.autoplay&&!this._options._autoplay||this._isError||this._dash||this._startPlay()):this.trigger(w.Private.Play_Btn_Show),!0):((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=_.get("Error_Invalidate_Source"),this.trigger(w.Player.Error,e),!1))},t.prototype._isPreload=function(){return this._options.autoplay||this._options.preload||this._options._preload},t.prototype._initLoad=function(e){e&&(this._isPreload()&&!d.IS_MOBILE?this.trigger(w.Private.H5_Loading_Show):(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this.tag.setAttribute("src",e),this.oncePlayed=!1,this.loaded=!0)},t.prototype._clearLiveErrorHandle=function(){this._liveErrorHandle&&(clearTimeout(this._liveErrorHandle),this._liveErrorHandle=null)},t.prototype._reloadAndPlayForM3u8=function(){0==this._liveRetryCount&&this.trigger(w.Player.OnM3u8Retry);var e=this._options,t=e.liveRetryInterval+e.liveRetryStep*this._liveRetryCount,r=this;this._liveRetryTimer&&(clearTimeout(this._liveRetryTimer),this._liveRetryTimer=null),this.traceLog(M,"reloadAndPlayForM3u8::#"+r._options.source+"#"+1e3*t),this._liveRetryTimer=setTimeout(function(){r._liveRetryCount++,r._loadByUrlInner(r._options.source,void 0,e.autoplay)},1e3*t)},t.prototype._checkSupportVideoType=function(){var e,t=this,r=this._options.source,i="";if(h.isRTMP(r)&&!this._options.useFlashPrism)i=_.get("Error_Not_Support_RTMP");else if(h.isDash(r)&&!h.isSupportMSE())i=_.get("Error_Not_Support_Mse_Dash");else if(!this.tag.canPlayType||!this._options.source||!d.IS_MOBILE)return"";return 0<r.indexOf("m3u8")?""!=this.tag.canPlayType("application/x-mpegURL")||h.isSupportHls()||(i=_.get("Error_Not_Support_M3U8_Text")):0<r.indexOf("mp4")?""==this.tag.canPlayType("video/mp4")&&(i=_.get("Error_Not_Support_MP4_Text")):(h.isRTMP(r)||h.isFlv(r))&&d.IS_MOBILE&&(this._options.useFlvPlugOnMobile?h.isSupportFlv()||(i=_.get("Error_Not_Support_Mse_Flv")):i=_.get("Error_Not_Support_Format_On_Mobile")),i&&(r=h.getFormat(r),e={mediaId:this._options.vid||"",error_code:p.ErrorCode.FormatNotSupport,error_msg:i+(r?"(format:"+r+")":"")},this.logError(e),e.display_msg=i,setTimeout(function(){t.trigger(w.Player.Error,e)})),i},t.prototype._handleLongPress=function(e,t){var r,i,n=this;function o(){i?(clearTimeout(i),i=null):l.trigger(t,"longPressEnd")}e.longPressFastForward&&(t=t||this.tag,l.on(t,"longPress",function(){n.trigger(w.Private.FastForwardShow),r=n.tag.playbackRate,n.tag.playbackRate=2}),l.on(t,"longPressEnd",function(){n.trigger(w.Private.FastForwardHide),n.tag.playbackRate=r}),i=null,l.on(t,"touchstart",function(){i&&clearTimeout(i),i=setTimeout(function(){i=null,l.trigger(t,"longPress")},500)}),l.on(t,"touchend",o),l.on(t,"touchcancel",o))},t.prototype._handleClickPause_dbClickFullscreen=function(e,t){var r,i,n,o=this,a=null;!e.isLive&&e.clickPause&&(this._clickPauseEnabled=!0,r=d.IS_IOS?"touchstart":"click",t=t||this.tag,l.on(t,r,function(){o._clickPauseEnabled&&(e.dbClickFullscreen?(a&&clearTimeout(a),a=setTimeout(function(){o.paused()?o.play(!0):o.pause(!0),a=null},e.clickPauseDelay)):o.paused()?o.play(!0):o.pause(!0))})),e.dbClickFullscreen&&(i=function(){a&&(clearTimeout(a),a=null);var e=this.fullscreenService;e.getIsFullScreen()?e.cancelFullScreen():e.requestFullScreen(),this.trigger(w.Private.MarkerTextHide),l.trigger(this.tag,"touchend")},d.IS_IOS?(n=null,l.on(this.tag,"touchstart",function(){n=n?(i.call(o),clearTimeout(n),null):setTimeout(function(){n=null},e.dbClickFullscreenDelay)})):l.on(this.tag,"dblclick",function(){i.call(o)}))},t.prototype.getComponent=function(e){return this._lifeCycleManager.getComponent(e)},t.prototype.logError=function(e,t){(this._options.autoplay||this._options._autoplay)&&this._monitor&&this._monitor.reportStartPlay(),(e=e||{}).vt=this.getCurrentTime(),this.log(t?"ERRORRETRY":"ERROR",e)},t.prototype.log=function(e,t){var r=0,i=0;if(this._monitor)return this._options&&(r=this._options.vid||"0",i=this._options.from||"0"),this._monitor.updateVideoInfo({video_id:r,album_id:0,source:this._options.source,from:i}),this._monitor._log(e,t)},t.prototype.setSanpshotProperties=function(e,t,r){if(this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric.width=e,this._snapshotMatric.height=t,1<r)throw new Error("rate doesn't allow more than 1");this._snapshotMatric.rate=r},t.prototype.setSnapshotProperties=function(e,t,r){this.setSanpshotProperties(e,t,r)},t.prototype.takeSnapshot=function(){var e=document.createElement("canvas"),t=this.tag,r=t.videoWidth,i=t.videoHeight,n=this._getSanpshotMatric(),o=(e.width=n.width||r,e.height=n.height||i,this.getCurrentTime()),a=e.getContext("2d"),s=(a.save(),this.getImage()),s=("vertical"==s?(a.translate(0,e.height),a.scale(1,-1)):"horizon"==s&&(a.translate(e.width,0),a.scale(-1,1)),t),t=(this._splayer&&(s=2===this._splayer.renderType?this._el.querySelector("canvas"):this._el.querySelector("video")),a.drawImage(s,0,0,r,i),a.restore(),h.drawSnapshotText(a,this.getOptions()),""),s="";try{t=e.toDataURL("image/jpeg",n.rate||1)}catch(e){(s=e)&&s.message&&-1<s.message.indexOf("Tainted canvases")&&(s=new Error('\u622a\u56fe\u529f\u80fd\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u5668\u53c2\u6570 extraInfo: { crossOrigin:"anonymous" }'))}r="",i="";return t&&(a=(r=t).substr(r.indexOf(",")+1),i=f.toBinary(a)),{time:o,base64:r,binary:i,error:s}},t.prototype.getStatus=function(){return this._status||"init"},t.prototype.enterProgressMarker=function(){this._enteredProgressMarker=!0},t.prototype.isInProgressMarker=function(){return this._enteredProgressMarker},t.prototype.exitProgressMarker=function(){this._enteredProgressMarker=!1},t.prototype.setProgressMarkers=function(e){this.trigger(w.Private.ProgressMarkerChanged,e=e||[])},t.prototype.getProgressMarkers=function(){return this._progressMarkerService?this._progressMarkerService.progressMarkers:[]},t.prototype.setPreviewTime=function(e){this._options.playConfig||(this._options.playConfig={}),this._options.playConfig.PreviewTime=e},t.prototype.getPreviewTime=function(){var e=0;return e=this._options.playConfig?this._options.playConfig.PreviewTime:e},t.prototype.exceedPreviewTime=function(e){return this.isPreview()&&e>=this._options.playConfig.PreviewTime},t.prototype.isPreview=function(){var e=this._options.playConfig.PreviewTime,t=this._vodDuration||this.tag.duration;return 0<e&&e<t},t.prototype.getStats=function(){return new o(function(e){e()})},t.prototype.setTraceId=function(e){this._monitor&&this._monitor.updateTraceId(e)},t.prototype._canSeek=function(e){var t=this._getSubVideoConfig(),r=t.start,t=t.end;return r||t?!(e<r||t<e):!(!(r=this._getWatchTimeConfig()).watchStartTime||r.watchEndTime)||!(e<r.watchStartTime||e>r.watchEndTime)},t.prototype.setWatchTime=function(e,t){this._options.watchStartTime=e,this._options.watchEndTime=t,this.trigger(w.Private.UpdateWatchTime);e=this.getCurrentTime(),t=this._getWatchTimeConfig();e<t.watchStartTime?this.seek(t.watchStartTime):e>t.watchEndTime&&this.seek(t.watchEndTime)},t.prototype.setNextWatchTime=function(e,t){this._options.watchStartTime=e,this._options.watchEndTime=t},t.prototype.setStartEnd=function(e,t){this._options.start=e,this._options.end=t;e=this._getSubVideoConfig();this._posOffset=e.start||0,this.trigger(w.Player.DurationChange);t=this.getCurrentTime()+this._posOffset;t<e.start?this.seek(0):t>e.end&&this.seek(e.end-this._posOffset)},t.prototype.setNextStartEnd=function(e,t){this._options.start=e,this._options.end=t},t.prototype.getPlayTime=function(){return Math.round(this._playingTime/1e3)},t.prototype._getSanpshotMatric=function(){return this._snapshotMatric||(this._snapshotMatric={}),this._snapshotMatric},t.prototype._autoplayFailedHandler=function(){var e,t=this;null!=(e=this.getOptions().autoplayPolicy)&&e.fallbackToMute&&!this.muted()?(this.mute(!0),(e=this.tag.play())?e.then(function(){t.trigger(w.Private.MutedAutoplay)}).catch(function(e){t.tag.paused?(console.warn("Muted autoplay failed",e),t.unMute(!0)):t.one("canplay",function(){t.trigger(w.Private.MutedAutoplay)})}):this.paused()?this.unMute(!0):this.trigger(w.Private.MutedAutoplay)):(this.oncePlayed=!1,this.trigger(w.Private.Play_Btn_Show),this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Player.AutoPlayPrevented),this.trigger(w.Player.AutoPlay,!1),this._options.cover&&this.trigger(w.Private.Cover_Show))},t.prototype._overrideNativePlay=function(){var r=this.tag.play,i=this;this.tag.play=function(){if(i._monitor&&i._monitor.reportStartPlay(),!i._options.source)return e={mediaId:i._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"},i._options.vid||i._options.mediaAuth?void 0:(e.display_msg=_.get("Error_Empty_Source"),void i.trigger(w.Player.Error,e));i.readyTime=(new Date).getTime();var e=r.apply(i.tag),t=(i.oncePlayed=!0,void 0!==e&&e.then(function(){i.trigger(w.Player.AutoPlay,!0)}).catch(function(e){!i.tag||!i.tag.paused||i._isError||i._options._autoplay||i._switchedLevel||i._autoplayFailedHandler()}),i._originalPlaybackRate||i.tag.playbackRate);return setTimeout(function(){i.tag&&(i.tag.playbackRate=t)}),e}},t.prototype._extraMultiSources=function(){var e=this._options.source;if(e&&-1<e.indexOf("{")&&-1<e.indexOf("}")){var t="";try{t=JSON.parse(e)}catch(e){console.error(e),console.error("\u5730\u5740json\u4e32\u683c\u5f0f\u4e0d\u5bf9")}var r,i=[];for(r in t){var n=p.QualityLevels[r];i.push({definition:r,Url:t[r],desc:n||r})}this._setupSourceList(i)}return i},t.prototype._setupSourceList=function(e){var t;(e=void 0===e?[]:e).length&&(this._currentPlayIndex=h.findSelectedStreamLevel(e,this._options.defaultDefinition),t=e[this._currentPlayIndex],this._urls=e,this._options.source=t.Url,this.trigger(w.Private.SourceLoaded,t))},t.prototype._createService=function(){if(k)for(var e=k.length,t=0;t<e;t++){var r=k[t],i=r.condition;void 0===i?i=!0:"function"==typeof i&&(i=i.call(this)),i&&(this[r.name]=new r.service(this))}},t.prototype._disposeService=function(){if(k)for(var e=k.length,t=0;t<e;t++){var r=this[k[t].name];void 0!==r&&r.dispose&&r.dispose()}},t.prototype._executeReadyCallback=function(){if(!this._options._readyCallbackCalled){this._options._readyCallbackCalled=!0;try{this._options.autoplay||this._options.preload||(this.trigger(w.Private.H5_Loading_Hide),this.trigger(w.Private.Play_Btn_Show)),this._options.readyCallback(this)}catch(e){console.log(e)}}},t.prototype._clearTimeout=function(){this._checkTimeoutHandle&&(clearTimeout(this._checkTimeoutHandle),this._checkTimeoutHandle=null),this._waitingTimeoutHandle&&(clearTimeout(this._waitingTimeoutHandle),this._waitingTimeoutHandle=null),this._decodeErrorNudgeTimer&&(clearTimeout(this._decodeErrorNudgeTimer),this._decodeErrorNudgeTimer=null),this._clearLiveErrorHandle()},t.prototype._reloadForVod=function(){var e,t,r;return this._originalSource||(this._originalSource=this._options.source),!!(this._vodRetryCount<this._options.vodRetry&&navigator.onLine)&&(e=this.getCurrentTime(),(t=this._originalSource).indexOf("auth_key=")<0&&(t=t&&0<t.indexOf("?")?t+"&_t="+(new Date).valueOf():t+"?_t="+(new Date).valueOf()),this._vodRetryCountHandle&&clearTimeout(this._vodRetryCountHandle),(r=this).traceLog(M,"reloadForVod::#"+t+"#"+100*this._vodRetryCount),this._vodRetryCountHandle=setTimeout(function(){r._loadByUrlInner(t,e,r.getOptions().autoplay)},100*this._vodRetryCount),this._vodRetryCount=this._vodRetryCount+1,!0)},t.prototype._getUserTextTracks=function(){var e=this._options.textTracks||[];(e=h.unqiueTextTracks(e)).length&&this.trigger(w.Private.TextTrackFounded,{from:"user",textTracks:e})},t.prototype._logOnce=function(e,t){this._onceLogged||(console[t||"log"](e),this._onceLogged=!0)},U.exports=t}.call(this)}.call(this,"prod")},{"../../commonui/autostreamselector":12,"../../feature/AntiRecord":17,"../../feature/autoplaydelay":18,"../../feature/keyboardControl":19,"../../feature/license":20,"../../feature/logoManager":21,"../../feature/ratioAdapter":22,"../../lang/index":24,"../../lib/codec-probe":27,"../../lib/constants":29,"../../lib/cookie":30,"../../lib/dom":33,"../../lib/event":34,"../../lib/object":43,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../../lib/vttnext/index":55,"../../monitor/monitor":63,"../../ui/component":132,"../../ui/component/cover":136,"../../ui/component/double-click-skip":137,"../../ui/component/press-fast-forward":144,"../../ui/component/progressmarker":146,"../../ui/component/text-track-display":157,"../../ui/component/util":162,"../../ui/exports":165,"../service/export":121,"../splayer/splayerinjector":128,"./event/eventmanager":67,"./event/eventtype":68,"./plugin/lifecyclemanager":94,"./x5play":96,"es6-promise":9}],92:[function(e,t,r){e=e("../../../lib/oo").extend({});t.exports=e},{"../../../lib/oo":44}],93:[function(e,t,r){t.exports={createEl:"createEl",created:"created",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",timeUpdate:"timeupdate",error:"error",ended:"ended",dispose:"dispose",markerDotOver:"markerDotOver",markerDotOut:"markerDotOut"}},{}],94:[function(e,t,r){function i(i){(this._player=i)._status="init",this.components=[];var e=i.getOptions().components;if(e&&s.isArray(e)&&0<e.length)for(var t=0;t<e.length;t++){var r=e[t];if(!r)return void console.log("The "+t+" custome component is "+r);var n=void 0===r.type?r:r.type,o=void 0===r.args?[]:r.args,r=void 0===r.name?"":r.name;if(!n)return void console.log(r+" compenent is "+n);o=o&&0<o.length?[].concat.call([n],o):[],n=new(Function.prototype.bind.apply(n,o)),o=n[c.createEl];o&&"function"==typeof o&&o.call(n,i.el(),i),this.components.push({name:r,obj:n})}var a=this;i.on(l.Private.LifeCycleChanged,function(e){var t=e.paramData,r=t.type;r===l.Video.CanPlayThrough&&a._player.trigger(l.Player.TimeUpdate,t.data.target.currentTime),r===l.Video.Ended&&a._player.trigger(l.Player.TimeUpdate,a._player.getDuration()),0!=a.components.length&&u.call(a,i,e)})}var s=e("../../../lib/object"),l=e("../event/eventtype"),c=e("./lifecycle"),n=e("./status"),u=(i.prototype.getComponent=function(e){var t=null,r=this.components.length;if(e)for(var i=0;i<r;i++)if(this.components[i].name==e){t=this.components[i].obj;break}return t},function(e,t){if(t){for(var t=t.paramData,r=t.type,i=t.data,n=((t=r)!=l.Video.LoadStart&&t!=l.Video.LoadedData&&t!=l.Video.LoadedMetadata||(r=c.loading),d(e,r),this.components.length),o=0;o<n;o++){var a=this.components[o].obj,s=a[r];s&&"function"==typeof s&&s.call(a,e,i)}r==l.Private.Dispose&&(this.components=[])}}),d=function(e,t){void 0===n[t]||t==n.pause&&(e._status==n.error||e._status==n.ended)||t==n.ready&&e._status==n.playing||(e._status=t)};t.exports=i},{"../../../lib/object":43,"../event/eventtype":68,"./lifecycle":93,"./status":95}],95:[function(e,t,r){t.exports={init:"init",ready:"ready",loading:"loading",play:"play",pause:"pause",playing:"playing",waiting:"waiting",error:"error",ended:"ended"}},{}],96:[function(e,t,r){function i(e,t){var r=e.el().style.height,i=e.el().style.width,n=(e.originalLayout={container:{height:r,width:i},video:{width:e.tag.style.width,height:e.tag.style.height}},document.body.clientHeight*(window.devicePixelRatio||1)+"px"),o=document.body.clientWidth+"px";width=t?(height=n,o):(height=r.indexOf("%")?r:r+"px",i.indexOf("%")?i:i+"px"),e.tag.style.width=o,e.tag.style.height=n,e.el().style.height=t?n:height}var n=e("../../lib/ua"),o=e("../../lib/dom");t.exports.isAndroidX5=function(){return n.os.android&&n.is_X5||n.dingTalk()},t.exports.adaptX5Play=function(r){n.os.android&&n.is_X5&&("h5"==r._options.x5_type&&(r.tag.setAttribute("x5-video-player-type",r._options.x5_type),window.onresize=function(){var e,t;i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),"landscape"==(e=r)._x5VideoOrientation&&(e._originalTagWidth=e.tag.style.width,e._originalTagHeight=e.tag.style.height,(t=document.querySelector("#"+e.id()+" .prism-controlbar"))&&parseFloat(t.offsetHeight),e.tag.style.height="100%",e.tag.style.width=window.screen.width+"px")},r.tag.addEventListener("x5videoenterfullscreen",function(){i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),r.trigger("x5requestFullScreen")}),r.tag.addEventListener("x5videoexitfullscreen",function(){var e,t;(e=r).originalLayout&&(t=e.originalLayout,e.el().style.height=t.container.height,e.el().style.width=t.container.width,e.tag.style.width=t.video.width,e.tag.style.height=t.video.height),r.trigger("x5cancelFullScreen"),r.fullscreenService.getIsFullScreen()&&r.fullscreenService.cancelFullScreen()}),r.on("requestFullScreen",function(){"top"==r._options.x5_video_position&&o.removeClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","landscape"),r._x5VideoOrientation="landscape")}),r.on("cancelFullScreen",function(){"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),n.os.android&&n.is_X5&&r._options.x5LandscapeAsFullScreen&&(r.tag.setAttribute("x5-video-orientation","portrait"),i(r,r._options.x5_fullscreen||"center"==r._options.x5_video_position),r._x5VideoOrientation="portrait")})),void 0!==r._options.x5_fullscreen&&r._options.x5_fullscreen&&(r.tag.setAttribute("x5-video-player-fullscreen",r._options.x5_fullscreen),o.addClass(r.tag,"x5-full-screen")),"top"==r._options.x5_video_position&&o.addClass(r.tag,"x5-top-left"),void 0!==r._options.x5_orientation)&&r.tag.setAttribute("x5-video-orientation",r._options.x5_orientation)}},{"../../lib/dom":33,"../../lib/ua":49}],97:[function(e,t,r){var a=e("../../lib/object"),s=e("../../lib/io"),l=e("../../config"),h=e("../../lang/index"),f=e("../../lib/constants"),c=e("../../lib/playerutil"),_=e("../base/event/eventtype"),g="dashinjector.js";t.exports.inject=function(e,t,r,i){var n=i.source;if(!function(e){return!this._dash&&c.isDash(e)&&c.isSupportMSE()}.call(e,n))return console.warn("Should not inject dash player");function o(){this._disposed||(this._disposed=!0,this._destroyDash(),this._superPt&&(this._superPt.dispose.call(this),t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.seek=this._superPt.seek,t.prototype.canSeekable=this._superPt.canSeekable))}e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,e._dash=null,t.prototype.initPlay=function(){var t=this,e=(this.trigger(_.Private.H5_Loading_Show),performance.now());!function(e,t){var r="aliplayer-dash-min.js",i=this.getOptions(),r=i.dashjsUrl||"https://"+l.domain+l.path+l.h5Version+"/dash/"+r;i.assetPrefix&&(i.assetPrefix,(e=>{throw new TypeError('"'+e+'" is read-only')})("url"));s.loadJS(r,e,t)}.call(this,function(){t.traceLog(g,"got js#"+parseInt(performance.now()-e)+"ms"),function(){var e,t,r,i=!this._dash;this._disposed||(this._destroyDash(),(e=this.getOptions()).vid||(e.isVBR=!0),t={streaming:{retryAttempts:{MPD:e.isLive?e.liveRetry:e.vodRetry}}},t=a.deepMerge(t,e.dashOption),r=dashjs.MediaPlayer().create(),this._dash=r,function(){var u=this,d=this._dash,p=this.getOptions(),i=!1;d.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(e){var t,r;i||(i=!0,r=null==(r=d.getBitrateInfoListFor("video"))?void 0:r.map(function(e){return{url:""+f.DASH_QUALITY_PROTOCOL+e.qualityIndex,width:e.width,height:e.height,bitrate:e.bitrate,attrs:{BANDWIDTH:e.bitrate,RESOLUTION:e.width+"x"+e.height}}}),u.trigger(_.Player.LevelsLoaded,{levels:r}),t=d.getCurrentTrackFor("audio"),r=d.getTracksFor("audio").map(function(e){return{id:e.index,language:e.lang,enabled:(null==t?void 0:t.index)===e.index}}),u.trigger(_.Player.AudioTrackUpdated,{audioTracks:r}))}),d.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(e){var t,r;"video"===e.mediaType&&(t=u._qualityService.levels||[],r=""+f.DASH_QUALITY_PROTOCOL+e.newQuality,e=t.find(function(e){return e.Url===r}),u.trigger(_.Private.QualityChange,{levelSwitch:!0,url:r,desc:null==e?void 0:e.desc}))}),d.on("bytesAppendedEndFragment",function(e){try{var t,r;"video"===e.mediaType&&(t=e.bufferedRanges.length)&&(r=e.bufferedRanges.end(t-1),e.startTime>r)&&(d.refreshManifest(),u.traceLog(g,"PTS rollback, refresh manifest, expectedStart: "+e.startTime+", resultBufferEnd: "+r),console.warn("PTS rollback, refresh manifest"))}catch(e){console.log("exception",e)}}),d.on(dashjs.MediaPlayer.events.ERROR,function(e){var t=e.error,r=dashjs.MediaPlayer.errors,i=(e=>{var t,r,i={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],i[r]=t);return i})(r)[t.code],n=[r.TIME_SYNC_FAILED_ERROR_CODE,r.TIMED_TEXT_ERROR_ID_PARSE_CODE];if(console.log("dash error",e,"code:",i),u.traceLog(g,"dashjs-error::"+i+"#"+t.message+"#"+(null==(e=t.data)||null==(e=e.response)?void 0:e.status)),!n.includes(t.code)){u._clearTimeout();var o,a,s,l=t.code;switch(l){case r.DOWNLOAD_ERROR_ID_CONTENT_CODE:case r.DOWNLOAD_ERROR_ID_MANIFEST_CODE:case r.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE:case r.DOWNLOAD_ERROR_ID_SIDX_CODE:case r.DOWNLOAD_ERROR_ID_XLINK_CODE:case r.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE:case r.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE:var c=null==(c=t.data)||null==(c=c.response)?void 0:c.status;if(404===c){if(d.isDynamic()&&l===r.DOWNLOAD_ERROR_ID_CONTENT_CODE)return u.traceLog(g,"dashjs::reload mpd because seg 404"),void d.attachSource(p.source);o=f.ErrorCode.NotFoundSourceURL,a=h.get("Error_Not_Found"),s=h.get("Tip_Err_Not_found")}else a=403===c?(o=f.ErrorCode.AuthKeyExpired,h.get("Error_AuthKey_Text")):0===c?(o=f.ErrorCode.RequestDataError,h.get("Error_Play_Text")+","+h.get("Maybe_Cors_Error")):(o=f.ErrorCode.RequestDataError,h.get("Error_Network_Text")+"("+i+"|"+c+")");break;case r.MANIFEST_ERROR_ID_NOSTREAMS_CODE:case r.MANIFEST_ERROR_ID_MULTIPLEXED_CODE:case r.MANIFEST_ERROR_ID_PARSE_CODE:case r.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE:case r.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE:o=f.ErrorCode.LoadedMetadata,a=h.get("Error_Manifest_Decode_Text")+"("+i+")";break;default:o=f.ErrorCode.OtherError,a=h.get("Error_Play_Text")+"("+i+")"}a+="<br>"+t.message;e={mediaId:p.vid||"",mediaAuth:p.mediaAuth||"",error_code:o,error_msg:a,diagnosis_info:s};u.logError(e),u.trigger(_.Player.Error,e),u._dash.reset()}})}.call(this),r.initialize(),r.updateSettings(t),r.setAutoPlay(e.autoplay),r.attachView(this.tag),r.attachSource(e.source),this._initPlayBehavior(),i&&this._executeReadyCallback())}.call(t)},function(){var e={mediaId:i.vid||"",mediaAuth:i.mediaAuth||"",error_code:f.ErrorCode.ModuleLoadError,error_msg:"dash module load error."};t.trigger(_.Player.Error,e)})},Object.defineProperty(t.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return o},set:function(){return o}}),t.prototype._switchLevel=function(e){this.traceLog(g,"switchLevel::"+e);var t=this._dash;e?(e=Number(e.replace(f.DASH_QUALITY_PROTOCOL,"")),t.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!1,video:!1}}}}),t.setQualityFor("video",e)):t.updateSettings({streaming:{abr:{autoSwitchBitrate:{audio:!0,video:!0}}}})},t.prototype._switchAudioTrack=function(t){var e=this._dash,r=e.getTracksFor("audio").find(function(e){return e.index===t});r&&e.setCurrentTrack(r)},t.prototype._destroyDash=function(){this._dash&&(this._dash.destroy(),this._dash=null)}}},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/object":43,"../../lib/playerutil":46,"../base/event/eventtype":68}],98:[function(e,t,r){var i=e("../base/player"),n=e("./dashinjector"),o=i.extend({init:function(e,t){t._native=!1,n.inject(this,o,i,t),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./dashinjector":97}],99:[function(e,t,r){function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var y=e("../../lib/io"),v=e("../../config"),m=e("../../lib/constants"),b=e("../../lib/util"),S=e("../../lib/playerutil"),T=(e("../../lib/dom"),e("../../lang/index")),E=e("../base/event/eventtype"),w=e("../saas/drm"),x=e("../../lib/ua"),k="drminjector.js",P=(()=>{function e(){}var t=e.prototype;return t.destroy=function(){},t.append=function(e){},t.remove=function(e,t){},t.isTextVisible=function(){},t.setTextVisibility=function(e){},e})();t.exports.inject=function(e,t,r,i,s,n,o){var l,a=i.source;function c(e){var t=shaka.util.Error.Code,r="",i=e.data||[];switch(e.code){case t.BAD_HTTP_STATUS:case t.HTTP_ERROR:case t.TIMEOUT:case t.LICENSE_REQUEST_FAILED:r=T.get("Tip_Drm_Request_Err")+u(i);break;case t.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case t.SESSION_TIMEOUT:window.isSecureContext?(r=T.get("Tip_Drm_Key_System_Unavailable"),i.length&&(r+="<br />"+T.get("Tip_Err_Common_Short")+i)):r=T.get("Tip_Drm_Secure_Context");break;case t.FAILED_TO_CREATE_CDM:"file:"===window.location.protocol&&(r=T.get("Tip_Drm_File_Not_Allowed"));break;case t.HLS_INVALID_PLAYLIST_HIERARCHY:r=T.get("Tip_Drm_Playlist_Hierarchy")}e=u(i);return r||e}function u(e){return T.get("Tip_Err_Common")+e}function d(i){var n=this;this._drm.load(this._options.source,i.startTime).then(function(){if(n.trigger(E.Private.H5_Loading_Hide),i.continuePlay&&(n.play(),i.prevVariant)&&0!==i.prevVariant){for(var e,t=n._drm.getVariantTracks(),r=0;r<t.length;r++)if(t[r].id===i.prevVariant){e=t[r];break}e&&n._drm.selectVariantTrack(e,!0)}}).catch(function(e){h.call(n,e)})}function p(){f();var e=m.ErrorCode.DrmNotSupported,t=T.get("Error_Drm_Not_Supported"),e={mediaId:this._options.vid||"",error_code:e,error_msg:t,diagnosis_info:T.get("Tip_Drm_Unsupported")};this.logError(e),this.trigger(E.Player.Error,e)}function h(e){f();var t=m.ErrorCode.DrmLoadError,r=T.get("Error_Drm_Load"),t={mediaId:this._options.vid||"",error_code:t,error_msg:r+" | "+this._shakaCodeMap[e.code],drm_info:JSON.stringify({cdmData:this._cdmData,licenseData:this._licenseData})};this.logError(t),t.diagnosis_info=c.call(this,e),this.trigger(E.Player.Error,t)}function f(){this._sessionTimer&&(clearTimeout(this._sessionTimer),this._sessionTimer=null)}function _(e,t){t=t.getVariantTracks().find(function(e){return e.active});console.log("activeTrack",t),e.trigger(E.Private.QualityChange,{levelSwitch:!0,bitrate:t.bandwidth,desc:t.height})}!n&&(i=a,e._drm||!S.isDash(i)&&!S.isHls(i))||(e._isDrm=!0,e._drm=null,e._isLoadedDrm=!1,e._sessionTimer=null,e._isFairPlay=x.IS_MAC_SAFARI||x.IS_IOS,e._fairPlayHandlers={},e._shakaCodeMap={},e._cdmData="",e._licenseData="",console.log("use FairPlay",e._isFairPlay),t.prototype._checkDrmReady=function(){return!(null==this._drm&&!this._isFairPlay&&(console.warn("please invoke this method after ready event"),1))},t.prototype.play=function(e){if(this.traceLog(k,"play::"+e),this._checkDrmReady())return this._isManualPlay=e||!1,this.trigger(E.Private.Cover_Hide),this.tag.ended?this.replay():(this.getCurrentTime(),this.tag.paused&&this.tag.play()),this},t.prototype.initPlay=function(e){var t,r,i;function n(n,i){var t,o,r,a;if(n._antiRecord&&(console.log("Manual check before load source"),n._antiRecord.check()))return;!shaka.Player.isBrowserSupported()||(()=>!(!x.IS_ANDROID||!x.IS_UC&&!x.IS_FIREFOX))()?p.call(n):(t=null,shaka.Player.probeSupport().then(function(e){t&&(clearTimeout(t),t=null),e&&e.drm&&e.drm["com.widevine.alpha"]?n.destroy(a):p.call(n)}),t=setTimeout(function(){p.call(n)},5e3),o=!n._drm,r=function(){var t,r,e;n._drm=new shaka.Player(n.tag),l(n,n._drm),shaka.util.Error.Code.SESSION_TIMEOUT="SESSION_TIMEOUT",n._shakaCodeMap=(t=shaka.util.Error.Code,r={},Object.keys(t).forEach(function(e){r[t[e]]=e}),r),e=n._options.isLive?"https://"+S.getLiveHostByRegion(n._options.region):"https://vod."+n._options.region+".aliyuncs.com",n._drm.configure(g({drm:{servers:{"com.widevine.alpha":e,"com.microsoft.playready":e},retryParameters:{maxAttempts:1}}},n._options.drmOption||{},{textDisplayFactory:function(){return new P}})),n._drm.getNetworkingEngine().registerRequestFilter(function(e,t){shaka.util.StringUtils;var r=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&(e=r.toBase64(new Uint8Array(t.body)),r=n._options.isLive?w.getRequestUrl(e,n):w.postData(e,n),n._cdmData=e,t.uris[0]=r.url,t.headers["content-type"]="application/x-www-form-urlencoded",t.body=r.data)}),n._drm.getNetworkingEngine().registerResponseFilter(function(e,t){var r=shaka.util.StringUtils,i=shaka.util.Uint8ArrayUtils;e==shaka.net.NetworkingEngine.RequestType.LICENSE&&(e=r.fromUTF8(t.data),r=JSON.parse(e),e=n._options.isLive?r.Response.B64License:JSON.parse(r.License).b64License,n._licenseData=e,t.data=i.fromBase64(e))}),n._drm.addEventListener("error",function(e){console.log("errorMessage"),console.log(e.detail.code),console.log(e.detail)}),n._drm.load(n._options.source).then(function(){n._initPlayBehavior(i)}).catch(function(e){h.call(n,e)}),f.call(n),n.one(E.Video.CanPlay,function(){f.call(n)}),n._sessionTimer=setTimeout(function(){n._isError||(h.call(n,{code:"SESSION_TIMEOUT"}),n._drm&&n._drm.destroy())},n._player.getOptions().drmSessionTimeout||5e3),s&&s(n._drm),o&&(n._executeReadyCallback(),n._urls)&&0<n._urls.length&&(n._currentPlayIndex=S.findSelectedStreamLevel(n._urls,n._options.defaultDefinition),e=n._urls[n._currentPlayIndex],n.trigger(E.Private.SourceLoaded,e))},a=function(e){try{r()}catch(e){console.log(e)}})}b.contentProtocolMixed(a)?(f(),(t={mediaId:this._options.vid||"",error_code:m.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=T.get("Request_Block_Text"),this.trigger(E.Player.Error,t)):this._options.accessKeyId&&this._options.accessKeySecret?((r=this)._waitingTimeoutCount=1,this._isFairPlay?(this.trigger(E.Private.H5_Loading_Show),function(e,t){var r;this._isFairPlay&&((()=>{var e;return x.IS_IOS?(e=parseInt(x.os.version),console.log("osVersion",e),12<=e):x.IS_MAC_SAFARI?(e=parseInt(x.browser.version),console.log("browserVersion",e),12<=e):void 0})()?((r=this).destroy(),w.loadCertificate(this,function(){e&&e(),r._initPlayBehavior(t,r._options.source),r._executeReadyCallback()})):p.call(this))}.call(this,s,e)):this._isLoadedDrm&&"undefined"!=typeof shaka?n(this,e):(this.trigger(E.Private.H5_Loading_Show),i=performance.now(),function(e,t){var r="aliplayer-drm-min.js",i="",i=v.domain?"https://"+v.domain+v.path+v.h5Version+"/drm/"+r:"/build/drm/"+r,n=(this._options.shakaUrl&&(i=this._options.shakaUrl),this);y.loadJS(i,function(){shaka.polyfill.installAll(),e.apply(n)},function(e){t&&t(e)})}.call(r,function(){this.traceLog(k,"got js#"+parseInt(performance.now()-i)),this._isLoadedDrm=!0,n(this,e)},function(e){e={mediaId:r._options.vid||"",mediaAuth:r._options.mediaAuth||"",error_code:m.ErrorCode.ModuleLoadError,error_msg:"drm player module load error."+(e?e.message:"")};r.trigger(E.Player.Error,e)}))):(f(),(t={mediaId:this._options.vid||"",error_code:m.ErrorCode.InvalidParameter,error_msg:"No sts params."}).display_msg=T.get("Error_Drm_No_Sts"),this.trigger(E.Player.Error,t))},t.prototype.destroy=function(e){var t;this._drm?(f.call(t=this),this._drm.destroy().then(function(){t._drm=null,"function"==typeof e&&e(t)})):(this._isFairPlay&&this._destroyFairPlay(),"function"==typeof e&&e(this))},t.prototype._destroyFairPlay=function(){w.destroyFairPlay.call(this)},t.prototype.dispose=function(){r.dispose.call(this),this.destroy()},t.prototype._switchLevel=function(e,t){if(t=t||{isAuto:!0},this.trigger(E.Player.LevelSwitch),this._switchedLevel=!0,this._isFairPlay){this._manuallySwitchDrmLevel=!t.isAuto;var r=this.autoplay||"pause"!=this._status;this._loadByUrlInner(e,this.getCurrentTime(),r)}else if(t.isAuto)this._drm.configure({abr:{enabled:!0}}),_(this._player,this._drm);else{for(var i,n=this._drm.getVariantTracks(),o=0;o<n.length;o++){var a=n[o];if(Number(a.bandwidth)===Number(t.bitrate)&&Number(a.height)===Number(t.resolution.split("x")[1])){i=a;break}}i||console.warn("cannot find target track",t),this._drm.configure({abr:{enabled:!1}}),this._drm.selectVariantTrack(i,!this._options.seamlessHandover)}var s=this;setTimeout(function(){s.trigger(E.Player.LevelSwitched),this._switchedLevel=!1},1e3)},t.prototype._getDRMEncryptItem=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source&&+i.encryption)return i}return""},t.prototype._getItemBySource=function(){var e=this._urls;if(e&&0<e.length)for(var t=e.length,r=0;r<t;r++){var i=e[r];if(i.Url==this._options.source)return i}return""},l=function(o,r){r.addEventListener("error",function(e){var t,r=o,e=e.detail,i="Error code:"+e.code+"message:"+e.message,n=(r.traceLog(k,i),console.log(i),m.ErrorCode.OtherError),i=T.get("Error_Play_Text");e.code==shaka.util.Error.Code.EXPIRED?function(){var t=this,e=(this.trigger(E.Private.H5_Loading_Show),null);this._options.isLive||(e=this.getCurrentTime());var r,i=!this.paused(),n=this._drm.getConfiguration().abr.enabled;if(!n)for(var o=this._drm.getVariantTracks(),a=0;a<o.length;a++)if(o[a].active){r=o[a].id;break}var s={startTime:e,continuePlay:i,prevVariant:r,isAdaptive:n};"function"==typeof this._options.refreshAccessInfo?this._options.refreshAccessInfo().then(function(e){(e=e||{}).accessKeyId&&(t._options.accessKeyId=e.accessKeyId),e.securityToken&&(t._options.securityToken=e.securityToken),e.accessKeySecret&&(t._options.accessKeySecret=e.accessKeySecret),d.call(t,s)}):d.call(t,s)}.call(r):(e.code==shaka.util.Error.Code.HTTP_ERROR?(n=m.ErrorCode.NetworkError,i=T.get("Http_Error")):e.code==shaka.util.Error.Code.TIMEOUT?(n=m.ErrorCode.LoadingTimeout,i=T.get("Error_Waiting_Timeout_Text")):e.code==shaka.util.Error.Code.LICENSE_REQUEST_FAILED?(n=m.ErrorCode.DrmLicenseRequestFailed,i=T.get("Error_Drm_License_Request_Failed")):e.Category==shaka.util.Error.NETWORK&&(n=m.ErrorCode.NetworkError,i=T.get("Error_Network_Text")),f.call(r),setTimeout(function(){r.trigger(E.Private.Play_Btn_Hide)}),r.checkOnline()&&(t=r._drm.drmInfo()||{},t={keyIds:Array.from(t.keyIds||[]),initData:String((null==(t=(t.initData||[])[0])?void 0:t.initData)||[]),cdmData:r._cdmData,licenseData:r._licenseData},t={mediaId:r._options.vid||"",error_code:n,error_msg:e.message,shaka_error:JSON.stringify(e.data||[]),drm_info:JSON.stringify(t)},r.logError(t),t.display_msg=i+" | "+r._shakaCodeMap[e.code],t.diagnosis_info=c.call(r,e),r.trigger(E.Player.Error,t)))}),r.addEventListener("variantchanged",function(e){console.log("DRM Event: variantchanged",e)}),r.addEventListener("abrstatuschanged",function(e){console.log("DRM Event: abrstatuschanged",e)}),r.addEventListener("drmsessionupdate",function(e){console.log("DRM Event: drmsessionupdate",e),f.call(o)}),r.addEventListener("expirationupdated",function(e){console.log("DRM Event: expirationupdated",e),console.log("Exp:",this.getExpiration())}),r.addEventListener("adaptation",function(e){console.log("adaptation",e),_(o,r)}),r.addEventListener("trackschanged",function(e){console.log("DRM EVENT: trackschanged",r.getTextLanguages(),r.getTextTracks());var t=r.getTextLanguages();t&&t.length&&(t=(e=>{var t={subtitle:"subtitles",caption:"captions"},r=(console.log("Building track config"),e.getManifest().textStreams||[]),i=(console.log("textStreams",r),e.getTextLanguages()),n=(console.log("languageList",i),[]);try{r.forEach(function(e){i.includes(e.language)&&n.push({kind:t[e.kind]||e.kind,label:e.label,srclang:e.language,src:Array.from(e.segmentIndex)[0].getUris()[0]})})}catch(e){console.log("error in retrieving text track url: ",e)}return n})(r),o.trigger(E.Private.TextTrackFounded,{from:"drm",textTracks:t}),o.trigger(E.Private.CCReset))})})}},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/dom":33,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":68,"../saas/drm":109}],100:[function(e,t,r){function C(){C=function(){return a};var l,a={},e=Object.prototype,c=e.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},t="function"==typeof Symbol?Symbol:{},i=t.iterator||"@@iterator",r=t.asyncIterator||"@@asyncIterator",n=t.toStringTag||"@@toStringTag";function o(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(l){o=function(e,t,r){return e[t]=r}}function s(e,t,r,i){var n,o,a,s,t=t&&t.prototype instanceof y?t:y,t=Object.create(t.prototype),i=new k(i||[]);return u(t,"_invoke",{value:(n=e,o=r,a=i,s=p,function(e,t){if(s===f)throw Error("Generator is already running");if(s===_){if("throw"===e)throw t;return{value:l,done:!0}}for(a.method=e,a.arg=t;;){var r=a.delegate;if(r){r=function e(t,r){var i=r.method,n=t.iterator[i];if(n===l)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=l,e(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;i=d(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;n=i.arg;return n?n.done?(r[t.resultName]=n.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=l),r.delegate=null,g):n:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}(r,a);if(r){if(r===g)continue;return r}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(s===p)throw s=_,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s=f;r=d(n,o,a);if("normal"===r.type){if(s=a.done?_:h,r.arg===g)continue;return{value:r.arg,done:a.done}}"throw"===r.type&&(s=_,a.method="throw",a.arg=r.arg)}})}),t}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}a.wrap=s;var p="suspendedStart",h="suspendedYield",f="executing",_="completed",g={};function y(){}function v(){}function m(){}var t={},b=(o(t,i,function(){return this}),Object.getPrototypeOf),b=b&&b(b(P([]))),S=(b&&b!==e&&c.call(b,i)&&(t=b),m.prototype=y.prototype=Object.create(t));function T(e){["next","throw","return"].forEach(function(t){o(e,t,function(e){return this._invoke(t,e)})})}function E(a,s){var t;u(this,"_invoke",{value:function(r,i){function e(){return new s(function(e,t){!function t(e,r,i,n){var o,e=d(a[e],a,r);if("throw"!==e.type)return(r=(o=e.arg).value)&&"object"==typeof r&&c.call(r,"__await")?s.resolve(r.__await).then(function(e){t("next",e,i,n)},function(e){t("throw",e,i,n)}):s.resolve(r).then(function(e){o.value=e,i(o)},function(e){return t("throw",e,i,n)});n(e.arg)}(r,i,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function P(t){if(t||""===t){var r,e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return r=-1,(e=function e(){for(;++r<t.length;)if(c.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=l,e.done=!0,e}).next=e}throw new TypeError(typeof t+" is not iterable")}return u(S,"constructor",{value:v.prototype=m,configurable:!0}),u(m,"constructor",{value:v,configurable:!0}),v.displayName=o(m,n,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,o(e,n,"GeneratorFunction")),e.prototype=Object.create(S),e},a.awrap=function(e){return{__await:e}},T(E.prototype),o(E.prototype,r,function(){return this}),a.AsyncIterator=E,a.async=function(e,t,r,i,n){void 0===n&&(n=Promise);var o=new E(s(e,t,r,i),n);return a.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(S),o(S,n,"Generator"),o(S,i,function(){return this}),o(S,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,r=Object(e),i=[];for(t in r)i.push(t);return i.reverse(),function e(){for(;i.length;){var t=i.pop();if(t in r)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=P,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&c.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=l)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(r){if(this.done)throw r;var i=this;function e(e,t){return o.type="throw",o.arg=r,i.next=e,t&&(i.method="next",i.arg=l),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t],o=n.completion;if("root"===n.tryLoc)return e("end");if(n.tryLoc<=this.prev){var a=c.call(n,"catchLoc"),s=c.call(n,"finallyLoc");if(a&&s){if(this.prev<n.catchLoc)return e(n.catchLoc,!0);if(this.prev<n.finallyLoc)return e(n.finallyLoc)}else if(a){if(this.prev<n.catchLoc)return e(n.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return e(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&c.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}var o=(n=n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc?null:n)?n.completion:{};return o.type=e,o.arg=t,n?(this.method="next",this.next=n.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var r,i,n=this.tryEntries[t];if(n.tryLoc===e)return"throw"===(r=n.completion).type&&(i=r.arg,x(n)),i}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=l),g}},a}function l(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function i(s){return function(){var e=this,a=arguments;return new Promise(function(t,r){var i=s.apply(e,a);function n(e){l(i,t,r,n,o,"next",e)}function o(e){l(i,t,r,n,o,"throw",e)}n(void 0)})}}var c="undefined"==typeof Promise?e("es6-promise").Promise:Promise,u=e("../../lib/io"),d=e("../../config"),p=e("../../lang/index"),a=e("../base/event/eventtype"),s=e("../../lib/constants"),n="drminjectorNg.js",h={LoadJs:1,LoadSource:2,PlayerError:3,SupportError:4,ParamsError:5},f={Widevine:"com.widevine.alpha",FairPlay:"com.apple.fps"},_={},g={};function y(e){return o.apply(this,arguments)}function o(){return(o=i(C().mark(function e(t){var r,n,o,a,s=this;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._drm)return e.next=3,this._drm.destroy();e.next=4;break;case 3:this._drm=null;case 4:e.prev=4,I.call(this,"mod_shaka_s"),e.next=8;var i=t;return new c(function(e,t){var r="https://"+d.domain+d.path+d.h5Version+"/drm/aliplayer-drm2-min.js";null!=i&&i.shakaUrl&&(r=null==i?void 0:i.shakaUrl),u.loadJS(r,e,t)});case 8:I.call(this,"mod_shaka_f"),e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(4),console.log("[load shaka-player error]",e.t0),e.abrupt("return",x.call(this,h.LoadJs,e.t0));case 15:if(shaka.polyfill.installAll(),_=k(shaka.util.Error.Code),g=k(shaka.net.NetworkingEngine.RequestType),shaka.Player.isBrowserSupported()){e.next=20;break}return e.abrupt("return",x.call(this,h.SupportError));case 20:if(window.isSecureContext){e.next=22;break}return e.abrupt("return",x.call(this,h.SupportError,{_code:"no-secure-context"}));case 22:if(o=(e=>{var t=null;return(e=e||{}).widevine||e.fairplay||(t={message:p.get("Error_Drm_Params_Missing")}),[e,t]})(t.drm),n=o[0],o=o[1])return e.abrupt("return",x.call(this,h.ParamsError,o));e.next=25;break;case 25:return t.vid||(this._options.isVBR=!0),o=new shaka.Player,w.call(this,o),this._drm=o,a={drm:{servers:((a={})[f.Widevine]=null==(r=n.widevine)?void 0:r.licenseUrl,a[f.FairPlay]=null==(r=n.fairplay)?void 0:r.licenseUrl,a),advanced:((r={})[f.Widevine]={serverCertificateUri:null==(a=n.widevine)?void 0:a.certificateUrl},r[f.FairPlay]={serverCertificateUri:null==(a=n.fairplay)?void 0:a.certificateUrl,serverCertificate:null==(a=n.fairplay)?void 0:a.certificate},r)},autoShowText:1},shaka.util.PlayerConfiguration.mergeConfigObjects(a,t.drmOption||{}),o.configure(a),o.attach(this.tag),o.getNetworkingEngine().registerRequestFilter(function(e,t,r){if(null!=(n=t.drmInfo)&&n.keySystem&&(s._keySystem=t.drmInfo.keySystem),e===shaka.net.NetworkingEngine.RequestType.LICENSE){I.call(s,"drm_li_s");var i=D.call(s);if(i.licenseHeaders&&Object.keys(i.licenseHeaders).forEach(function(e){t.headers[e]=i.licenseHeaders[e]}),"function"==typeof i.licenseRequestFilter)return i.licenseRequestFilter(t,shaka.util)}else if(e===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE){I.call(s,"drm_cer_s");var n=D.call(s);if("function"==typeof n.certificateRequestFilter)return n.certificateRequestFilter(t,shaka.util)}}),o.getNetworkingEngine().registerResponseFilter(function(e,t,r){if(e===shaka.net.NetworkingEngine.RequestType.LICENSE){I.call(s,"drm_li_f"),A.call(s,e,t);var i=D.call(s);if("function"==typeof i.licenseResponseFilter)return i.licenseResponseFilter(t,shaka.util)}else if(e===shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE){I.call(s,"drm_cer_f"),A.call(s,e,t);i=D.call(s);if("function"==typeof i.certificateResponseFilter)return i.certificateResponseFilter(t,shaka.util)}}),e.prev=37,e.next=40,o.load(t.source);case 40:e.next=46;break;case 42:e.prev=42,e.t1=e.catch(37),console.log("error when load source",e.t1),x.call(this,h.LoadSource,e.t1);case 46:this._initPlayBehavior(),this._executeReadyCallback();case 48:case"end":return e.stop()}},e,this,[[4,11],[37,42]])}))).apply(this,arguments)}function v(e){this.traceLog(n,"play::"+e),e&&this.trigger(a.Private.ManualPlay),this._isManualPlay=Boolean(e),this.tag.ended||this._ended?this.replay():this.tag.paused&&this.tag.play()}function m(){this._switchingDesc=null,this._keySystem=null,this._baseType.dispose.call(this),this._drm&&(this._drm.destroy(),this._drm=null)}function b(e,t){var r,i,n,o=this._drm;e?(r=Number(e.split(s.DASH_QUALITY_PROTOCOL)[1]),(e=o.getVariantTracks().find(function(e){return e.id===r}))&&(o.configure({abr:{enabled:!1}}),i=!1,n=this.getOptions().seamlessHandover,o.selectVariantTrack(e,i="boolean"==typeof n?!n:i),i||(this._switchingDesc=t.desc))):(o.configure({abr:{enabled:!0}}),this._switchingDesc=null)}function S(){var e=this._drm;if(e)return e.getTextTracks().map(function(e){return{language:e.language,label:e.label,kind:"subtitle"===e.kind?"subtitles":"captions",default:e.active}});console.warn("shaka has not been initialized but _getTextTracks is called")}function T(e){var t=this._drm;t&&(e?(t.setTextTrackVisibility(!0),t.selectTextLanguage(e)):t.setTextTrackVisibility(!1))}function E(e){e&&this._drm.selectAudioLanguage(e),L.call(this)}function w(e){var t=this;e.addEventListener("error",function(e){x.call(t,h.PlayerError,e.detail)}),e.addEventListener("trackschanged",function(){!function(){var e,r,i,t=this._drm,n=t.getAudioLanguages(),o=null==(e=t.getVariantTracks())?void 0:e.find(function(e){return e.active});o&&(r=[],1===n.length&&"und"===n[0]?r.push({id:"und",language:p.get("Default"),enabled:!0}):n.length&&(i=t.getAudioLanguagesAndRoles()||[],n.forEach(function(t){var e;r.push({id:t,language:(null==(e=i.find(function(e){return e.language===t}))?void 0:e.label)||t,enabled:t===o.language})})),this.trigger(a.Player.AudioTrackUpdated,{audioTracks:r}))}.call(t),e.keySystem()===f.FairPlay?t.trigger(a.Player.LevelsLoaded,{levels:[{}]}):(L.call(t),R.call(t,e))}),e.addEventListener("adaptation",function(){e.keySystem()!==f.FairPlay&&R.call(t,e)}),this.tag.addEventListener("resize",function(){t._switchingDesc&&t.trigger(a.Private.Info_Show,{text:p.get("Quality_Change_Result")+"<span>"+t._switchingDesc+"</span>",duration:3e3,align:"lb"})})}function x(e,t){var r=this;if(console.log("to handle error of:",e,t,"this._isError",this._isError),this._isError)this.traceLog(n,"drm extra error ["+e+"]"+t+"}");else{t=t||{};var i={mediaId:this.getOptions().vid||"",error_code:"",error_msg:""};switch(e){case h.LoadJs:i.error_code=s.ErrorCode.ModuleLoadError,i.error_msg="drm player module load error."+((null==t?void 0:t.message)||"");break;case h.LoadSource:case h.PlayerError:i.error_code=s.ErrorCode.DrmLoadError,i.error_msg=p.get("Error_Drm_Load")+" | "+(_[t.code]||"")+" "+(e=>{var t="";return t=e.code===shaka.util.Error.Code.BAD_HTTP_STATUS?(null==e||null==(e=e.data)?void 0:e[1])||"":t})(t),i.diagnosis_info=(e=>{var t=shaka.util.Error.Code,r="",i=e.data||[];switch(e.code){case t.BAD_HTTP_STATUS:case t.HTTP_ERROR:case t.TIMEOUT:case t.LICENSE_REQUEST_FAILED:r=p.get("Tip_Drm_Request_Err")+P(i);break;case t.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:case t.SESSION_TIMEOUT:window.isSecureContext?(r=p.get("Tip_Drm_Key_System_Unavailable"),i.length&&(r+="<br />"+p.get("Tip_Err_Common_Short")+i)):r=p.get("Tip_Drm_Secure_Context");break;case t.FAILED_TO_CREATE_CDM:"file:"===window.location.protocol&&(r=p.get("Tip_Drm_File_Not_Allowed"));break;case t.HLS_INVALID_PLAYLIST_HIERARCHY:r=p.get("Tip_Drm_Playlist_Hierarchy");break;case t.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:r=p.get("Tip_Drm_Info_Missing")}return e=P(i),r||e})(t),i.shaka_error=t||{},t.code===shaka.util.Error.Code.LICENSE_REQUEST_FAILED&&console.log("LICENSE_REQUEST_FAILED => ",t.data[0]);break;case h.SupportError:i.error_code=s.ErrorCode.DrmNotSupported,"no-secure-context"===t._code?i.error_msg=p.get("Tip_Drm_Secure_Context"):(i.error_msg=p.get("Error_Drm_Not_Supported"),i.diagnosis_info=p.get("Tip_Drm_Unsupported"));break;case h.ParamsError:i.error_code=s.ErrorCode.InvalidParameter,i.error_msg=t.message||""}this.logError(i),this.trigger(a.Player.Error,i),shaka.Player.probeSupport().then(function(e){r.traceLog(n,"probeSupport::"+JSON.stringify(e))}).catch(function(e){r.traceLog(n,"probeSupport::"+e)})}}function k(t){var r={};return Object.keys(t).forEach(function(e){r[t[e]]=e}),r}function P(e){return p.get("Tip_Err_Common")+e}function R(){var t=null==(e=this._drm.getVariantTracks())?void 0:e.find(function(e){return e.active}),e=(this._qualityService.levels||[]).find(function(e){return e.Url===""+s.DASH_QUALITY_PROTOCOL+t.id});t&&e?this.trigger(a.Private.QualityChange,{levelSwitch:!0,desc:e.desc}):console.warn("no activeTrack or activeDisplayItem found",t,e)}function L(){var e=this._drm,t=e.getVariantTracks(),r=null==(i=e.getVariantTracks())?void 0:i.find(function(e){return e.active}),i=(t=t.filter(function(e){return e.audioId===r.audioId})).map(function(e){return{url:""+s.DASH_QUALITY_PROTOCOL+e.id,width:e.width,height:e.height,bitrate:e.bandwidth,attrs:{BANDWIDTH:e.bandwidth,RESOLUTION:e.width+"x"+e.height}}});this.trigger(a.Player.LevelsLoaded,{levels:i}),this.trigger(a.Private.SelectorGenerateList,{type:"quality"}),e.getConfiguration().abr.enabled||(t=(this._qualityService.levels||[]).find(function(e){return e.Url===""+s.DASH_QUALITY_PROTOCOL+r.id}))&&this.trigger(a.Private.SelectorValueChange,{type:"quality",text:t.desc})}function I(e){this.trigger(a.Private.Timeline,{name:e,ts:performance.now()})}function D(){var e={},t=this.getOptions().drm||{},r=this._keySystem||(null==(r=this._drm)?void 0:r.keySystem())||"";return r===f.Widevine?e=t.widevine||{}:r===f.FairPlay&&(e=t.fairplay||{}),e}function A(e,t){if(null==(r=this.getOptions())||null==(r=r.drm)||!r.disableReportLicense){var r=t.data,t="";if("string"==typeof r)t=r;else if(r instanceof ArrayBuffer)try{t=(new TextDecoder).decode(r)}catch(e){console.log("error in decode license provider response",e),t="[ArrayBuffer] decode error: "+e}this.traceLog(n,"DRM-"+g[e]+"-response: "+t)}}t.exports.inject=(()=>{var n=i(C().mark(function e(t,r,i,n){var o;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(o=t)._baseType=i,o._keySystem=null,o.initPlay=y.bind(o,n),o.play=v.bind(o),o.dispose=m.bind(o),o._getDrmTextTracks=S.bind(o),o._switchDrmTextTrack=T.bind(o),o._switchLevel=b.bind(o),o._switchAudioTrack=E.bind(o);case 10:case"end":return e.stop()}},e)}));return function(e,t,r,i){return n.apply(this,arguments)}})(),t.exports.play=v,t.exports._switchLevel=b,t.exports._getTextTracks=S,t.exports._switchTextTrack=T,t.exports._switchAudioTrack=E,t.exports.updateLevelList=L,t.exports.logProviderResponse=A},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../base/event/eventtype":68,"es6-promise":9}],101:[function(e,t,r){var i=e("../base/player"),n=e("./drminjector"),o=e("./drminjectorNg"),a=i.extend({init:function(e,t){t.useDrm2?o.inject(this,a,i.prototype,t):n.inject(this,a,i.prototype,t,function(e){}),t._native=!1,i.call(this,e,t)}});t.exports=a},{"../base/player":91,"./drminjector":99,"./drminjectorNg":100}],102:[function(e,t,r){!function(S){!function(){var l=e("../../lib/io"),_=e("../../config"),g=e("../../lib/constants"),d=e("../../lib/util"),p=e("../../lib/playerutil"),h=e("../../lib/ua"),y=e("../../lib/data"),v=e("../../lang/index"),m=e("../base/event/eventtype"),b="flvinjector.js";t.exports.inject=function(e,t,r,i,c,n){var u,o=i.source,a=i.optionFormat;function s(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyFlv(),this._superPt&&(t.prototype.play=this._superPt.play,t.prototype.pause=this._superPt.pause,t.prototype.initPlay=this._superPt.initPlay,t.prototype.seek=this._superPt.seek,t.prototype.canSeekable=this._superPt.canSeekable))}function f(e){try{for(var t=e.buffered.length,r="Len:"+t+";",i=0;i<t;i++)r+="["+(i+1)+"]"+e.buffered.start(i)+"~"+e.buffered.end(i);return r}catch(e){}}(n||(i=o,n=a,!e._flv&&p.isFlv(i,n)&&p.isSupportFlv()))&&(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkFlvReady=function(){return null!=this._flv||(console.warn("please invoke this method after ready event"),!1)},e._isFlv=!0,e._flv=null,e._isLoadedFlv=!1,e._dumpBuffer=null,t.prototype.play=function(e){if(this.traceLog(b,"play::"+e),e&&this.trigger(m.Private.ManualPlay),this._checkFlvReady())return this._isManualPlay=e||!1,this.trigger(m.Private.Cover_Hide),this._options.isLive&&e?this._loadByUrlInner(this._options.source,0,e):this.tag.ended||this._ended?this.replay():(0==this._seeking&&(e=0,this.tag.ended||this._ended||0==(e=this.getCurrentTime())&&(e=-1),-1!=e)&&this.seek(e),this.tag.paused&&(this._hasLoaded||(this._hasLoaded=!0,this._flv.load()),this._flv.play())),this},t.prototype.seek=function(e){if(this._checkFlvReady()){this._seeking=!0;var t=this.getDuration();t<=(e=Math.floor(e))&&(e=t);try{this._flv.currentTime=e}catch(e){console.log(e)}return this}},t.prototype.pause=function(e){if(this._checkFlvReady())return this._isManualPause=e||!1,this._flv.pause(),this},t.prototype.getProgramDateTime=function(){var e;if(this._checkFlvReady())return this._metadata?(e=(e=this._flv.getFirstSample())&&e.pts?e.pts:0,console.log("\u63a8\u6d41\u65f6\u95f4\uff1a"+this._metadata.NtpTime),console.log("\u9996\u5e27PTS\uff1a"+e),this._metadata.NtpTime+e):""},t.prototype.initPlay=function(e){var t,r,i;function n(n,e){if(!n._disposed){var t=!n._flv,r=(n._destroyFlv(),n._options.isLive);if(r)if(!flvjs.getFeatureList().networkStreamIO)return(s={error_code:g.ErrorCode.FormatNotSupport,error_msg:v.get("Error_Not_Support_Mse_Flv")+"|streamIO(format:flv)"}).display_msg=s.error_msg,void n.trigger(m.Player.Error,s);var i,o={isLive:r,enableWorker:n._options.enableWorker,accurateSeek:!0},a=(h.IS_IE11&&(o.enableWorker=!1),{type:"flv",isLive:r,url:n._options.source});for(i in r?(o.enableStashBuffer=n._options.enableStashBufferForFlv,o.stashInitialSize=n._options.stashInitialSizeForFlv,o.autoCleanupSourceBuffer=!1):o.lazyLoadMaxDuration=600,o.statisticsInfoReportInterval=1e3,n._options.isLive&&(n._options.flvFrameChasing&&(o.flvFrameChasing=n._options.flvFrameChasing),n._options.chasingFirstParagraph&&(o.chasingFirstParagraph=n._options.chasingFirstParagraph),n._options.chasingSecondParagraph&&(o.chasingSecondParagraph=n._options.chasingSecondParagraph),n._options.chasingFirstSpeed&&(o.chasingFirstSpeed=n._options.chasingFirstSpeed),n._options.chasingSecondSpeed)&&(o.chasingSecondSpeed=n._options.chasingSecondSpeed),n._options.flvOption)"cors"==i||"hasAudio"==i||"withCredentials"==i||"hasVideo"==i||"type"==i?a[i]=n._options.flvOption[i]:o[i]=n._options.flvOption[i];flvjs.LoggingControl.enableAll=n._options.debug,n._flv=flvjs.createPlayer(a,o),u(n,n._flv),n._flv.on(flvjs.Events.DUMP_BUFFER,function(e){var t,r,i;n._options.disableDumpBuffer||0===n._liveRetryCount&&0===n._vodRetryCount&&0===n._nudgeCount&&"string"!=typeof n._dumpBuffer&&(n._flvDumpTimer||(n._flvDumpTimer=setTimeout(function(){n._reportDumpBuffer&&n._reportDumpBuffer()},5e3)),e=new Uint8Array(e),n._dumpBuffer?n._dumpBuffer=(t=n._dumpBuffer,r=e,(i=new Uint8Array(t.length+r.length)).set(t),i.set(r,t.length),i):n._dumpBuffer=e)});var s,l=d.throttle(function(e){n.traceLog(b,"dts_adjustment::"+e.from+"->"+e.to)},1e3);n._flv.on(flvjs.Events.DTS_ADJUSTMENT,function(e){l(e)}),n._flv.on(flvjs.Events.MEDIA_INFO,function(e){n._metadata=e.metadata}),n._flv.on(flvjs.Events.METADATA_ARRIVED,function(e){e&&e.dataContent&&e.dataContent.length&&n.trigger(m.Private.SeiFrame,{dataContent:e.dataContent,pts:e.pts})}),n._flv.on(flvjs.Events.STATISTICS_INFO,function(e){n.trigger(m.Private.StatisticsInfo,e)}),n._flv.attachMediaElement(n.tag),n._initPlayBehavior(e)&&((n._options.preload||n._options.autoplay)&&(n._hasLoaded=!0,n._flv.load()),n._options.autoplay&&!n.tag.paused&&n._flv.play(),c&&c(n._flv),t)&&(n._executeReadyCallback(),n._urls)&&0<n._urls.length&&(n._currentPlayIndex=p.findSelectedStreamLevel(n._urls,n._options.defaultDefinition),s=n._urls[n._currentPlayIndex],n._options.source=s.Url,n.trigger(m.Private.SourceLoaded,s))}}h.browser.safari&&this.trigger(m.Private.Snapshot_Hide),d.contentProtocolMixed(o,"",a)?((t={mediaId:this._options.vid||"",error_code:g.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=v.get("Request_Block_Text"),this.trigger(m.Player.Error,t)):(r=this)._isLoadedFlv&&"undefined"!=typeof Hls?setTimeout(function(){n(r,e)},1e3):(this.trigger(m.Private.H5_Loading_Show),i=performance.now(),function(e,t,r){var i="aliplayer-flv-min.js",n="",n=_.domain?"https://"+_.domain+_.path+_.h5Version+"/flv/"+i:"/build/flv/"+i,o=(this._options.assetPrefix&&(n=this._options.assetPrefix+"/flv/"+i),JSON.parse(S)&&(n="http://localhost:8000/dist/aliplayer-flv.js"),this);l.loadJS(n,function(){e.apply(o)},function(){r&&r()})}.call(r,function(){this.traceLog(b,"got js#"+parseInt(performance.now()-i)),this._isLoadedFlv=!0,n(this,e)},this._options.debug,function(){var e={mediaId:r._options.vid||"",mediaAuth:r._options.mediaAuth||"",error_code:g.ErrorCode.ModuleLoadError,error_msg:"flv module load error."};r.trigger(m.Player.Error,e)}))},t.prototype._reportDumpBuffer=function(){var e,t;this.__flvDumpTimer&&clearTimeout(this.__flvDumpTimer),this.__flvDumpTimer=null,this._dumpBuffer&&"string"!=typeof this._dumpBuffer&&(1048576<this._dumpBuffer.byteLength&&(this._dumpBuffer=this._dumpBuffer.slice(0,1048576)),e=this._dumpBuffer,this._dumpBuffer="REPORTED",performance.now(),e=d.arrayBufferToB64(e),t=y.guid(),this.traceLog(b,"dump::"+t),this.trigger(m.Private.DumpBuffer,{id:t,data:e}))},t.prototype._destroyFlv=function(){try{this._flv&&(this._flv.pause(),this._flv.destroy())}catch(e){console.log(e)}this.loaded=!1,this._hasLoaded=!1,this._flv=null,this._flvDumpTimer&&(clearTimeout(this._flvDumpTimer),this._flvDumpTimer=null),this._dumpBuffer=null},Object.defineProperty(t.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return s},set:function(){return s}}),t.prototype.canSeekable=function(e){var t;if(this._flv)return t=this._flv.mediaInfo,!(!this._flv._isTimepointBuffered(e)&&t&&!t.hasKeyframesIndex)},t.prototype._getbwEstimator=function(){var e;return 1024*(null==(e=this._flv)||null==(e=e.statisticsInfo)?void 0:e.speed)*8},u=function(d,p){var h=!1;p.on(flvjs.Events.ERROR,function(e,t,r){var i,n,o,a,s="flvjs-error::"+e+"#"+t+"#"+r.code+"#"+r.msg,l="BodyStreamBuffer was aborted"===r.msg&&p._config.lazyLoad;if(l){s+="#Maximum buffering duration exceeded, suspend transmuxing task";try{var c=p._msectl._sourceBuffers.video,u=p._msectl._sourceBuffers.audio;s+="#Video buffer:"+f(c)+"#Audio buffer:"+f(u)}catch(e){}}d.traceLog(b,s),d._reportDumpBuffer&&d._reportDumpBuffer(),e===flvjs.ErrorTypes.BUFFER_FULL||(d._flv.unload(),l)||d._isError||(i=g.ErrorCode.OtherError,n=v.get("Error_Play_Text"),o=null,t==flvjs.ErrorDetails.NETWORK_EXCEPTION?!(c=d.getOptions().source)||0!=c.toLowerCase().indexOf("http://")&&0!=c.toLowerCase().indexOf("https://")?(i=g.ErrorCode.InvalidSourceURL,n=v.get("Error_Invalidate_Source_Widthout_Protocal"),h=!0):n=navigator.onLine?(i=g.ErrorCode.RequestDataError,v.get("Maybe_Cors_Error")):(i=g.ErrorCode.NetworkError,v.get("Error_Network_Text")):t==flvjs.ErrorDetails.NETWORK_STATUS_CODE_INVALID?"404"==r.code?(i=g.ErrorCode.NotFoundSourceURL,n=v.get("Error_Not_Found"),o=v.get("Tip_Err_Not_found")):"403"==r.code?(i=g.ErrorCode.AuthKeyExpired,n=v.get("Error_AuthKey_Text"),h=!0):(i=g.ErrorCode.NetworkError,n=v.get("Error_Network_Text")):t==flvjs.ErrorDetails.NETWORK_TIMEOUT?(i=g.ErrorCode.LoadingTimeout,n=v.get("Error_Waiting_Timeout_Text")):t==flvjs.ErrorDetails.MEDIA_FORMAT_UNSUPPORTED||t==flvjs.ErrorDetails.MEDIA_CODEC_UNSUPPORTED?(i=g.ErrorCode.FormatNotSupport,n=v.get("Error_H5_Not_Support_Text")+"|codec(format:flv)",h=!0):t===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&(u=d.tag.error)&&(i=g.VideoErrorCode[u.code],n=u.code+" || "+u.message),s=function(){var e;setTimeout(function(){d.trigger(m.Private.Play_Btn_Hide)}),d.checkOnline()&&(e={mediaId:d._options&&d._options.vid?d._options.vid:"",error_code:i,error_msg:n,diagnosis_info:o},d.logError(e),e.display_msg=n,_.cityBrain&&(d.flv=null),d.trigger(m.Player.Error,e))},d._options&&d._options.isLive&&!h?(a=d._options).liveRetry>d._liveRetryCount?(0==d._liveRetryCount&&d.trigger(m.Player.OnM3u8Retry),e=a.liveRetryInterval+a.liveRetryStep*d._liveRetryCount,d._liveRetryCount++,setTimeout(function(){d._isError||d._liveRetryTimer||d._loadByUrlInner(a.source)},1e3*e)):(d.trigger(m.Player.LiveStreamStop),s()):t===flvjs.ErrorDetails.MEDIA_MSE_ERROR&&11===r.code&&d.getCurrentTime()<d.getDuration()?(d._flv.unload(),d._flv.load(),d._flv.detachMediaElement(),d._flv.attachMediaElement(d.tag)):h?(d._flv.unload(),s()):d._reloadForVod()||s())})})}}.call(this)}.call(this,"false")},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/data":31,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":68}],103:[function(e,t,r){var i=e("../base/player"),n=e("./flvinjector"),o=i.extend({init:function(e,t){n.inject(this,o,i,t,function(e){}),t._native=!1,i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./flvinjector":102}],104:[function(e,t,r){!function(C){!function(){function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var g,p=e("../../lib/object"),h=e("../../lib/io"),f=e("../../config"),y=e("../../lib/constants"),_=e("../../lib/util"),v=e("../../lib/playerutil"),m=e("../../lib/ua"),b=e("../../lang/index"),S=e("../base/event/eventtype"),T="hlsinjector.js";function E(){this&&this._hls&&(this._hls.stopLoad(),this._hls.destroy(),this._hls=null)}function w(e){this.trigger(S.Private.Timeline,{name:e,ts:performance.now()})}function x(e,t){return t<e.maxNumRetry}var k={};function P(e,t){t.frag.level===this.currentLevel&&(this.off(g.Events.FRAG_BUFFERED,P),this.media.currentTime=this.media.currentTime+.01)}t.exports.inject=function(e,t,r,i,n,o){e._hls2=!1;var a,s,l,c=i.source,u=i.optionFormat;((n||"").length||o||(o=c,a=i.useHlsPluginForSafari,i=i.useHlsPlugOnMobile,s=u,!e._hls&&v.isHls(o,s)&&(!v.canPlayHls()||v.isSafariUsedHlsPlugin(a)||i&&v.isUsedHlsPluginOnMobile())))&&(e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,e._isHls=!0,e._hls=null,e._isLoadedHls=!1,e._stopLoadAsPaused=!0,e._yekced_saved=n,k.seek||(k.seek=r.prototype.seek),k.dispose||(k.dispose=r.prototype.dispose),e.initPlay=function(r){var e,i;function n(s,t){if(!s._disposed){if(s._antiRecord)if(console.log("Manual check before load source"),s._antiRecord.check())return;var e,r=!s._hls,i=(s._destroyHls(),{xhrSetup:function(e,t){e.withCredentials=s._options.withCredentials||!1}}),n=(s._hls2||(n=s._options.loadingTimeOut||s._options.hlsLoadingTimeOut)&&(i.manifestLoadingTimeOut=n,i.levelLoadingTimeOut=n,i.fragLoadingTimeOut=n),s._hls2&&(i.manifestLoadPolicy=d({},g.DefaultConfig.manifestLoadPolicy),i.playlistLoadPolicy=d({},g.DefaultConfig.playlistLoadPolicy),i.fragLoadPolicy=d({},g.DefaultConfig.fragLoadPolicy),n=s._options.isLive?s._options.liveRetry:s._options.vodRetry,i.manifestLoadPolicy.default.errorRetry.maxNumRetry=n,s._options.isLive&&(i.manifestLoadPolicy.default.errorRetry.shouldRetry=x),i.manifestLoadPolicy.default.timeoutRetry.maxNumRetry=n,i.playlistLoadPolicy.default.errorRetry.maxNumRetry=n,s._options.isLive&&(i.playlistLoadPolicy.default.errorRetry.shouldRetry=x),i.playlistLoadPolicy.default.timeoutRetry.maxNumRetry=n,i.fragLoadPolicy.default.maxLoadTimeMs=2e4,i.fragLoadPolicy.default.errorRetry.shouldRetry=x,(n=s._options.hlsOption||{}).manifestLoadPolicy&&(i.manifestLoadPolicy=p.deepMerge(i.manifestLoadPolicy,n.manifestLoadPolicy),delete n.manifestLoadPolicy),n.playlistLoadPolicy&&(i.playlistLoadPolicy=p.deepMerge(i.playlistLoadPolicy,n.playlistLoadPolicy),delete n.playlistLoadPolicy),n.fragLoadPolicy&&(i.fragLoadPolicy=p.deepMerge(i.fragLoadPolicy,n.fragLoadPolicy),delete n.fragLoadPolicy),s._options.isLive)&&!m.IS_IE11&&(i.backBufferLength=12,i.liveDurationInfinity=!0),s._options.isLive&&(s._options.hlsFrameChasing&&(i.hlsFrameChasing=s._options.hlsFrameChasing),s._options.chasingFirstParagraph&&(i.chasingFirstParagraph=s._options.chasingFirstParagraph),s._options.chasingSecondParagraph&&(i.chasingSecondParagraph=s._options.chasingSecondParagraph),s._options.chasingFirstSpeed&&(i.chasingFirstSpeed=s._options.chasingFirstSpeed),s._options.chasingSecondSpeed)&&(i.chasingSecondSpeed=s._options.chasingSecondSpeed),s._options.defaultBandwidth&&(i.defaultBandwidth=s._options.defaultBandwidth),s._options.hlsBandWidthUpCacheTime&&(i.abrBandWidthUpCacheTime=s._options.hlsBandWidthUpCacheTime),s._options.seamlessHandover&&(i.seamlessHandover=s._options.seamlessHandover),s._options.liveSyncDurationCount&&(i.liveSyncDurationCount=s._options.liveSyncDurationCount),s._options.nudgeMaxRetry&&(i.nudgeMaxRetry=s._options.nudgeMaxRetry),s._options.maxMaxBufferLength&&(i.maxMaxBufferLength=s._options.maxMaxBufferLength),s._options.maxBufferSize&&(i.maxBufferSize=s._options.maxBufferSize),s._options.fragLoadingRetryDelay&&(i.fragLoadingRetryDelay=s._options.fragLoadingRetryDelay),s._options.maxBufferLength&&(i.maxBufferLength=s._options.maxBufferLength),s._options.accessKeyId&&(i.accessKeyId=s._options.accessKeyId),s._options.accessKeySecret&&(i.accessKeySecret=s._options.accessKeySecret),s._options.securityToken&&(i.securityToken=s._options.securityToken),s._options.app&&(i.app=s._options.app),s._options.stream&&(i.stream=s._options.stream),s._options.domain&&(i.domain=s._options.domain),s._options.regionId&&(i.regionId=s._options.regionId),s._yekced_saved&&(i._yekcedxx=s._yekced_saved,i._vpk=s._yekced_saved),i.enableWorker=s._options.enableWorker,i.debug=s._options.debug,s._stopLoadAsPaused=s._options.hlsOption.stopLoadAsPaused,s._getPlayStartTime()+s._posOffset);for(e in n&&(i.startPosition=n,console.log("hls.js startPosition => ",n)),s._options.hlsOption)i[e]=s._options.hlsOption[e];m.IS_IE11&&(i.enableWorker=!1),s._hls=new g(i),l(s,s._hls),s._loadSourced=!1,s._hls.attachMedia(s.tag),s._hls.on(g.Events.INIT_PTS_FOUND,function(e,t){s._initPTS=t.initPTS}),s._hls.on(g.Events.FRAG_LOADING,function(){w.call(s,"frag_s")}),s._hls.on(g.Events.FRAG_LOADED,function(){w.call(s,"frag_f")}),s._hls.on(g.Events.FRAG_PARSED,function(){w.call(s,"frag_parsed")}),s._hls.on(g.Events.FRAG_PARSED,function(e,t){var t=(null==t?void 0:t.frag)||{},r=t.elementaryStreams||{},i="Frag(sn"+t.sn+"): "+(null==(i=t.startPTS)?void 0:i.toFixed(3))+" -> "+(null==(i=t.endPTS)?void 0:i.toFixed(3))+"(v:"+(null==(i=r.video)||null==(i=i.startPTS)?void 0:i.toFixed(3))+"/"+(null==(i=r.video)||null==(i=i.endPTS)?void 0:i.toFixed(3))+";a:"+(null==(i=r.audio)||null==(i=i.startPTS)?void 0:i.toFixed(3))+"/"+(null==(i=r.audio)||null==(i=i.endPTS)?void 0:i.toFixed(3))+"); Duration: "+(null==(r=t.duration)?void 0:r.toFixed(3));s.trackLogFragBuffer&&(s.trackLogFragBuffer.push(i),10<s.trackLogFragBuffer.length)&&s.trackLogFragBuffer.shift()}),s._hls.on(g.Events.FRAG_PARSING_USERDATA,function(e,t){t&&t.dataContent&&t.dataContent.length?s.trigger(S.Private.SeiFrame,{dataContent:t.dataContent,pts:t.pts}):t.samples.forEach(function(e){s.trigger(S.Private.SeiFrame,{dataContent:e.userDataBytes,dataContentString:e.userData,pts:e.pts,uuid:e.uuid})})}),s._hls.on(g.Events.MEDIA_ATTACHED,function(){var e;s._hls.on(g.Events.MANIFEST_PARSED,function(){s._initPlayBehavior(t||s._loadSourced)}),s._hls.on(g.Events.AUDIO_TRACKS_UPDATED,function(e,t){s.trigger(S.Player.AudioTrackUpdated,t)}),s._hls.on(g.Events.MANIFEST_LOADED,function(e,t){s.trigger(S.Player.LevelsLoaded,t)}),s._hls.on(g.Events.LEVEL_SWITCHED,function(e,t){if(s._qualityService){for(var r=s._hls.levels[t.level].url,i=s._qualityService.levels,n="",o="",a=0;a<i.length;a++)if(i[a].Url==r){o=i[a].desc,n=i[a].bitrate;break}(o||n)&&s.trigger(S.Private.QualityChange,{levelSwitch:!0,url:r,bitrate:n,desc:o})}}),s._hls.on(g.Events.AUDIO_TRACK_SWITCH,function(e,t){s.trigger(S.Player.AudioTrackSwitch,t),setTimeout(function(){s.trigger(S.Player.AudioTrackSwitched,t)},1e3)}),(s._options.autoplay||s._options.preload||t)&&(s._loadSourced=!0,s._levels&&1<s._levels.length?(s._hls.trigger(g.Events.MANIFEST_LOADING,{}),s._hls.trigger(g.Events.MANIFEST_LOADED,{levels:s._levels})):s._hls.loadSource(s._options.source||"__INVALID__")),r?(s._executeReadyCallback(),s._urls&&0<s._urls.length&&(s._currentPlayIndex=v.findSelectedStreamLevel(s._urls,s._options.defaultDefinition),e=s._urls[s._currentPlayIndex],s._options.source=e.Url,s.trigger(S.Private.SourceLoaded,e))):s.trigger(S.Private.H5_Loading_Show)})}}this.trigger(S.Private.H5_Loading_Show),_.contentProtocolMixed(c,"",u)?(e=this.getOptions()||{},(e={mediaId:e.vid||"",mediaAuth:e.mediaAuth||"",error_code:y.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=b.get("Request_Block_Text"),this.trigger(S.Player.Error,e)):(i=this)._isLoadedHls&&void 0!==g?n(this,r):(this.trigger(S.Private.H5_Loading_Show),this._getHlsVersion(function(e){var t=performance.now();!function(e,t,r){var i="aliplayer-hls-min.js",n=((t=t||{}).hls2&&(i="aliplayer-hls2-min.js"),t.enableHlsH265&&(i="aliplayer-hls2-hevc-min.js"),""),n=f.domain?"https://"+f.domain+f.path+f.h5Version+"/hls/"+i:"/build/hls/"+i,o=(t.assetPrefix&&(n=t.assetPrefix+"/hls/"+i),JSON.parse(C)&&(n="http://localhost:8080/dist/aliplayer-hls2.js"),w.call(this,"mod_hls_s"),this);h.loadJS(n,function(){w.call(o,"mod_hls_f"),g=window.AliHls||window.Hls,e.apply(o)},function(){r&&r()})}.call(i,function(){i.traceLog(T,"got js#"+parseInt(performance.now()-t)),i._isLoadedHls=!0,n(i,r)},{debug:i._options.debug,hls2:i._hls2,assetPrefix:i._options.assetPrefix,enableHlsH265:i._options.enableHlsH265},function(){var e={mediaId:i._options.vid||"",mediaAuth:i._options.mediaAuth||"",error_code:y.ErrorCode.ModuleLoadError,error_msg:"hls module load error."};i.trigger(S.Player.Error,e)})}),this.on("error",E))}.bind(e),e.seek=function(e){if(this._checkHlsReady()){try{k.seek.call(this,e),this.tag.paused&&this._stopLoadAsPaused&&this._hls.startLoad(e)}catch(e){console.log(e)}return this}}.bind(e),e.pause=function(e){if(this.tag){if(!this._checkHlsReady())return;this.tag.pause(),this._stopLoadAsPaused&&this._hls.stopLoad()}return this._isManualPause=e||!1,this}.bind(e),e.play=function(e){this.traceLog(T,"play::"+e),e&&this.trigger(S.Private.ManualPlay);if(this._checkHlsReady())return this._isManualPlay=e||!1,this.trigger(S.Private.Cover_Hide),this._options.autoplay||this._options.preload||this._loadSourced||(this._loadSourced=!0,this._options._autoplay=!0,this._hls.loadSource(this._options.source)),this.tag.ended||this._ended?this.replay():this.tag.paused&&(this.tag.play(),this._stopLoadAsPaused)&&(e=this.getCurrentTime(),this._hls.startLoad(e)),this}.bind(e),e.stop=function(){if(this._checkHlsReady())return this.tag.setAttribute("src",null),this._hls.stopLoad(),this}.bind(e),e.dispose=function(){this._disposed||(this._disposed=!0,k.dispose.call(this),this._destroyHls())}.bind(e),e.getCurrentPDT=function(){var e,t,r;if(this._checkHlsReady())return-1==this._hls.currentLevel?"":this._hls.playingDate?this._hls.playingDate.getTime():(t=this._hls.streamController.fragPlaying||{},(e=t.pdt)?(t=1e3*t.startPTS,r=1e3*this.getCurrentTime(),e+(r-t)):0)}.bind(e),e.getProgramDateTime=function(){if(this._checkHlsReady()){if(-1==this._hls.currentLevel)return"";var e=this._hls.currentLevel,e=this._hls.levels[e].details;if(e){e=e.programDateTime;if(e)return new Date(e).valueOf()}return 0}}.bind(e),e._checkHlsReady=function(){return null!=this._hls||(console.warn("please invoke this method after ready event"),!1)}.bind(e),e._getHlsVersion=function(e){!0===this._options.useHls2?(this._hls2=!0,e()):!1===this._options.useHls2&&e()}.bind(e),e._getbwEstimator=function(){var e=NaN;{var t;this._hls&&(t=this._hls.abrController._bwEstimator,e=t?t.getEstimate():this._hls.bandwidthEstimate)}return e}.bind(e),e._destroyHls=function(){this._hls&&this._hls.destroy();this._hls=null,this.trackLogFragBuffer=[]}.bind(e),e._switchLevel=function(e){for(var t=this,r=(this.traceLog(T,"switchLevel::"+e),this.trigger(S.Player.LevelSwitch),this._hls.levels),i=!0,n=0;n<r.length;n++)if(r[n].url==e||r[n].url[0]==e){i=!1,this._hls2&&this._options.seamlessHandover?(this._hls.loadLevel=n,console.log("Seamlessly set nextLevel to",n)):(this._hls.on(g.Events.FRAG_BUFFERED,P),this._hls.currentLevel=n,console.log("Immediately set currentLevel to",n));break}i&&(this._hls.on(g.Events.FRAG_BUFFERED,P),this._hls.currentLevel=-1);this._switchedLevel=!0,setTimeout(function(){t.trigger(S.Player.LevelSwitched),t._switchedLevel=!1},1e3)}.bind(e),l=function(f,_){_.on(g.Events.MANIFEST_LOADING,function(){w.call(f,"mani_s")}),_.on(g.Events.MANIFEST_LOADED,function(){w.call(f,"mani_f")}),_.on(g.Events.DEFAULT_BANDWIDTH,function(e,t){f.trigger(S.Player.DefaultBandWidth,{width:t.width,height:t.height,bitrate:t.bitrate})}),_.on(g.Events.ERROR,function(e,t){var r="hlsjs-error::"+t.type+"#"+t.details+"#"+(null==(r=t.networkDetails)?void 0:r.status)+"#"+t.reason+"#bw:"+(f._getbwEstimator()/8/1024).toFixed(2)+"KB";if("manifestParsingError"===t.details)try{r+="#"+t.networkDetails.getResponseHeader("Content-Type")+"#"+t.networkDetails.getResponseHeader("Content-Length")}catch(e){}else if("fragLoadError"===t.details||"fragLoadTimeOut"===t.details)r+="#"+t.frag.url+"#retry:"+(null==(u=t.errorAction)?void 0:u.retryCount);else if("internalException"===t.details)try{r+="#"+t.event+"#"+(null==(o=t.error)?void 0:o.message)+"#"+(null==(n=t.error)?void 0:n.stack)}catch(e){}"internalException"!==t.details&&(r+="#"+t.error);try{r+="#"+(null==f||null==(p=f.trackLogFragBuffer)?void 0:p.toString())}catch(e){}if(f.traceLog(T,r),f._options&&t.details!=g.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&1!=f._seeking&&0!=t.fatal){f._clearTimeout();var i,n,o,a=y.ErrorCode.LoadedMetadata,s=b.get("Error_Play_Text"),l=!1,c=null,u=!1,d=(t.details==g.ErrorDetails.MANIFEST_LOAD_ERROR||t.details==g.ErrorDetails.LEVEL_LOAD_ERROR?(l=!0,o=t.networkDetails,i=Number(o.status),f.liveShiftSerivce&&f.liveShiftSerivce.isLiveShiftPlaying()&&404===i?(a=y.ErrorCode.NotFoundSourceURL,s=b.get("Error_Liveshift_M3U8_Not_Found_Text"),u=!0):404===i?(a=y.ErrorCode.NotFoundSourceURL,s=b.get("Error_Not_Found"),c=b.get("Tip_Err_Not_found")):403===i?(n=v.parseHttpHeaders(o)["x-tengine-error"])&&-1<y.RegionBlockMessages.indexOf(n)?(a=y.ErrorCode.RegionBlock,s=b.get("Error_Region_Block_Text"),c=b.get("Tip_Err_Blocked")):(a=y.ErrorCode.AuthKeyExpired,s=b.get("Error_AuthKey_Text")):s=0===i&&navigator.onLine?(a=y.ErrorCode.RequestDataError,s+"\uff0c"+b.get("Maybe_Cors_Error")):b.get("Error_Load_M3U8_Failed_Text")):t.details==g.ErrorDetails.MANIFEST_LOAD_TIMEOUT||t.details==g.ErrorDetails.LEVEL_LOAD_TIMEOUT?(l=!0,s=b.get("Error_Load_M3U8_Timeout_Text")):t.details==g.ErrorDetails.MANIFEST_PARSING_ERROR||t.details==g.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR?(l=!0,s=b.get("Error_M3U8_Decode_Text")):t.type==g.ErrorTypes.NETWORK_ERROR?(a=y.ErrorCode.NetworkError,s=b.get("Error_Network_Text")):t.type!=g.ErrorTypes.MUX_ERROR&&t.type!=g.ErrorTypes.MEDIA_ERROR||(a=y.ErrorCode.PlayDataDecode,s=b.get("Error_TX_Decode_Text")),s=s+"("+t.details+")",function(){var e;setTimeout(function(){f.trigger(S.Private.Play_Btn_Hide)}),f.checkOnline()&&(e={mediaId:(e=f.getOptions()||{}).vid||"",mediaAuth:e.mediaAuth||"",error_code:a,error_msg:t.details,diagnosis_info:c},f.logError(e),e.display_msg=s,f.trigger(S.Player.Error,e))}),p=function(){f._liveErrorHandle&&clearTimeout(f._liveErrorHandle),_.stopLoad(),f.trigger(S.Player.LiveStreamStop),f._liveErrorHandle=setTimeout(d,500)},h=f._options;if(h.isLive&&u)p();else if(f._hls2){if(l&&h.isLive)if(h.hlsOption.progressive){if(h.liveRetry>f._liveRetryCount)return 0==f._liveRetryCount&&f.trigger(S.Player.OnM3u8Retry),f.trigger(S.Private.H5_Loading_Show),f._hls.stopLoad(),f._liveRetryCount++,void setTimeout(function(){f.traceLog(T,"retry when live error in progressive mode#"+f._liveRetryCount),f._hls.loadSource(h.source)},1e3*f._liveRetryCount)}else 0===(null==(r=t.errorAction)?void 0:r.retryCount)&&f.trigger(S.Player.OnM3u8Retry);t.fatal&&p()}else h.isLive?h.liveRetry>f._liveRetryCount?(0==f._liveRetryCount&&f.trigger(S.Player.OnM3u8Retry),o=h.liveRetryInterval+h.liveRetryStep*f._liveRetryCount,f._liveRetryCount++,f.trigger(S.Private.H5_Loading_Show),setTimeout(function(){l&&f._loadByUrlInner(f._options.source,0,!0)},1e3*o)):p():(l&&-1<[403,404].indexOf(i)||!f._reloadForVod())&&d()}})})}}.call(this)}.call(this,"false")},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/object":43,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../base/event/eventtype":68}],105:[function(e,t,r){var i=e("../base/player"),n=e("./hlsinjector"),o=i.extend({init:function(e,t){t._native=!1,n.inject(this,o,i,t),i.call(this,e,t)}});t.exports=o},{"../base/player":91,"./hlsinjector":104}],106:[function(e,t,r){var c=["extraInfo"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var s="undefined"==typeof Promise?e("es6-promise").Promise:Promise,l=e("../../lib/io"),u=e("../../config"),d=e("../../lib/constants"),p=e("../../lang/index"),h=e("../base/event/eventtype"),o=e("../../lib/ua"),f=e("../base/event/eventtype"),a=e("../../lib/playerutil"),_="rtsinjector.js";function g(e){var t,r,i,n,o=this._options;o.rtsFallback&&window.Aliplayer?((t=o.rtsFallbackSource)||((r=String(o.rtsFallbackType||"").toUpperCase())&&!["HLS","FLV"].includes(r)&&(console.warn("invalid rtsFallbackType:",o.rtsFallbackType,", will use flv -> hls as fallback"),r=""),r=r||(a.isSupportFlv()?"FLV":"HLS"),i=o.source,n=!i.includes("@subvideo=no"),i=!i.includes("@subaudio=no"),i=(n={enableVideo:n,enableAudio:i}).enableVideo,n=n.enableAudio,"FLV"===r?(o.flvOption=o.flvOption||{},n||(o.flvOption.hasAudio=!1),i||(o.flvOption.hasVideo=!1)):"HLS"!==r||n||(o.mute=!0),t=((e,t)=>{var t="FLV"===t?"flv":"m3u8",r=window.location.protocol,r=(-1<["http:","https:"].indexOf(r)?r:"https:")+"//";return(e=e.replace("artc://",r).replace("?","."+t+"?").replace("@subvideo=no","").replace("@subaudio=no","")).includes("?")||(e+="."+t),e.includes("auth_key")&&(e+="&rts_degrade=on"),e})(o.source,r)),this.trigger(h.Player.RtsFallback,{reason:e,fallbackUrl:t}),this.loadByUrl(t)):(this.trigger(h.Player.Error,e),this.logError(e))}function y(e){var t=this,r=(this.trigger(h.Private.H5_Loading_Show),this.trigger(h.Private.Play_Btn_Hide),this._options),i=new v(t,e);return t._rts.subscribe(r.source,n({retryTimes:r.rtsFallback?1:void 0,mediaTimeout:r.rtsLoadDataTimeout},r.rtsOption||{})).then(function(e){return i.preProcess(),t.tag.srcObject=null,e.play(t.tag),o.IS_IOS&&Number(o.IOS_VERSION)<=14&&t.one(f.Player.TimeUpdate,function(){setTimeout(function(){t.tag.pause(),t.tag.play()},200)}),!0}).catch(function(e){return t.traceLog(_,"subError::"+JSON.stringify(e)),!1})}t.exports.inject=function(e,t,r,i,n,o){function a(){this._disposed||(this._disposed=!0,this._superPt&&this._superPt.dispose.call(this),this._destroyRts())}e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,t.prototype._checkRtsReady=function(){return null!=this._rts||(console.warn("please invoke this method after ready event"),!1)},e._isRts=!0,e._rts=null,e._isLoadedRts=!1,e.bind_rtsErrorEventHandler=null,e.bind_rtsReconnectEventHandler=null,t.prototype.play=function(e){if(this.traceLog(_,"play::"+e),e&&this.trigger(h.Private.ManualPlay),this._checkRtsReady()){this._isManualPlay=e||!1;if(this.paused())return this.trigger(h.Private.Cover_Hide),this.trigger(h.Private.Play_Btn_Hide),y.call(this),this}},t.prototype.seek=function(e){},t.prototype.setSpeed=function(e){},t.prototype.stop=function(){return this._rts&&this._rts.unsubscribe(),this},Object.defineProperty(t.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return a},set:function(){return a}}),t.prototype._destroyRts=function(){this._rts&&(this.stop(),this._rts.off("onError",this.bind_rtsErrorEventHandler),this._rts.off("reconnect",this.bind_rtsReconnectEventHandler)),this._rts=null},t.prototype.initPlay=function(e){var t,r=this;function i(i,t){var r;i._disposed||(r=!i._rts,i._destroyRts(),i._rts=new AliRTS.createClient({customReporter:function(e){if(126===Number(e.msgid)){var t={};try{t=JSON.parse(e.args)}catch(e){t={}}t.tcid&&i._rts&&(i._rts.traceid=t.tcid,i.traceLog(_,"tcid::"+t.tcid),i.trigger(h.Player.RtsTraceId,{traceId:t.tcid,source:i._options.source}))}}}),i._checkRtsSupport(function(e){!function(e){var t=this._rtsErrorEventHandler.bind(this),t=(this.bind_rtsErrorEventHandler=t,e.on("onError",t),this._rtsReconnectEventHandler.bind(this));this.bind_rtsReconnectEventHandler=t,e.on("reconnect",t)}.call(i,i._rts),i._options.autoplay?y.call(i).then(function(e){e&&i._initPlayBehavior(t)}):i._initPlayBehavior(t),r&&i._executeReadyCallback()},function(e){console.log("[RTS isSupport error]",e);var t=null,r=null;switch(Number(e.errorCode)){case 10110:t=d.ErrorCode.RtsNotSupportWebRtc,r=p.get("Rts_Err_Not_Support_Webrtc");break;case 10111:t=d.ErrorCode.RtsBrowserNotSupport,r=p.get("Rts_Err_Browser_Not_Support");break;case 10112:t=d.ErrorCode.RtsBrowserVersionTooLow,r=p.get("Rts_Err_Browser_Version_Too_Low");break;case 10113:t=d.ErrorCode.RtsNotSupportH264,r=p.get("Rts_Err_Not_Support_H264");break;case 10114:t=d.ErrorCode.RtsCreateOfferError,r=p.get("Rts_Err_Create_Offer_Error")}return g.call(i,{error_code:t,error_msg:r}),!1}))}this._isLoadedRts?i(this,e):(this.trigger(h.Private.H5_Loading_Show),t=performance.now(),function(e,t,r){var i="",n=this._options,i="https://g.alicdn.com/apsara-media-box/imp-web-rts-sdk/"+(n.rtsVersion||u.rtsVersion)+"/aliyun-rts-sdk.js",o=(n.assetPrefix&&(i=n.assetPrefix+"/rts/aliyun-rts-sdk.js"),n.rtsSdkUrl&&(i=n.rtsSdkUrl),this);l.loadJS(i,function(){e.apply(o)},function(){r&&r()})}.call(r,function(){this.traceLog(_,"got js#"+parseInt(performance.now()-t)),this._isLoadedRts=!0,i(this,e)},this._options.debug,function(){var e={error_code:d.ErrorCode.ModuleLoadError,error_msg:"rts module load error."};r.trigger(h.Player.Error,e)}))},t.prototype.getStats=function(){return this._rts&&this._rts.getTransportStats?s.all([this._rts.getTransportStats(),this._rts.getRemoteVideoStats(),this._rts.getRemoteAudioStats()]).then(function(e){var t=e[0],r=e[1],e=e[2];return{rtt:t.rtt,bytesReceived:t.bytesReceived,framesDecoded:r.framesDecoded,packetsLost:(r.packetsLost||0)+(e.packetsLost||0),packetsReceived:(r.packetsReceived||0)+(e.packetsReceived||0),timestamp:t.timestamp||Date.now()}}).catch(function(e){return console.log("ERR in RTS getstats: ",e),{}}):s.resolve()},t.prototype._checkRtsSupport=function(e,t){this._options.skipRtsSupportCheck?e():this._rts.isSupport({isReceiveVideo:!0}).then(e).catch(t)},t.prototype._rtsErrorEventHandler=function(e){console.log("RTS Error:",e),e.extraInfo;var t=((e,t)=>{if(null==e)return{};var r,i={};for(r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i})(e,c),r=(this.traceLog(_,"rtsError::"+JSON.stringify(t)),null),i=null,n=null;switch(Number(e.errorCode)){case 10201:return;case 10101:r=d.ErrorCode.RtsSignalError,i=p.get("Rts_Err_Http_Signal_Error");break;case 10114:r=d.ErrorCode.RtsCreateOfferError,i=p.get("Rts_Err_Create_Offer_Error");break;case 10202:r=d.ErrorCode.RtsPlayUrlError,i=p.get("Rts_Err_Play_Url_Error");break;case 10203:r=d.ErrorCode.RtsSubscribeNonthing,i=p.get("Rts_Err_Subscribe_Nonthing");break;case 10205:var o=null==(o=e.extraInfo)?void 0:o.response;if(403===(null==o?void 0:o.status)){var a=o.headers["x-tengine-error"];if(a&&-1<d.RegionBlockMessages.indexOf(a)){r=d.ErrorCode.RegionBlock,i=p.get("Error_Region_Block_Text"),n=p.get("Tip_Err_Blocked");break}r=d.ErrorCode.AuthKeyExpired,i=p.get("Error_AuthKey_Text")}else n=404===(null==o?void 0:o.status)?(r=d.ErrorCode.NotFoundSourceURL,i=p.get("Error_Not_Found"),p.get("Tip_Err_Not_found")):(r=d.ErrorCode.RtsHttpRequestFaild,i=p.get("Rts_Err_Http_Request_Failed"),p.get("Tip_Err_Rts_Http_Failed"));break;case 10206:r=d.ErrorCode.RtsHttpAnswerFaild,i=p.get("Rts_Err_Http_Answer_Failed");break;case 10207:r=d.ErrorCode.RtsPlayFailedError;try{var s,l=null==(s=e.message.match(/after (\d+) ms/))?void 0:s[1]}catch(e){}i=p.get("Rts_Err_Play_Failed")+", "+(l?l*e.extraInfo.retryTimes/1e3+p.get("Rts_Err_No_Data_For"):e.message);break;case 12e3:r=d.ErrorCode.RtsPeerConnectionUnknown,i=p.get("Rts_Err_PeerConnection_Unknown")}t={error_code:r,error_msg:i,diagnosis_info:n,tcid:this._rts.traceid};!function(e){var t=this;t.pause(),setTimeout(function(){t.trigger(h.Private.Play_Btn_Hide)}),t.checkOnline()&&g.call(this,e)}.call(this,t)},t.prototype._rtsReconnectEventHandler=function(e){var t=this;this.traceLog(_,"rts auto reconnect::"+e.retryTimes+"#"+JSON.stringify(e.reason)),this.waiting=!0,this._TimeUpdateStamp=0,this.trigger(h.Private.H5_Loading_Show),this.trigger(h.Private.Play_Btn_Hide),this._options.autoplay&&this.one(f.Player.AutoPlayPrevented,function(){t.trigger(h.Private.Play_Btn_Hide),t.trigger(h.Private.H5_Loading_Show)}),1===e.retryTimes&&this.trigger(h.Player.OnM3u8Retry),this.trigger(h.Private.Retry,{type:"rts",source:this._options.source})}};var v=(()=>{function e(e,t){(this.isRetry=t)&&(this.isApple=o.IS_IOS||o.IS_SAFARI,this.player=e)}return e.prototype.preProcess=function(){var e,t,r;this.isRetry&&this.isApple&&(e=this.player.getVolume(),t=this.player.muted(),e)&&!t&&((r=this.player.tag).volume=0,this.player.one("canplay",function(){r.volume=e}))},e})()},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/ua":49,"../base/event/eventtype":68,"es6-promise":9}],107:[function(e,t,r){var i=e("../base/player"),n=e("./rtsinjector"),o=i.extend({init:function(e,t){t.isLive&&(t._native=!1,n.inject(this,o,i,t),i.call(this,e,t))}});t.exports=o},{"../base/player":91,"./rtsinjector":106}],108:[function(e,t,r){var i=e("../../lib/constants"),e=e("../../lib/oo").extend({init:function(e){this.player=e,this.tickhandle=null}});e.prototype.tick=function(e,t){var r=this;this.tickhandle=setTimeout(function(){r.player&&r.player.trigger(i.AuthKeyExpiredEvent),t&&t()},1e3*e)},e.prototype.clearTick=function(e){this.tickhandle&&clearTimeout(this.tickhandle)},t.exports=e},{"../../lib/constants":29,"../../lib/oo":44}],109:[function(e,t,r){function s(e,t,r){var i=u.randomUUID(),n="https://mts."+e.domainRegion+".aliyuncs.com/?",i={AccessKeyId:e.accessId,Action:"GetLicense",MediaId:e.vid,LicenseUrl:n,data:e.data,SecurityToken:e.stsToken,Format:"JSON",Type:e.encryptionType,Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:i};e.header&&(i.Header=e.header),n+="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(i,e.accessSecret,"POST")),e=u.makeUTF8sort(i,"=","&"),o.post(n,e,function(e){e?(e=JSON.parse(e),t&&(e=e.License,t(e))):r&&r(a.createError("MPS\u83b7\u53d6License\u5931\u8d25"))},function(e){if(r){var t={Code:"",Message:h.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}r({Code:c.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}var o=e("../../lib/io"),l=(e("../../lib/ua"),e("../../lib/bufferbase64")),c=e("../../lib/constants"),u=e("./signature"),a=e("./util"),d=e("../../lib/url"),p=e("../../lib/playerutil"),h=e("../../lang/index"),f=e("../base/event/eventtype");function _(e){window.console.error("The license request failed.")}function g(e){window.console.error("A decryption key error was encountered"),window.console.error("A decryption key error was encountered",e)}function y(e){window.console.log("Decryption key was added to session.")}function v(e,t,r){r.addEventListener(e,function(){t(arguments[0])},!1)}t.exports.requestLicenseKey=function(e){var a=e;return a._options.vid&&(a.__vid=a._options.vid),function(e,t){var r,i,n=a._options,o=a._getDRMEncryptItem();o&&(r={vid:a.__vid,accessId:n.accId,accessSecret:n.accSecret,stsToken:n.stsToken,domainRegion:n.domainRegion,authInfo:n.authInfo,encryptionType:o.encryptionType},o.encryptionType==c.EncryptionType.Widevine?r.data=l.encode(e.message):o.encryptionType==c.EncryptionType.PlayReady&&(n=l.unpackPlayReady(e.message),r.data=n.changange,n.header)&&(r.header=JSON.stringify(n.header)),console.log(r.data),e=a.__licenseKeys,i=a.__vid+o.Url,e&&e[i],s(r,function(e){a.__licenseKeys||(a.__licenseKeys={}),10<r.data.length&&(a.__licenseKeys[i]=e);e=l.decode(e);t(e)},function(e){e={mediaId:a.__vid,error_code:e.Code,error_msg:e.Message};a.logError(e),a.trigger("error",e)}))}},t.exports.loadCertificate=function(e,t){var r,i,n,o=new XMLHttpRequest,a=(o.addEventListener("load",function(e,t){var r,t=t.target;if(200!==t.status){var i=c.ErrorCode.DrmLicenseRequestFailed,n=h.get("Error_Drm_License_Request_Failed"),i={mediaId:this._options.vid||"",error_code:i,error_msg:t.response};player.logError(i),i.display_msg=n,player.trigger(f.Player.Error,i)}else{try{r=this._options.isLive?JSON.parse(t.response).Response.B64ServCert:JSON.parse(JSON.parse(t.response).DRMCertInfo).b64ServCert}catch(e){console.log(e)}n=u.base64DecodeUint8Array(r),i=function(e,t){var r=t.target,t=t.initData,i=u.arrayToString(t).split("skd://")[1].split("?")[0],n=u.stringToArray(i);t=((e,t,r)=>{"string"==typeof t&&(t=stringToArray(t));var i=0,n=new ArrayBuffer(e.byteLength+4+t.byteLength+4+r.byteLength),o=new DataView(n);return new Uint8Array(n,0,e.byteLength).set(e),i+=e.byteLength,o.setUint32(i,t.byteLength,!0),i+=4,(e=new Uint16Array(n,i,t.length)).set(t),i+=e.byteLength,o.setUint32(i,r.byteLength,!0),i+=4,new Uint8Array(n,i,r.byteLength).set(r),new Uint8Array(n,0,n.byteLength)})(t,n,e),r.webkitKeys||((()=>{if(!WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))throw"Key System not supported";keySystem="com.apple.fps.1_0"})(),r.webkitSetMediaKeys(new WebKitMediaKeys(keySystem)));if(!r.webkitKeys)throw"Could not create MediaKeys";n=r.webkitKeys.createSession("video/mp4",t);if(!n)throw"Could not create key session";n.contentId=i,v("webkitkeymessage",function(e){var t=this,r=e.target,i=e.message,n=new XMLHttpRequest,e=(e.sessionId,n.responseType="text",n.session=r,n.addEventListener("load",function(e){e=e.target;t=this._options.isLive?JSON.parse(e.response).Response.B64License:JSON.parse(JSON.parse(e.response).License).b64License;var t=u.base64DecodeUint8Array(t),t=u.Uint8ArrayToString(t);"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));t=u.base64DecodeUint8Array(t);e.session.update(t)}.bind(this),!1),n.addEventListener("error",_,!1),btoa("spc="+u.base64EncodeUint8Array(i)+"&assetId="+encodeURIComponent(r.contentId))),o={Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),AccessKeyId:t._options.accessKeyId,SecurityToken:t._options.securityToken,CertId:t._options.certId};t._options.isLive?(o.RegionId=t._options.region,o.Action="DescribeDRMLicense",o.Version="2016-11-01",o.CdmData=e,o.Type="fairplay",o.Domain=d.parseUrl(t._options.source).hostname):(o.region=t._options.region,o.Action="GetDRMLicense",o.Version="2017-03-21",o.VideoId=t._options.vid,o.CDMData=e,o.DRMType="FairPlay");var a,s,i="Signature="+u.AliyunEncodeURI(u.makeChangeSiga(o,t._options.accessKeySecret,"POST"));r=t._options.isLive?"https://"+p.getLiveHostByRegion(t._options.region)+"/?"+i:"https://vod."+t._options.region+".aliyuncs.com/?"+i;for(s in n.open("POST",r,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o){var l;o.hasOwnProperty(s)&&(l=o[s],a=a?a+"&"+u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l):u.AliyunEncodeURI(s)+"="+u.AliyunEncodeURI(l))}n.send(a)}.bind(this),n),v("webkitkeyadded",y,n),v("webkitkeyerror",g,n)}.bind(this,n),t=(this._fairPlayHandlers.onNeedKey=i,function(e){window.console.error("A video playback error occurred")}.bind(this));this._fairPlayHandlers.onError=t,this.tag.addEventListener("webkitneedkey",i,!1),this.tag.addEventListener("error",t,!1),this.tag.src=this._options.source}e&&e()}.bind(e,t),!1),o.addEventListener("error",function(e){window.console.error("Failed to retrieve the server certificate.")}.bind(e),!1),{Format:"JSON",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),AccessKeyId:e._options.accessKeyId,SecurityToken:e._options.securityToken,CertId:e._options.certId}),t=(e._options.isLive?(a.RegionId=e._options.region,a.Action="DescribeDRMCertificate",a.Version="2016-11-01"):(a.region=e._options.region,a.Action="GetDRMCertInfo",a.Version="2017-03-21",a.VideoId=e._options.vid),"Signature="+u.AliyunEncodeURI(u.makeChangeSiga(a,e._options.accessKeySecret,"POST"))),e=e._options.isLive?"https://"+p.getLiveHostByRegion(e._options.region)+"/?"+t:"https://vod."+e._options.region+".aliyuncs.com/?"+t;for(r in o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a)a.hasOwnProperty(r)&&(i=a[r],n=n?n+"&"+u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i):u.AliyunEncodeURI(r)+"="+u.AliyunEncodeURI(i),console.log(i));o.send(n)},t.exports.getRequestUrl=function(e,t){var e={AccessKeyId:t._options.accessKeyId,Format:"JSON",Version:"2016-11-01",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Timestamp:u.ISODateString(new Date),SignatureNonce:u.randomUUID(),SecurityToken:t._options.securityToken,RegionId:t._options.region,Action:"DescribeDRMLicense",Type:"widevine",CdmData:e,Domain:d.parseUrl(t._options.source).hostname},r=(t._options.widevineCertId&&(e.CertId=t._options.widevineCertId),"Signature="+u.AliyunEncodeURI(u.makeChangeSiga(e,t._options.accessKeySecret,"POST")));return{url:"https://"+p.getLiveHostByRegion(t._options.region)+"/?"+r,data:u.makeUTF8sort(e,"=","&"),jsonData:u.makeUTF8sort(e,"=","&","json")}},t.exports.postData=function(e,t){var r=u.randomUUID(),r={AccessKeyId:t._options.accessKeyId,VideoId:t._options.vid,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:r,SecurityToken:t._options.securityToken,region:t._options.region,Action:"GetDRMLicense",DRMType:"Widevine",CDMData:e},e=(t._options.widevineCertId&&(r.CertId=t._options.widevineCertId),"Signature="+u.AliyunEncodeURI(u.makeChangeSiga(r,t._options.accessKeySecret,"POST")));return{url:"https://vod."+t._options.region+".aliyuncs.com/?"+e,data:u.makeUTF8sort(r,"=","&"),jsonData:u.makeUTF8sort(r,"=","&","json")}},t.exports.destroyFairPlay=function(){this._fairPlayHandlers.onNeedKey&&this.tag.removeEventListener("webkitneedkey",this._fairPlayHandlers.onNeedKey),this._fairPlayHandlers.onError&&this.tag.removeEventListener("error",this._fairPlayHandlers.onError),this._fairPlayHandlers={}}},{"../../lang/index":24,"../../lib/bufferbase64":26,"../../lib/constants":29,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/url":50,"../base/event/eventtype":68,"./signature":115,"./util":116}],110:[function(e,t,r){var i=e("../../lib/io"),c=e("../../lib/constants"),n=e("../../lib/data"),u=e("./util");t.exports.getDataByAuthInfo=function(e,a,s,l){e={playAuth:e.playAuth,requestId:e.requestId},i.get("https://api.h5video.shop/api/page/getMediaPlayInfo"+(r=>(r.requestId=n.guid(),Object.keys(r).reduce(function(e,t){return e+(e?"&":"?")+t+"="+encodeURIComponent(r[t])},"")))(e),function(e){if(e){e=JSON.parse(e);if(200!==e.httpStatusCode)l&&l({Code:c.ErrorCode.ServerAPIError,Message:e.httpStatusCode+"|"+e.code,sri:e.requestId});else{for(var t=e.data.PlayInfoList,r=[],i=t.length-1;0<=i;--i)"AUTO"===t[i].Definition&&(r=[t.splice(i,1)[0]]);var n,o=null;(o=(o=0===r.length?u.objectPlayerMessageSort(t,a):u.objectPlayerMessageSort(r)).map(function(e){return"m3u8"===e.format&&(e.Url=e.Url+"&_ext=.m3u8"),e}))&&s&&(n=e.data.VideoBase||{},s({videoId:n.VideoId,userId:n.UserId,requestId:e.requestId,urls:o,encryptUrlArr:[],thumbnailUrl:"",coverUrl:n.CoverURL,playInfoAry:t,textTracks:e.data.SubtitlesList}))}}else l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))},function(e){e&&"string"==typeof e&&-1<e.indexOf("Invalid CORS request")?l&&l({Code:c.ErrorCode.ServerAPIError,Message:e}):l&&l(u.createError("\u8f7bSaaS\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))})}},{"../../lib/constants":29,"../../lib/data":31,"../../lib/io":41,"./util":116}],111:[function(e,t,r){var i=e("./saasplayer"),n=e("./light"),o=e("../base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByLightSaas()}});e.prototype.loadByLightSaas=function(e){var t=this._options,r={playAuth:t.mediaAuth,defaultDefinition:t.defaultDefinition};this.log("STARTFETCHDATA",{it:"lightSaasPlayAuth",pa:{playAuth:t.mediaAuth}}),this.loadData(r,e)},e.prototype.replayByMediaAuth=function(e){this.trigger(o.Private.Error_Hide),this.tag&&(this.tag.pause(),this.tag.removeAttribute("src"),this.tag.load()),this.setTextTracks([]),this.trigger(o.Private.UserTrackReset),this._options.source="",this._options.mediaAuth=e,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.loadByLightSaas(!0)},t.exports=e},{"../base/event/eventtype":68,"./light":110,"./saasplayer":114}],112:[function(e,t,r){var i=e("../../lib/io"),l=e("../../lib/constants"),s=e("./signature"),c=e("./util"),u=e("../../lang/index"),d=e("../../lib/ua");var p=function(e,r){for(var t="",i=(e.sort(function(e,t){e=parseInt(e.bitrate),t=parseInt(t.bitrate);return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?o.bitrate:t==a?a+o.bitrate:a;o.desc=s,t=a}},h=function(e,r){for(var t="",i=(e.sort(function(e,t){e=parseInt(e.width),t=parseInt(t.width);return"desc"==r?t<e?-1:e<t?1:void 0:e<t?-1:t<e?1:void 0}),e.length),n=0;n<i;n++){var o=e[n],a=l.QualityLevels[o.definition],s="",s=void 0===a?"":t==a?a+o.height:a;o.desc=s,t=a}};t.exports.getDataByAuthInfo=function(e,n,o,a){s.returnUTCDate(),s.randomUUID();var t=s.randomUUID(),t={AccessKeyId:e.accessId,Action:"PlayInfo",MediaId:e.vid,Formats:e.format,AuthInfo:e.authInfo,AuthTimeout:e.authTimeout||l.AuthKeyExpired,IncludeSnapshotList:e.includeSnapshotList,Rand:e.rand,SecurityToken:e.stsToken,Format:"JSON",Version:"2014-06-18",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",Terminal:d.IS_CHROME?"Chrome":d.IS_EDGE?"Edge":d.IS_IE11?"IE":d.IS_SAFARI?"Safari":d.IS_FIREFOX?"Firefox":"",SignatureNonce:t},t=(e.hlsUriToken&&(e.MtsHlsUriToken=e.hlsUriToken),e.playConfig&&(t.PlayConfig=JSON.stringify(e.playConfig)),s.makeUTF8sort(t,"=","&")+"&Signature="+s.AliyunEncodeURI(s.makeChangeSiga(t,e.accessSecret))),e="https://mts."+e.domainRegion+".aliyuncs.com/?"+t;i.get(e,function(e){var t,r,i;e?(t=(e=JSON.parse(e)).PlayInfoList.PlayInfo,r="",(i=e.SnapshotList?e.SnapshotList.Snapshot:[])&&0<i.length&&(r=i[0].Url),i=((e,t)=>{for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a];("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}return 0<n.length?(p(n,t),n):0<i.length?(h(i,t),i):0<r.length?(h(r,t),r):(h(o,t),o)})(t,n),o&&o({requestId:e.RequestId,urls:i,thumbnailUrl:r})):a&&a(c.createError("MPS\u83b7\u53d6\u53d6\u6570\u5931\u8d25"))},function(e){if(a){var t={Code:"",Message:u.get("Error_MTS_Fetch_Urls_Text")};try{t=JSON.parse(e)}catch(e){}a({Code:l.ErrorCode.ServerAPIError,Message:t.Code+"|"+t.Message,sri:t.RequestId||""})}})}},{"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/ua":49,"./signature":115,"./util":116}],113:[function(e,t,r){var i=e("./saasplayer"),n=(e("../../lib/constants"),e("./mts")),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByMts()}});e.prototype.loadByMts=function(e){var t={vid:this._options.vid,accessId:this._options.accId,accessSecret:this._options.accSecret,stsToken:this._options.stsToken,domainRegion:this._options.domainRegion,authInfo:this._options.authInfo,format:this._options.format,includeSnapshotList:this._options.includeSnapshotList||!1,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,hlsUriToken:this._options.hlsUriToken,playConfig:this._options.playConfig};this.loadData(t,e)},e.prototype.replayByVidAndAuthInfo=function(e,t,r,i,n,o){this.trigger("error_hide"),this._options.source="",this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._clearTimeout(),this.reloadNewVideoInfo(e,t,r,i,n,o)},e.prototype.reloadNewVideoInfo=function(e,t,r,i,n,o){if(this.trigger("error_hide"),this._options.source="",e&&(this._options.vid=e,this._options.accId=t,this._options.accessSecret=r,this._options.stsToken=i,this._options.domainRegion=o,this._options.authInfo=n),!(this._options.vid&&this._options.accId&&this._options.accessSecret&&this._options.stsToken&&this._options.domainRegion&&this._options.authInfo))throw new Error("\u9700\u8981\u63d0\u4f9bvid\u3001accId\u3001accessSecret\u3001stsToken\u3001domainRegion\u548cauthInfo\u53c2\u6570");this.log("STARTFETCHDATA",{it:"mps",pa:{vid:e}}),this.loadByMts(!0)},t.exports=e},{"../../lib/constants":29,"./mts":112,"./saasplayer":114}],114:[function(e,t,r){var h=e("../base/player"),i=e("../audio/audioplayer"),o=e("../../lib/io"),f=e("../../lib/constants"),n=e("./signature"),a=e("./authkeyexpiredhandle"),_=e("../hls/hlsinjector"),g=e("../flv/flvinjector"),y=e("../drm/drminjector"),v=e("../sw/swinjector"),m=e("../../lang/index"),b=e("../../lib/ua"),s=e("../../config"),S=e("../../lib/playerutil"),T=e("../base/event/eventtype"),l=e("../../protected/anti-injector-protected"),E=h.extend({init:function(e,t){b.IS_PC&&l(t,this),this._authKeyExpiredHandle=new a(this),h.prototype._videoCreateEl||(h.prototype._videoCreateEl=h.prototype.createEl),"mp3"==t.format?(t.height="auto",t.mediaType="audio",h.prototype.createEl=i.prototype.createEl,i.call(this,e,t),E.prototype.play=h.prototype.play,E.prototype.pause=h.prototype.pause,E.prototype.initPlay=h.prototype.initPlay,E.prototype.replay=h.prototype.replay,E.prototype.stop=h.prototype.stop,E.prototype.seek=h.prototype.seek):(h.prototype.createEl=h.prototype._videoCreateEl,t._native=!1,h.call(this,e,t))}});function w(){var e,t=!1;return 1!==Number(this._options.encryptType)?(e={error_code:f.ErrorCode.InvalidParameter,error_msg:m.get("Error_Not_Support_encrypt_Text")},this.logError(e),this.trigger("error",e),!0):t}function x(){var e=S.checkSecuritSupport();if(e)return this._mtsError_message(this,{Code:f.ErrorCode.EncrptyVideoNotSupport,Message:e,display_msg:e},""),!0}E.prototype.loadData=function(e,t){var r,i,n;1!=this._options.encryptType?this._loadData(e,t):(r="aliplayer-vod-min.js",i="",i=s.domain?"https://"+s.domain+s.path+s.h5Version+"/hls/"+r:"/build/hls/"+r,this.trigger(T.Private.Timeline,{name:"mod_rand_s",ts:performance.now()}),n=this,o.loadJS(i,function(){n.trigger(T.Private.Timeline,{name:"mod_rand_f",ts:performance.now()}),n._loadData(e,t)}))},E.prototype._loadData=function(l,c){var u,d=(new Date).getTime(),p=this;this._urls=[],this._currentPlayIndex=0,this._retrySwitchUrlCount=0,this._authKeyExpiredHandle.clearTick(),""!=l.format&&"m3u8"!=l.format||1!=this._options.encryptType?l.rand=n.randomUUID():(u=_rtsneg(3===p._vdnct6f?l.vid:void 0),l.rand=_dnaRekam(u,p._vdnct6f)),this._options.thumbnailUrl&&(l.thumbnailUrl=this._options.thumbnailUrl),this.trigger(T.Private.H5_Loading_Show),this.service.getDataByAuthInfo.call(this,l,this._options.qualitySort,function(e){if(p.trigger(T.Private.PlayInfoLoaded,e),e.userId&&(p._options.from=e.userId),e.videoId&&p._monitor&&p._monitor.updateLightSaasVideoId(e.videoId),e.textTracks&&e.textTracks.length&&(t=S.unqiueTextTracks(e.textTracks),p.trigger(T.Private.TextTrackFounded,{from:"saas",textTracks:t})),e.urls&&0==e.urls.length)p._mtsError_message(p,{Code:f.ErrorCode.URLsIsEmpty,Message:m.get("Error_Vod_URL_Is_Empty_Text")+(l.format?"(format:"+l.format+")":"")},"");else{p.log("COMPLETEFETCHDATA",{cost:(new Date).getTime()-d,mi:JSON.stringify((e=>{for(var t=[],r=0;r<e.length;r++)t.push({width:e[r].width,height:e[r].height,definition:e[r].definition,format:e[r].format,encryptionType:e[r].encryptionType,duration:e[r].duration});return t})(e.urls))}),p._urls=e.urls,p._currentPlayIndex=S.findSelectedStreamLevel(p._urls,l.defaultDefinition);var t=(r=e.urls[p._currentPlayIndex]).Url;if(p._vodDuration=r.duration||0,p._options.source=t,p.encType="",p.trigger(T.Private.PREPARE,r.definition),p.UI.cover&&e.coverUrl&&!p._options.cover&&p.setCover(e.coverUrl),S.isHls(t))if(e&&e.playInfoAry&&0<e.playInfoAry.length&&"Widevine-FairPlay"==e.playInfoAry[0].EncryptType)y.inject(p,E,h.prototype,p._options);else{if(e.encryptUrlArr&&0<e.encryptUrlArr.length){for(var r,i=[],n=!1,o=0;o<e.encryptUrlArr.length;++o)if((r=e.encryptUrlArr[o]).encryptionType===f.EncryptionType.Private){if(w.call(p))return;if(n||x.call(p))return void(n=!0);var a=_yekced(u,r.rand,r.plaintext);i.push({url:r.Url,secData:a})}}else if(i="",r.encryptionType==f.EncryptionType.Private){if(w.call(p))return;if(x.call(p))return;p.encType=r.encryptionType,i=_yekced(u,r.rand,r.plaintext)}var s=b.IS_IOS&&parseFloat(b.IOS_FULL_VERSION)<17.1;(i&&(p._options.useSW||s)?v:(p._hls&&(p._hls.destroy(),p._hls=null),_)).inject(p,E,h,p._options,i)}else S.isFlv(t)?g.inject(p,E,h,p._options):S.isDash(t)?(console.log("isDash"),y.inject(p,E,h,p._options)):p._player._executeReadyCallback();p._authKeyExpiredHandle.tick(f.AuthKeyRefreshExpired),p.trigger(T.Private.SourceLoaded,r),p.initPlay(c),p.trigger(T.Private.ChangeURL,{from:"saas"}),e.thumbnailUrl&&p._thumbnailService.get(e.thumbnailUrl);s=p._player._isFlv,t=-1<p._player.getOptions().source.indexOf("mp4");1==p._player.encType||s||t||(b.IS_IOS||b.IS_MAC_SAFARI||b.IS_X5||b.IS_EDGE)&&(p._player._executeReadyCallback(),p._urls.length)&&p.trigger(T.Private.SourceLoaded,r)}},function(e){var t;-1<(null==(t=e.Message)?void 0:t.indexOf('The specified parameter "Rand" is not valid'))&&w.call(p)||p._mtsError_message(p,e,"")})},E.prototype._changeStream=function(e,t){this._urls.length>e&&(this._loadByUrlInner(this._urls[e].Url,this.getCurrentTime(),!0),this._currentPlayIndex=e,this.trigger(T.Private.QualityChange,t||m.get("Quality_Change_Fail_Switch_Text")))},E.prototype._getLowerQualityLevel=function(){if(0!=this._urls.length&&-1!=this._currentPlayIndex)if("asc"==this.options().qualitySort){if(0<this._currentPlayIndex)return{item:this._urls[this._currentPlayIndex-1],index:this._currentPlayIndex-1}}else if(this._currentPlayIndex<this._urls.length-1)return{item:this._urls[this._currentPlayIndex+1],index:this._currentPlayIndex+1};return""},E.prototype._mtsError_message=function(e,t,r){e._serverRequestId=t.sri,e.trigger(T.Private.H5_Loading_Hide),t.Code=t.Code||t.code,t.Message=t.Message||t.message;var i=t.Code||"OTHER_ERR_CODE",n=t.Message||"OTHER_ERR_MSG",o=(f.ErrorCode.ServerAPIError,t.display_msg||""),a=(-1<n.indexOf("InvalidParameter.Rand")||-1<n.indexOf('"Rand" is not valid.')?(f.ErrorCode.EncrptyVideoNotSupport,o=m.get("Error_Encrypt_Fetch_Failed_Text")):-1<n.indexOf("SecurityToken.Expired")?(f.ErrorCode.AuthKeyExpired,o=m.get("Error_Playauth_Expired_Text")):-1<n.indexOf("InvalidVideo.NoneStream")?(f.ErrorCode.URLsIsEmpty,o=m.get("Error_Fetch_NotStream")+"("+e._options.format+"|"+e._options.definition+")"):-1<n.indexOf("DataNotFound")&&(f.ErrorCode.MediaNotFound,o=m.get("Error_Fetch_Media_Not_Found")),e._options.vid||""),a=(e._options.from,{mediaId:a,mediaAuth:e._options.mediaAuth||"",error_code:i,error_msg:n});t.sri&&(a.sri=t.sri),e.logError(a),a.display_msg=o&&o===n?o:(o||m.get("Error_Vod_Fetch_Urls_Text"))+"</br>"+n,e.trigger("error",a),console.log("PrismPlayer Error: "+r+"! error_msg :"+n+";")},t.exports=E},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/ua":49,"../../protected/anti-injector-protected":131,"../audio/audioplayer":66,"../base/event/eventtype":68,"../base/player":91,"../drm/drminjector":99,"../flv/flvinjector":102,"../hls/hlsinjector":104,"../sw/swinjector":129,"./authkeyexpiredhandle":108,"./signature":115}],115:[function(e,u,t){var n=e("crypto-js/hmac-sha1"),o=e("crypto-js/enc-base64"),r=e("crypto-js/enc-utf8");u.exports.randomUUID=function(){for(var e=[],t="0123456789abcdef",r=0;r<36;r++)e[r]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},u.exports.returnUTCDate=function(){var e=new Date,t=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate(),n=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),e=e.getUTCMilliseconds();return Date.UTC(t,r,i,n,o,a,e)},u.exports.AliyunEncodeURI=function(e){e=encodeURIComponent(e);return e=(e=(e=e.replace("+","%2B")).replace("*","%2A")).replace("%7E","~")},u.exports.makesort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++)""==o?o=n[s]+t+e[n[s]]:o+=r+n[s]+t+e[n[s]];return o},u.exports.makeUTF8sort=function(e,t,r){if(!e)throw new Error("PrismPlayer Error: vid should not be null!");var i=[];for(s in e)i.push(s);for(var n=i.sort(),o="",a=n.length,s=0;s<a;s++){var l=u.exports.AliyunEncodeURI(n[s]),c=u.exports.AliyunEncodeURI(e[n[s]]);""==o?o=l+t+c:o+=r+l+t+c}return o},u.exports.makeChangeSiga=function(e,t,r){if(e)return o.stringify(n((r=r||"GET")+"&"+u.exports.AliyunEncodeURI("/")+"&"+u.exports.AliyunEncodeURI(u.exports.makeUTF8sort(e,"=","&")),t+"&"));throw new Error("PrismPlayer Error: vid should not be null!")},u.exports.ISODateString=function(e){function t(e){return e<10?"0"+e:e}return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"Z"},u.exports.encPlayAuth=function(e){if(e=r.stringify(o.parse(e)))return JSON.parse(e);throw new Error("playuth\u53c2\u6570\u89e3\u6790\u4e3a\u7a7a")},u.exports.encRsa=function(){},u.exports.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),r=new Uint16Array(t),i=0,n=e.length;i<n;i++)r[i]=e.charCodeAt(i);return r},u.exports.Uint8ArrayToString=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},u.exports.arrayToString=function(e){e=new Uint16Array(e.buffer);return String.fromCharCode.apply(null,e)},u.exports.base64DecodeUint8Array=function(e){var t=window.atob(e),r=t.length,n=new Uint8Array(new ArrayBuffer(r));for(i=0;i<r;i++)n[i]=t.charCodeAt(i);return n},u.exports.base64EncodeUint8Array=function(e){for(var t,r,i,n,o,a,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;c<e.length;)i=(t=e[c++])>>2,n=(3&t)<<4|(t=c<e.length?e[c++]:Number.NaN)>>4,o=(15&t)<<2|(r=c<e.length?e[c++]:Number.NaN)>>6,a=63&r,isNaN(t)?o=a=64:isNaN(r)&&(a=64),l+=s.charAt(i)+s.charAt(n)+s.charAt(o)+s.charAt(a);return l}},{"crypto-js/enc-base64":4,"crypto-js/enc-utf8":5,"crypto-js/hmac-sha1":6}],116:[function(e,c,t){var r=e("../../lib/constants");c.exports.createError=function(e,t){return{requestId:"",code:t||"",message:e}},c.exports.getItem=function(e){var t={};return t.width=e.Width,t.height=e.Height,t.definition=e.Definition,t.Url=e.PlayURL,t.format=e.Format,t.desc=r.QualityLevels[t.definition],t.encryptionType=r.VodEncryptionType[e.EncryptType],t.plaintext=e.Plaintext,t.rand=e.Rand,t.encrypt=e.Encrypt,t.duration=e.Duration,t.bitrate=e.Bitrate,t},c.exports.objectPlayerMessageSort=function(e,t){for(var r=[],i=[],n=[],o=[],a=e.length-1;0<=a;a--){var s=e[a],s=c.exports.getItem(s);("mp4"==s.format?i:"mp3"==s.format?n:"m3u8"==s.format?r:o).push(s)}var l=[],l=0<n.length?n:0<i.length?i:0<r.length?r:o;return"asc"==t&&l.reverse(),l}},{"../../lib/constants":29}],117:[function(e,t,r){var i=e("../../lib/io"),p=e("../../lib/constants"),n=e("./signature"),h=e("./util"),f=e("../../config"),_=e("../../lang/index"),g=e("../base/event/eventtype"),y="saas/vod.js",v={MAIN:"main",BACKUP:"backup"},m=function(e){return(e||"").split("?")[0]},b={type:v.MAIN,time:0};function S(o,a,s,l){var c=this,u=function(e){var t=n.randomUUID(),t={AccessKeyId:e.accessId,Action:"GetPlayInfo",VideoId:e.vid,Formats:e.format,AuthTimeout:e.authTimeout||p.AuthKeyExpired,Rand:e.rand,SecurityToken:e.stsToken,StreamType:e.mediaType,Format:"JSON",Version:"2017-03-21",SignatureMethod:"HMAC-SHA1",SignatureVersion:"1.0",SignatureNonce:t,PlayerVersion:f.h5Version,Channel:"HTML5"};"AUTO"===e.definition?t.ResultType="Multiple":e.definition&&(t.Definition=e.definition);e.authInfo&&(t.AuthInfo=e.authInfo);e.outputType&&(t.OutputType=e.outputType);e.playConfig&&(t.PlayConfig=JSON.stringify(e.playConfig));e.reAuthInfo&&(t.ReAuthInfo=JSON.stringify(e.reAuthInfo));t=n.makeUTF8sort(t,"=","&")+"&Signature="+n.AliyunEncodeURI(n.makeChangeSiga(t,e.accessSecret));return"https://vod"+(this._useBackupVodDomain?"-product":"")+"."+e.domainRegion+".aliyuncs.com/?"+t}.call(this,o),d=performance.now();0===b.time&&this.trigger(g.Private.Timeline,{name:"vod_s",ts:d}),i.get.call(this,u,function(e){T.call(c,u,{status:200}),function(e,t,r,i,n){if(this.trigger(g.Private.Timeline,{name:"vod_f",ts:performance.now()}),this.traceLog(y,"Vod request ok."+e),b={type:v.MAIN,time:0},e){for(var o,e=JSON.parse(e),a="",s=e.VideoBase.ThumbnailList,l=(s&&s.Thumbnail&&0<s.Thumbnail.length?a=s.Thumbnail[0].URL:t.thumbnailUrl&&(a=String(t.thumbnailUrl)),e.PlayInfoList.PlayInfo),c=[],u=[],d=l.length-1;0<=d;--d)"AUTO"===l[d].Definition?(this.getOptions().isVBR=!0,o=l.splice(d,1)[0],c=[o]):1===l[d].Encrypt&&u.push(l[d]);s=null;u=0===c.length?(s=h.objectPlayerMessageSort(l,r),[]):(s=h.objectPlayerMessageSort(c),h.objectPlayerMessageSort(u)),s&&i&&i({requestId:e.RequestId,urls:s,encryptUrlArr:u,thumbnailUrl:a,coverUrl:e.VideoBase.CoverURL,playInfoAry:l})}else n&&n(h.createError("\u70b9\u64ad\u670d\u52a1\u83b7\u53d6\u6570\u636e\u5931\u8d25"))}.call(c,e,o,a,s,l)},function(e,t,r){if(0===(n=(i=r).status)||500<=n&&n<=599&&-1===(i.responseText||"").indexOf("RequestId")){if(c.trigger(g.Private.VodRequestException,{url:m(u),status:r.status,response:r.responseText,retryType:b.type,retryTime:b.time}),5e3<performance.now()-d&&(b.type===v.MAIN?b.time=1:b.type===v.BACKUP&&(b.time=2)),b.type===v.MAIN)return b.time<1?(b.time++,void setTimeout(function(){S.call(c,o,a,s,l)},200)):(b.type=v.BACKUP,b.time=1,void setTimeout(function(){c._useBackupVodDomain=!0,S.call(c,o,a,s,l)},200));if(b.type===v.BACKUP){if(b.time<2)return b.time++,void setTimeout(function(){S.call(c,o,a,s,l)},200);c&&(c._useBackupVodDomain=!1)}}else T.call(c,u,r);var i,n;!function(e,t){if(this.traceLog(y,"Vod request error::"+e),b={type:v.MAIN,time:0},t){var r={Code:"",Message:_.get("Error_Vod_Fetch_Urls_Text")};try{r=JSON.parse(e)}catch(e){}t({Code:p.ErrorCode.ServerAPIError,Message:r.Code+"|"+r.Message,sri:r.RequestId||""})}}.call(c,e,l)},void 0,void 0,5e3)}function T(e,t){0!==b.time&&(this._useBackupVodDomain=!0,this.trigger(g.Private.VodRequestExceptionResume,{url:m(e),status:null==t?void 0:t.status,response:200!==(null==t?void 0:t.status)?null==t?void 0:t.responseText:"",retryType:b.type,retryTime:b.time}))}t.exports.getDataByAuthInfo=S},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../base/event/eventtype":68,"./signature":115,"./util":116}],118:[function(e,t,r){var i=e("./saasplayer"),c=e("../../lib/constants"),n=e("./vod"),u=e("./signature"),o=e("../../lib/io"),a=e("../../config"),s=e("../base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.service=n,this.loadByVod()}});e.prototype.loadByVod=function(e){var t,r,i;"undefined"!=typeof _apesrap?this._loadByVod(e):("object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__),t="aliplayer-vod-p-min.js",r="",r=a.domain?"https://"+a.domain+a.path+a.h5Version+"/hls/"+t:"/build/hls/"+t,this.trigger(s.Private.Timeline,{name:"mod_pa_s",ts:performance.now()}),i=this,o.loadJS(r,function(){i.trigger(s.Private.Timeline,{name:"mod_pa_f",ts:performance.now()}),i._loadByVod(e)}))},e.prototype._loadByVod=function(e){var t="",r="",i="",n="",o="";if(this._options.accessKeyId&&this._options.accessKeySecret)t=this._options.accessKeyId,r=this._options.accessKeySecret,i=this._options.securityToken,n=this._options.region,this.log("STARTFETCHDATA",{it:"sts",pa:{vid:this._options.vid}});else{try{var a=_apesrap(this._options.playauth,this._options.vid),s=(this._vdnct6f=a.v,a.value),l=u.encPlayAuth(s),t=l.AccessKeyId,r=l.AccessKeySecret,i=l.SecurityToken,n=l.Region,o=l.AuthInfo}catch(e){console.log("e",e);a={Code:c.ErrorCode.PlayauthDecode,Message:"playauth decoded failed.",displayMessage:"playauth\u89e3\u6790\u9519\u8bef"};return void this._mtsError_message(this,a,s)}this._options.from=l.CustomerId||"",this.log("STARTFETCHDATA",{it:"playAuth",pa:{vid:this._options.vid}})}this._loadByVodBySTS(t,r,i,n,o,e)},e.prototype.replayByVidAndPlayAuth=function(e,t){this.trigger("error_hide"),this.setTextTracks([]),this.trigger(s.Private.UserTrackReset),this._options.source="",this._options.vid=e,this._options.playauth=t,this._isError=!1,this._options.cover="",this._vodRetryCount=0,this._posOffset=this._getSubVideoConfig().start||0,this._clearTimeout(),this.loadByVod(!0)},e.prototype.updateSourcesByVidAndPlayAuth=function(e,t){var r,i,n;"undefined"!=typeof _apesrap?this._updateSourcesByVidAndPlayAuth(e,t):(r="aliplayer-vod-p-min.js",i="",i=a.domain?"https://"+a.domain+a.path+a.h5Version+"/hls/"+r:"/build/hls/"+r,n=this,o.loadJS(i,function(){n._updateSourcesByVidAndPlayAuth(e,t)}))},e.prototype._updateSourcesByVidAndPlayAuth=function(e,t){if(e!=this._options.vid)console.log("\u4e0d\u80fd\u66f4\u65b0\u5730\u5740\uff0cvid\u548c\u64ad\u653e\u4e2d\u7684\u4e0d\u4e00\u81f4");else{this._options.vid=e,this._options.playauth=t;try{var r=_apesrap(this._options.playauth,this._options.vid),i=(this._vdnct6f=r.v,r.value),n=u.encPlayAuth(i)}catch(e){return void console.log("playauth\u89e3\u6790\u9519\u8bef")}var t={vid:e,accessId:n.AccessKeyId,accessSecret:n.AccessKeySecret,stsToken:n.SecurityToken,domainRegion:n.Region,authInfo:n.AuthInfo,playDomain:n.PlayDomain,format:this._options.format,mediaType:this._options.mediaType},o=(this._authKeyExpiredHandle.clearTick(),this);this.service.loadData(t,this._options.qualitySort,function(e){o._serverRequestId=e.requestId,0!=e.urls.length&&(o._urls=e.urls),o._authKeyExpiredHandle.tick(c.AuthKeyRefreshExpired)},function(e){console.log(e)})}},e.prototype.reloaduserPlayInfoAndVidRequestMts=function(e,t){this.replayByVidAndPlayAuth(e,t,accessSecret)},e.prototype._loadByVodBySTS=function(e,t,r,i,n,o){e={vid:this._options.vid,accessId:e,accessSecret:t,stsToken:r,authInfo:n,domainRegion:i,format:this._options.format,mediaType:this._options.mediaType,definition:this._options.definition,defaultDefinition:this._options.defaultDefinition,authTimeout:this._options.authTimeout,outputType:this._options.outputType,playConfig:this._options.playConfig,reAuthInfo:this._options.reAuthInfo};this.loadData(e,o)},t.exports=e},{"../../config":15,"../../lib/constants":29,"../../lib/io":41,"../base/event/eventtype":68,"./saasplayer":114,"./signature":115,"./vod":117}],119:[function(e,t,r){function i(t){this._player=t,this._video=t.tag;var r=this;this._isCreated=!1,this._canPlayTriggered=!1,this._defaultTrack="",t.on(n.Private.ChangeURL,function(){r._isCreated=!1,r._canPlayTriggered=!1,r._defaultTrack=""}),t.on(n.Player.CanPlay,function(){var e;r._player._drm||r._canPlayTriggered||((e=r._getTracks())&&(r._isCreated=!0,r._player._options.isVBR||r._hls||(t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e))),r._canPlayTriggered=!0)}),t.on(n.Player.AudioTrackUpdated,function(e){r._isCreated||(e=r._getTracks(e.paramData.audioTracks))&&(r._isCreated=!0,t.trigger(n.Player.AudioTrackReady,e),r._notifyDefaultValue(e))})}var n=e("../base/event/eventtype");i.prototype._notifyDefaultValue=function(e){!this._defaultTrack&&0<e.length&&(this._defaultTrack=e[0]),this._defaultTrack&&this._player.trigger(n.Private.SelectorUpdateList,{type:"audio",text:this._defaultTrack.text})},i.prototype.support=function(){return!!this._video.audioTracks},i.prototype._getTracks=function(e){if(!this.support()&&!e)return null;for(var t=[],r=(e=!this._video||!this._video.audioTracks||e&&0!=e.length?e:this._video.audioTracks)?e.length:0,i=0;i<r;i++){var n=e[i],o={value:n.id,text:n.label||n.name||n.language};(n.default||n.enabled)&&(this._defaultTrack=o),t.push(o)}return t},i.prototype.switch=function(e){if(this._player._hls)this._player._hls.audioTrack=+e;else if(this._player._switchAudioTrack)this._player._switchAudioTrack(e);else for(var t=this._video.audioTracks?this._video.audioTracks.length:0,r=0;r<t;r++){var i=this._video.audioTracks[r];i.id==e?i.enabled=!0:i.enabled=!1}},i.prototype.dispose=function(){this._player=null},t.exports=i},{"../base/event/eventtype":68}],120:[function(e,t,r){function i(t){this._video=t.tag,this._player=t,this._isCreated=!1,this._backupCC="",this.tracks=[],this._defaultTrack="",this._currentValue="",this._switchTimer=null,this._storedTracks=[];var r=this,e=(t.on(a.Player.LevelsLoaded,function(e){t.getOptions().useDrm2||(s.IS_MAC_SAFARI||s.IS_IOS)&&(e&&e.paramData&&e.paramData.subtitles&&e.paramData.subtitles.length?r._storedTracks=e.paramData.subtitles||[]:r._resotreTracks())}),t.on(a.Private.SafariDrmLevelSwitch,function(){r._resotreTracks()}),t.on(a.Private.ChangeURL,function(e){e&&e.paramData&&"saas"===e.paramData.from||(r._disabledTracks(),r._isCreated=!1,r._defaultTrack="",r._backupCC="")}),t.on(a.Private.VttClearTracks,function(){r.switch("off"),r._disabledTracks(),r._isCreated=!1,r._defaultTrack={value:"off",text:"Off"},r.tracks=[r._defaultTrack],t.trigger(a.Private.SelectorGenerateList,{type:"cc"}),t.trigger(a.Private.CCStateChanged,{value:"off",lang:""})}),t.on(a.Player.CanPlay,function(){r._isCreated||(r.tracks=r._getTracks(),t.trigger(a.Player.TextTrackReady,r.tracks),t.trigger(a.Private.CCReset)),r._isCreated&&!r._player._setDefaultCC||!r._defaultTrack||(t.trigger(a.Private.SelectorUpdateList,{type:"cc",text:r._defaultTrack.text}),r.switch(r._defaultTrack.value),r._player._setDefaultCC=!1,r._isCreated=!0)}),s.os.ios&&parseFloat(s.os.version)<=15.1&&n.addCssByStyle("video::-webkit-media-text-track-container{position: relative; top: -44px !important;}"),"always"===t.getOptions().controlBarVisibility&&n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}"),o.throttle(function(){t._vttBroker&&t._vttBroker.enabled||n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY(-44px);}")},100)),e=(t.on(a.Private.ShowBar,e),o.throttle(function(){t._vttBroker&&t._vttBroker.enabled||n.addCssByStyle("video::-webkit-media-text-track-container{transform: none;}")},100));t.on(a.Private.HideBar,e),t.on(a.Private.CCReset,function(){r._updateSelectorList()})}var a=e("../base/event/eventtype"),n=(e("../../lib/event"),e("../../lib/dom")),s=e("../../lib/ua"),c=e("../../lib/cookie"),u=e("../../lib/constants"),o=e("../../ui/component/util");i.prototype._adaptiveCueStype=function(){var e,t=-10;s.IS_SAFARI?(t=-65,(e=this._player.fullscreenService)&&e.getIsFullScreen()&&(t=-95)):s.IS_MOBILE&&(t=-30),n.addCssByStyle("video::-webkit-media-text-track-container{transform: translateY("+t+"px) !important;}")},i.prototype.close=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++){var i=e[r];"expired"!=i.mode&&("showing"==i.mode&&(this._backupCC=i),i.mode="disabled",this._player._switchDrmTextTrack)&&this._player._switchDrmTextTrack()}this._player.trigger(a.Private.VttHide)},i.prototype.open=function(){var t,r,e;return!this.tracks||this.tracks.length<2||(r=this._backupCC?this._backupCC.language:"",e=this._backupCC?this._backupCC.label:"",this.tracks.forEach(function(e){r===e.value&&(t=!0)}),(r=t?r:e="")||(r=this.tracks[1].value,e=this.tracks[1].text),this.switch(r)),{label:e,language:r}},i.prototype.getCurrentSubtitle=function(){return this._currentValue},i.prototype._getTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=(this._defaultTrack={value:"off",text:"Off"},[this._defaultTrack]),i=c.get(u.SelectedCC),n="",o=!1,a=0;a<t;a++){var s,l=e[a];"expired"==l.mode||"subtitles"!=l.kind&&"captions"!=l.kind||(s={value:l.language,text:l.label},l.default&&(this._defaultTrack=s,o=!0),s.value==i&&(n=s),r.push(s))}return!o&&n&&(this._defaultTrack=n),r},i.prototype._disabledTracks=function(){for(var e=this.getTextTracks(),t=e.length,r=0;r<t;r++)e[r].mode="expired"},i.prototype.switch=function(e){var t=this._player;if(this.close(),"off"!=e)for(var r=this.getTextTracks(),i=r.length,n=0;n<i;n++){var o=r[n];o.language===e&&"expired"!=o.mode&&(t._switchDrmTextTrack&&t._switchDrmTextTrack(e),r[n].mode="showing",t.trigger(a.Private.VttSwitchTrack,o.language))}else this.close();this._currentValue=e,t.trigger(a.Private.CCChanged,e)},i.prototype.updateUI=function(t){var e=this._player,r="on",i="";i=t?(this.tracks.find(function(e){return e.value===t})||{}).text||"":(r="off","Off"),e.trigger(a.Private.CCChanged,r),e.trigger(a.Private.CCStateChanged,{value:r,lang:i})},i.prototype.dispose=function(){this._player=null,this._switchTimer&&(clearTimeout(this._switchTimer),this._switchTimer=null)},i.prototype._patchSafariTracks=function(){var t=this;if(s.IS_MAC_SAFARI||s.IS_IOS){if(!(this._video&&this._video.textTracks?this._video.textTracks.length:0)){var e=!1;if(e=this._video.textTracks&&this._video.textTracks.length?!0:e)return;for(var r=0;r<this._storedTracks.length;r++){var i=this._storedTracks[r],n=i.vttUrl,o=document.createElement("track");o.src=n,o.kind="subtitles",o.label=i.name,o.srclang=i.lang,this._video.appendChild(o)}}this._switchTimer&&clearTimeout(this._switchTimer),this._switchTimer=setTimeout(function(){var e=t.getCurrentSubtitle();e&&"off"!==e&&t.switch(e)},1e3)}},i.prototype.getTextTracks=function(){var e=this._player,t=e.tag;return e._vttBroker&&e._vttBroker.enabled&&e.getTextTracks?e.getTextTracks()||[]:e._getDrmTextTracks?e._getDrmTextTracks()||[]:t&&t.textTracks||[]},i.prototype._updateSelectorList=function(){var e=this._player;this.tracks=this._getTracks(),e.trigger(a.Private.SelectorGenerateList,{type:"cc",value:"Off"})},i.prototype._resotreTracks=function(){this._patchSafariTracks(),this.tracks=this._getTracks(),this._player.trigger(a.Player.TextTrackReady,this.tracks)},t.exports=i},{"../../lib/constants":29,"../../lib/cookie":30,"../../lib/dom":33,"../../lib/event":34,"../../lib/ua":49,"../../ui/component/util":162,"../base/event/eventtype":68}],121:[function(e,t,r){var i=e("../../lib/playerutil");t.exports=[{service:e("./ccservice"),name:"_ccService",condition:!0},{service:e("./audiotrackservice"),name:"_audioTrackService"},{service:e("./qualityservice"),name:"_qualityService"},{service:e("./fullscreenservice"),name:"fullscreenService",condition:function(){return!0}},{service:e("./liveshiftservice"),name:"_liveshiftService",condition:function(){var e=this.options();return i.isLiveShift(e)}},{service:e("./thumbnailservice"),name:"_thumbnailService",condition:function(){return!0}},{service:e("./progressmarkerservice"),name:"_progressMarkerService",condition:function(){return!0}}]},{"../../lib/playerutil":46,"./audiotrackservice":119,"./ccservice":120,"./fullscreenservice":122,"./liveshiftservice":123,"./progressmarkerservice":124,"./qualityservice":125,"./thumbnailservice":126}],122:[function(e,t,r){function i(t){var r=this,i=(this.isFullWindow=!1,this.isFullScreen=!1,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer=null,this._player=t,this),n=l;this._fullscreenChanged=function(e){var t;null!=i._player&&(e.target||e.srcElement)===(e=i._player.el())&&(t=document[n.fullscreenElement],i.isFullScreen=t===e,(i.isFullScreenChanged=!0)===i.isFullScreen?i._player.trigger(s.Player.RequestFullScreen):i._player.trigger(s.Player.CancelFullScreen))},n&&o.on(document,n.eventName,this._fullscreenChanged),o.on(t.tag,"webkitendfullscreen",function(e){e=e.target||e.srcElement;t&&t.tag===e&&(r.isFullScreenChanged=!0,r.isFullScreen=!1,r._player.trigger(s.Player.CancelFullScreen),r._player.trigger(s.Private.Play_Btn_Show))})}var a=e("../../lib/ua"),n=e("../../lib/dom"),o=e("../../lib/event"),s=e("../base/event/eventtype"),l=(e("../base/x5play"),e("../../lang/index"),(()=>{n.createEl("div");var e={},t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullScreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitfullScreen"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","webkitIsFullScreen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","mozFullScreen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","MSFullScreen"]],r=!1;if(!(r=a.IS_IOS&&(e.requestFn="webkitEnterFullscreen",e.cancelFn="webkitExitFullscreen",e.fullscreenElement="webkitFullscreenElement",e.eventName="webkitfullscreenchange",e.isFullScreen="webkitDisplayingFullscreen",document[e.requestFn])?!0:r)){for(var i=0;i<5;i++)if(t[i][1]in document){e.requestFn=t[i][0],e.cancelFn=t[i][1],e.fullscreenElement=t[i][2],e.eventName=t[i][4],e.isFullScreen=t[i][6];break}"requestFullscreen"in document?e.requestFn="requestFullscreen":"webkitRequestFullscreen"in document?e.requestFn="webkitRequestFullscreen":"webkitRequestFullScreen"in document?e.requestFn="webkitRequestFullScreen":"webkitEnterFullscreen"in document?e.requestFn="webkitEnterFullscreen":"mozRequestFullScreen"in document?e.requestFn="mozRequestFullScreen":"msRequestFullscreen"in document&&(e.requestFn="msRequestFullscreen"),"fullscreenchange"in document?e.eventName="fullscreenchange":"webkitfullscreenchange"in document||"webkitfullscreenchange"in document||"webkitfullscreenchange"in document?e.eventName="webkitfullscreenchange":"mozfullscreenchange"in document?e.eventName="mozfullscreenchange":"MSFullscreenChange"in document&&(e.eventName="MSFullscreenChange"),"fullScreen"in document?e.isFullScreen="fullScreen":"webkitfullScreen"in document?e.isFullScreen="webkitfullScreen":"webkitIsFullScreen"in document?e.isFullScreen="webkitIsFullScreen":"webkitDisplayingFullscreen"in document?e.isFullScreen="webkitDisplayingFullscreen":"mozFullScreen"in document?e.isFullScreen="mozFullScreen":"mozfullScreen"in document?e.isFullScreen="mozfullScreen":"MSFullScreen"in document&&(e.isFullScreen="MSFullScreen"),"fullscreenElement"in document?e.fullscreenElement="fullscreenElement":"webkitFullscreenElement"in document?e.fullscreenElement="webkitFullscreenElement":"webkitFullScreenElement"in document?e.fullscreenElement="webkitFullScreenElement":"mozFullScreenElement"in document?e.fullscreenElement="mozFullScreenElement":"msFullscreenElement"in document?e.fullscreenElement="msFullscreenElement":"MSFullscreenElement"in document&&(e.fullscreenElement="MSFullscreenElement")}return e.requestFn?e:null})()),c=(i.prototype.requestFullScreen=function(){var e=l,t=this._player.el(),r=this;if(a.IS_IOS){var i=this._player._splayer;if(!i||2!==i.renderType){t=this._player.tag,i&&2!==i.renderType&&(t=this._player.el().querySelector("video"));try{var n=t[e.requestFn]();n&&"function"==typeof n.catch&&n.catch(function(e){console.log(e)}),r._player.trigger(s.Player.RequestFullScreen)}catch(e){console.log(e)}return this}this._player._options.enableMockFullscreen=!0}this.isFullScreen=!0,this.isFullScreenChanged=!1,this._requestFullScreenTimer=null,this._cancelFullScreenTimer||clearTimeout(this._cancelFullScreenTimer);r=this;if(e&&!this._player._options.enableMockFullscreen)try{var o=t[e.requestFn]();o&&"function"==typeof o.catch&&o.catch(function(e){console.log(e)}),this._requestFullScreenTimer=setTimeout(function(){r.isFullScreenChanged||(c.apply(r),r._player.trigger(s.Player.RequestFullScreen)),r._requestFullScreenTimer=null},1e3)}catch(e){console.log(e)}else c.apply(r),this._player.trigger(s.Player.RequestFullScreen);return this._player},i.prototype.cancelFullScreen=function(){var e=l,t=(this.isFullScreen=!1,this.isFullScreenChanged=!1,this._cancelFullScreenTimer=null,this._requestFullScreenTimer||clearTimeout(this._requestFullScreenTimer),this);if(e&&!this._player._options.enableMockFullscreen){try{var r=document[e.cancelFn]();r&&"function"==typeof r.catch&&r.catch(function(e){console.log(e)})}catch(e){console.log(e)}t._cancelFullScreenTimer=setTimeout(function(){t.isFullScreenChanged||(u.apply(t),t._player.trigger(s.Player.CancelFullScreen)),t._cancelFullScreenTimer=null},500)}else u.apply(t),this._player.trigger(s.Player.CancelFullScreen);return this._player.tag.paused||this._player.trigger(s.Player.Play),this._player},i.prototype.getIsFullScreen=function(){return this.isFullScreen},i.prototype.dispose=function(){this._player=null,l&&o.off(document,l.eventName,this._fullscreenChanged)},function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden",n.addClass(document.getElementsByTagName("body")[0],"prism-full-window")}),u=function(){this.isFullWindow=!1,document.documentElement.style.overflow=this.docOrigOverflow,n.removeClass(document.getElementsByTagName("body")[0],"prism-full-window")};t.exports=i},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/ua":49,"../base/event/eventtype":68,"../base/x5play":96}],123:[function(e,t,r){function n(e,t){var r;if(e)return e=new Date(e),r=(t=new Date(t)).valueOf()/1e3-e.valueOf()/1e3,{start:e,end:t,endDisplay:s.extractTime(t),totalTime:r}}function o(e,t){t&&(e.currentTimestamp=t,e.currentTime=s.convertToDate(t),e.currentTimeDisplay=s.extractTime(e.currentTime),e.liveShiftStart=e.liveTimeRange.start,e.liveShiftEnd=e.liveTimeRange.end,e.liveShiftStartDisplay=s.extractTime(e.liveShiftStart),e.liveShiftEndDisplay=s.extractTime(e.liveShiftEnd),e.availableLiveShiftTime=t-e.liveShiftStart.valueOf()/1e3,e.timestampStart=s.convertToTimestamp(e.liveShiftStart),e.timestampEnd,s.convertToTimestamp(e.liveShiftEnd))}function i(t){function e(){var e=t._options.source;this._originalPlayUrl=e,this._liveShiftUrl=t._options.liveTimeShiftUrl,this.liveTimeRange=n(t._options.liveStartTime,t._options.liveOverTime),this.availableLiveShiftTime=0,this.seekTime=-1}this._player=t,this._isLiveShiftPlaying=!1;var i=this;e.call(this),t.liveShiftSerivce={setLiveTimeRange:function(e,t){i.setLiveTimeRange(e,t)},queryLiveShift:function(e,t,r){i.queryLiveShift(e,t,r)},isLiveShiftPlaying:function(){return i._isLiveShiftPlaying}},t.on(h.Private.ChangeURL,function(){e.call(i)})}var a=e("../../lib/io"),s=e("../../lib/util"),l=e("../../lib/playerutil"),c=e("../../lang/index"),u=e("../flv/flvinjector"),d=e("../hls/hlsinjector"),p=e("../../lib/constants"),h=e("../base/event/eventtype");e("../../lib/url");i.prototype.validate=function(){return!(this.liveTimeRange.start>=this.liveTimeRange.end)},i.prototype.switchToLive=function(){this.seekTime=-1;var e=this._originalPlayUrl,t=this._player._options.liveShiftSource,r=this._player._options.source;l.isHls(r)&&l.isFlv(e)&&t&&l.isHls(t)&&(this._player._hls&&this._player._destroyHls(),r=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,u.inject(this._player,t,r,this._player._options,"",!0)),this._player._loadByUrlInner(e,null,!0),this._isLiveShiftPlaying=!1,this._player.trigger(h.Private.LiveShiftSwitchToLive)},i.prototype.getBaseTime=function(){this.liveShiftStartDisplay;return-1==this.seekTime?s.parseTime(this.currentTimeDisplay):s.parseTime(this.liveShiftStartDisplay)+this.seekTime},i.prototype.getSourceUrl=function(e,t){var r=this._originalPlayUrl;return this.availableLiveShiftTime<e||(this._isLiveShiftPlaying=!0,e=parseInt(e),r=(r=this._switchLiveShiftPlayer(t))&&this._cleanUrl(r),t=parseInt(this.currentTimestamp)-e,-1===(r=-1==r.indexOf("?")?r+"?lhs_start_unix_s_0="+t:r+"&lhs_start_unix_s_0="+t).indexOf("aliyunols=on")&&(r+="&aliyunols=on"),-1===r.indexOf("continue=on")&&(r+="&continue=on")),r},i.prototype._cleanUrl=function(e){var t;return-1===e.indexOf("?")?e:(e=(e=(t=e.split("?"))[1])&&(0===(e=e.replace(/&?lhs_start_unix_s_0=[0-9]*/g,"")).indexOf("&")?e.replace("&",""):e))?t[0]+"?"+e:t[0]},i.prototype._switchLiveShiftPlayer=function(e){var t,r=this._originalPlayUrl,i=this._player._options.liveShiftSource,n=this._player._options.source;if(l.isHls(n))r=n;else if(l.isFlv(r)&&i&&l.isHls(i))return this._player._flv&&this._player._destroyFlv(),n=this._player._superType,t=this._player._Type,this._player._options._autoplay=!0,d.inject(this._player,t,n,this._player._options,"",!0),i;return r},i.prototype.getTimeline=function(t,i){var r;this._player.trigger(h.Private.LiveShiftQueryCompleted),this._liveShiftUrl?(r=this).queryLiveShift(this._liveShiftUrl,function(e){e?0==(e=e).retCode?(o(r,e.content.current),t&&t()):i({Code:p.ErrorCode.ServerAPIError,Message:e.retCode+"|"+e.description+"|"+e.content}):console.log("\u83b7\u53d6\u76f4\u64ad\u65f6\u79fb\u6570\u636e\u5931\u8d25")},function(e){if(i&&e){var t={};if(e){if("string"==typeof e&&-1<e.indexOf("403 Forbidden"))t.Code=p.ErrorCode.AuthKeyExpired,t.Message="Query liveshift failed:"+c.get("Error_AuthKey_Text");else{var r,t=e;try{r=JSON.parse(e)}catch(e){}r&&(t.Code=p.ErrorCode.ServerAPIError,t.Message=r.retCode+"|"+r.description+"|"+r.content)}i(t)}}}):(o(this,(new Date).valueOf()/1e3),t&&t())},i.prototype.start=function(e,t){var r=this,i=function(){r._loopHandler&&clearTimeout(r._loopHandler),r._loopHandler=setTimeout(function(){r.getTimeline(function(){},t),i()},e)};r.getTimeline(function(e){r._localLiveTimeHandler||r.tickLocalLiveTime()},t),i()},i.prototype.tickLocalLiveTime=function(){function e(){t._localLiveTimeHandler=setTimeout(function(){t.currentTimestamp++,o(t,t.currentTimestamp),t._player.trigger(h.Private.LiveShiftQueryCompleted),e()},1e3)}var t=this;e()},i.prototype.setLiveTimeRange=function(e,t){e=e||this._player._options.liveStartTime,t=t||this._player._options.liveOverTime,this.liveTimeRange=n(e,t),o(this,this.currentTimestamp),this._player.trigger(h.Private.LiveShiftQueryCompleted)},i.prototype.queryLiveShift=function(e,r,i){a.get(e,function(e){var t;e?0==(t=JSON.parse(e)).retCode?r&&r(t):i&&i(t):i&&i(e)},function(e){i&&i(e)})},i.prototype.stop=function(e){this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null)},i.prototype.dispose=function(){this.stop(),this._localLiveTimeHandler&&(clearTimeout(this._localLiveTimeHandler),this._localLiveTimeHandler=null),this._loopHandler&&(clearTimeout(this._loopHandler),this._loopHandler=null),this._player=null},t.exports=i},{"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/url":50,"../../lib/util":51,"../base/event/eventtype":68,"../flv/flvinjector":102,"../hls/hlsinjector":104}],124:[function(e,t,r){function i(a){function t(){var e=document.querySelector("#"+a.id()+" .prism-progress-marker");if(e){e.innerHTML="";var o=s._player.getDuration();if(0<o){for(var t=0;t<s.progressMarkers.length;t++){var r,i=s.progressMarkers[t];void 0!==i.offset&&""!==i.offset&&(i=document.createElement("div"),c.addClass(i,"prism-marker-dot"),r=s.progressMarkers[t].offset/o,i.style.left=100*r+"%",e.appendChild(i),r=((e,t)=>function(){s._player.trigger(l.Private.MarkerTextShow,{left:e,progressMarker:t})})(r,s.progressMarkers[t]),u.on(i,"mouseover",r),u.on(i,"mouseout",function(e){s._player.trigger(l.Private.MarkerTextHide)}),u.on(i,"touchstart",r),u.on(i,"mousemove",function(e){e.preventDefault()}),u.on(i,"touchmove",function(e){e.preventDefault()}))}var n=document.querySelector("#"+s._player.id()+" .prism-progress-cursor");s._player.on(n,"click",function(e){for(var t=s._player.getCurrentTime(),r=0;r<s.progressMarkers.length;r++){var i,n=s.progressMarkers[r];n&&t-1<n.offset&&n.offset<t+1&&(i=n.offset/o*100+"%",s._player.trigger(l.Private.MarkerTextShow,{left:i,progressMarker:n}))}})}}}this.progressMarkers=[],this._player=a;var s=this;a.on(l.Private.ProgressMarkerLoaded,function(e){e=e.paramData;e&&0<e.length&&(s.progressMarkers=e)}),a.on(l.Private.ProgressMarkerChanged,function(e){e=e.paramData;e&&0<e.length&&(s.progressMarkers=e,t())}),a.on(l.Video.LoadedMetadata,t)}var l=e("../base/event/eventtype"),c=(e("../../lang/index"),e("../../lib/hls/hlsparse"),e("../../lib/object"),e("../../lib/dom")),u=e("../../lib/event");e("../../lib/playerutil");i.prototype.dispose=function(){this._player=null,this.progressMarkers=[]},t.exports=i},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/hls/hlsparse":39,"../../lib/object":43,"../../lib/playerutil":46,"../base/event/eventtype":68}],125:[function(e,t,r){function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}function i(o){this.levels=[],this.drmUrl={},this._player=o;var a=this;o.on(l.Private.PlayInfoLoaded,function(e){for(var t=e.paramData.encryptUrlArr||[],r=[],i=0;i<t.length;i++){var n=t[i];n.encryptionType===p.VodEncryptionType["Widevine-FairPlay"]&&r.push(n)}a.drmUrl=r}),o.on(l.Player.LevelsLoaded,function(e){if(0<a.levels.length&&(a.levels=[]),(e=e.paramData)&&e.levels){for(var t,r=e.levels.length-1;-1<r;r--){var i,n=e.levels[r];n.url&&0<n.url.length&&n.attrs&&n.attrs.BANDWIDTH&&(i=n.url,u.isArray(i)&&(i=i[0]),i={Url:i=!o._hls&&o._options.isVBR&&o._options.isDrm&&o._options.vid?h.call(a,n):i,desc:Math.min(n.width,n.height),bitrate:n.bitrate,resolution:n.attrs.RESOLUTION,bandwidth:n.attrs.BANDWIDTH},a.levels.push(i))}"AUTO"===o._options.definition&&(o._urls=[],Object.assign(o._urls,this.levels)),a.levels.sort(function(e,t){return(e.bitrate||e.desc)-(t.bitrate||t.desc)}),a.levels=((e,t)=>"function"==typeof t?e.map(function(e){return s({},e,{desc:t({bandwidth:Number(e.bandwidth),bitrate:Number(e.bitrate),width:Number(e.resolution.split("x")[0]),height:Number(e.resolution.split("x")[1])})})}):e.map(function(e){return s({},e,{desc:e.desc+"p@"+parseInt(e.bitrate/1e3)+"k"})}))(a.levels,o._options.bitrateDisplayHandler),(a.levels&&0<a.levels.length||o._drm&&o._options.useDrm2)&&this._player._options.isVBR&&(t=c.get("Auto"),a.levels.push({Url:e.url,desc:t}),o.trigger(l.Private.SelectorUpdateList,{type:"quality",text:t}))}}),o.on(l.Video.LoadStart,function(){var e,t,r;o._options&&(e=o._options.source,t=o._options.isVBR,r=o._options.useDrm2,!o._hls)&&e&&d.isHls(e)&&(o._manuallySwitchDrmLevel?(o._manuallySwitchDrmLevel=!1,o.trigger(l.Private.SafariDrmLevelSwitch)):(t||o._drm&&!r)&&a.loadLevels(e))})}var l=e("../base/event/eventtype"),c=e("../../lang/index"),n=e("../../lib/hls/hlsparse"),u=e("../../lib/object"),d=e("../../lib/playerutil"),p=e("../../lib/constants");function h(e){for(var t,r=this.drmUrl,i=0;i<this.drmUrl.length;i++)if(Number(e.height)===Number(r[i].height)){t=r[i].Url;break}return t}(i.prototype={loadLevels:function(e){var r=new n,i=this;r.load(e,function(e){var t;null!=(t=e.subtitles)&&t.forEach(function(t){r.loadMediaPlaylist({url:t.url},function(e){e=e.fragments[0];e&&(t.vttUrl=r.resolve(e.relurl,e.baseurl))},function(e){console.log("parse vtt url error: ",e)})}),i._player._created?i._player.trigger(l.Player.LevelsLoaded,e):i._player.one(l.Private.Created,function(){i._player.trigger(l.Player.LevelsLoaded,e)})})}}).dispose=function(){this._player=null},t.exports=i},{"../../lang/index":24,"../../lib/constants":29,"../../lib/hls/hlsparse":39,"../../lib/object":43,"../../lib/playerutil":46,"../base/event/eventtype":68}],126:[function(e,t,r){function i(e){this._player=e,this.cues=[],this.baseUrl="";var t=this;e.on(l.Private.ChangeURL,function(){t.cues=[],t.baseUrl=""})}var o=e("../../lib/io"),a=e("../../lib/url"),s=e("../../lib/vtt/thumbnailvtt"),l=e("../base/event/eventtype");(i.prototype={get:function(e){var t,r,i,n=this;this.baseUrl=(t=e,r="",(i=a.parseUrl(t))&&(i=i.segments)&&0<i.length&&(i=i[i.length-1],r=t.split("?")[0].replace(i,"")),r),o.get(e,function(e){e&&s.parse(e,function(e){n.cues=e,n._player.trigger(l.Private.ThumbnailLoaded,e)})},function(e){console.log(e)})},findAvailableCue:function(e){for(var t=this.cues.length,r=0;r<t;r++){var i=this.cues[r];if(i.startTime<=e&&e<i.endTime)return i}return null},makeUrl:function(e){return e=-1==e.indexOf("://")?this.baseUrl+e:e}}).dispose=function(){this._player=null},t.exports=i},{"../../lib/io":41,"../../lib/url":50,"../../lib/vtt/thumbnailvtt":52,"../base/event/eventtype":68}],127:[function(e,t,r){function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var p=e("../base/player"),h=e("./splayerinjector"),f=e("../flv/flvinjector"),_=e("../hls/hlsinjector"),g=e("../../lib/playerutil"),y=e("../base/event/eventtype"),i=e("../../lib/constants"),v=e("../../lib/codec-probe"),m=e("../../lib/ua"),b=i.USER_EVENT_NAME,S=g.isH265Codec,T=g.isH266Codec,E=g.getVideoTrack,w={},x={codecCost:0,decoderCost:0},k=p.extend({init:function(e,i){var n,o=this,a=(this._options=i,g.isFlv(i.source,i.format)),s=g.isHls(i.source,i.format),t=this._extraMultiSources(),l={};function c(){a?(f.inject(this,k,p,i),i._native=!1):s&&!g.canPlayHls()&&(_.inject(this,k,p,i),i._native=!1),p.call(this,e,i),this._monitor&&this._monitor.updateH265ProbeInfo(d({},x,w)),r.call(this),w.codecTag&&h.reportH265PlayInfo.call(this,{renderType:"native",codecTag:w.codecTag})}function u(){i._native=!1,h.inject(this,k,p,i,w),p.call(this,e,i),this._monitor&&this._monitor.updateH265ProbeInfo(d({},x,w,{waitRenderType:!0})),r.call(this)}function r(){var e,t,r=this,i=l,n=this[b];n&&(i=Object.assign({},l,n),e=Object.keys(l),t=Object.keys(n),e.forEach(function(e){-1<t.indexOf(e)&&(i[e]=l[e].concat(n[e]))})),Object.keys(i).forEach(function(t){i[t].forEach(function(e){e.binded||p.prototype.on.call(r,t,e)})})}l[y.Player.Ready]=[function(){o._setupSourceList(t),o.trigger(y.Private.SelectorGenerateList,{type:"quality"})}],"zhihu"===i.from||i.forceH265||i.forceH266?u.call(this):m.IS_ANDROID&&m.dingTalk()&&!a?c.call(this):(n=performance.now(),v(i.source,i,function(e){x.codecCost+=performance.now()-n;var t,e=E(e.tracks),r=(e||{}).codecTag||(null==(r=(e||{}).codec)?void 0:r.split(".")[0]);w.codecTag=r,e&&S(r)?(t=performance.now(),a||s&&!g.canPlayHls()?(x.decoderCost+=performance.now()-t,u.call(o)):g.shouldUseBasePlayer({codecTag:r,url:i.source},function(e){x.decoderCost+=performance.now()-t,(e?c:u).call(o)})):(e&&T(r)?u:c).call(o)},function(e){console.log("error in demuxer, fallback to basePlayer",e),x.codecCost+=performance.now()-n,c.call(o),h.checkProtocol.call(o,i.source)}))}});t.exports=k},{"../../lib/codec-probe":27,"../../lib/constants":29,"../../lib/playerutil":46,"../../lib/ua":49,"../base/event/eventtype":68,"../base/player":91,"../flv/flvinjector":102,"../hls/hlsinjector":104,"./splayerinjector":128}],128:[function(e,t,r){function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,i=arguments[t];for(r in i)!{}.hasOwnProperty.call(i,r)||(e[r]=i[r])}return e}).apply(null,arguments)}var s=e("../../lib/io"),l=e("../base/event/eventtype"),c=e("../base/event/eventmanager"),i=(e("../../lib/event"),e("../../lib/util")),u=e("../../lib/dom"),d=e("../../lib/playerutil"),p=e("../../lib/constants"),h=e("../../lang/index"),f="splayerinjector.js";function _(e){var t=this._options,r=(v.call(this),!function(){d.isVideoTag(this.tag)&&(c.offVideoAll(this),this.tag.parentNode&&this.tag.parentNode.removeChild(this.tag),this.tag=null)}.call(this),Videox.Videox),i=t.splayerWasmDomain,i=(!i&&t.assetPrefix&&(i=t.assetPrefix+"/splayer"),new r(a({container:this._el,wasmDomain:i,progressive:!0,skipFrame:r.DiscardType.NONE,loop:t.rePlay,controls:!1,muted:!1,threads:t.h265Threads,simd:t.h265Simd,autoplay:t.autoplay||t._autoplay,live:t.isLive,poster:t.cover||void 0,src:t.source,trackOptions:{disable:!0},preload:t.preload?"auto":"none",timeout:1e3*t.waitingTimeout},t.splayerOptions||{}))),n=(t.debug&&(i.setLogLevel(r.LogLevel.LOG),i.setLogPrintLevel(r.LogLevel.LOG)),this._splayer=i,(this.tag=i).play),o=this;this.tag.play=function(){o._monitor&&o._monitor.reportStartPlay(),n.call(this)},function(){var e,t=this,r=document.createElement("video");for(e in r)(e=>{t.tag[e]||0===e.indexOf("on")||"function"!=typeof r[e]||(t.tag[e]=function(){console.warn("Function ["+e+"] is called on splayer, which should be a mistake."),r[e].apply(r,arguments)})})(e)}.call(this),function(e){var i=this,n=(c.onAll(this),this._splayer);n.addEventListener("error",function(e){var t,r,i,n=Videox.Videox,o=(e||{}).detail,a=Number((o||{}).code),n=n.ErrorCode;switch(this.traceLog(f,"splayer-error::"+a),a){case n.WASM_NOT_SUPPORTED:case n.CANVAS_NOT_SUPPORTED:case n.AUDIOCONTEXT_NOT_SUPPORTED:case n.WORKER_NOT_SUPPORTED:case n.WEBGL_NOT_SUPPORTED:t=p.ErrorCode.SplayerEnvCheckError,r=h.get("Splayer_Err_Env_Check")+" | "+g(o);break;case n.DECODE:t=p.ErrorCode.SplayerDecodeError,r=h.get("Splayer_Err_Decode")+" | "+g(o);break;case n.NETWORK:t=p.ErrorCode.NetworkError,r=h.get("Error_Network_Text")+" | "+g(o);var s=(o.origin||{}).response;s?404===(s=s.status)?(t=p.ErrorCode.NotFoundSourceURL,r=h.get("Error_Not_Found")+" | "+g(o),i=h.get("Tip_Err_Not_found")):403===s&&(t=p.ErrorCode.AuthKeyExpired,r=h.get("Error_AuthKey_Text")+" | "+g(o)):navigator.onLine&&(t=p.ErrorCode.RequestDataError,r=r+"\uff0c"+h.get("Maybe_Cors_Error"));break;case n.PARSER:t=p.ErrorCode.SplayerParserNotFound,r=h.get("Splayer_Err_Parser_Not_Found")+" | "+g(o);break;default:t=p.ErrorCode.OtherError,r="(SP)"+h.get("Error_Play_Text")+" | "+g(o)}i=i||h.get("Tip_Err_Splayer")+'<a href="https://help.aliyun.com/zh/vod/developer-reference/advanced-features-3#section-j4v-zwt-641" target="_blank">'+h.get("Tip_Err_Splayer_Doc")+"</a>";if(t===p.ErrorCode.NetworkError&&this._reloadForVod())return;try{this.pause()}catch(e){}a={error_code:t,error_msg:r,diagnosis_info:i};null!==a.error_code&&null!==a.error_msg&&(this.logError(a),this.trigger(l.Player.Error,a));m.call(this,{splayer:!0})}.bind(this)),n.addEventListener("decoderoverload",function(e){e=e.detail;delete e.shouldWarn,i.trigger(l.Player.H265DecoderOverload,e)}),n.addEventListener("loadedsupportinfo",function(e){var e=e.detail||{},t=e.detail||{},r=n.controller.options||{};n.renderType=e.renderer,m.call(i,{renderer:e.renderer,wasmThreads:t.wasmThreads&&r.threads,wasmThreadsOption:r.threads,simd:t.simd&&r.simd,simdOption:r.simd,codecTag:n.controller.videoTrack&&n.controller.videoTrack.codecTag||n.controller.videoTrack&&(null==(e=n.controller.videoTrack.codec)?void 0:e.split(".")[0]),splayer:!0})}),(this._options.autoplay||this._options._autoplay)&&(n.once("canplay",function(){n.paused&&i._autoplayFailedHandler()}),n.once("timeupdate",function(){i.trigger(l.Player.Play)}),this._monitor)&&this._monitor.reportStartPlay();n.on("playing",function(){i._monitor&&i._monitor.reportPlaying()}),n.on("timeupdate",function(){i._monitor&&i._monitor.reportPlaying()})}.call(this,e)}function g(e){var e=e=void 0===e?{}:e,t=e.code,r=Videox.Videox.ErrorCode,i="";return i=t?i+t+(": "+(e.message||r[t])):i}function y(e){return!i.contentProtocolMixed(e,"alwaysCheck")||((e={mediaId:this._options.vid||"",error_code:p.ErrorCode.InvalidSourceURL,error_msg:"InvalidSourceURL"}).display_msg=h.get("Request_Block_Text"),this.logError(e),this.trigger(l.Player.Error,e),!1)}function v(){this._splayer&&(this._splayer.destroy(),this._splayer=null)}function m(e){var t;void 0===e&&(e={}),!this._h265InfoReported&&(this._h265InfoReported=!0,t={0:"native",1:"mse",2:"wasm"},delete(e=a({codecTag:(this._probeInfo||{}).codecTag||e.codecTag,renderType:e.renderType||t[e.renderer]},e)).renderer,e.renderType!==t[2]&&(delete e.simd,delete e.simdOption,delete e.wasmThreads,delete e.wasmThreadsOption),this._splayerRenderType=e.renderType,t=e.codecTag)&&(d.isH265Codec(t)?this.trigger(l.Player.H265PlayInfo,e):d.isH266Codec(t)&&this.trigger(l.Player.H266PlayInfo,e))}t.exports.checkProtocol=y,t.exports.reportH265PlayInfo=m,t.exports.inject=function(e,t,r,i,n){function o(e,t){this._superPt.setPlayerSize.call(this,e,t);e=this._el.querySelector("canvas");e&&(t=this._el.offsetWidth/this._el.offsetHeight,e.offsetWidth/e.offsetHeight<t?(e.style.height="100%",e.style.width="initial"):(e.style.width="100%",e.style.height="initial"))}function a(){this._disposed||(this._superPt&&(this._superPt.dispose.call(this),t.prototype.replay=this._superPt.replay,t.prototype.setPlayerSize=this._superPt.setPlayerSize,t.prototype._setTransform=this._superPt._setTransform,t.prototype.initPlay=this._superPt.initPlay),v.call(this),this._Type=null,this._superType=null,this._superPt=null,this._disposed=!0,this._splayerLoaded=!1,this._h265InfoReported=!1,this._splayerRenderType=null)}e._Type=t,e._superType=r,e._superPt=r.prototype,e._disposed=!1,e._splayer=null,e._splayerLoaded=!1,e._probeInfo=n,e._splayerRenderType=null,t.prototype.initPlay=function(e){var t=this;this.trigger(l.Private.H5_Loading_Show),y.call(this,this._options.source)&&(this._splayerLoaded?_.call(this,e):function(e,t){var r=this._options,i=r.splayerUrl||"https://g.alicdn.com/apsara-media-components/amcom-splayer/0.7.8/dist/index.js";!r.splayerUrl&&r.assetPrefix&&(i=r.assetPrefix+"/splayer/index.js"),s.loadJS(i,e.bind(this),function(){t&&t()})}.call(this,function(){this._splayerLoaded=!0,_.call(this,e),t._executeReadyCallback()},function(){var e={mediaId:t._options.vid||"",mediaAuth:t._options.mediaAuth||"",error_code:p.ErrorCode.ModuleLoadError,error_msg:"splayer module load error."};t.trigger(l.Player.Error,e)}))},t.prototype.replay=function(){return this._monitor&&this._monitor.replay(),this._splayer.load(),this._splayer.play(),this},Object.defineProperty(t.prototype,"setPlayerSize",{enumerable:!0,configurable:!0,get:function(){return o},set:function(){return o}}),t.prototype._setTransform=function(){var e=this._player.el(),t="wasm"===this._splayerRenderType,e=t?e.querySelector("canvas"):e.querySelector("video"),t=(this._transformProp||(this._transformProp=u.getTransformName(e)),t?"":" translate(-50%, -50%)");this._rotate&&(t+=" rotate("+this._rotate+"deg)"),this._image&&("vertical"==this._image?t+=" scaleY(-1)":"horizon"==this._image&&(t+=" scaleX(-1)")),e.style[this._transformProp]=t},Object.defineProperty(t.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return a},set:function(){return a}})}},{"../../lang/index":24,"../../lib/constants":29,"../../lib/dom":33,"../../lib/event":34,"../../lib/io":41,"../../lib/playerutil":46,"../../lib/util":51,"../base/event/eventmanager":67,"../base/event/eventtype":68}],129:[function(e,t,r){function u(e,t){var r,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=((e,t)=>{var r;if(e)return"string"==typeof e?n(e,t):"Map"===(r="Object"===(r={}.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0})(e))||t&&e&&"number"==typeof e.length)return i&&(e=i),r=0,function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}var d="undefined"==typeof Promise?e("es6-promise").Promise:Promise,p=e("../../lib/io"),h=e("../../config"),f=e("../../lang/index"),_=e("../../lib/ua"),g=e("../base/event/eventtype"),i=e("../../lib/constants"),y=i.PLAYER_SCOPE,v=i.SW_MSG_EVT,m=i.DM_MSG_EVT,b=i.ErrorCode,S=e("./tsremuxer").TSRemuxer,T="swinjector.js";function E(e){e={mediaId:this._options.vid||"",error_code:e.code,error_msg:e.msg,diagnosis_info:e.info};this.trigger(g.Player.Error,e)}function w(e){return e.split("?")[0].split("#")[0]}t.exports.inject=function(o,t,r,i,e){o.swPlayer=!0,o.firstBuild=!0,o.sw=null,o.tsDemuxerWorker=null,o.tsRemuxer=null,o.preloadError=!1,o.fetchHasResult=!1,o._initServiceWorker=new d(function(n){setTimeout(n,1e3),"serviceWorker"in navigator?navigator.serviceWorker.getRegistrations().then(function(e){if(!e.length)return console.log("No serviceWorker registrations found."),n();for(var r,i=[],t=u(e);!(r=t()).done;)(()=>{var t=r.value,e=t.unregister().then(function(e){console.log(e?"Successfully unregistered":"Failed to unregister","ServiceWorkerRegistration\n"+(t.installing?"  .installing.scriptURL = "+t.installing.scriptURL+"\n":"")+(t.waiting?"  .waiting.scriptURL = "+t.waiting.scriptURL+"\n":"")+(t.active?"  .active.scriptURL = "+t.active.scriptURL+"\n":"")+"  .scope: "+t.scope+"\n")});i.push(e)})();d.all(i).then(n).catch(n)}).catch(function(e){console.log("clear sw error",e),n()}):n()}).then(function(t){var a=this;return new d(function(o){var e=(e=>{if(!e)return f.get("Error_SW_ScriptURL_Empty");if(0!==(e=String(e)).indexOf("https")&&-1===e.indexOf("localhost")&&-1===e.indexOf("127.0.0.1"))return f.get("Error_SW_ScriptURL_Https");try{t=new URL(e)}catch(e){return f.get("Error_SW_ScriptURL_ILlegal","",{detail:e})}(e=w(location.href).split("/")).pop();var e=e.join("/"),t=((t=w(t.href).split("/")).pop(),t.join("/"));return e!==t?f.get("Error_SW_ScriptURL_Scope","",{scope1:t,scope2:e}):void 0})(t.swScriptURL);if(e)return a.preloadError=!0,E.call(a,{code:b.ModuleLoadError,msg:e});"serviceWorker"in navigator?(navigator.serviceWorker.register(t.swScriptURL,{scope:"./"}).then(function(e){a.traceLog(T,"sw registered");e=e.active||e.waiting||e.installing;e.postMessage({scope:y,name:v.SETUP}),a.sw=e}).catch(function(e){a.preloadError=!0,E.call(a,{code:b.ModuleLoadError,msg:f.get("Error_SW_Register_Failed")+"("+e+")",info:f.get("Tip_SW_Register")})}),navigator.serviceWorker.addEventListener("controllerchange",function(e){e.target.controller.scriptURL!==t.swScriptURL&&E.call(a,{code:b.ModuleLoadError,msg:f.get("Error_SW_Conflict"),info:"controlled by "+e.target.controller.scriptURL})}),navigator.serviceWorker.addEventListener("message",function(e){var t;if((r=e.data)&&r.scope===y){var r=e.data.name;switch(console.log("[MESSAGE FROM SW]["+r+"]",(e=>{var t;try{t=/[0-9]+\.ts/.exec(e)[0]}catch(e){}return t})(null==(t=e.data.payload)?void 0:t.url),e.data.payload),r){case v.SETUP_ACK:o(),a.traceLog(T,"sw ack");var i=null==(i=e.data.payload)?void 0:i.version;i!==h.h5Version&&(a.preloadError=!0,E.call(a,{code:b.ModuleLoadError,msg:f.get("Error_SW_Version_Not_Match","",{swVersion:i,playerVersion:h.h5Version})}));break;case v.ENC_SEGMENT:var n=e.data.payload;a._getDemuxer.then(function(){a.tsDemuxerWorker&&a.tsDemuxerWorker.postMessage({name:m.DEMUX,payload:{buffer:n.buffer,url:n.url,playlistUrl:n.playlistUrl}})});break;case v.ABORT_SEGMENT:a.tsDemuxerWorker&&a.tsDemuxerWorker.postMessage({name:m.FLUSH}),a.tsRemuxer&&a.tsRemuxer.flush()}}})):(a.preloadError=!0,e="http:"===location.protocol?f.get("Error_SW_Https_required"):f.get("UseChromeForVodEncription")+"(SW not found)",E.call(a,{code:b.EncrptyVideoNotSupport,msg:e}))})}.call(o,i));var n,a,s=performance.now(),l=(o._getDemuxer=(n=i,new d(function(e,t){var r="aliplayer-hls2-demuxer-min.js",i="https://"+h.domain+h.path+h.h5Version+"/hls/"+r;n.assetPrefix&&(i=n.assetPrefix+"/hls/"+r),p.loadJS(i,e,t)}).then(function(){o.traceLog(T,"got demuxer#"+parseInt(performance.now()-s)),window.AliDemuxerWorker&&(o.tsDemuxerWorker=window.AliDemuxerWorker.injectWorker().worker,o.tsDemuxerWorker.postMessage({name:m.SETUP,payload:{key:e,debug:i.debug}}),o.tsDemuxerWorker.addEventListener("message",function(e){var t=e.data;switch(t.name){case m.RESULT:if(o.tsRemuxer)try{o.tsRemuxer.remux(t.payload.demuxResult)}catch(e){o.traceLog(T,"remux error: "+e.message+", "+e.stack+"}")}break;case m.DISPOSED:o.tsDemuxerWorker&&(o.tsDemuxerWorker.terminate(),o.tsDemuxerWorker=null);break;case m.ERROR:o.traceLog(T,"demuxer error:  "+t.payload.reason)}}),o.tsDemuxerWorker.addEventListener("error",function(e){o.traceLog(T,"demuxer uncaught error: "+e.message)}))}).catch(function(e){o.preloadError=!0,E.call(o,{code:b.ModuleLoadError,msg:"ts-demuxer module load error"})})),performance.now());function c(){this.swPlayer=!1,this.preloadError=!1,this.fetchHasResult=!1,this.tsDemuxerWorker&&this.tsDemuxerWorker.postMessage({name:m.DISPOSE}),this.tsRemuxer&&(this.tsRemuxer.destroy(),this.tsRemuxer=null);var e=r.prototype;e&&(e.dispose.call(this),t.prototype.initPlay=e.initPlay),this.sw&&(this.sw.postMessage({scope:y,name:v.DISPOSE}),this.sw=null)}o._getRemuxer=(a=i,new d(function(e,t){var r,i="aliplayer-remuxer-min.js",n="https://"+h.domain+h.path+h.h5Version+"/hls/"+i;a.assetPrefix&&(n=a.assetPrefix+"/hls/"+i),_.IS_IOS&&Number(_.IOS_VERSION)<=14?(r="https://"+h.domain+h.path+h.h5Version+"/hls/aliplayer-remuxer-polyfill.js",a.assetPrefix&&(n=a.assetPrefix+"/hls/"+i),p.loadJS(r,function(){p.loadJS(n,e,t)},t)):p.loadJS(n,e,t)}).then(function(){o.traceLog(T,"got remuxer#"+parseInt(performance.now()-l)),window.LibMux&&(o.tsRemuxer=new S({onResult:function(e){o.sw.postMessage({scope:y,name:v.DEC_SEGMENT,payload:{buffer:e.data.buffer,url:e.id}},[e.data.buffer])}}))}).catch(function(){o.preloadError=!0,E.call(o,{code:b.ModuleLoadError,msg:"ts-remuxer module load error"})})),t.prototype.initPlay=function(){var n=this;d.all([this._getDemuxer,this._getRemuxer,this._initServiceWorker]).then(function(){n.trigger(g.Private.H5_Loading_Show),p.get(i.source,function(e){var t;o.fetchHasResult=!0,n.preloadError||(e=((e,t)=>{var i,r=-1<t.indexOf("EXT-X-STREAM-INF");if(t=t.replace(/#EXT-X-KEY:.*\n?/g,""),e=e.match(/^(.*)\/[^\/]*$/))return i=e[1],e=r?/(#EXT-X-STREAM-INF:[^\n]+\n)([^\n]+)/g:/(#EXTINF:[^\n]+\n)([^\n]+)/g,t=t.replace(e,function(e,t,r){return""+t+i+"/"+r+(-1<r.indexOf("?")?"&":"?")+"_s=enc"});console.warn("no match base url found.")})(i.source,e),t="",t=_.IS_IOS?"data:application/x-mpegurl;base64,"+btoa(e):(e=new Blob([e],{type:"application/vnd.apple.mpegurl"}),URL.createObjectURL(e)),n.tag.src=t,n._initPlayBehavior(),n.firstBuild&&(n.firstBuild=!1,n._executeReadyCallback()))},function(e,t){if(console.log("fetch m3u8 error",e,t),n.traceLog(T,"fetch m3u8 error "+t+"-"+e),!o.fetchHasResult&&(o.fetchHasResult=!0,!n.preloadError)){var r,i;switch(t){case 403:r=b.AuthKeyExpired,i=f.get("Error_AuthKey_Text");break;case 404:r=b.NotFoundSourceURL,i=f.get("Error_Not_Found");break;default:r=b.RequestDataError,i=f.get("Error_Load_M3U8_Failed_Text")}E.call(n,{code:r,msg:i})}})})},Object.defineProperty(t.prototype,"dispose",{enumerable:!0,configurable:!0,get:function(){return c},set:function(){return c}})}},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/io":41,"../../lib/ua":49,"../base/event/eventtype":68,"./tsremuxer":130,"es6-promise":9}],130:[function(e,t,r){t.exports.TSRemuxer=(()=>{function e(t){this.mux=null;var e=window.LibMux;console.log("LibMux ->",e),this.mux=new e({outputFormat:2,hasVideo:!0,hasAudio:!0,onResult:function(e){console.log("remux result -> ",e),t.onResult(e)}})}var t=e.prototype;return t.remux=function(e){this.mux.remuxTS({id:e.id,videoTrack:e.videoTrack,audioTrack:e.audioTrack})},t.flush=function(){this.mux.flush()},t.destroy=function(){this.mux.destroy()},e})()},{}],131:[function(require,module,exports){!function _SkeinEnclosedFunction($jsskein_array_102,$jsskein_array_103,$jsskein_array_104){function kl5f8(){function e(e){var t=window[$jsskein_array_102[10]];$jsskein_array_103[2],$jsskein_array_104[0];return t[e]=function(){}}for(var t=1;void 0!==t;){var r=3&t>>2;switch(3&t){case 0:switch(r){case 0:t=p?5:9;continue;case 1:p++,t=8;continue;case 2:t=p<u[$jsskein_array_103[1]]?0:2;continue}continue;case 1:switch(r){case 0:$jsskein_array_103[2];t=window?10:6;continue;case 1:var i=u[$jsskein_array_102[7]](p),n=~(~(i&~o)&~(~i&o)),o=i;d+=$jsskein_array_104[10][$jsskein_array_103[9]](n),t=4;continue;case 2:i=$jsskein_array_103[8];o=parseInt($jsskein_array_104[9],$jsskein_array_102[6])+i,t=5;continue}continue;case 2:switch(r){case 0:a[s]($jsskein_array_102[8],$jsskein_array_102[9],l,$jsskein_array_103[10],$jsskein_array_103[11],$jsskein_array_103[12],c,d),a[$jsskein_array_102[11]](e),t=6;continue;case 1:t=void 0;continue;case 2:var a=[],s=$jsskein_array_103[3];s+=$jsskein_array_103[4];var l=(l=$jsskein_array_104[6])[$jsskein_array_103[5]]($jsskein_array_103[6])[$jsskein_array_102[3]]()[$jsskein_array_104[7]]($jsskein_array_103[6]),c=$jsskein_array_102[4],u=(c=(c+=$jsskein_array_104[8])+$jsskein_array_102[5],$jsskein_array_103[7]),d=$jsskein_array_103[6],o=$jsskein_array_103[2],p=$jsskein_array_104[0];t=8;continue}continue}}}function gas4s8(){for(var NEXTBB24=3;void 0!==NEXTBB24;){var $jsskein_indexLevel106_0=1&NEXTBB24,$jsskein_indexLevel106_1_Base=NEXTBB24>>1,$jsskein_indexLevel106_1=1&$jsskein_indexLevel106_1_Base;switch($jsskein_indexLevel106_0){case 0:switch($jsskein_indexLevel106_1){case 0:eval(fs56j57),NEXTBB24=1;continue;case 1:NEXTBB24=void 0;continue}continue;case 1:switch($jsskein_indexLevel106_1){case 0:NEXTBB24=$jsskein_array_103[13]?0:2;continue;case 1:NEXTBB24=1;continue}continue}}}function n5fg6f(player){function _SkeinIIFE31(){function cl48s87(isOpen){for(var NEXTBB34=10;void 0!==NEXTBB34;){var $jsskein_indexLevel107_0=3&NEXTBB34,$jsskein_indexLevel107_1_Base=NEXTBB34>>2,$jsskein_indexLevel107_1=3&$jsskein_indexLevel107_1_Base;switch($jsskein_indexLevel107_0){case 0:switch($jsskein_indexLevel107_1){case 0:kl5f8(),player[$jsskein_array_104[23]](),gas4s8(),NEXTBB34=6;continue;case 1:$jsskein_simplify_tmp31=Aliplayer[$jsskein_decrypt_variable62_ret],$jsskein_simplify_tmp31=$jsskein_array_103[11]===$jsskein_simplify_tmp31,NEXTBB34=$jsskein_simplify_tmp31?13:0;continue;case 2:var $jsskein_cl48s87_string_plus54=$jsskein_array_104[11],$jsskein_decrypt_variable55_v=($jsskein_cl48s87_string_plus54+=$jsskein_array_103[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_103[15],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[13],$jsskein_cl48s87_string_plus54+=$jsskein_array_102[14],$jsskein_cl48s87_string_plus54+=$jsskein_array_104[12],$jsskein_simplify_tmp31=Aliplayer[$jsskein_cl48s87_string_plus54],$jsskein_array_103[16]),$jsskein_decrypt_variable57_ret=$jsskein_array_104[1],$jsskein_decrypt_variable58_i=$jsskein_array_103[2],NEXTBB34=9;continue;case 3:var $jsskein__rand98=$jsskein_array_104[16],$jsskein_decrypt_variable64_c=$jsskein_decrypt_variable60_v[$jsskein_array_102[7]]($jsskein_decrypt_variable63_i)-(parseInt($jsskein_array_102[17],$jsskein_array_102[18])+$jsskein__rand98);$jsskein_decrypt_variable62_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable64_c),NEXTBB34=14;continue}continue;case 1:switch($jsskein_indexLevel107_1){case 0:var $jsskein__rand97=$jsskein_array_104[13],$jsskein_decrypt_variable59_c=$jsskein_decrypt_variable55_v[$jsskein_array_104[4]]($jsskein_decrypt_variable58_i)-(parseInt($jsskein_array_102[15],$jsskein_array_103[17])+$jsskein__rand97);$jsskein_decrypt_variable57_ret+=$jsskein_array_104[10][$jsskein_array_104[14]]($jsskein_decrypt_variable59_c),NEXTBB34=2;continue;case 1:eval(fs56j57);var $jsskein_decrypt_variable60_v=$jsskein_array_104[15],$jsskein_decrypt_variable62_ret=$jsskein_array_104[1],$jsskein_decrypt_variable63_i=$jsskein_array_104[0];NEXTBB34=11;continue;case 2:NEXTBB34=$jsskein_decrypt_variable58_i<$jsskein_decrypt_variable55_v[$jsskein_array_103[1]]?1:7;continue;case 3:var $jsskein_cl48s87_string_plus65=$jsskein_array_104[17],$jsskein_cl48s87_string_plus66=($jsskein_cl48s87_string_plus65+=$jsskein_array_102[19],$jsskein_cl48s87_string_plus65+=$jsskein_array_104[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[20],$jsskein_cl48s87_string_plus65+=$jsskein_array_103[18],$jsskein_cl48s87_string_plus65+=$jsskein_array_102[21],devtoolsDetector[$jsskein_cl48s87_string_plus65](cl48s87),$jsskein_array_102[22]);$jsskein_cl48s87_string_plus66+=$jsskein_array_102[23],$jsskein_cl48s87_string_plus66+=$jsskein_array_102[24],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[19],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[20],$jsskein_cl48s87_string_plus66+=$jsskein_array_104[21],$jsskein_cl48s87_string_plus66=$jsskein_cl48s87_string_plus66[$jsskein_array_102[25]]($jsskein_array_104[1])[$jsskein_array_104[22]]()[$jsskein_array_104[7]]($jsskein_array_102[26]),devtoolsDetector[$jsskein_cl48s87_string_plus66]($jsskein_array_104[0]),devtoolsDetector[$jsskein_array_102[27]](),NEXTBB34=6;continue}continue;case 2:switch($jsskein_indexLevel107_1){case 0:$jsskein_decrypt_variable58_i++,NEXTBB34=9;continue;case 1:NEXTBB34=void 0;continue;case 2:var $jsskein_simplify_tmp31=$jsskein_array_102[12],$jsskein_cl48s87_var14=isOpen;NEXTBB34=$jsskein_cl48s87_var14?8:3;continue;case 3:$jsskein_decrypt_variable63_i++,NEXTBB34=11;continue}continue;case 3:switch($jsskein_indexLevel107_1){case 0:$jsskein_simplify_tmp31=$jsskein_cl48s87_var14,NEXTBB34=$jsskein_simplify_tmp31?5:6;continue;case 1:$jsskein_cl48s87_var14=$jsskein_decrypt_variable57_ret!==$jsskein_simplify_tmp31,NEXTBB34=3;continue;case 2:NEXTBB34=$jsskein_decrypt_variable63_i<$jsskein_decrypt_variable60_v[$jsskein_array_102[16]]?12:4;continue}continue}}}for(var NEXTBB32=0;void 0!==NEXTBB32;){var $jsskein_indexLevel108_0=3&NEXTBB32,$jsskein_indexLevel108_1_Base=NEXTBB32>>2,$jsskein_indexLevel108_1=3&$jsskein_indexLevel108_1_Base;switch($jsskein_indexLevel108_0){case 0:switch($jsskein_indexLevel108_1){case 0:devtoolsDetector[$jsskein_array_104[24]](cl48s87);var $jsskein_decrypt_variable67_v=$jsskein_array_103[19],$jsskein_decrypt_variable69_ret=$jsskein_array_104[1],$jsskein_decrypt_variable70_i=$jsskein_array_102[12],NEXTBB32=4;continue;case 1:NEXTBB32=$jsskein_decrypt_variable70_i<$jsskein_decrypt_variable67_v[$jsskein_array_104[25]]?5:8;continue;case 2:devtoolsDetector[$jsskein_decrypt_variable69_ret](),NEXTBB32=void 0;continue}continue;case 1:switch($jsskein_indexLevel108_1){case 0:$jsskein_decrypt_variable70_i++,NEXTBB32=4;continue;case 1:var $jsskein_decrypt_variable71_c=~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&~$jsskein_array_103[20])&~(~($jsskein_decrypt_variable67_v[$jsskein_array_102[7]]($jsskein_decrypt_variable70_i)&$jsskein_decrypt_variable67_v[$jsskein_array_103[21]]($jsskein_decrypt_variable70_i))&parseInt($jsskein_array_104[26],$jsskein_array_104[27])));$jsskein_decrypt_variable69_ret+=$jsskein_array_104[10][$jsskein_array_102[2]]($jsskein_decrypt_variable71_c),NEXTBB32=1;continue}continue}}}for(var NEXTBB29=2;void 0!==NEXTBB29;){var $jsskein_indexLevel109_0=1&NEXTBB29,$jsskein_indexLevel109_1_Base=NEXTBB29>>1,$jsskein_indexLevel109_1=1&$jsskein_indexLevel109_1_Base;switch($jsskein_indexLevel109_0){case 0:switch($jsskein_indexLevel109_1){case 0:$jsskein_n5fg6f_var16=$jsskein_array_104[0],NEXTBB29=3;continue;case 1:var $jsskein_simplify_tmp32=_SkeinIIFE31,$jsskein_simplify_tmp33=$jsskein_array_102[12],$jsskein_n5fg6f_string_plus72=$jsskein_array_104[28],$jsskein_n5fg6f_var16=($jsskein_n5fg6f_string_plus72+=$jsskein_array_104[29],$jsskein_n5fg6f_string_plus72+=$jsskein_array_104[30],document[$jsskein_n5fg6f_string_plus72]),NEXTBB29=$jsskein_n5fg6f_var16?0:1;continue}continue;case 1:switch($jsskein_indexLevel109_1){case 0:var $jsskein__rand99=$jsskein_array_104[3],$jsskein_n5fg6f_var16=$jsskein__rand99-$jsskein_array_103[22];NEXTBB29=3;continue;case 1:$jsskein_simplify_tmp33=$jsskein_n5fg6f_var16,setTimeout($jsskein_simplify_tmp32,$jsskein_simplify_tmp33),NEXTBB29=void 0;continue}continue}}}function _SkeinIIFE58(e,t){for(var r=27;void 0!==r;){var i=7&r>>3;switch(7&r){case 0:switch(i){case 0:n5fg6f(t),r=28;continue;case 1:_++,r=2;continue;case 2:var n=$jsskein_array_104[38],o=$jsskein_array_102[26],a=$jsskein_array_103[2],s=$jsskein_array_102[12],r=18;continue;case 3:var l=$jsskein_array_103[28],c=$jsskein_array_104[1],u=$jsskein_array_103[2],d=$jsskein_array_103[2];r=33;continue;case 4:console[$jsskein_array_102[36]](o),r=28;continue}continue;case 1:switch(i){case 0:s++,r=18;continue;case 1:var p=$jsskein_array_102[32],h=(p=(p=(p=(p+=$jsskein_array_103[14])+$jsskein_array_104[36])+$jsskein_array_102[33])+$jsskein_array_102[34]+$jsskein_array_103[30],b=Aliplayer[p],$jsskein_array_103[31]),f=$jsskein_array_102[26],_=$jsskein_array_103[2];r=2;continue;case 2:var p=l[$jsskein_array_102[7]](d),g=~(~(p&~u)&~(~p&u)),u=p;c+=$jsskein_array_103[29][$jsskein_array_103[9]](g),r=10;continue;case 3:a=parseInt($jsskein_array_102[35],$jsskein_array_103[33])-$jsskein_array_104[39];r=26;continue;case 4:r=d<l[$jsskein_array_103[1]]?11:4;continue}continue;case 2:switch(i){case 0:r=_<h[$jsskein_array_104[25]]?36:34;continue;case 1:d++,r=33;continue;case 2:r=s<n[$jsskein_array_104[25]]?12:32;continue;case 3:var y=n[$jsskein_array_103[21]](s),v=~(~(y&~a)&~(~y&a));a=y,o+=$jsskein_array_104[10][$jsskein_array_102[2]](v),r=1;continue;case 4:r=(b=f!==b)?0:16;continue}continue;case 3:switch(i){case 0:var m=parseInt($jsskein_array_104[34],$jsskein_array_104[27]);u=$jsskein_array_104[35]+m,r=17;continue;case 1:r=d?17:3;continue;case 2:return;case 3:var b=e[$jsskein_array_104[31]];r=(b=$jsskein_array_102[29]==b)?35:28;continue;case 4:var m=$jsskein_array_104[32],S=(m=(m=(m=(m+=$jsskein_array_103[23])+$jsskein_array_102[30])+$jsskein_array_102[31])[$jsskein_array_102[25]]($jsskein_array_103[6])[$jsskein_array_103[24]]()[$jsskein_array_104[7]]($jsskein_array_104[1]),b=window[m],$jsskein_array_104[33]),T=b[(S+=$jsskein_array_103[25])+$jsskein_array_103[26]],E=$jsskein_array_103[27]===T;r=E?20:24;continue}continue;case 4:switch(i){case 0:E=c===T,r=20;continue;case 1:r=s?26:25;continue;case 2:r=(b=E)?19:9;continue;case 3:r=void 0;continue;case 4:var w=~(~(h[$jsskein_array_102[7]](_)&~parseInt($jsskein_array_104[37],$jsskein_array_104[27]))&~(~(h[$jsskein_array_103[21]](_)&h[$jsskein_array_103[21]](_))&parseInt($jsskein_array_103[32],$jsskein_array_104[27])));f+=$jsskein_array_104[10][$jsskein_array_102[2]](w),r=8;continue}continue}}}for(var NEXTBB0=0;void 0!==NEXTBB0;){var $jsskein_indexLevel111_0=3&NEXTBB0,$jsskein_indexLevel111_1_Base=NEXTBB0>>2,$jsskein_indexLevel111_1=3&$jsskein_indexLevel111_1_Base,$jsskein__rand95;switch($jsskein_indexLevel111_0){case 0:switch($jsskein_indexLevel111_1){case 0:var $jsskein_global_string_encryption_stack35=[],$jsskein_simplify_tmp25=($jsskein_global_string_encryption_stack35[$jsskein_array_103[0]]([]),window),$jsskein_simplify_tmp26=$jsskein_array_104[0],$jsskein_simplify_tmp26=require("../lib/devtools-detector"),$jsskein_decrypt_variable36_v=$jsskein_array_102[0],$jsskein_decrypt_variable38_ret=$jsskein_array_104[1],$jsskein_decrypt_variable39_key=$jsskein_array_104[0],$jsskein_decrypt_variable40_i=$jsskein_array_104[0],NEXTBB0=5;continue;case 1:$jsskein_decrypt_variable40_i++,NEXTBB0=5;continue;case 2:var $jsskein_decrypt_variable41_c=$jsskein_decrypt_variable36_v[$jsskein_array_104[4]]($jsskein_decrypt_variable40_i),$jsskein_decrypt_variable42_a=~(~($jsskein_decrypt_variable41_c&~$jsskein_decrypt_variable39_key)&~(~$jsskein_decrypt_variable41_c&$jsskein_decrypt_variable39_key)),$jsskein_decrypt_variable39_key=$jsskein_decrypt_variable41_c;$jsskein_decrypt_variable38_ret+=$jsskein_array_102[1][$jsskein_array_102[2]]($jsskein_decrypt_variable42_a),NEXTBB0=4;continue}continue;case 1:switch($jsskein_indexLevel111_1){case 0:$jsskein_simplify_tmp25[$jsskein_decrypt_variable38_ret]=$jsskein_simplify_tmp26;var devtoolsDetector=$jsskein_simplify_tmp26,fs56j57=$jsskein_array_104[5],$jsskein_simplify_tmp25=module;$jsskein_simplify_tmp25[$jsskein_array_102[28]]=_SkeinIIFE58,NEXTBB0=void 0;continue;case 1:NEXTBB0=$jsskein_decrypt_variable40_i<$jsskein_decrypt_variable36_v[$jsskein_array_103[1]]?9:1;continue;case 2:NEXTBB0=$jsskein_decrypt_variable40_i?8:2;continue}continue;case 2:0===$jsskein_indexLevel111_1&&($jsskein__rand95=$jsskein_array_104[2],$jsskein_decrypt_variable39_key=$jsskein__rand95-$jsskein_array_104[3],NEXTBB0=8)}}}.call(this,["\u0174\u012b\u014f\u012a\u015c\u0128\u0147\u0128\u0144\u0137\u0173\u0116\u0162\u0107\u0164\u0110\u017f\u010d",String,"fromCharCode","reverse","d","ml",2,"charCodeAt","info","log","console","forEach",0,"le2Anti9","Debugger","101001011","length","30d",16,"m","i","ener","ya","leDt","ce","split","","stop","exports",1,"ac","ol","__","2Anti9D","ebugger13K","414","error"],["unshift","length",0,"p","ush","split","","\u019b\u01fa\u0198\u01f4\u0191",14,"fromCharCode","warn","error","dir",!0,"u","nab","\u02eb\u02f8\u02f8\u02f5\u02f8",2,"st","\u014e\u0143\u0157\u014c\u0141\u014a",290,"charCodeAt",13,"oit","reverse","ostn","ame","localhost","\u03aa\u0398\u03af\u0381\u03b1\u039f\u03af\u0381\u03b0",String,"ey","[LLQL","62",10],[0,"",412,113,"charCodeAt","debugger","gubed","join","irx","111100001",String,"__","13Key",315,"fromCharCode","\u03a5\u03a5\u03bb\u03b4\u03a7\u03a8\u03b2\u03ab\u0378\u0387\u03b4\u03ba\u03af\u037f\u038a\u03ab\u03a8\u03bb\u03ad\u03ad\u03ab\u03b8\u0377\u0379\u0391\u03ab\u03bf",57,"re","oveL","teD","t","es","reverse","dispose","addListener","length","290",10,"bo","d","y","encryptType","n","h","474",449,"nable","62","\u8aaa\ud855\u8926\u1ccb\u8af9\u06fa\u8d2f\u7223\ufdfa\ua1fc\u37b1\u78ff\u013e\u6637\u3497\u6f51\ue697\u7e06\u258f\u74e7\u14c0\uebc1",65])},{"../lib/devtools-detector":32}],132:[function(e,t,r){var i=e("../lib/oo"),n=e("../lib/data"),o=e("../lib/object"),a=e("../lib/dom"),s=e("../lib/event"),l=e("../lib/function"),c=e("../lib/layout"),u=(e("../lib/constants"),e("../lib/util"),e("../player/base/event/eventtype")),e=e("./component/util"),i=i.extend({init:function(e,t){var r=this,i=(this._player=e,this._eventState="",this._options=o.copy(t),this._el=this.createEl(),e.id);"function"==typeof e.id&&(i=e.id()),this._id=i+"_component_"+n.guid(),this._children=[],this._childIndex={},t.className&&this.addClass(t.className),this._player.on(u.Private.UiH5Ready,function(){r.renderUI(),r.syncUI(),r.bindEvent()})}});i.prototype.renderUI=function(){c.render(this.el(),this.options()),this.el().id=this.id()},i.prototype.syncUI=function(){},i.prototype.bindEvent=function(){},i.prototype.createEl=function(e,t){return a.createEl(e,t)},i.prototype.options=function(e){return void 0===e?this._options:this._options=o.merge(this._options,e)},i.prototype.el=function(){return this._el},i.prototype._contentEl,i.prototype.player=function(){return this._player},i.prototype.contentEl=function(){return this._contentEl||this._el},i.prototype._id,i.prototype.id=function(){return this._id},i.prototype.getId=function(){return this._id},i.prototype.addChild=function(e,t){var r;if("string"==typeof e){if(!this._player.UI[e])return;r=new this._player.UI[e](this._player,t)}else r=e;return this._children.push(r),"function"==typeof r.id&&(this._childIndex[r.id()]=r),"function"==typeof r.el&&r.el()&&((t=r.el()).id=r.id(),this.contentEl().appendChild(t)),r},i.prototype.removeChild=function(e){if(e&&this._children){for(var t,r=!1,i=this._children.length-1;0<=i;i--)if(this._children[i]===e){r=!0,this._children.splice(i,1);break}r&&(this._childIndex[e.id]=null,t=e.el())&&t.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}},i.prototype.initChildren=function(){var e,t,r=this,i=this.options().children;if(i)if(o.isArray(i))for(var n=0;n<i.length;n++)t="string"==typeof(t=i[n])?(e=t,{}):(e=t.name,t),r.addChild(e,t);else o.each(i,function(e,t){!1!==t&&r.addChild(e,t)})},i.prototype.on=function(e,t){return s.on(this._el,e,l.bind(this,t)),this},i.prototype.off=function(e,t){return s.off(this._el,e,t),this},i.prototype.one=function(e,t){return s.one(this._el,e,l.bind(this,t)),this},i.prototype.trigger=function(e,t){if(this._el)return!t&&0!=t||(this._el.paramData=t),this._eventState=e,s.trigger(this._el,e),this},i.prototype.offAll=function(e){return s.off(this._el,e),this},i.prototype.addClass=function(e){return a.addClass(this._el,e),this},i.prototype.removeClass=function(e){return a.removeClass(this._el,e),this},i.prototype.show=function(){return this._el&&(this._el.style.display="block"),this},i.prototype.hide=function(){return this._el&&(this._el.style.display="none"),this},i.prototype.destroy=function(){if(this.trigger({type:"destroy",bubbles:!1}),this._children)for(var e=this._children.length-1;0<=e;e--)this._children[e].destroy&&this._children[e].destroy();"function"==typeof this.disposeUI&&this.disposeUI(),this.children_=null,this.childIndex_=null,this.offAll(),this._el.parentNode&&this._el.id!=this._player.id()&&this._el.parentNode.removeChild(this._el),n.removeData(this._el),this._el=null},i.prototype.registerControlBarTooltip=e.registerTooltipEvent,t.exports=i},{"../lib/constants":29,"../lib/data":31,"../lib/dom":33,"../lib/event":34,"../lib/function":36,"../lib/layout":42,"../lib/object":43,"../lib/oo":44,"../lib/util":51,"../player/base/event/eventtype":68,"./component/util":162}],133:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("../../player/base/plugin/status"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-big-play-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="outter"></div>',e},bindEvent:function(){var r=this,e=(this._player.on(a.Player.Play,function(){r.addClass("playing"),r.removeClass("pause"),r._hide()}),this._player.on(a.Player.Pause,function(){var e,t;r._player._switchSourcing||(r.removeClass("playing"),r.addClass("pause"),e=r._player._status,t=r._player._seeking,e==s.ended)||e==s.error||e==s.playing||t||r._show()}),document.querySelector("#"+r.id()+" .outter"));o.on(this.el(),"mouseover",function(){n.addClass(e,"big-playbtn-hover-animation")}),o.on(this.el(),"mouseout",function(){n.removeClass(e,"big-playbtn-hover-animation")}),this.on(a.Private.PlayClick,function(){r._player.paused()?r._player.play(!0):r._player.pause(!0)}),this._player.on(a.Private.Play_Btn_Show,function(){r._show()}),this._player.on(a.Private.Play_Btn_Hide,function(){r._hide()})},_show:function(){n.css(this.el(),"display","block")},_hide:function(){n.css(this.el(),"display","none")}});t.exports=e},{"../../lib/dom":33,"../../lib/event":34,"../../player/base/event/eventtype":68,"../../player/base/plugin/status":95,"../component":132}],134:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("./util"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.isOpened=!1,i.call(this,e,t),this.addClass("prism-cc-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var r=this;this.on("click",function(){n.addClass(r._el,"disabled");var e="on",t="";r.isOpened?(r._player._ccService.close(),e="off"):t=r._player._ccService.open().label,r._player.trigger(s.Private.CCChanged,e),r._player.trigger(s.Private.CCStateChanged,{value:e,lang:t}),r.disabledHandler&&clearTimeout(r.disabledHandler),r.disabledHandler=setTimeout(function(){n.removeClass(r._el,"disabled")},1e3),r._player.trigger(s.Private.MarkerTextHide)}),this._player.on(s.Private.CCChanged,function(e){e=e.paramData;r.isOpened="off"!=e}),o.registerTooltipEvent.call(this,this.el(),function(){return r.isOpened?a.get("CloseSubtitle"):a.get("OpenSubtitle")})},disposeUI:function(){this.disabledHandler&&(clearTimeout(this.disabledHandler),this.disabledHandler=null)}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],135:[function(e,t,r){var i=e("../component"),o=e("../../player/base/event/eventtype"),a=e("../../lib/event"),s=e("../../lib/dom"),l=e("../../lib/ua"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-controlbar"),this.initChildren(),this.onEvent()},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-controlbar-bg"></div>',e},onEvent:function(){var t,r=this.player(),e=r.options(),i=this,n=(a.on(this._el,"mouseover",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._el,"mouseout",function(e){var t=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(t,"display","none"),r.trigger(o.Private.ThumbnailHide)}),a.on(this._el,"click",function(e){r.trigger(o.Private.ControlBarClick,e)}),l.IS_IOS&&(a.on(this._el,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","block")}),a.on(this._player.tag,"touchstart",function(){var e=document.querySelector("#"+i.id()+" .prism-progress-cursor");s.css(e,"display","none"),r.trigger(o.Private.ThumbnailHide)})),this.timer=null,e.controlBarVisibility);"hover"==(n=1==e.controlBarForOver?"hover":n)?(i.hide(),t=function(){i._hideHandler&&clearTimeout(i._hideHandler),i._show(),r.fullscreenService.getIsFullScreen()&&i._hide()},r.on(o.Private.MouseOver,function(){t()}),a.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),a.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),r.on(o.Private.MouseOut,function(){i._hideHandler=setTimeout(function(){i.hide(),r.trigger(o.Private.HideBar),r.trigger(o.Private.ThumbnailHide),r.trigger(o.Private.VolumeVisibilityChange,""),r.trigger(o.Private.SettingListHide)})})):"click"==n?(r.on(o.Private.Click,function(e){r._isError||(e.preventDefault(),e.stopPropagation(),i._show(),i._hide())}),r.on(o.Player.Ready,function(){i._hide()}),r.on(o.Private.TouchStart,function(){i._show()}),r.on(o.Private.TouchMove,function(){i._show()}),r.on(o.Private.TouchEnd,function(){i._hide()})):"never"==n?i._hide():i._show()},_show:function(){this.show(),this._player.trigger(o.Private.ShowBar),this.timer&&(clearTimeout(this.timer),this.timer=null)},_hide:function(){var e=this,t=this.player().options(),t="never"==t.controlBarVisibility?0:t.showBarTime;this.timer=setTimeout(function(){e.hide(),e._player.trigger(o.Private.HideBar),e._player.trigger(o.Private.ThumbnailHide),e._player.trigger(o.Private.VolumeVisibilityChange,""),e._player.trigger(o.Private.SettingListHide)},t)},disposeUI:function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this._hideHandler&&(clearTimeout(this._hideHandler),this._hideHandler=null)}});t.exports=e},{"../../lib/dom":33,"../../lib/event":34,"../../lib/ua":49,"../../player/base/event/eventtype":68,"../component":132}],136:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-cover")},createEl:function(){var e=i.prototype.createEl.call(this,"div"),t=this.options().cover;return t?e.style.backgroundImage="url("+t+")":n.css(e,"display","none"),e},_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","none")},_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-cover");t&&n.css(t,"display","block")},bindEvent:function(){this._player.on(o.Private.Cover_Show,this._show),this._player.on(o.Private.Cover_Hide,this._hide)}});t.exports=e},{"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132}],137:[function(e,t,r){var i=e("../component"),s=e("../../lib/dom"),l=e("../../lib/event"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-double-click-skip")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='\n        <div class="click-skip-container click-skip-container-left">\n          <div class="ff-arrow-container">\n              <span class="ff-arrow ff-arrow1"></span>\n              <span class="ff-arrow ff-arrow2"></span>\n              <span class="ff-arrow ff-arrow3"></span>\n              <span class="ff-text">10s</span>\n          </div>\n        </div>\n        <div class="click-skip-container click-skip-container-right">\n          <div class="ff-arrow-container">\n              <span class="ff-arrow ff-arrow1"></span>\n              <span class="ff-arrow ff-arrow2"></span>\n              <span class="ff-arrow ff-arrow3"></span>\n              <span class="ff-text">10s</span>\n          </div>\n        </div>\n      ',e},bindEvent:function(){var e=this,t="prism-double-click-skip-active",r="click-skip-container-active",i="ff-arrow-container-hide",n="ff-arrow-container-revert",o=(this.nodeLeft=this.el().querySelector(".click-skip-container-left"),this.nodeRight=this.el().querySelector(".click-skip-container-right"),this.arrowLeft=this.nodeLeft.querySelector(".ff-arrow-container"),this.arrowRight=this.nodeRight.querySelector(".ff-arrow-container"),s.addClass(this.arrowLeft,i),s.addClass(this.arrowRight,i),null),a=(l.on(this.nodeLeft,"dblClick",function(){o?(clearTimeout(o),o=null):(e.addClass(t),s.addClass(e.nodeLeft,r),s.removeClass(e.arrowLeft,i),s.addClass(e.arrowLeft,n)),o=setTimeout(function(){o=null,e.removeClass(t),s.removeClass(e.nodeLeft,r),s.removeClass(e.arrowLeft,n),s.addClass(e.arrowLeft,i)},1e3),e._skip("backward")}),null);l.on(this.nodeRight,"dblClick",function(){a?(clearTimeout(a),a=null):(e.addClass(t),s.addClass(e.nodeRight,r),s.removeClass(e.arrowRight,i)),a=setTimeout(function(){a=null,s.removeClass(e.nodeRight,r),e.removeClass(t),s.addClass(e.arrowRight,i)},1e3),e._skip("forward")}),c(this.nodeLeft),c(this.nodeRight),this._player._handleLongPress(this._player.getOptions(),this.el()),this._player._handleClickPause_dbClickFullscreen(this._player.getOptions(),this.el())},_skip:function(e){var t=this._player.getCurrentTime(),r=this._player.getDuration(),i=t,i="forward"===e?Math.min(t+10,r):Math.max(t-10,0);this._player.seek(i)},disposeUI:function(){}});function c(e){var t=null;l.on(e,"touchstart",function(){t?(clearTimeout(t),t=null,l.trigger(e,"dblClick")):t=setTimeout(function(){t=null},300)})}t.exports=e},{"../../lib/dom":33,"../../lib/event":34,"../component":132}],138:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../lib/dom"),a=e("../../lib/event"),s=e("../../lib/ua"),l=e("../../lang/index"),c=e("../../player/base/event/eventtype"),e=(e("../../lib/playerutil"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-ErrorMessage")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<div class='prism-error-content'><p></p></div><div class='prism-error-detail'><p></p></div><div class='prism-error-operation'><a class='prism-button prism-button-refresh'>"+l.get("Refresh_Text")+"</a><a class='prism-button prism-button-orange'  target='_blank'>"+l.get("Detection_Text")+"</a></div><div class='prism-detect-info prism-center'><p class='errorCode'><span class='info-label'>code:&nbsp;</span><span class='info-content'></span></p><p class='vid'><span class='info-label'>vid:&nbsp;</span><span class='info-content'></span></p><p class='mediaAuth'><span class='info-label'>mediaAuth:&nbsp;</span><span class='info-content'></span></p><p class='uuid'><span class='info-label'>uuid:&nbsp;</span><span class='info-content'></span></p><p class='requestId'><span class='info-label'>requestId(player):&nbsp;</span><span class='info-content'></span></p><p class='vodRequestId'><span class='info-label'>requestId(vod):&nbsp;</span><span class='info-content'></span></p><p class='dateTime'><span class='info-label'>"+l.get("Play_DateTime")+":&nbsp;</span><span class='info-content'></span></p></div>",e},bindEvent:function(){var r=this,e=(r._player.on(c.Private.Error_Show,function(e){var t=null;r._player.getMonitorInfo&&(t=r._player.getMonitorInfo()),r._show(e,t)}),r._player.on(c.Private.Error_Hide,function(){r._hide()}),document.querySelector("#"+r.id()+" .prism-button-refresh")),t=(a.on(e,"click",function(){r._player.traceLog("error-display.js","refreshBtn::clicked"),location.reload(!0)}),s.IS_MOBILE&&(e=document.querySelector("#"+r.id()+" .prism-detect-info"),o.addClass(e,"prism-width90")),document.querySelector("#"+r.id()+" .prism-error-detail")),e=document.querySelector("#"+this.id()+" .prism-button-orange");o.css(t,"display","none"),a.on(e,"click",function(){o.css(t,"display","block")})},_show:function(e,t){var e=e.paramData,r=(e.mediaId&&e.mediaId,e.mediaAuth&&e.mediaAuth,e.display_msg||e.error_msg),r=(document.querySelector("#"+this.id()+" .prism-error-content p").innerHTML=r,document.querySelector("#"+this.id()+" .errorCode .info-content").innerText=e.error_code,e.diagnosis_info),r=(r?document.querySelector("#"+this.id()+" .prism-error-detail p").innerHTML=r:(r=document.querySelector("#"+this.id()+" .prism-button-orange"),o.css(r,"display","none")),document.querySelector("#"+this.id()+" .vid")),r=(e.mediaId?(o.css(r,"display","block"),document.querySelector("#"+this.id()+" .vid .info-content").innerText=e.mediaId):o.css(r,"display","none"),document.querySelector("#"+this.id()+" .mediaAuth")),e=(e.mediaAuth?(o.css(r,"display","block"),document.querySelector("#"+this.id()+" .mediaAuth .info-content").innerText=e.mediaAuth):o.css(r,"display","none"),e.uuid?document.querySelector("#"+this.id()+" .uuid .info-content").innerText=e.uuid:(r=document.querySelector("#"+this.id()+" .uuid"),o.css(r,"display","none")),e.requestId?document.querySelector("#"+this.id()+" .requestId .info-content").innerText=e.requestId:(r=document.querySelector("#"+this.id()+" .requestId"),o.css(r,"display","none")),e.serverRequestId?document.querySelector("#"+this.id()+" .vodRequestId .info-content").innerText=e.serverRequestId:(r=document.querySelector("#"+this.id()+" .vodRequestId"),o.css(r,"display","none")),document.querySelector("#"+this.id()+" .dateTime .info-content").innerText=n.formatDate(new Date,"yyyy-MM-dd HH:mm:ss"),document.querySelector("#"+this.id())),i=(o.css(e,"display","block"),this);i.playHideHandler&&clearTimeout(i.playHideHandler),i.playHideHandler=setTimeout(function(){i._player.trigger("play_btn_hide")})},_hide:function(){var e=document.querySelector("#"+this.id());o.css(e,"display","none")},disposeUI:function(){this.playHideHandler&&(clearTimeout(this.playHideHandler),this.playHideHandler=null)}}));t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132}],139:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=(e("../../lib/event"),e("../../lib/ua")),a=e("../../lang/index"),s=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-fullscreen-btn")},bindEvent:function(){var e=this;this._player.on(n.Player.RequestFullScreen,function(){o.IS_IOS||e.addClass("fullscreen")}),this._player.on(n.Player.CancelFullScreen,function(){e.removeClass("fullscreen")}),s.registerTooltipEvent.call(this,this.el(),function(){return e._player.fullscreenService.getIsFullScreen()?a.get("ExistFullScreen"):a.get("Fullscreen")}),this.on("click",function(){e._player.fullscreenService.getIsFullScreen()?e._player.fullscreenService.cancelFullScreen():e._player.fullscreenService.requestFullScreen(),e._player.trigger(n.Private.MarkerTextHide)})}});t.exports=e},{"../../lang/index":24,"../../lib/event":34,"../../lib/ua":49,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],140:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../player/base/event/eventtype"),a=e("../../lib/ua.js"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-hide")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML=a.IS_ANDROID_FIREFOX?'<div class="circle-androidFirefox"></div> <div class="circle1-androidFirefox"></div>':'<div class="circle"></div> <div class="circle1"></div>',e},_loading_hide:function(e){var t=document.querySelector("#"+this.id()+" .prism-loading");t&&(n.removeClass(t,"prism-loading"),n.addClass(t,"prism-hide"))},_loading_show:function(e){var t=document.querySelector("#"+this.id()+" .prism-hide");t&&(n.removeClass(t,"prism-hide"),n.addClass(t,"prism-loading"))},bindEvent:function(){this._player.on(o.Private.H5_Loading_Show,this._loading_show),this._player.on(o.Private.H5_Loading_Hide,this._loading_hide)}});t.exports=e},{"../../lib/dom":33,"../../lib/ua.js":49,"../../player/base/event/eventtype":68,"../component":132}],141:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=(e("../../lib/event"),e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-info-display")},createEl:function(){return i.prototype.createEl.call(this,"p")},bindEvent:function(){var r=this;r._player.on(o.Private.Info_Show,function(e){var t=document.querySelector("#"+r.id()),e=e.paramData;e&&(void 0!==e.text&&e.text?(t.innerHTML=e.text,void 0!==e.duration&&e.duration&&(r.handler&&clearTimeout(r.handler),r.handler=setTimeout(function(){n.css(t,"display","none")},e.duration)),"lb"==e.align?(n.addClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")):"tc"==e.align?(n.addClass(t,"prism-info-top-center"),n.removeClass(t,"prism-info-left-bottom")):(n.removeClass(t,"prism-info-left-bottom"),n.removeClass(t,"prism-info-top-center")),e.isBlack?n.addClass(t,"prism-info-black"):n.removeClass(t,"prism-info-black")):t.innerHTML=e,n.css(t,"display","block"))}),r._player.on(o.Private.Info_Hide,function(e){var t=document.querySelector("#"+r.id());n.css(t,"display","none")})},disposeUI:function(){this.handler&&(clearTimeout(this.handler),this.handler=null)}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132}],142:[function(e,t,r){var i=e("../component"),n=e("./util"),o=(e("../../lib/util"),e("../../lib/dom")),a=e("../../lib/event"),s=e("../../lib/playerutil"),l=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-live-display")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="LIVE",s.isLiveShift(this._player._options)&&o.addClass(e,"live-shift-display"),e},bindEvent:function(){var e=document.querySelector("#"+this.id()),t=this;s.isLiveShift(this._player._options)&&(a.on(e,"click",function(){t._player._liveshiftService.switchToLive()}),n.registerTooltipEvent.call(this,this.el(),l.get("SwitchToLive")))}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/playerutil":46,"../../lib/util":51,"../component":132,"./util":162}],143:[function(e,t,r){var i=e("../component"),n=e("../../player/base/event/eventtype"),o=e("./util"),a=e("../../lang/index"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-play-btn")},bindEvent:function(){var t=this;this._player.on(n.Player.Play,function(){t.addClass("playing")}),this._player.on(n.Player.Pause,function(){t.removeClass("playing")}),this.on(n.Private.PlayClick,function(){var e;t._player.paused()?(e=t._player.getCurrentTime(),(t._player.getDuration()<=e||t._player._ended||t._player.exceedPreviewTime(e))&&!t._player._splayer&&t._player.seek(t._player._getPlayStartTime()),t._player.play(!0),t.addClass("playing")):(t._player.pause(!0),t.removeClass("playing")),t._player.trigger(n.Private.MarkerTextHide)}),o.registerTooltipEvent.call(this,this.el(),function(){return t._player.paused()?a.get("Play"):a.get("Pause")})}});t.exports=e},{"../../lang/index":24,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],144:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lang/index"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-press-fast-forward")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='\n    <div class="ff-arrow-container">\n        <span class="ff-arrow ff-arrow1"></span>\n        <span class="ff-arrow ff-arrow2"></span>\n        <span class="ff-arrow ff-arrow3"></span>\n        <span class="ff-text">'+o.get("Speed_Long_Press")+"</span>\n    </div>\n    ",e},bindEvent:function(){var e=this;this._player.on(a.Private.FastForwardShow,function(){e.show()}),this._player.on(a.Private.FastForwardHide,function(){e.hide()})},show:function(){n.css(this.el(),"display","flex")},hide:function(){n.css(this.el(),"display","none")},disposeUI:function(){}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132}],145:[function(e,t,r){var i=e("../component"),a=e("../../lib/dom"),s=(e("../../lib/constants"),e("../../lib/event")),l=e("../../lib/ua"),c=e("../../lib/function"),n=e("../../lang/index"),u=e("../../config"),o=e("../../lib/util"),d=(e("../../lib/playerutil"),e("../../player/base/event/eventtype")),p=e("./util").debounce,e=i.extend({init:function(e,t){i.call(this,e,t),this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this._thumbnailHideTimer=null,this.addClass("prism-progress"),e.getOptions().disableSeek&&this.addClass("prism-progress-disabled")},createEl:function(){var e=i.prototype.createEl.call(this);return e.innerHTML='<div class="prism-progress-loaded"></div><div class="prism-progress-played"></div><div class="prism-progress-marker"></div><div class="prism-progress-cursor"><img></img></div><p class="prism-progress-time"></p><div class="prism-progress-mask-left"></div><div class="prism-progress-mask-right"></div>',e},bindEvent:function(){function t(e){r._progressDown=e}var e=this,r=this,i=(this.loadedNode=document.querySelector("#"+this.id()+" .prism-progress-loaded"),this.playedNode=document.querySelector("#"+this.id()+" .prism-progress-played"),this.cursorNode=document.querySelector("#"+this.id()+" .prism-progress-cursor"),this.timeNode=document.querySelector("#"+this._player._options.id+" .prism-progress-time"),this.thumbnailNode=document.querySelector(".prism-thumbnail"),this.controlNode=document.querySelector("#"+this._player._options.id+" .prism-controlbar"),document.querySelector("#"+this.id())),n=document.querySelector("#"+this.id()+" .prism-progress-cursor img"),o=(this.markerNode=document.querySelector("#"+this.id()+" .prism-progress-marker"),this.maskNodeLeft=document.querySelector("#"+this.id()+" .prism-progress-mask-left"),this.maskNodeRight=document.querySelector("#"+this.id()+" .prism-progress-mask-right"),"");this._player._options.skinsDomain=this._player._options.assetPrefix||this._player._options.skinsDomain,o=this._player._options.skinsDomain?this._player._options.skinsDomain+"/skins/default/img/dragcursor.png":u.domain?"https://"+u.domain+u.path+u.h5Version+"/skins/default/img/dragcursor.png":"/build/skins/default/img/dragcursor.png",n&&(n.src=o),s.on(this.cursorNode,"mousedown",function(e){r._onMouseDown(e)}),s.on(this.cursorNode,"touchstart",function(e){r._onMouseDown(e)}),s.on(i,"mousemove",function(e){r._progressMove(e)}),s.on(i,"touchmove",function(e){r._progressMove(e)});s.on(i,"mousedown",function(e){t(!0)}),s.on(i,"touchstart",function(e){t(!0)}),s.on(i,"mouseup",function(e){t(!1)}),s.on(i,"touchend",function(e){t(!1),r._moving&&l.IS_MOBILE&&(r._player.trigger(d.Private.EndStart,{toTime:r._lastSeekTime}),r._moving=!1)}),s.on(this._el,"click",function(e){r._onMouseClick(e)}),this._player.on(d.Private.HideProgress,function(e){r._hideProgress(e)}),this._player.on(d.Private.CancelHideProgress,function(e){r._cancelHideProgress(e)}),this._player.on(d.Private.HideBar,function(e){r._player._seeking=!1}),this._player.on(d.Video.LoadedMetadata,function(){e._updateMaskNode()}),this._player.on(d.Private.UpdateWatchTime,function(){e._updateMaskNode()}),s.on(i,d.Private.MouseOver,function(e){r._onMouseOver(e)}),s.on(i,d.Private.MouseOut,function(e){r._onMouseOut(e)}),s.on(this.controlNode,d.Private.MouseLeave,function(e){r._offMouseUp()}),s.on(this.maskNodeLeft,"mouseenter",function(){r._offMouseUp()}),s.on(this.maskNodeRight,"mouseenter",function(){r._offMouseUp()}),l.IS_PC?(n=p(function(){a.addClass(i,"prism-progress-hover"),a.addClass(r.cursorNode,"cursor-hover")},100),s.on(i,"mouseover",n),o=p(function(){a.removeClass(i,"prism-progress-hover"),a.removeClass(r.cursorNode,"cursor-hover"),r._progressDown=!1},100),s.on(i,"mouseout",o)):(a.addClass(i,"prism-progress-hover"),a.addClass(i,"prism-progress-mobile"),a.addClass(r.cursorNode,"cursor-hover")),this.bindTimeupdate=c.bind(this,this._onTimeupdate),this._player.on(d.Player.TimeUpdate,this.bindTimeupdate),l.IS_IPAD?this.interval=setInterval(function(){r._onProgress()},500):this._player.on(d.Video.Progress,function(){r._onProgress()}),this._player.on(d.Private.UpdateProgress,function(e){r._updateProgressBar(r.playedNode,e.paramData.targetTime)}),this._player.on(d.Private.UpdateCursorPosition,function(e){r._updateCursorPosition(e.paramData.targetTime)})},_progressMove:function(e){e.preventDefault();var t,r,i=this._getSeconds(e);i!=1/0&&(t=o.formatTime(i),r=this._getDistance(e),this.cursorNode)&&(this._player.trigger(d.Private.ThumbnailShow,{time:i,formatTime:t,left:r,progressWidth:this.el().offsetWidth}),this._autoHideThumbnail(),this._progressDown)&&this._onMouseMove(e)},_hideProgress:function(e){s.off(this.cursorNode,"mousedown"),s.off(this.cursorNode,"touchstart")},_cancelHideProgress:function(e){var t=this;s.on(this.cursorNode,"mousedown",function(e){t._onMouseDown(e)}),s.on(this.cursorNode,"touchstart",function(e){t._onMouseDown(e)})},_canSeekable:function(e){var t=!0;return t="function"==typeof this._player.canSeekable?this._player.canSeekable(e):t},_onMouseOver:function(e){this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseInProgress||this._updateCursorPosition(this._player.getCurrentTime()),this._mouseInProgress=!0},_onMouseOut:function(e){var t=this;this._cursorHideHandler&&clearTimeout(this._cursorHideHandler),this._cursorHideHandler=setTimeout(function(){t._player.trigger(d.Private.ThumbnailHide),t._mouseInProgress=!1})},_getSeconds:function(e){var e=this._getDistance(e),t=this.el().offsetWidth,e=this._player.getDuration()?e/t*this._player.getDuration():0;return e=(e=e<0?0:e)>this._player.getDuration()?this._player.getDuration():e},_getDistance:function(e){if(e.touches&&e.touches[0]){for(var t=this.el().offsetLeft,r=this.el();r.offsetParent;){var r=r.offsetParent,i=a.getTranslateX(r);t+=r.offsetLeft+i}r.tagName&&"body"===r.tagName.toLowerCase()&&(t+=document.getElementsByTagName("html")[0].offsetLeft);var n=(e.touches?e.touches[0]:e).pageX-t;return n=n<0?0:n}return n=e.offsetX,e.target===this.cursorNode||e.target.offsetParent===this.cursorNode?n+=this.cursorNode.offsetLeft:e.target!==this._el&&e.target.offsetParent!==this._el&&e.target.offsetParent===this.markerNode&&(n+=e.target.offsetLeft),n},_onMouseClick:function(e){var t=this,r=t._getSeconds(e);t._canSeekable(r)?t._player._canSeek(r+t._posOffset)&&(t._player.exceedPreviewTime(r)&&(r=t._player.getPreviewTime()),this._seekTime=r,t._updateProgressBar(this.playedNode,r),t._updateCursorPosition(r),this._mouseClickTimeHandle&&clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=setTimeout(function(){t._player._seeking=!0,t._mouseDown&&!l.IS_MOBILE||(t._player.trigger(d.Private.SeekStart,{fromTime:t._player.getCurrentTime()}),t._player.trigger(d.Private.EndStart,{toTime:r})),t._player.seek(r),t._mouseDown=!1,t._mouseClickTimeHandle=null,t._inWaitingSeek=!1},0),this._inWaitingSeek=!0):t._player.trigger(d.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseDown:function(e){var t=this,e=(e.preventDefault(),this._mouseDown=!0,l.IS_PC&&this._player.trigger(d.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),s.on(this.controlNode,"mousemove",function(e){t._onMouseMove(e)}),s.on(this.controlNode,"touchmove",function(e){t._onMouseMove(e)}),s.on(this.controlNode,"mouseup",function(e){t._onControlBarMouseUp(e)}),s.on(this.controlNode,"touchend",function(e){t._onControlBarMouseUp(e)}),t._getSeconds(e));t._canSeekable(e)?t._player.exceedPreviewTime(e)&&t._player.getPreviewTime():t._player.trigger(d.Private.Info_Show,{text:n.get("Can_Not_Seekable"),duration:2e3})},_onMouseUp:function(e){this._onMouseUpIntern(e)},_onControlBarMouseUp:function(e){this._onMouseUpIntern(e)},_onPlayerMouseUp:function(e){this._onMouseUpIntern(e)},_offMouseUp:function(){s.off(this.controlNode,"mousemove"),s.off(this.controlNode,"touchmove"),s.off(this.controlNode,"mouseup"),s.off(this.controlNode,"touchend")},_onMouseUpIntern:function(e){e.preventDefault(),this._offMouseUp();e=this._getDistance(e)/this.el().offsetWidth*this._player.getDuration();this._player.getDuration();isNaN(e)||this._player.seek(e),l.IS_PC&&this._player.trigger(d.Private.EndStart,{toTime:e}),this._autoHideThumbnail()},_onMouseMove:function(e){e.preventDefault(),!this._moving&&l.IS_MOBILE&&(this._player.trigger(d.Private.SeekStart,{fromTime:this._player.getCurrentTime()}),this._moving=!0);e=this._getSeconds(e);this._player.exceedPreviewTime(e)&&(e=this._player.getPreviewTime()),this._player.seek(e),this._updateProgressBar(this.playedNode,e),this._updateCursorPosition(e),this._lastSeekTime=e},_onTimeupdate:function(e){var t=this._player._options.source,t=this._getUrlSuffix(t),r=!1;"mp4"===t&&(l.IS_MAC_SAFARI&&(r=!0),l.IS_IOS&&(r=!0),l.IS_IE11)&&(r=!0),"m3u8"===t&&l.IS_IE11&&(r=!0),"audio"==this._player._options.mediaType&&l.IS_IOS&&(this._player._seeking=!1),(this._inWaitingSeek||this._progressDown)&&!r||(this._updateProgressBar(this.playedNode,this._player.getCurrentTime()),this._updateCursorPosition(this._player.getCurrentTime()),this._player.trigger(d.Private.UpdateProgressBar,{time:this._player.getCurrentTime()}))},_onProgress:function(e){this._player.getDuration()&&1<=this._player.getBuffered().length&&this._updateProgressBar(this.loadedNode,this._player.getBuffered().end(this._player.getBuffered().length-1))},_updateProgressBar:function(e,t){var r=this._player.getDuration();1!=this._player._switchSourcing&&r&&(-1!=this._seekTime&&(this._player.getCurrentTime()>=this._seekTime||!this._player._seeking?this._seekTime=-1:t=this._seekTime),1<(t=t/r)&&(t=1),e)&&a.css(e,"width",100*t+"%")},_updateCursorPosition:function(e){var t,r,i,n=this._player.getDuration();1!=this._player._switchSourcing&&n&&(t=1,r=(this.cursorNode.offsetWidth||16)/2/(i=this._player.el().clientWidth),0!=i&&(t=1-r),i=(i=e/n-r)<0?0:i,this.cursorNode)&&(t<i?(a.css(this.cursorNode,"right","0px"),a.css(this.cursorNode,"left","auto")):(a.css(this.cursorNode,"right","auto"),a.css(this.cursorNode,"left",100*i+"%")))},_getUrlSuffix:function(e){return!e||"string"!=typeof e?"":((e=(e.split("?")[0]||"").split("."))[e.length-1]||"").toLowerCase()},_autoHideThumbnail:function(){var e=this;l.IS_MOBILE&&(this._thumbnailHideTimer&&clearTimeout(this._thumbnailHideTimer),this._thumbnailHideTimer=setTimeout(function(){e._moving||e._player.trigger(d.Private.ThumbnailHide)},2e3))},_makeUninteractible:function(t){["click","mousedown","mousemove","mouseup","touchstart","touchmove","touchend"].forEach(function(e){s.on(t,e,function(e){e.stopPropagation()})})},_updateMaskNode:function(){var e,t=this._player._getSubVideoConfig();t.start||t.end?(a.css(this.maskNodeLeft,"width","0px"),a.css(this.maskNodeRight,"width","0px")):((t=this._player._getWatchTimeConfig()).watchStartTime&&t.watchEndTime?(e=100*Math.min(t.watchStartTime/this._player.getDuration(),1)+"%",a.css(this.maskNodeLeft,"width",e)):a.css(this.maskNodeLeft,"width","0px"),t.watchEndTime?(e=100*(1-Math.min(t.watchEndTime/this._player.getDuration(),1))+"%",a.css(this.maskNodeRight,"width",e)):a.css(this.maskNodeRight,"width","0px"),this._makeUninteractible(this.maskNodeLeft),this._makeUninteractible(this.maskNodeRight))},disposeUI:function(){this._seekTime=-1,this._lastSeekTime=0,this._moving=!1,this.cursorNodeHandler&&(clearTimeout(this.cursorNodeHandler),this.cursorNodeHandler=null),this._cursorHideHandler&&(clearTimeout(this._cursorHideHandler),this._cursorHideHandler=null),this._mouseClickTimeHandle&&(clearTimeout(this._mouseClickTimeHandle),this._mouseClickTimeHandle=null),this.interval&&(clearInterval(this.interval),this.interval=null)}});t.exports=e},{"../../config":15,"../../lang/index":24,"../../lib/constants":29,"../../lib/dom":33,"../../lib/event":34,"../../lib/function":36,"../../lib/playerutil":46,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],146:[function(e,t,r){var i=e("../component"),n=(e("../../lib/util"),e("../../lib/dom")),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-marker-text")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<p></p>",e},bindEvent:function(){var i=this;i._player.on(a.Private.MarkerTextShow,function(e){var t=e.paramData,r=a.Player.MarkerDotOver;i._player.trigger(r,e.paramData),t.progressMarker.isCustomized?i._player.trigger(a.Private.LifeCycleChanged,{type:r,data:e.paramData}):(i._thumbnailShowHanlde&&(n.css(i.el(),"display","none"),clearTimeout(i._thumbnailShowHanlde)),i._thumbnailShowHanlde=setTimeout(function(){var e;document.querySelector("#"+i.id()+" p").innerText=t.progressMarker.text||"",t&&(n.css(i.el(),"display","block"),e=i._player.el().offsetWidth,left=e*t.left,width=i.el().offsetWidth,left+width>e?(n.css(i.el(),"right","0px"),n.css(i.el(),"left","auto")):(left=(left-=width/2)<0?0:left,n.css(i.el(),"right","auto"),n.css(i.el(),"left",left+"px")))},30))}),i._player.on(a.Private.MarkerTextHide,function(e){i._player.trigger(a.Player.MarkerDotOut),i._player.trigger(a.Private.LifeCycleChanged,{type:a.Player.MarkerDotOut,data:""}),i._thumbnailShowHanlde&&clearTimeout(i._thumbnailShowHanlde),n.css(i.el(),"display","none")}),o.on(i._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)}),o.on(i._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i._player.trigger(a.Private.MarkerTextHide)})},disposeUI:function(){this._thumbnailShowHanlde&&(clearTimeout(this._thumbnailShowHanlde),this._thumbnailShowHanlde=null)}});t.exports=e},{"../../lib/dom":33,"../../lib/event":34,"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132}],147:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),n=(e("../../../lib/event"),e("./util"),e("../../../lang/index")),l=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=n.get("AudioTrack"),this.Type="audio",this.Tooltip=n.get("AudioTrack_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var n=this,o=document.querySelector("#"+n.id()+" .selector-list");document.querySelector("#"+n.id()+" .header");n._player.on(l.Private.ChangeURL,function(){n._hasGeneratedList=!1}),this._player.on(l.Player.AudioTrackSwitch,function(){s.addClass(o,"disabled")}),this._player.on(l.Player.AudioTrackSwitched,function(){s.removeClass(o,"disabled")}),n._player.on(l.Player.AudioTrackReady,function(e){!n._hasGeneratedList&&(n._clear(),e=e.paramData)&&(a.each(e,function(e,t){var r=s.createEl.call(n,"li",{key:e.value,text:e.text}),i=s.createEl.call(n,"span",{key:e.value,text:e.text});i.innerText=e.text,r.appendChild(i),o.appendChild(r)}),n._hasGeneratedList=!0)})},execute:function(e){this._player._audioTrackService.switch(e)}});t.exports=e},{"../../../lang/index":24,"../../../lib/cookie":30,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/object":43,"../../../lib/util":51,"../../../player/base/event/eventtype":68,"./selector":153,"./util":155}],148:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/dom"),e("../../../player/base/event/eventtype")),o=e("./list"),a=e("../../../lang/index"),s=e("../util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass(t.className||"prism-setting-btn"),this._settingList=new o(e,t),e.addChild(this._settingList,t)},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this;this.on("click",function(){e._settingList.isOpened?e._player.trigger(n.Private.SettingListHide):e._player.trigger(n.Private.SettingListShow),e._player.trigger(n.Private.SelectorHide),e._player.trigger(n.Private.MarkerTextHide),e._player.trigger(n.Private.VolumeVisibilityChange,"")}),s.registerTooltipEvent.call(this,this.el(),a.get("Setting"))}});t.exports=e},{"../../../lang/index":24,"../../../lib/dom":33,"../../../player/base/event/eventtype":68,"../../component":132,"../util":162,"./list":151}],149:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),l=e("../../../lib/dom"),n=(e("../../../lib/event"),e("./util"),e("../../../lib/cookie")),o=e("../../../lib/constants"),a=e("../../../lang/index"),c=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=a.get("Subtitle"),this.Type="cc",this.Tooltip=a.get("CC_Switch_To"),i.call(this,e,t)},bindEvent:function(){this.bindCommonEvent();var r=this;this._player.on(c.Private.CCStateChanged,function(e){var t=e.paramData.value,e=e.paramData.lang,e=("on"==t&&e?r._backCCText=e:"off"==t&&""==r._backCCText&&(r._backCCText=r._previousSelection.text),"Off");"on"==t&&(e=r._backCCText),r._player.trigger(c.Private.SelectorUpdateList,{type:"cc",text:e})})},generateList:function(n){var o=document.querySelector("#"+this.id()+" .selector-list"),e=this._player._ccService.tracks,a=this;s.each(e,function(e,t){var r=l.createEl.call(this,"li",{key:e.value,text:e.text}),i=l.createEl.call(this,"span",{key:e.value,text:e.text});e.text==n&&(l.addClass(r,"current"),a._previousSelection=r),i.innerText=e.text,r.appendChild(i),o.appendChild(r)})},execute:function(e){this._backCCText="",n.set(o.SelectedCC,e,365),this._player._ccService.switch(e)}});t.exports=e},{"../../../lang/index":24,"../../../lib/constants":29,"../../../lib/cookie":30,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/object":43,"../../../player/base/event/eventtype":68,"./selector":153,"./util":155}],150:[function(e,t,r){t.exports={CC:e("./cc"),Speed:e("./speed"),Quality:e("./quality"),Audio:e("./audio")}},{"./audio":147,"./cc":149,"./quality":152,"./speed":154}],151:[function(e,t,r){var o=e("../../component"),n=e("../../../lib/dom"),a=e("../../../lib/ua"),s=e("../../../lib/event"),l=e("../../../player/base/event/eventtype"),i=e("./export"),c=e("./util"),u=e("../../../lang/index"),e=o.extend({init:function(e,t){for(var r in this.isOpened=!1,o.call(this,e,t),this.addClass(t.className||"prism-setting-list"),i){r=new i[r](e,t);e.addChild(r,t)}},createEl:function(){var e=o.prototype.createEl.call(this,"div"),t="<div class='prism-setting-item prism-setting-{type}' type={type}><div class='setting-content'><span class='setting-title'>{value}</span><span class='array'></span><span class='current-setting'></span></div></div>",r=t.replace(/{type}/g,"speed").replace("{value}",u.get("Speed")),i=t.replace(/{type}/g,"cc").replace("{value}",u.get("Subtitle")),n=t.replace(/{type}/g,"audio").replace("{value}",u.get("AudioTrack")),t=t.replace(/{type}/g,"quality").replace("{value}",u.get("Quality"));return e.innerHTML=r+i+n+t,e},bindEvent:function(){function t(){i._player.trigger(l.Private.SettingListHide),i.isOpened=!1}function r(e){e&&e.type&&(document.querySelector("#"+i.id()+" .prism-setting-"+e.type+" .current-setting").innerText=e.text||"")}var i=this,e=(this._player.on(l.Private.SettingListShow,function(e){i.isOpened=!0;e=e.paramData;r(e),n.css(i.el(),"display","block")}),this._player.on(l.Private.UpdateToSettingList,function(e){e=e.paramData;r(e)}),this._player.on(l.Private.SelectorUpdateList,function(e){e=e.paramData;r(e),i._player.trigger(l.Private.SelectorValueChange,e)}),this._player.on(l.Private.SettingListHide,function(){i.isOpened=!1,n.css(i.el(),"display","none")}),s.on(this.el(),"click",function(e){i._player.trigger(l.Private.SettingListHide);var e=e.srcElement||e.target;(e=c.findItemElementForList(e))&&(e=e.getAttribute("type"),i._player.trigger(l.Private.SelectorShow,{type:e}))}),a.IS_MOBILE?"touchleave":"mouseleave");s.on(this.el(),e,function(){t()}),s.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&t()}),s.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&t()}),this._player.on(l.Private.QualityChange,function(e){var t,r,e=e.paramData;e.levelSwitch&&(t=document.querySelector("#"+i.id()+" .prism-setting-quality .current-setting"),r=u.get("Auto"),e=e.desc,-1<t.innerText.indexOf(r))&&(e&&-1<String(e).indexOf("(")?r=r+"-"+e:r+=e?"("+e+")":"",t.innerText=r)})}});t.exports=e},{"../../../lang/index":24,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/ua":49,"../../../player/base/event/eventtype":68,"../../component":132,"./export":150,"./util":155}],152:[function(e,t,r){var i=e("./selector"),s=e("../../../lib/object"),c=(e("../../../lib/util"),e("../../../lib/cookie")),l=e("../../../lib/dom"),u=(e("../../../lib/event"),e("../../../lib/constants")),d=e("../../../lang/index"),o=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){this.Name=d.get("Quality"),this.Type="quality",this.Tooltip=d.get("Quality_Switch_To"),i.call(this,e,t),this._isMasterLevel=!1},showTip:function(e,t){this._player.trigger(o.Private.Info_Show,{text:e,duration:t,align:"lb"})},bindEvent:function(){this.bindCommonEvent();var n=this,e=(this._player.on(o.Private.QualityChange,function(e){var t,r,i=0<n._player._urls.length?n._player._urls:n._player._qualityService.levels;(data=e.paramData).levelSwitch?(t=data.desc||data.bitrate,n._autoSWitchDesc=t,n._updateText(t)):0<n._player._currentPlayIndex&&(n._autoSWitchDesc="",r=i[(t=n._player._currentPlayIndex)-1].desc,i=i[t].desc,n.showTip(r+e.paramData+i,1e3),n._player.trigger(o.Private.SelectorValueChange,{type:n.Type,text:i}))}),document.querySelector("#"+n.id()+" .selector-list"));this._player.on(o.Player.LevelSwitch,function(){l.addClass(e,"disabled")}),this._player.on(o.Player.LevelSwitched,function(){l.removeClass(e,"disabled")})},generateList:function(e){var n,t=this._player._urls,o=this._player._currentPlayIndex,r=this._player._qualityService.levels,a=(0<r.length&&(this._isMasterLevel=!0,this._player._options.isVBR)&&(o=(t=r).length-1),document.querySelector("#"+this.id()+" .selector-list"));0<t.length&&(n=this,s.each(t,function(e,t){var r,i;(e.desc||e.bitrate)&&(r=l.createEl.call(this,"li",{key:e.Url,index:t,text:e.desc||e.bitrate}),i=l.createEl.call(this,"span",{key:e.Url,index:t,text:e.desc||e.bitrate}),t==o&&(l.addClass(r,"current"),n._previousSelection=r),i.innerText=e.desc||e.bitrate,r.appendChild(i),a.appendChild(r))})),this._autoSWitchDesc&&this._updateText(this._autoSWitchDesc)},execute:function(e){if(this._player._switchSourcing=!0,this._isMasterLevel){for(var t,r=this._player._qualityService.levels,i=0;i<r.length;i++)r[i].Url==e&&r[i].desc!=d.get("Auto")&&(t=r[i],this._resetAutoText());this._player._switchLevel?this._player._switchLevel(e,t):(n=this._player.autoplay||"pause"!=this._player._status,this._player._loadByUrlInner(e,this._player.getCurrentTime(),n))}else{for(var n,o=this._player._urls.length,a=this._player._currentPlayIndex,s=-1,i=0;i<o;i++)if(this._player._urls[i].Url==e){s=this._player._currentPlayIndex=i,c.set(u.SelectedStreamLevel,this._player._urls[i].definition,365);break}a!=s&&-1<s&&(a=this._player.getCurrentTime(),n=this._player.autoplay||"pause"!=this._player._status,this._player.autoplay||0!=a||(n=!1),this._player._switchLevel&&!this._player._options.isLive&&this._player._options.isVBR?this._player._switchLevel(e):this._player._loadByUrlInner(e,a,n))}var l=this;setTimeout(function(){l._player._switchSourcing=!1})},_updateText:function(e){var t=document.querySelector("#"+this.id()+" .selector-list .current"),r=document.querySelector("#"+this.id()+" .selector-list .current span"),i=d.get("Auto");r&&r.innerText&&-1<r.innerText.indexOf(i)&&(e&&-1<String(e).indexOf("(")?i=i+"-"+e:i+=e?"("+e+")":"",r.innerText=i,t)&&(t.text=i)},_resetAutoText:function(){for(var e=d.get("Auto"),t=document.querySelectorAll("#"+this.id()+" .selector-list li"),r=0;r<t.length;r++){var i=t[r],n=i.querySelector("span");if(-1<n.innerText.indexOf(e)){n.innerText=e,i.text=e;break}}}});t.exports=e},{"../../../lang/index":24,"../../../lib/constants":29,"../../../lib/cookie":30,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/object":43,"../../../lib/util":51,"../../../player/base/event/eventtype":68,"./selector":153}],153:[function(e,t,r){var i=e("../../component"),n=(e("../../../lib/object"),e("../../../lib/util"),e("../../../lib/ua")),s=(e("../../../lib/cookie"),e("../../../lib/dom")),o=e("../../../lib/event"),l=e("./util"),c=(e("../../../lang/index"),e("../../../player/base/event/eventtype")),e=i.extend({init:function(e,t){this._hasGeneratedList=!1,this._previousSelection=null,this._backupSelector="",i.call(this,e,t),this.className=t.className||"prism-"+this.Type+"-selector prism-setting-selector",this.addClass(this.className)},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="header"><div class="left-array"></div><span>'+this.Name+'</span></div><ul class="selector-list"></ul>',e},bindEvent:function(){this.bindCommonEvent()},bindCommonEvent:function(){var a=this,e=document.querySelector("#"+a.id()+" .selector-list"),t=document.querySelector("#"+a.id()+" .header");function r(){a._hasGeneratedList||(a._clear(),a.generateList(a._backupSelector),a._backupSelector="",a._hasGeneratedList=!0)}this._player.on(c.Private.ChangeURL,function(){a._hasGeneratedList=!1}),o.on(t,"click",function(){a._player.trigger(c.Private.SelectorHide),a._player.trigger(c.Private.SettingListShow,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})}),o.on(e,"click",function(e){var e=e.srcElement||e.target,t=e.key,r=e.text;a._player.traceLog("selector.js","selector::click#"+a.Name+"#"+a.Type+"#"+r+"#"+t),a._player.trigger(c.Player.SettingSelected,{name:a.Name,type:a.Type,text:r,key:t}),void 0!==r&&(a._previousSelection&&s.removeClass(a._previousSelection,"current"),a._previousSelection=l.findliElementForSelector(e),s.addClass(a._previousSelection,"current"),a.execute&&a.execute(t),e=a.Tooltip+"<span>"+r+"</span>",a._player.trigger(c.Private.Info_Show,{text:e,duration:3e3,align:"lb"}))}),a._player.on(c.Private.SelectorHide,function(){i()}),a._player.on(c.Private.SelectorValueChange,function(e){var t=e.paramData;if(t&&t.type==a.Type){var r=document.querySelectorAll("#"+a.id()+" .selector-list li");if(r){for(var i=r.length,n=(0==i&&(a._backupSelector=t.text),-1),o=0;o<i;o++)if(r[o].text==t.text){n=o;break}a._previousSelection&&(s.removeClass(a._previousSelection,"current"),a._previousSelection=null),-1!==n?(s.addClass(r[n],"current"),a._previousSelection=r[n]):a._previousSelection||console.warn("UI Not Sync: No Such Option '"+t.text+"' in '"+t.type+"'")}}}),a._player.on(c.Private.SettingListShow,function(){r()}),a._player.on(c.Private.SelectorGenerateList,function(e){var t=e.paramData&&e.paramData.type,e=e.paramData&&e.paramData.value;t===a.Type&&(a._hasGeneratedList=!1,e&&(a._backupSelector=e),r())}),a._player.on(c.Private.SelectorShow,function(e){(e=e.paramData).type==a.Type&&(e=document.querySelector("#"+a._player.id()+" .prism-"+e.type+"-selector"),a._hasGeneratedList||r(),s.css(e,"display","block"))});var i=function(){s.css(a.el(),"display","none"),a._player.trigger(c.Private.UpdateToSettingList,{type:a.Type,text:a._previousSelection?a._previousSelection.text:""})},t=n.IS_MOBILE?"touchleave":"mouseleave";o.on(this.el(),t,function(){i()}),o.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&i()}),o.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&i()})},setSelected:function(e){},generateList:function(){},_clear:function(){document.querySelector("#"+this.id()+" .selector-list").innerHTML=""}});t.exports=e},{"../../../lang/index":24,"../../../lib/cookie":30,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/object":43,"../../../lib/ua":49,"../../../lib/util":51,"../../../player/base/event/eventtype":68,"../../component":132,"./util":155}],154:[function(e,t,r){var i=e("./selector"),a=e("../../../lib/object"),s=(e("../../../lib/util"),e("../../../lib/cookie"),e("../../../lib/dom")),l=(e("../../../lib/event"),e("./util"),e("../../../lib/constants")),n=e("../../../lang/index"),o=e("../../../player/base/event/eventtype"),e=i.extend({init:function(e,t){var r=this;this.Name=n.get("Speed"),this.Type="speed",this.Tooltip=n.get("Speed_Switch_To"),this.speedPreStore=1,this.listGenerated=!1,i.call(this,e,t),this._player.on(o.Private.PlaybackRateChanged,function(e){r.speedPreStore=e.paramData,r.listGenerated&&r._player.trigger(o.Private.SelectorUpdateList,{type:"speed",text:e.paramData})})},generateList:function(){var n=document.querySelector("#"+this.id()+" .selector-list"),e=this._player._options.speedLevels,e=this.verifySpeedLevels(e)?e:l.SpeedLevels,o=this;a.each(e,function(e,t){var r=s.createEl.call(this,"li",{key:e.key,text:e.text}),i=s.createEl.call(this,"span",{key:e.key,text:e.text});i.innerText=e.text,e.key==o.speedPreStore&&(s.addClass(r,"current"),o._previousSelection=r),r.appendChild(i),n.appendChild(r)}),this.listGenerated=!0},execute:function(e){this._player.setSpeed(e,!1)},verifySpeedLevels:function(e){var t=0;if(e&&e.length)try{e.forEach(function(e){"number"==typeof e.key&&e.key==e.key&&0<=e.key&&t++})}catch(e){return!1}return e&&t===e.length}});t.exports=e},{"../../../lang/index":24,"../../../lib/constants":29,"../../../lib/cookie":30,"../../../lib/dom":33,"../../../lib/event":34,"../../../lib/object":43,"../../../lib/util":51,"../../../player/base/event/eventtype":68,"./selector":153,"./util":155}],155:[function(e,r,t){r.exports.findliElementForSelector=function(e){var t;return e&&"li"!=e.tagName.toLowerCase()?(t=e.parentElement)&&"li"==t.tagName.toLowerCase()?t:null:e},r.exports.findliElementByKey=function(e,t){document.querySelectors(e);return null},r.exports.findItemElementForList=function(e){var t;return!e||-1<e.className.indexOf("prism-setting-item")||(t=e.parentElement)&&(e=r.exports.findItemElementForList(t)),e}},{}],156:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lang/index"),a=e("../../player/base/event/eventtype"),s=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-snapshot-btn")},createEl:function(){return i.prototype.createEl.call(this,"div")},bindEvent:function(){var e=this,t=this._player;t.on(a.Private.Snapshot_Hide,function(){n.css(e._el,"display","none")}),s.registerTooltipEvent.call(this,this.el(),o.get("Snapshot")),this.on("click",function(){e.trigger(a.Player.Snapshoting),e.trigger(a.Player.Snapshoted,t.takeSnapshot())})}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],157:[function(e,t,r){var i=e("../component"),e=(e("../../lib/dom"),e("../../player/base/event/eventtype"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-text-overlay")},createEl:function(){return i.prototype.createEl.call(this,"div")},_hide:function(e){},_show:function(e){},bindEvent:function(){}}));t.exports=e},{"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132}],158:[function(e,t,r){var i=e("../component"),a=(e("../../lib/util"),e("../../lib/dom")),n=e("../../lib/event"),s=(e("../../lib/ua"),e("../../lang/index"),e("../../player/base/event/eventtype")),l=e("./util"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-thumbnail")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML="<img></img><span></span>",e},bindEvent:function(){var o=this,e=(n.on(this._el,"mousemove",function(e){e.preventDefault()}),n.on(this._el,"touchmove",function(e){e.preventDefault()}),o._player.on(s.Private.ThumbnailLoaded,function(e){var t,r,i,e=e.paramData;e&&0<e.length&&(t=o._player._thumbnailService.makeUrl(e[0].text),o._player.log("THUMBNAILSTART",{tu:encodeURIComponent(t)}),r=(new Date).getTime(),e[0].isBig?(a.css(o.el(),"background","url("+t+")"),a.css(o.el(),"width",e[0].w+"px"),a.css(o.el(),"height",e[0].h+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-r})):((i=document.querySelector("#"+o.id()+" img")).onload=function(){var e=i.width,t=i.height;a.css(o.el(),"width",e+"px"),a.css(o.el(),"height",t+"px"),o._player.log("THUMBNAILCOMPLETE",{ftt:(new Date).getTime()-r})},i.src=t))}),l.throttle(function(e){var t,r,i,e=e[0],n=document.querySelector("#"+o.id()+" span"),e=e.paramData;n.innerText=e.formatTime,e&&((t=o._player._thumbnailService.findAvailableCue(e.time))?t.isBig?(r=o._player._thumbnailService.makeUrl(t.text),a.css(o.el(),"background","url("+r+")"),t.w,t.h,i=-1*t.x+"px "+-1*t.y+"px",a.css(o.el(),"background-position",i)):(i=document.querySelector("#"+o.id()+" img"),r=o._player._thumbnailService.makeUrl(t.text),i.src!=r&&(i.src=r)):(a.css(o.el(),"border","none"),a.css(n,"left","0px")),a.css(o.el(),"display","block"),i=0,r=(t?o.el():n).offsetWidth,i=e.left+r>e.progressWidth?e.left-r:(i=e.left-r/2)<0?0:i,a.css(o.el(),"left",i+"px"))},30));o._player.on(s.Private.ThumbnailShow,e),o._player.on(s.Private.ThumbnailHide,function(e){a.css(o.el(),"display","none")})},_createSamllThumbnail:function(){},disposeUI:function(){}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../lib/ua":49,"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],159:[function(e,t,r){var i=e("../component"),n=e("../../lib/util"),o=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-time-display")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<span class="current-time">00:00</span> <span class="time-bound">/</span> <span class="duration">00:00</span>',e},bindEvent:function(){var t=this;this._player.on(o.Video.DurationChange,function(){var e=n.formatTime(t._player.getDisplayDuration());e?(document.querySelector("#"+t.id()+" .time-bound").style.display="inline",document.querySelector("#"+t.id()+" .duration").style.display="inline",document.querySelector("#"+t.id()+" .duration").innerText=e):(document.querySelector("#"+t.id()+" .duration").style.display="none",document.querySelector("#"+t.id()+" .time-bound").style.display="none")}),this._player.on(o.Video.TimeUpdate,function(){var e=t._player.getCurrentTime(),e=n.formatTime(e);document.querySelector("#"+t.id()+" .current-time")&&(e?(document.querySelector("#"+t.id()+" .current-time").style.display="inline",document.querySelector("#"+t.id()+" .current-time").innerText=e):document.querySelector("#"+t.id()+" .current-time").style.display="none")})}});t.exports=e},{"../../lib/util":51,"../../player/base/event/eventtype":68,"../component":132}],160:[function(e,t,r){var i=e("../component"),o=e("../../lib/dom"),a=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-tooltip")},createEl:function(){var e=i.prototype.createEl.call(this,"p");return e.innerText="\u63d0\u793a\u4fe1\u606f",e},bindEvent:function(){var n=this;n._player.on(a.Private.TooltipShow,function(e){var t=document.querySelector("#"+n.id()),e=e.paramData,r=(t.innerText=e.text,o.css(t,"display","block"),t.offsetWidth),i=document.querySelector("#"+n._player.id()+" .prism-controlbar");i&&(i=i.offsetWidth,e.left+r>i?o.css(t,"left",i-r+"px"):o.css(t,"left",e.left-(r-e.width)/2+"px"))}),n._player.on(a.Private.TooltipHide,function(e){var t=document.querySelector("#"+n.id());o.css(t,"display","none")})}});t.exports=e},{"../../lib/dom":33,"../../player/base/event/eventtype":68,"../component":132}],161:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../lang/index"),s=e("../../player/base/event/eventtype"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-unmute-btn")},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerText=a.get("Click_To_Unmute"),e},bindEvent:function(){var t=this;this._player.on(s.Private.MutedAutoplay,function(){var e;null!=(e=t._player.getOptions().autoplayPolicy)&&e.showUnmuteBtn&&t._show()}),this._player.on(s.Private.HideUnmuteButton,function(){t._hide()}),o.on(this.el(),"click",function(){t._player.unMute(!0),t._hide()})},_show:function(){n.css(this.el(),"display","block")},_hide:function(){n.css(this.el(),"display","none")}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../player/base/event/eventtype":68,"../component":132}],162:[function(e,t,r){var i=e("../../lib/event"),s=e("../../player/base/event/eventtype");t.exports.registerTooltipEvent=function(e,n){function o(){a._controlbarTooltipHandler&&(clearTimeout(a._controlbarTooltipHandler),a._controlbarTooltipHandler=null)}var a=this;i.on(this.el(),"mouseover",function(e){o(),a._controlbarTooltipHandler=setTimeout(function(){a._player.trigger(s.Private.TooltipHide)},4e3);var t=a.el().offsetLeft,r=a.el().offsetWidth,i=n;"function"==typeof n&&(i=n.call(this)),a._player.trigger(s.Private.TooltipShow,{left:t,width:r,text:i})}),i.on(this.el(),"mouseout",function(){o(),a._player.trigger(s.Private.TooltipHide)})},t.exports.throttle=function(r,i){var n=Date.now();return function(){var e=arguments,t=Date.now();i<=t-n&&(r(e),n=t)}},t.exports.debounce=function(r,i){var n;return function(){var e=this,t=arguments;clearTimeout(n),n=setTimeout(function(){r.apply(e,t)},i)}}},{"../../lib/event":34,"../../player/base/event/eventtype":68}],163:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),s=e("./util"),l=e("../../lang/index"),c=e("./volumecontrol"),e=i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume");var r=new c(e,t);e.addChild(r,t),this.volumeControl=r},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-icon"><div class="short-horizontal"></div><div class="long-horizontal"></div></div>',e},bindEvent:function(){var r=this,i=r._player,e=(this.icon=document.querySelector("#"+r.id()+"  .volume-icon"),s.registerTooltipEvent.call(this,this.el(),function(){return r._player.muted()||0==r._player.getVolume()?l.get("Muted"):l.get("Volume")}),o.on(this.icon,"click",function(e){var t;r.volumeControl._shown?i.muted()?i.unMute():i.mute():(t=r.el().offsetLeft,r._player.trigger(a.Private.SettingListHide),r._player.trigger(a.Private.SelectorHide),r._player.trigger(a.Private.VolumeVisibilityChange,t),r._player.trigger(a.Private.MarkerTextHide))}),document.querySelector("#"+r.id()+"  .long-horizontal")),t=document.querySelector("#"+r.id()+"  .short-horizontal");o.on(this.el(),"mouseover",function(){n.removeClass(e,"volume-hover-animation"),setTimeout(function(){n.addClass(e,"volume-hover-animation")}),setTimeout(function(){n.removeClass(e,"volume-hover-animation"),n.addClass(t,"volume-hover-animation"),setTimeout(function(){n.removeClass(t,"volume-hover-animation"),n.addClass(e,"volume-hover-animation")},300)},300)}),o.on(window,"resize",function(){var e;r.volumeControl._shown&&(e=r.el().offsetLeft,r._player.trigger(a.Private.VolumeUpdatePosition,e))})}});t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../player/base/event/eventtype":68,"../component":132,"./util":162,"./volumecontrol":164}],164:[function(e,t,r){var i=e("../component"),n=e("../../lib/dom"),o=e("../../lib/event"),a=e("../../player/base/event/eventtype"),e=(e("./util"),e("../../lang/index"),i.extend({init:function(e,t){i.call(this,e,t),this.addClass("prism-volume-control"),this._shown=!1},createEl:function(){var e=i.prototype.createEl.call(this,"div");return e.innerHTML='<div class="volume-range"><div class="volume-value"></div><div class="volume-cursor"></div></div>',e},bindEvent:function(){var r=this;this.icon=document.querySelector("#"+r._player.id()+"  .volume-icon"),this.control=document.querySelector("#"+r.id()),this.volumnValue=document.querySelector("#"+r.id()+"  .volume-value"),this.volumnRange=document.querySelector("#"+r.id()+"  .volume-range"),this.volumnCursor=document.querySelector("#"+r.id()+"  .volume-cursor"),this._player.on(a.Private.VolumeVisibilityChange,function(e){var t,e=e.paramData;!r._shown&&e?(t=r._player.getVolume(),r._setVolumnUI(t),n.css(r.control,"display","block"),e&&r._updatePosition(e),r._shown=!0):r._hide()}),this._player.on(a.Private.VolumeUpdatePosition,function(e){e=e.paramData;r._shown&&r._updatePosition(e)}),this._player.on(a.Private.ControlBarClick,function(e){n.hasClass(e.paramData.target,"prism-controlbar-bg")&&r._hide()}),o.on(this.volumnRange,"click",function(e){e=n.getPointerPosition(r.volumnRange,e).y;e<0||1<e||(r._setVolumnUI(e=1<(e=e<0?0:e)?1:e),r._setMuteUI(e),r._player.setVolume(e))}),o.on(this._player.tag,"click",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this._player.tag,"touchstart",function(e){e&&e.target==e.currentTarget&&r._hide()}),o.on(this.volumnCursor,"mousedown",function(e){r._onMouseDown(e)}),o.on(this.volumnCursor,"touchstart",function(e){r._onMouseDown(e)}),this._player.on(a.Private.VolumnChanged,function(e){e=e.paramData;-1<e&&r._setVolumnUI(e),r._setMuteUI(e)}),o.on(this.control,"mouseleave",function(){r._offEvent(),r._hide()}),o.on(this.control,"mouseover",function(){n.addClass(r.control,"hover")}),r._rangeBottom=r._getBottom()},_getBottom:function(){var e;return window.getComputedStyle?(e=window.getComputedStyle(this.volumnRange,null).getPropertyValue("bottom"),parseFloat(e)):26},_onMouseDown:function(e){var t=this;e.preventDefault(),o.on(this.control,"mousemove",function(e){t._onMouseMove(e)}),o.on(this.control,"touchmove",function(e){t._onMouseMove(e)}),o.on(this._player.tag,"mouseup",function(e){t._onMouseUp(e)}),o.on(this._player.tag,"touchend",function(e){t._onMouseUp(e)}),o.on(this.control,"mouseup",function(e){t._onMouseUp(e)}),o.on(this.control,"touchend",function(e){t._onMouseUp(e)})},_onMouseUp:function(e){e.preventDefault(),this._offEvent(),this.volumnRange.offsetHeight&&(e=(this.volumnValue.offsetHeight/this.volumnRange.offsetHeight).toFixed(2),this._player.setVolume(e),this._setMuteUI(e))},_onMouseMove:function(e){e.preventDefault();e=n.getPointerPosition(this.volumnRange,e).y;e<0||1<e||this._setVolumnUI(e=1<(e=e<0?0:e)?1:e)},_getPosition:function(e){for(var t=this.volumnRange,r=0;t=t.offsetParent;)r+=t.offsetTop;var i=this.volumnRange.offsetHeight,n=this.volumnCursor.offsetHeight,o=(e.touches?e.touches[0]:e).pageY;return(i-((o=i<o-r?e.clientY:o)-r)+n)/this.volumnRange.offsetHeight},_offEvent:function(){o.off(this._player.tag,"mouseup"),o.off(this._player.tag,"touchend"),o.off(this.control,"mousemove"),o.off(this.control,"touchmove"),o.off(this.control,"mouseup"),o.off(this.control,"touchend")},_setMuteUI:function(e){isNaN(e)||(0==e||-1==e?n.addClass(this.icon,"mute"):n.removeClass(this.icon,"mute"))},_setVolumnUI:function(e){isNaN(e)||(n.css(this.volumnValue,"height",100*e+"%"),n.css(this.volumnCursor,"bottom",100*(e=1==e?.99:e)+"%"))},_hide:function(){n.css(this.control,"display","none"),this._shown=!1},_updatePosition:function(e){n.css(this.control,"left",e-5+"px")}}));t.exports=e},{"../../lang/index":24,"../../lib/dom":33,"../../lib/event":34,"../../player/base/event/eventtype":68,"../component":132,"./util":162}],165:[function(e,t,r){t.exports={H5Loading:e("./component/h5-loading"),bigPlayButton:e("./component/big-play-button"),unmuteButton:e("./component/unmute-button"),controlBar:e("./component/controlbar"),progress:e("./component/progress"),playButton:e("./component/play-button"),liveDisplay:e("./component/live-display"),timeDisplay:e("./component/time-display"),fullScreenButton:e("./component/fullscreen-button"),volume:e("./component/volume"),snapshot:e("./component/snapshot"),errorDisplay:e("./component/error-display"),infoDisplay:e("./component/info-display"),liveShiftProgress:e("../commonui/liveshiftprogress"),liveShiftTimeDisplay:e("../commonui/livetimedisplay"),setting:e("./component/setting/button"),subtitle:e("./component/cc-button"),thumbnail:e("./component/thumbnail"),tooltip:e("./component/tooltip")}},{"../commonui/liveshiftprogress":13,"../commonui/livetimedisplay":14,"./component/big-play-button":133,"./component/cc-button":134,"./component/controlbar":135,"./component/error-display":138,"./component/fullscreen-button":139,"./component/h5-loading":140,"./component/info-display":141,"./component/live-display":142,"./component/play-button":143,"./component/progress":145,"./component/setting/button":148,"./component/snapshot":156,"./component/thumbnail":158,"./component/time-display":159,"./component/tooltip":160,"./component/unmute-button":161,"./component/volume":163}]},{},[16])(16)});